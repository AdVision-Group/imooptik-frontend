(this.webpackJsonpimooptik=this.webpackJsonpimooptik||[]).push([[20],{52:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a={address:"",admin:0,premises:0,boughtProducts:{},city:"",country:"",date:"",email:"",finishedRegistration:!1,lenses:{cylinder:[0,0,0,0],cylinderAxes:[0,0,0,0],diopters:[0,0,0,0],distance:[0,0,0,0],addition:[0,0,0,0],basis:[0,0,0,0],prism:[0,0,0,0]},name:"",orders:[],phone:"",psc:"",tempUser:!1,totalSpent:0,watchList:[],fName:"",lName:"",password:"",confirmPassword:""}},62:function(e,t,n){"use strict";n.r(t),n.d(t,"UserContext",(function(){return O}));var a=n(1),s=n(9),r=n.n(s),i=n(12),o=n(31),c=n(19),u=n(10),l=n(0),d=n(2),p=n(17),m=n(16),f=function(e){var t=new Headers;t.append("auth-token",e);var n={method:"GET",headers:t,redirect:"follow"};return fetch("".concat("http://195.110.58.166:8080","/api/admin/users"),n)},h=function(e,t){var n=new Headers;n.append("auth-token",e),n.append("Content-Type","application/json");var a={method:"GET",headers:n,redirect:"follow"};return fetch("".concat("http://195.110.58.166:8080","/api/admin/users/").concat(t),a)},b=function(e,t){var n=t._id,a=t.address,s=t.admin,r=t.city,i=t.country,o=t.email,c=t.lenses,u=c.cylinder,l=c.cylinderAxes,d=c.diopters,p=c.distance,m=c.addition,f=c.basis,h=c.prism,b=t.name,g=t.phone,v=t.psc,j=t.premises,O=new Headers;O.append("auth-token",e),O.append("Content-Type","application/json");var x={method:"PATCH",headers:O,body:JSON.stringify({address:a||void 0,admin:s,premises:0===Number(j)?void 0:j,city:r||void 0,country:i||void 0,email:o||void 0,lenses:{cylinder:u,cylinderAxes:l,diopters:d,distance:p,addition:m,basis:f,prism:h},name:b,phone:g||void 0,psc:v||void 0}),redirect:"follow"};return fetch("".concat("http://195.110.58.166:8080","/api/admin/users/").concat(n),x)},g=function(e,t){var n=t.name,a=t.email,s=new Headers;s.append("auth-token",e),s.append("Content-Type","application/json");var r={method:"POST",headers:s,body:JSON.stringify({email:a,name:n}),redirect:"follow"};return fetch("".concat("http://195.110.58.166:8080","/api/auth/register"),r)},v=function(e,t){console.log(t);var n=t.name,a=t.email,s=t.password,r=t.premises,i=t.admin,o=new Headers;o.append("auth-token",e),o.append("Content-Type","application/json");var c={method:"POST",headers:o,body:JSON.stringify({admin:Number(i),email:a,name:n,premises:Number(r),password:s}),redirect:"follow"};return fetch("".concat("http://195.110.58.166:8080","/api/auth/register"),c)},j=n(52),O=Object(l.createContext)({isUpdating:!1,activeIndex:0,handleChangeFilterItem:function(){},filterItems:[],totalCount:0,users:null,user:null,getUsers:function(){},getUser:function(){},handleChange:function(){},updateUser:function(){},resetUser:function(){},formToShow:0,switchFormButtons:[],toggleUserForm:function(){},createUser:function(){}});t.default=function(e){var t=e.children,n=Object(d.g)().push,s=Object(l.useContext)(p.a).token,x=Object(l.useContext)(m.a),k=x.closeModal,y=x.getMessage,w=x.setIsLoading,N=x.setShowModal,C=Object(l.useState)(j.a),U=Object(u.a)(C,2),S=U[0],z=U[1],T=Object(l.useState)(null),A=Object(u.a)(T,2),I=A[0],P=A[1],F=Object(l.useState)(0),H=Object(u.a)(F,2),J=H[0],E=H[1],M=Object(l.useState)(!1),Z=Object(u.a)(M,2),B=Z[0],G=Z[1],L=Object(l.useState)(0),D=Object(u.a)(L,2),R=D[0],V=D[1],_=Object(l.useState)(0),q=Object(u.a)(_,2),K=q[0],Q=q[1];Object(l.useEffect)((function(){z(Object(c.a)(Object(c.a)({},S),{},{name:S.fName+" "+S.lName}))}),[S.fName,S.lName]);var W=function(){var e=Object(i.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),N(!0),e.prev=2,e.next=5,f(s);case 5:return t=e.sent,e.next=8,t.json();case 8:n=e.sent,console.log(n),n.users?(P(n.users),E(n.count),w(!1),k()):(y(n.message),w(!1)),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(2),console.log(e.t0),y("Nieco sa pokazilo"),w(!1);case 18:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Object(i.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),N(!0),G(!0),e.prev=3,e.next=6,h(s,t);case 6:return n=e.sent,e.next=9,n.json();case 9:(a=e.sent).user?(z(Object(c.a)(Object(c.a)(Object(c.a)({},S),a.user),{},{lenses:{cylinder:a.user.lenses.cylinder.length?a.user.lenses.cylinder:[0,0,0,0],cylinderAxes:a.user.lenses.cylinderAxes.length?a.user.lenses.cylinderAxes:[0,0,0,0],diopters:a.user.lenses.diopters.length?a.user.lenses.diopters:[0,0,0,0],distance:a.user.lenses.distance.length?a.user.lenses.distance:[0,0,0,0],addition:a.user.lenses.addition.length?a.user.lenses.addition:[0,0,0,0],basis:a.user.lenses.basis.length?a.user.lenses.basis:[0,0,0,0],prism:a.user.lenses.prism.length?a.user.lenses.prism:[0,0,0,0]},fName:a.user.name?a.user.name.split(" ")[0]:"",lName:a.user.name?a.user.name.split(" ")[1]:""})),w(!1),k()):(y(a.message),w(!1)),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(3),console.log(e.t0),y("Nieco sa pokazilo"),w(!1);case 18:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(i.a)(r.a.mark((function e(t){var a,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),N(!0),console.log(t),e.prev=3,e.next=6,b(s,t);case 6:return a=e.sent,e.next=9,a.json();case 9:if(i=e.sent,console.log(i),!i.error){e.next=15;break}return w(!1),y(i.message),e.abrupt("return");case 15:w(!1),k(),n("/dashboard/zakaznici"),W(),e.next=26;break;case 21:e.prev=21,e.t0=e.catch(3),console.log(e.t0),y("Nieco sa pokazilo"),w(!1);case 26:case"end":return e.stop()}}),e,null,[[3,21]])})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(i.a)(r.a.mark((function e(t){var a,i,o,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w(!0),N(!0),e.prev=2,0!==K){e.next=21;break}return e.next=6,g(s,t);case 6:return a=e.sent,e.next=9,a.json();case 9:if(i=e.sent,console.log(i),!i.error){e.next=15;break}return y(i.message),w(!1),e.abrupt("return");case 15:w(!1),W(),n("/dashboard/zakaznici"),k(),e.next=36;break;case 21:return e.next=23,v(s,t);case 23:return o=e.sent,e.next=26,o.json();case 26:if(c=e.sent,console.log(c),!c.error){e.next=32;break}return y(c.message),w(!1),e.abrupt("return");case 32:w(!1),W(),n("/dashboard/zakaznici"),k();case 36:e.next=43;break;case 38:e.prev=38,e.t0=e.catch(2),console.log(e.t0),y("Nieco sa pokazilo"),w(!1);case 43:case"end":return e.stop()}}),e,null,[[2,38]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)(O.Provider,{value:{isUpdating:B,activeIndex:R,handleChangeFilterItem:function(e){V(e)},filterItems:[{id:0,name:"Z\xe1kaznici",filter:0},{id:1,name:"Zamestnanci",filter:1},{id:2,name:"Ved\xfaci",filter:2}],users:I,user:S,totalCount:J,getUsers:W,getUser:X,handleChange:function(e){var t=e.target,n=t.name,a=t.value;z(Object(c.a)(Object(c.a)({},S),{},Object(o.a)({},n,a)))},handleParameterChange:function(e,t){var n=e.target,a=n.name,s=n.value,r=S.lenses[a];r[t]=Number(s),z(Object(c.a)(Object(c.a)({},S),{},{lenses:Object(c.a)(Object(c.a)({},S.lenses),{},Object(o.a)({},a,r))}))},updateUser:Y,resetUser:function(){z(Object(c.a)({},j.a)),G(!1),Q(0)},formToShow:K,switchFormButtons:[{name:"Z\xe1kazn\xedk"},{name:"Admin"}],toggleUserForm:function(e,t){e.preventDefault(),Q(t)},createUser:$},children:t})}}}]);
//# sourceMappingURL=20.261c4f88.chunk.js.map