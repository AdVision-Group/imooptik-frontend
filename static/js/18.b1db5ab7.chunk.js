(this.webpackJsonpimooptik=this.webpackJsonpimooptik||[]).push([[18,29],{252:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n(5),s=n(1),r=n(90),o=n(89),i=n(19),l=n(3),u=n(92),j=n(56),b=n(53),d=n(61),p=n(59),m=n(32),f=n(104),h=n(108),O=n.n(h),g=n(15),x=n(6),v=n(7),k=n(28);function q(){var e=Object(x.a)(["\n    height: 50rem;\n    background-color: var(--input-background-color);\n    color: var(--input-color);\n    \n    .ql-container, .ql-toolbar {\n        border: none;\n    }\n"]);return q=function(){return e},e}function N(){var e=Object(x.a)(["\n    margin-bottom: 2rem;\n"]);return N=function(){return e},e}function w(){var e=Object(x.a)(["\n    font-size: 1.4rem;\n"]);return w=function(){return e},e}function y(){var e=Object(x.a)(["\n    font-size: 1.4rem;\n    margin: 0 2rem;\n    background-color: var(--color-red);\n\n    @media all and (max-width: 500px) {\n        margin: 0 .8rem;\n    }\n"]);return y=function(){return e},e}function S(){var e=Object(x.a)(["\n    cursor: pointer;\n    display:flex;\n    align-items: center;\n    justify-content:center;\n    width: 100%;\n    background-color: ",";\n    margin-top: 3rem;\n    padding: 6rem;\n\n    position: relative;\n\n    img {\n        position: absolute;\n        width: 100%;\n        /* height: 100%; */\n        max-height: 40rem;\n        left: 0;\n        top: 0;\n        object-fit: cover;\n        object-position: center;\n\n    }\n"]);return S=function(){return e},e}function P(){var e=Object(x.a)(["\n    padding: 2rem;\n    background-color: var(--container-background-color);\n    box-shadow: var(--container-shadow);\n"]);return P=function(){return e},e}function C(){var e=Object(x.a)(["\n    display: grid;\n    align-items: start;\n    grid-template-columns: 1fr 1fr;\n    grid-gap: 2rem;\n    height: inherit;\n    height: 100%;\n\n        @media all and (max-width: 800px) {\n            grid-template-columns: 1fr ;\n        }\n\n"]);return C=function(){return e},e}function z(){var e=Object(x.a)(["\n    ","\n    padding-top: 3rem;\n    padding-bottom: 3rem;\n    color: var(--primary-text-color);\n"]);return z=function(){return e},e}var E=v.c.div(z(),g.g),T=v.c.div(C()),B=v.c.div(P()),I=v.c.div(S(),(function(e){return e.hasImage?"transparent":"var(--input-background-color)"})),D=Object(v.c)(k.a)(y()),L=Object(v.c)(k.a)(w()),A=v.c.h2(N()),M=Object(v.c)(O.a)(q()),H=function(){return Object(a.jsxs)("svg",{viewBox:"0 0 18 18",children:[Object(a.jsx)("polygon",{className:"ql-fill ql-stroke",points:"6 10 4 12 2 10 6 10"}),Object(a.jsx)("path",{className:"ql-stroke",d:"M8.09,13.91A4.6,4.6,0,0,0,9,14,5,5,0,1,0,4,9"})]})},J=function(){return Object(a.jsxs)("svg",{viewBox:"0 0 18 18",children:[Object(a.jsx)("polygon",{className:"ql-fill ql-stroke",points:"12 10 14 12 16 10 12 10"}),Object(a.jsx)("path",{className:"ql-stroke",d:"M9.91,13.91A4.6,4.6,0,0,1,9,14a5,5,0,1,1,5-5"})]})};var Q=h.Quill.import("formats/size");Q.whitelist=["extra-small","small","medium","large"],h.Quill.register(Q,!0);var V=h.Quill.import("formats/font");V.whitelist=["arial","comic-sans","courier-new","georgia","helvetica","lucida"],h.Quill.register(V,!0);var G={toolbar:{container:"#toolbar",handlers:{undo:function(){this.quill.history.undo()},redo:function(){this.quill.history.redo()}}},history:{delay:500,maxStack:100,userOnly:!0}},K=["header","font","size","bold","italic","underline","align","strike","script","blockquote","background","list","bullet","indent","link","image","color","code-block"],R=function(){return Object(a.jsxs)("div",{id:"toolbar",className:"toolbar",children:[Object(a.jsxs)("span",{className:"ql-formats",children:[Object(a.jsxs)("select",{className:"ql-size",defaultValue:"medium",children:[Object(a.jsx)("option",{value:"extra-small",children:"Size 1"}),Object(a.jsx)("option",{value:"small",children:"Size 2"}),Object(a.jsx)("option",{value:"medium",children:"Size 3"}),Object(a.jsx)("option",{value:"large",children:"Size 4"})]}),Object(a.jsxs)("select",{className:"ql-header",defaultValue:"3",children:[Object(a.jsx)("option",{value:"1",children:"Heading"}),Object(a.jsx)("option",{value:"2",children:"Subheading"}),Object(a.jsx)("option",{value:"3",children:"Normal"})]})]}),Object(a.jsxs)("span",{className:"ql-formats",children:[Object(a.jsx)("button",{className:"ql-bold"}),Object(a.jsx)("button",{className:"ql-italic"}),Object(a.jsx)("button",{className:"ql-underline"}),Object(a.jsx)("button",{className:"ql-strike"})]}),Object(a.jsxs)("span",{className:"ql-formats",children:[Object(a.jsx)("button",{className:"ql-list",value:"ordered"}),Object(a.jsx)("button",{className:"ql-list",value:"bullet"}),Object(a.jsx)("button",{className:"ql-indent",value:"-1"}),Object(a.jsx)("button",{className:"ql-indent",value:"+1"})]}),Object(a.jsxs)("span",{className:"ql-formats",children:[Object(a.jsx)("button",{className:"ql-script",value:"super"}),Object(a.jsx)("button",{className:"ql-script",value:"sub"}),Object(a.jsx)("button",{className:"ql-blockquote"}),Object(a.jsx)("button",{className:"ql-direction"})]}),Object(a.jsxs)("span",{className:"ql-formats",children:[Object(a.jsx)("select",{className:"ql-align"}),Object(a.jsx)("select",{className:"ql-color"}),Object(a.jsx)("select",{className:"ql-background"})]}),Object(a.jsxs)("span",{className:"ql-formats",children:[Object(a.jsx)("button",{className:"ql-link"}),Object(a.jsx)("button",{className:"ql-image"}),Object(a.jsx)("button",{className:"ql-video"})]}),Object(a.jsxs)("span",{className:"ql-formats",children:[Object(a.jsx)("button",{className:"ql-formula"}),Object(a.jsx)("button",{className:"ql-code-block"}),Object(a.jsx)("button",{className:"ql-clean"})]}),Object(a.jsxs)("span",{className:"ql-formats",children:[Object(a.jsx)("button",{className:"ql-undo",children:Object(a.jsx)(H,{})}),Object(a.jsx)("button",{className:"ql-redo",children:Object(a.jsx)(J,{})})]})]})};t.default=function(){var e=Object(u.a)().getSlug,t=Object(l.i)().id,n=Object(l.h)().push,h=Object(s.useContext)(r.BlogContext),O=h.createPost,x=h.isLoading,v=h.message,k=h.showLoading,q=h.setIsLoading,N=h.getPost,w=h.post,y=h.resetBlog,S=h.updatePost,P=Object(s.useContext)(i.a).closeModal,C=Object(s.useContext)(o.ImageContext),z=C.selectedImage,H=C.setSelectedImage,J=Object(s.useState)(""),Q=Object(c.a)(J,2),V=Q[0],U=Q[1],_=Object(s.useState)(""),W=Object(c.a)(_,2),$=W[0],F=W[1],X=Object(s.useState)(""),Y=Object(c.a)(X,2),Z=Y[0],ee=Y[1],te=Object(s.useState)(""),ne=Object(c.a)(te,2),ae=ne[0],ce=ne[1],se=Object(s.useState)(!1),re=Object(c.a)(se,2),oe=re[0],ie=re[1],le=Object(s.useState)(!1),ue=Object(c.a)(le,2),je=ue[0],be=ue[1],de=Object(s.useState)(!1),pe=Object(c.a)(de,2),me=pe[0],fe=pe[1];return Object(s.useEffect)((function(){H(null),"novy-prispevok"!==t&&(N(t),fe(!0))}),[t]),Object(s.useEffect)((function(){"novy-prispevok"!==t&&w&&(U(w.name),F(w.description),ee(w.html),ie(w.draft),w.image&&(ce(w.image._id),H(w.image)))}),[w]),Object(s.useEffect)((function(){return function(){P(),y(),U(""),F(""),ee(""),ce(""),ie(!1),be(!1),fe(!1)}}),[]),Object(a.jsxs)("form",{onSubmit:function(a){if(a.preventDefault(),!(ae.length<=0)&&!(Z.length<=0)){var c={name:V,description:$,draft:oe,html:Z,image:ae,link:e(V)};"novy-prispevok"===t?O(c,(function(e){console.log("CREATED NEW BLOG POST"),console.log(e)})):S(c,t,(function(e){console.log("UPDATED BLOG POST"),console.log(e)})),n("/dashboard/blog")}},children:[x&&Object(a.jsx)(m.a,{loading:k,title:v,close:function(){return q(!1)}}),je&&Object(a.jsx)(f.a,{close:function(){return be(!1)},setImage:ce}),Object(a.jsx)(E,{children:Object(a.jsxs)(g.c,{children:[Object(a.jsx)("div",{children:Object(a.jsx)("h1",{children:"Post"})}),Object(a.jsxs)("div",{children:[Object(a.jsx)(p.a,{label:"Draft",isActive:oe,handleClick:function(){return ie((function(e){return!e}))}}),Object(a.jsx)(D,{children:"Vymaza\u0165"}),Object(a.jsx)(L,{type:"submit",children:me?"Upravi\u0165 pr\xedspevok":"Prida\u0165 pr\xedspevok"})]})]})}),Object(a.jsx)(j.a,{children:Object(a.jsxs)(T,{children:[Object(a.jsxs)(B,{children:[Object(a.jsx)("h2",{children:"Inform\xe1cia"}),Object(a.jsx)(b.a,{label:"Nadpis",type:"text",name:"title",value:V,handleChange:function(e){return U(e.target.value)},required:!0}),Object(a.jsx)(d.a,{label:"Popis",name:"description",rows:"5",value:$,handleChange:function(e){return F(e.target.value)},required:!0}),Object(a.jsx)("h2",{children:"Tituln\xe1 fotka"}),Object(a.jsxs)(I,{onClick:function(){return be(!0)},hasImage:z,children:[!z&&"Vybra\u0165 obr\xe1zok",z&&Object(a.jsx)("img",{src:"".concat("https://imooptik-backend-jbuievsjdq-ew.a.run.app","/uploads/").concat(z.imagePath),alt:z.alt})]})]}),Object(a.jsxs)(B,{children:[Object(a.jsx)(A,{children:"Obsah"}),Object(a.jsx)(R,{}),Object(a.jsx)(M,{value:Z,onChange:ee,modules:G,formats:K})]})]})})]})}},90:function(e,t,n){"use strict";n.r(t),n.d(t,"BlogContext",(function(){return d}));var a=n(2),c=n(8),s=n.n(c),r=n(12),o=n(5),i=n(1),l=n(20),u=n(19),j=function(e){return fetch("".concat("https://imooptik-backend-jbuievsjdq-ew.a.run.app","/api/blogs/").concat(e))},b=function(e,t){var n=new Headers;n.append("auth-token",e),n.append("Content-Type","application/json");var a={method:"DELETE",headers:n,redirect:"follow"};return fetch("".concat("https://imooptik-backend-jbuievsjdq-ew.a.run.app","/api/admin/blogs/").concat(t),a)},d=Object(i.createContext)({posts:null,post:null,postsCount:0,getPosts:function(){},createPost:function(){},getPost:function(){},updatePost:function(){},handlePostDelete:function(){},resetBlog:function(){}});t.default=function(e){var t=e.children,n=Object(i.useContext)(l.a).token,c=Object(i.useContext)(u.a),p=c.getMessage,m=c.setIsLoading,f=c.setShowModal,h=Object(i.useState)(null),O=Object(o.a)(h,2),g=O[0],x=O[1],v=Object(i.useState)(null),k=Object(o.a)(v,2),q=k[0],N=k[1],w=Object(i.useState)(0),y=Object(o.a)(w,2),S=y[0],P=y[1],C=new Headers;C.append("auth-token",n),C.append("Content-Type","application/json");var z=function(){var e=Object(r.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),m(!0),e.next=4,fetch("".concat("https://imooptik-backend-jbuievsjdq-ew.a.run.app","/api/blogs"));case 4:return t=e.sent,e.next=7,t.json();case 7:n=e.sent,x(n.blogs),P(n.count),f(!1),m(!1);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(r.a)(s.a.mark((function e(t){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),m(!0),e.prev=2,e.next=5,j(t);case 5:return n=e.sent,e.next=8,n.json();case 8:if(!(a=e.sent).blog){e.next=14;break}return N(a.blog),m(!1),p(a.message),e.abrupt("return");case 14:m(!1),p(a.message),e.next=23;break;case 18:e.prev=18,e.t0=e.catch(2),console.log(e.t0),p("Nieco sa pokazilo"),m(!1);case 23:f(!1),m(!1);case 25:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(r.a)(s.a.mark((function e(t){var n,a,c,r,o,i=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:function(){},f(!0),m(!0),a=JSON.stringify(t),c={method:"POST",headers:C,body:a,redirect:"follow"},e.prev=5,e.next=8,fetch("".concat("https://imooptik-backend-jbuievsjdq-ew.a.run.app","/api/admin/blogs"),c);case 8:return r=e.sent,e.next=11,r.json();case 11:o=e.sent,p(o.messageSK),m(!1),n(o),z(),e.next=23;break;case 18:e.prev=18,e.t0=e.catch(5),console.log(e.t0),p("Nie\u010do sa pokazilo"),m(!1);case 23:case"end":return e.stop()}}),e,null,[[5,18]])})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(r.a)(s.a.mark((function e(t,n){var a,c,r,o,i,l=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>2&&void 0!==l[2]?l[2]:function(){},f(!0),m(!0),c=JSON.stringify(t),r={method:"PATCH",headers:C,body:c,redirect:"follow"},e.prev=5,e.next=8,fetch("".concat("https://imooptik-backend-jbuievsjdq-ew.a.run.app","/api/admin/blogs/").concat(n),r);case 8:return o=e.sent,e.next=11,o.json();case 11:i=e.sent,p(i.messageSK),m(!1),a(i),z(),e.next=23;break;case 18:e.prev=18,e.t0=e.catch(5),console.log(e.t0),p("Nie\u010do sa pokazilo"),m(!1);case 23:case"end":return e.stop()}}),e,null,[[5,18]])})));return function(t,n){return e.apply(this,arguments)}}(),I=function(){var e=Object(r.a)(s.a.mark((function e(t){var a,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),m(!0),e.prev=2,e.next=5,b(n,t);case 5:return a=e.sent,e.next=8,a.json();case 8:c=e.sent,p(c.message),m(!1),z(),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(2),console.log(e.t0),p("Nieco sa pokazilo"),m(!1);case 19:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)(d.Provider,{value:{posts:g,post:q,postsCount:S,getPosts:z,createPost:T,getPost:E,updatePost:B,handlePostDelete:I,resetBlog:function(){N(null)}},children:t})}},92:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(5),c=n(1),s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t="\xe0\xe1\xe2\xe4\xe6\xe3\xe5\u0101\u0103\u0105\xe7\u0107\u010d\u0111\u010f\xe8\xe9\xea\xeb\u0113\u0117\u0119\u011b\u011f\u01f5\u1e27\xee\xef\xed\u012b\u012f\xec\u0142\u1e3f\xf1\u0144\u01f9\u0148\xf4\xf6\xf2\xf3\u0153\xf8\u014d\xf5\u0151\u1e55\u0155\u0159\xdf\u015b\u0161\u015f\u0219\u0165\u021b\xfb\xfc\xf9\xfa\u016b\u01d8\u016f\u0171\u0173\u1e83\u1e8d\xff\xfd\u017e\u017a\u017c\xb7/_,:;",n="aaaaaaaaaacccddeeeeeeeegghiiiiiilmnnnnoooooooooprrsssssttuuuuuuuuuwxyyzzz------",s=new RegExp(t.split("").join("|"),"g"),r=Object(c.useState)(""),o=Object(a.a)(r,2),i=o[0],l=o[1],u=function(e){return e.toString().toLowerCase().replace(/\s+/g,"-").replace(s,(function(e){return n.charAt(t.indexOf(e))})).replace(/&/g,"-and-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")};return Object(c.useEffect)((function(){var t=u(e);l(t)}),[e]),{slug:i,getSlug:u}}}}]);
//# sourceMappingURL=18.b1db5ab7.chunk.js.map