(this.webpackJsonpimooptik=this.webpackJsonpimooptik||[]).push([[17,32],{238:function(n,e,t){"use strict";t.r(e);var r=t(2),c=t(31),o=t(13),i=t(5),a=t(1),d=t.n(a),l=t(19),u=t(67),s=t(3),b=t(56),j=t(32),v=t(88),p=t(53),m=t(6),f=t(7),O=t(28);function h(){var n=Object(m.a)(["\n    max-width: 40rem;\n    padding: 2rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n    margin: 0 auto;\n    border-radius: .5rem;\n\n    h3 {\n        text-align: center;\n        font-size: 3rem;\n    }\n\n    div {\n\n        &:not(:last-child) {\n            margin-bottom: 3rem;\n\n        }\n    }\n"]);return h=function(){return n},n}function x(){var n=Object(m.a)(["\n    padding: 2rem;\n    text-align: center;\n\n    img {\n        width: 5rem;\n    }\n"]);return x=function(){return n},n}function g(){var n=Object(m.a)(["\n    margin: 5rem 0;\n"]);return g=function(){return n},n}function y(){var n=Object(m.a)(["\n    display: block;\n    margin: 0 auto;\n"]);return y=function(){return n},n}function k(){var n=Object(m.a)(["\n    cursor: pointer;\n    display: grid;\n    align-content: center;\n    grid-template-columns: 1fr 2fr 25rem;\n    margin-bottom: 1rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n\n    transition: all .3s ease-out;\n\n    &:hover {\n        background-color: var(--primary-color); \n        font-weight: bolder;\n        color: var(--button-font-color);\n    }\n"]);return k=function(){return n},n}function w(){var n=Object(m.a)(["\n    display: grid;\n    align-content: center;\n    grid-template-columns: 1fr 2fr 25rem;\n    border-bottom: 1px solid var(--secondary-text-color);\n    font-weight: bolder;\n"]);return w=function(){return n},n}var C=f.c.div(w()),P=f.c.div(k()),S=Object(f.c)(O.a)(y()),z=f.c.div(g()),D=f.c.div(x()),N=f.c.div(h()),Q=function(n){var e=n.next,t=n.addToOrder,c=Object(a.useState)(""),o=Object(i.a)(c,2),d=o[0],l=o[1],u=Object(a.useState)([]),s=Object(i.a)(u,2),b=s[0],j=s[1],m=Object(a.useContext)(v.UserContext),f=m.users,O=m.getFilteredUsers,h=m.getUserByQuery;return Object(a.useEffect)((function(){f||O({limit:5,filters:{admin:0}}),f&&j(f)}),[f]),Object(a.useEffect)((function(){f&&""===d&&(O({limit:5,filters:{admin:0}}),j(f))}),[d]),Object(a.useEffect)((function(){return function(){l(""),j([])}}),[]),Object(r.jsxs)("div",{children:[Object(r.jsxs)(N,{children:[Object(r.jsx)("h3",{children:"Vyh\u013eada\u0165 z\xe1kaznika"}),Object(r.jsx)("div",{children:Object(r.jsx)(p.a,{label:"Meno, priezvisko, email alebo tel. \u010d\xedslo",value:d,onChange:function(n){return l(n.target.value)},onKeyPress:function(n){""!==d&&"Enter"===n.key&&h({query:d,filters:{admin:0}})}})}),Object(r.jsx)(S,{onClick:function(){""!==d&&h({query:d,filters:{admin:0}})},children:"H\u013eada\u0165"})]}),Object(r.jsxs)(z,{children:[Object(r.jsxs)(C,{children:[Object(r.jsx)(D,{children:"Meno a priezvisko"}),Object(r.jsx)(D,{children:"Email"}),Object(r.jsx)(D,{children:"Mo\u017enosti"})]}),b.map((function(n,c){return Object(r.jsxs)(P,{onClick:function(){return function(n){t({name:"user",value:n}),e()}(n)},children:[Object(r.jsx)(D,{children:n.name}),Object(r.jsx)(D,{children:n.email}),Object(r.jsx)(D,{children:n.phone})]},c)}))]})]})},L=t(58),A=t(55),F=t(59);function H(){var n=Object(m.a)(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    button {\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        padding: .5rem;\n    }\n\n    p {\n        font-size: 1.6rem;\n    }\n"]);return H=function(){return n},n}function E(){var n=Object(m.a)(["\n    margin: 0 1rem 2rem;;\n"]);return E=function(){return n},n}function T(){var n=Object(m.a)(["\n    display: flex;\n    align-items: center;\n    margin-bottom: 2rem;\n\n\n    label {\n        display: block;\n        outline: none;\n        margin-left: 1rem;\n\n        &:focus {\n            outline: none;\n\n        }\n    }\n\n    input {\n        display: block;\n    }\n"]);return T=function(){return n},n}function U(){var n=Object(m.a)(["\n    margin-top: 1rem;\n    margin-right: 2rem;\n"]);return U=function(){return n},n}function V(){var n=Object(m.a)(["\n    padding: 0 2rem;\n    opacity: .6;\n"]);return V=function(){return n},n}function M(){var n=Object(m.a)(["\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    grid-gap: 2rem;\n    margin: 0 1rem 2rem;\n    padding: 0 1rem;\n"]);return M=function(){return n},n}function K(){var n=Object(m.a)(["\n    margin-top: 1.5rem;\n    min-width: 16.5rem;\n    width: 100%;\n    background-color: var(--input-background-color);\n    color: var(--input-color);\n    border: none;\n    padding: .5rem .5rem .5rem 1rem;\n    font-size: inherit;\n    font-family: inherit;\n    display: block;\n    outline: none;\n\n    &:focus {\n        outline: none;\n    }\n"]);return K=function(){return n},n}function q(){var n=Object(m.a)(["\n    grid-column: 1/6;\n\n"]);return q=function(){return n},n}function I(){var n=Object(m.a)(["\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    color: var(--primary-color);\n    font-size: 2rem;\n"]);return I=function(){return n},n}function Z(){var n=Object(m.a)(["\n    display:grid; \n    align-items: center;\n    grid-template-columns: 5rem 2fr 2fr 2fr 1fr;\n    background-color: var(--background-primary-color);\n    /* border: .05rem solid var(--secondary-text-color); */\n\n    &:hover  ",'{\n        position: relative;\n        :nth-of-type(1) {\n            cursor: pointer;\n            ::after {\n                content: "X";\n                position: absolute;\n                padding: .5rem 1rem;\n                border-radius: 50%;\n                left: 50%;\n                top: 50%;\n                transform: translate(-50%, -50%);\n                background-color: var(--color-red);\n                color: var(--button-font-color);\n                font-size: 1.2rem;\n            }\n        }\n    }\n']);return Z=function(){return n},n}function _(){var n=Object(m.a)(["\n    padding: 2rem;\n    text-align: center;\n\n    input {\n        text-align: end;\n        background-color: var(--input-background-color);\n        color: var(--input-color);\n        font-size: 1.5rem;\n        padding: 1rem 1rem 1rem 2rem;\n        display: block;\n        width: 100%;\n        border: none;\n        border-radius: .5rem;\n        /* border-bottom: 1px solid #000; */\n        font-family: inherit;\n    }\n\n"]);return _=function(){return n},n}var R=f.c.div(_()),J=f.c.div(Z(),R),B=f.c.div(I()),X=f.c.div(q()),G=f.c.select(K()),W=f.c.div(M()),Y=(f.c.h4(V()),Object(f.c)(F.a)(U())),$=(f.c.div(T()),f.c.div(E())),nn=f.c.div(H()),en=function(n){var e,t,d,l,s,b,j,v=n.item,m=n.idx,f=Object(a.useContext)(u.OrderContext),O=f.deleteProduct,h=f.addProductDiscount,x=f.addLensesParameters,g=f.incrementProductQuantity,y=f.decrementProductQuantity,k=Object(a.useState)(!1),w=Object(i.a)(k,2),C=w[0],P=w[1],S=Object(a.useState)({}),z=Object(i.a)(S,2),D=z[0],N=z[1],Q=Object(a.useState)(""===(null===v||void 0===v||null===(e=v.discount)||void 0===e||null===(t=e.product)||void 0===t?void 0:t.flat)?"flat":"percent"),A=Object(i.a)(Q,2),F=A[0],H=A[1],E=Object(a.useState)({}),T=Object(i.a)(E,2),U=(T[0],T[1],Object(a.useState)(!0)),V=Object(i.a)(U,2),M=V[0],K=(V[1],function(n){H(n),h(m,n,"0")}),q=function(n,e,t){var r=n.target,i=r.name,a=r.value,d=t;d[e]=""===a?1001:Number(a),N(Object(o.a)(Object(o.a)({},D),{},Object(c.a)({},i,d)))};return Object(a.useEffect)((function(){x(m,D)}),[D]),Object(a.useEffect)((function(){v.product.type&&3===v.product.type&&N({curve:[v.product.contactLenses.allowedCurves[0],v.product.contactLenses.allowedCurves[0]],diameter:[v.product.contactLenses.allowedDiameters[0],v.product.contactLenses.allowedDiameters[0]],diopters:[0,0]})}),[v.product]),Object(r.jsxs)(J,{children:[Object(r.jsx)(R,{onClick:function(){return O(m)},children:m+1}),Object(r.jsx)(R,{children:(null===v||void 0===v||null===(d=v.product)||void 0===d?void 0:d.name)?null===v||void 0===v||null===(l=v.product)||void 0===l?void 0:l.name:"\u0160o\u0161ovky"}),Object(r.jsx)(R,{children:(null===v||void 0===v||null===(s=v.product)||void 0===s?void 0:s.price)?"".concat(((null===v||void 0===v||null===(b=v.product)||void 0===b?void 0:b.price)/100).toFixed(2),"\u20ac"):""}),Object(r.jsx)(R,{children:(5===v.product.type||6===v.product.type)&&Object(r.jsxs)(nn,{children:[Object(r.jsx)("button",{onClick:function(n){return y(null===v||void 0===v?void 0:v.productQuant,m,n)},children:Object(r.jsx)(L.n,{})}),Object(r.jsx)("p",{children:null===v||void 0===v?void 0:v.productQuant}),Object(r.jsx)("button",{onClick:function(n){return g(null===v||void 0===v?void 0:v.productQuant,m,n)},children:Object(r.jsx)(L.q,{})})]})}),Object(r.jsx)(R,{children:Object(r.jsx)(B,{onClick:function(){P((function(n){return!n}))},children:Object(r.jsx)(L.a,{})})}),C&&Object(r.jsxs)(X,{children:[Object(r.jsx)($,{children:M&&Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Zlava pre produkt"}),Object(r.jsxs)("div",{children:[Object(r.jsx)(Y,{label:"Fixn\xe1 suma",value:"flat",name:"flat",isActive:"flat"===F,handleClick:function(){return K("flat")}}),Object(r.jsx)(Y,{label:"Percert\xe1",value:"percent",name:"percent",isActive:"percent"===F,handleClick:function(){return K("percent")}})]}),Object(r.jsx)("div",{children:Object(r.jsx)(p.a,{label:"Hodnota",value:(null===v||void 0===v||null===(j=v.discount)||void 0===j?void 0:j.product)?null===v||void 0===v?void 0:v.discount.product[F]:"",onChange:function(n){h(m,F,n.target.value)}})})]})}),3===v.product.type&&Object(r.jsxs)(W,{children:[Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"\u013dave oko"}),Object(r.jsx)(G,{name:"curve",value:D.curve[0],onChange:function(n){return q(n,0,D.curve)},children:v.product.contactLenses.allowedCurves.map((function(n,e){return Object(r.jsx)("option",{value:n,children:n},e)}))}),Object(r.jsx)(G,{name:"diameter",value:D.diameter[0],onChange:function(n){return q(n,0,D.diameter)},children:v.product.contactLenses.allowedDiameters.map((function(n,e){return Object(r.jsx)("option",{value:n,children:n},e)}))}),Object(r.jsx)(p.a,{name:"diopters",type:"number",value:D.diopters[0],min:v.product.contactLenses.dioptersRange[0],max:v.product.contactLenses.dioptersRange[1],step:.25,onChange:function(n){return q(n,0,D.diopters)}})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Prav\xe9 oko"}),Object(r.jsx)(G,{name:"curve",value:D.curve[1],onChange:function(n){return q(n,1,D.curve)},children:v.product.contactLenses.allowedCurves.map((function(n,e){return Object(r.jsx)("option",{value:n,children:n},e)}))}),Object(r.jsx)(G,{name:"diameter",value:D.diameter[1],onChange:function(n){return q(n,1,D.diameter)},children:v.product.contactLenses.allowedDiameters.map((function(n,e){return Object(r.jsx)("option",{value:n,children:n},e)}))}),Object(r.jsx)(p.a,{type:"number",value:D.diopters[1],min:v.product.contactLenses.dioptersRange[0],max:v.product.contactLenses.dioptersRange[1],step:.25,name:"diopters",onChange:function(n){return q(n,1,D.diopters)}})]})]})]})]})},tn=t(236);function rn(){var n=Object(m.a)(["\n    cursor: pointer;\n    border: 4px solid var(--backbutton-color);\n    color: var(--backbutton-color);\n    border-radius: 50%;\n    padding: 1.2rem 1.2rem;\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    margin-bottom: 3rem;\n"]);return rn=function(){return n},n}var cn=f.c.div(rn()),on=function(n){var e=Object.assign({},n);return Object(r.jsx)(cn,Object(o.a)(Object(o.a)({},e),{},{children:Object(r.jsx)(tn.a,{})}))},an=t(66),dn=t(54);function ln(){var n=Object(m.a)(["\n    cursor: pointer;\n    display: grid;\n    align-items: center;\n    grid-template-columns: 10rem 15rem 1fr 1fr 1fr 1fr 10rem 1fr;\n    margin-bottom: 1rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n\n    transition: all .3s ease-out;\n\n    &:hover {\n        background-color: var(--primary-color); \n        font-weight: bolder;\n        color: var(--button-font-color);\n    }\n"]);return ln=function(){return n},n}function un(){var n=Object(m.a)(["\n    display: grid;\n    align-items: center;\n    grid-template-columns: 10rem 15rem 1fr 1fr 1fr 1fr 10rem 1fr;\n    border-bottom: 1px solid var(--secondary-text-color);\n    font-weight: bolder;\n\n\n"]);return un=function(){return n},n}function sn(){var n=Object(m.a)(["\n    padding: 2rem;\n    text-align: center;\n\n    img {\n        width: 5rem;\n    }\n"]);return sn=function(){return n},n}function bn(){var n=Object(m.a)(["\n    margin: 5rem 0;\n\n"]);return bn=function(){return n},n}function jn(){var n=Object(m.a)(["\n    display: block;\n    margin-left: auto;\n"]);return jn=function(){return n},n}function vn(){var n=Object(m.a)(["\n    /* max-width: 40rem; */\n    padding: 2rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n    /* margin: 0 auto; */\n    border-radius: .5rem;\n\n    h3 {\n        /* text-align: center; */\n        font-size: 2.5rem;\n    }\n\n    div {\n\n        &:not(:last-child) {\n            margin-bottom: 3rem;\n\n        }\n    }\n"]);return vn=function(){return n},n}function pn(){var n=Object(m.a)(["\n    font-size: 1.4rem;\n    background-color: var(--primary-color);\n    font-weight: bolder;\n    display: block;\n    margin-left: 1rem;\n    /* margin: 2rem 2rem 2rem auto; */\n"]);return pn=function(){return n},n}function mn(){var n=Object(m.a)(["\n    font-size: 1.4rem;\n    display: block;\n\n"]);return mn=function(){return n},n}function fn(){var n=Object(m.a)(["\n    margin: 2rem 2rem;\n    display: flex;\n    justify-content: flex-end;\n"]);return fn=function(){return n},n}function On(){var n=Object(m.a)(["\n    padding-top: 2rem;\n    padding-left: 2rem;\n    opacity: .6;\n"]);return On=function(){return n},n}function hn(){var n=Object(m.a)(["\n    display:grid; \n    grid-template-columns: 5rem 2fr 2fr 2fr 1fr;\n    background-color: var(--background-primary-color);\n    border-bottom: 1px solid var(--secondary-text-color);\n    margin: 2rem;\n    margin-right: calc(2rem + 10px);\n    margin-bottom: 0;\n"]);return hn=function(){return n},n}function xn(){var n=Object(m.a)(["\n    max-height: 30rem;\n    overflow-y: scroll;\n    padding: 2rem 2rem 0 2rem;\n    padding-top: 0;\n\n    ::-webkit-scrollbar {\n        width: 10px;\n    }\n\n    /* Track */\n    ::-webkit-scrollbar-track {\n        background:  var(--background-primary-color);\n    }\n\n    /* Handle */\n    ::-webkit-scrollbar-thumb {\n        background: var(--primary-color);\n    }\n\n    /* Handle on hover */\n    ::-webkit-scrollbar-thumb:hover {\n        background: var(--primary-color);\n    }\n"]);return xn=function(){return n},n}function gn(){var n=Object(m.a)(["\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n\n    h3 {\n        padding: 2rem;\n        font-size: 2.5rem;\n\n    }\n\n    @media all and (max-width: 1000px) {\n        grid-row: 1/2;\n    }\n"]);return gn=function(){return n},n}function yn(){var n=Object(m.a)(["\n    display: grid;\n    grid-template-columns: 1fr 2fr;\n    grid-gap: 3rem;\n    align-items: start;\n\n    @media all and (max-width: 1000px) { \n        grid-template-columns: 1fr;\n    }\n\n"]);return yn=function(){return n},n}var kn=f.c.div(yn()),wn=f.c.div(gn()),Cn=f.c.div(xn()),Pn=f.c.div(hn()),Sn=f.c.p(On()),zn=f.c.div(fn()),Dn=Object(f.c)(O.a)(mn()),Nn=Object(f.c)(O.a)(pn()),Qn=f.c.div(vn()),Ln=Object(f.c)(O.a)(jn()),An=f.c.div(bn()),Fn=f.c.div(sn()),Hn=f.c.div(un()),En=f.c.div(ln()),Tn=function(n){var e=n.back,t=n.next,c=n.showErrorMessage,d=Object(a.useContext)(u.OrderContext),l=d.addProduct,s=d.cart,b=d.createCombinedProducts,j=Object(a.useState)(""),v=Object(i.a)(j,2),m=v[0],f=v[1],O=Object(a.useState)([]),h=Object(i.a)(O,2),x=h[0],g=h[1],y=Object(a.useState)({limit:10,skip:0}),k=Object(i.a)(y,2),w=k[0],C=k[1],P=Object(dn.c)("api/admin/products/filter",w),S=P.response,z=P.isLoading,D=P.refetch;return Object(a.useEffect)((function(){z||g(S.products)}),[z]),Object(r.jsxs)("div",{children:[Object(r.jsx)(on,{onClick:e}),Object(r.jsxs)(kn,{children:[Object(r.jsxs)(Qn,{children:[Object(r.jsx)("h3",{children:"Vyh\u013eada\u0165 produkt"}),Object(r.jsx)("div",{children:Object(r.jsx)(p.a,{label:"N\xe1zov produktu, eanCode alebo popis",value:m,handleChange:function(n){return f(n.target.value)},onKeyPress:function(n){""!==m&&"Enter"===n.key&&(C(Object(o.a)(Object(o.a)({},w),{},{query:m})),D())}})}),Object(r.jsx)(Ln,{onClick:function(){""!==m&&(C(Object(o.a)(Object(o.a)({},w),{},{query:m})),D())},children:"H\u013eada\u0165"})]}),Object(r.jsxs)(wn,{children:[Object(r.jsx)("h3",{children:"Vybran\xe9 polo\u017eky"}),Object(r.jsxs)(Pn,{children:[Object(r.jsx)(Fn,{children:"#"}),Object(r.jsx)(Fn,{children:"Produkt"}),Object(r.jsx)(Fn,{children:"Cena"}),Object(r.jsx)(Fn,{children:"Mno\u017estvo"}),Object(r.jsx)(Fn,{children:"Viac"})]}),Object(r.jsxs)(Cn,{children:[s.map((function(n,e){return Object(r.jsx)(en,{item:n,idx:e},e)})),0===s.length&&Object(r.jsx)(Sn,{children:"Nie s\xfa vybran\xe9 \u017eiadn\xe9 produkty"})]}),Object(r.jsxs)(zn,{children:[Object(r.jsx)(Dn,{onClick:function(){return t("select-lenses")},children:"Preis\u0165 na \u0161o\u0161ovky"}),Object(r.jsx)(Nn,{onClick:b,children:"Dokon\u010di\u0165 objedn\xe1vku"})]})]})]}),Object(r.jsxs)(An,{children:[Object(r.jsxs)(Hn,{children:[Object(r.jsx)(Fn,{children:"eanK\xf3d"}),Object(r.jsx)(Fn,{children:"Obr\xe1zok"}),Object(r.jsx)(Fn,{children:"N\xe1zov"}),Object(r.jsx)(Fn,{children:"Farba"}),Object(r.jsx)(Fn,{children:"Ve\u013ekos\u0165"}),Object(r.jsx)(Fn,{children:"Zna\u010dka"}),Object(r.jsx)(Fn,{children:"Cena"}),Object(r.jsx)(Fn,{children:"Na sklade"})]}),x.map((function(n,e){return Object(r.jsxs)(En,{onClick:function(){return Object(an.b)(n.available)||6===n.type?l(n):c("Produkt nieje na sklade.")},children:[Object(r.jsx)(Fn,{children:n.eanCode}),Object(r.jsx)(Fn,{children:(null===n||void 0===n?void 0:n.image)&&Object(r.jsx)("img",{src:"".concat("https://imooptik-backend-jbuievsjdq-ew.a.run.app","/uploads/").concat(n.image.imagePath),alt:n.image.alt})}),Object(r.jsx)(Fn,{children:n.name}),Object(r.jsx)(Fn,{children:n.specs.frameColor}),Object(r.jsx)(Fn,{children:(1===n.type||2===n.type||4===n.type)&&"".concat(n.specs.size[0],"-").concat(n.specs.size[1],"-").concat(n.specs.size[2],"-").concat(n.specs.size[3])}),Object(r.jsx)(Fn,{children:n.brand}),Object(r.jsxs)(Fn,{children:[(n.price/100).toFixed(2),"\u20ac"]}),Object(r.jsx)(Fn,{children:6===n.type?"Slu\u017eba":Object(an.a)(n.available)})]},e)}))]})]})};function Un(){var n=Object(m.a)(["\n    margin: 0 1rem 2rem;;\n"]);return Un=function(){return n},n}function Vn(){var n=Object(m.a)(["\n    display: flex;\n    align-items: center;\n    margin-bottom: 2rem;\n\n\n    label {\n        display: block;\n        outline: none;\n        margin-left: 1rem;\n\n        &:focus {\n            outline: none;\n\n        }\n    }\n\n    input {\n        display: block;\n    }\n"]);return Vn=function(){return n},n}function Mn(){var n=Object(m.a)(["\n    margin-top: 1rem;\n    margin-right: 2rem;\n"]);return Mn=function(){return n},n}function Kn(){var n=Object(m.a)(["\n    grid-column: 1/5;\n\n"]);return Kn=function(){return n},n}function qn(){var n=Object(m.a)(["\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    color: var(--primary-color);\n    font-size: 2rem;\n"]);return qn=function(){return n},n}function In(){var n=Object(m.a)(["\n    cursor: pointer;\n    display:grid; \n    align-items: center;\n    grid-template-columns: 5rem 3fr 2fr 1fr 1fr 1fr;\n    background-color: var(--background-primary-color);\n    /* border: .05rem solid var(--secondary-text-color); */\n\n    /* display:grid;  */\n    /* align-items: center; */\n    /* grid-template-columns: 5rem 2fr 2fr 2fr 1fr 2fr; */\n    /* background-color: var(--background-primary-color); */\n    /* border: .05rem solid var(--secondary-text-color); */\n\n    border: ",";\n    background-color: ",";\n    font-weight: ",";\n    /* display: table-row; */\n\n    "," {\n        button {\n            color: ",";\n        }\n    }\n\n    /* box-shadow: var(--container-shadow); */\n    /* background-color: var(--container-background-table-row); */\n\n    @media all and (max-width: 920px) {\n        font-size: 1.2rem\n    }\n\n    &:hover  ",'{\n        position: relative;\n        :nth-of-type(1) {\n            cursor: pointer;\n            ::after {\n                content: "X";\n                position: absolute;\n                padding: .5rem 1rem;\n                border-radius: 50%;\n                left: 50%;\n                top: 50%;\n                transform: translate(-50%, -50%);\n                background-color: var(--color-red);\n                color: var(--button-font-color);\n                font-size: 1.2rem;\n            }\n        }\n    }\n']);return In=function(){return n},n}function Zn(){var n=Object(m.a)(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    button {\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        padding: .5rem;\n    }\n\n    p {\n        font-size: 1.6rem;\n    }\n"]);return Zn=function(){return n},n}function _n(){var n=Object(m.a)(["\n    /* min-width: 12rem; */\n    /* width: 12rem; */\n    display: table-cell;\n    text-align: center;\n    padding: 1rem;\n\n    /* white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis; */\n\n    input {\n        text-align: end;\n        background-color: var(--input-background-color);\n        color: var(--input-color);\n        font-size: 1.5rem;\n        padding: 1rem 1rem 1rem 2rem;\n        display: block;\n        width: 100%;\n        border: none;\n        border-radius: .5rem;\n        /* border-bottom: 1px solid #000; */\n        font-family: inherit;\n    }\n"]);return _n=function(){return n},n}var Rn=f.c.div(_n()),Jn=f.c.div(Zn()),Bn=f.c.div(In(),(function(n){return n.isSelected?".05rem solid var(--primary-color)":".05rem solid transparent"}),(function(n){return n.isSelected?"var(--primary-color)":"var(--background-primary-color)"}),(function(n){return n.isSelected?"bolder":"normal"}),Jn,(function(n){return n.isSelected?"var(--container-background-table-row)":"var(--primary-color)"}),Rn),Xn=f.c.div(qn()),Gn=f.c.div(Kn()),Wn=Object(f.c)(F.a)(Mn()),Yn=(f.c.div(Vn()),f.c.div(Un())),$n=function(n){var e,t,c,o,d,l,s,b=n.idx,j=n.item,v=Object(a.useContext)(u.OrderContext),m=v.selectProduct,f=v.selectedProduct,O=v.addLensesDiscount,h=v.deleteProduct,x=v.incrementQuantity,g=v.decrementQuantity,y=Object(a.useState)(!1),k=Object(i.a)(y,2),w=k[0],C=k[1],P=Object(a.useState)((null===j||void 0===j||null===(e=j.discount)||void 0===e||null===(t=e.lenses)||void 0===t?void 0:t.flat)?"flat":"percent"),S=Object(i.a)(P,2),z=S[0],D=S[1],N=Object(a.useState)(!0),Q=Object(i.a)(N,2),A=Q[0],F=(Q[1],function(n,e){e.stopPropagation(),D(n),O(b,n,"0")}),H=function(n,e){3===j.product.type||4===j.product.type||5===j.product.type||j.product.isPseudo||m(n,e)};return Object(r.jsxs)(Bn,{isSelected:f===b,onClick:function(n){return H(b,n)},children:[Object(r.jsx)(Rn,{onClick:function(){return function(n){h(n,H)}(b)},children:b+1}),Object(r.jsx)(Rn,{children:null===j||void 0===j||null===(c=j.product)||void 0===c?void 0:c.name}),Object(r.jsx)(Rn,{children:null===j||void 0===j||null===(o=j.lens)||void 0===o?void 0:o.name}),Object(r.jsx)(Rn,{children:(null===j||void 0===j||null===(d=j.lens)||void 0===d?void 0:d.price)?"".concat(((null===j||void 0===j||null===(l=j.lens)||void 0===l?void 0:l.price)/100).toFixed(2),"\u20ac"):""}),Object(r.jsx)(Rn,{children:(null===j||void 0===j?void 0:j.lensesQuant)&&Object(r.jsxs)(Jn,{children:[Object(r.jsx)("button",{onClick:function(n){return g(null===j||void 0===j?void 0:j.lensesQuant,b,n)},children:Object(r.jsx)(L.n,{})}),Object(r.jsx)("p",{children:null===j||void 0===j?void 0:j.lensesQuant}),Object(r.jsx)("button",{onClick:function(n){return x(null===j||void 0===j?void 0:j.lensesQuant,b,n)},children:Object(r.jsx)(L.q,{})})]})}),Object(r.jsx)(Rn,{children:(null===j||void 0===j?void 0:j.lensesQuant)&&Object(r.jsx)(Xn,{onClick:function(n){n.stopPropagation(),C((function(n){return!n}))},children:Object(r.jsx)(L.a,{})})}),w&&Object(r.jsx)(Gn,{children:Object(r.jsx)(Yn,{children:A&&Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Zlava pre \u0161osovky"}),Object(r.jsxs)("div",{children:[Object(r.jsx)(Wn,{label:"Fixn\xe1 suma",value:"flat",name:"flat",isActive:"flat"===z,handleClick:function(n){return F("flat",n)}}),Object(r.jsx)(Wn,{label:"Percert\xe1",value:"percent",name:"percent",isActive:"percent"===z,handleClick:function(n){return F("percent",n)}})]}),Object(r.jsx)("div",{children:Object(r.jsx)(p.a,{label:"Hodnota",value:(null===j||void 0===j||null===(s=j.discount)||void 0===s?void 0:s.lenses)?null===j||void 0===j?void 0:j.discount.lenses[z]:"",onChange:function(n){O(b,z,n.target.value)}})})]})})})]})};function ne(){var n=Object(m.a)(["\n    font-size: 1.4rem;\n    background-color: var(--primary-color);\n    font-weight: bolder;\n    display: block;\n    margin-left: 1rem;\n    /* margin: 2rem 2rem 2rem auto; */\n"]);return ne=function(){return n},n}function ee(){var n=Object(m.a)(["\n    font-size: 1.4rem;\n    display: block;\n\n"]);return ee=function(){return n},n}function te(){var n=Object(m.a)(["\n    background-color: var(--container-background-color);\n\n    margin: 2rem 2rem;\n    display: flex;\n    justify-content: flex-end;\n"]);return te=function(){return n},n}function re(){var n=Object(m.a)(["\n    padding-top: 2rem;\n    /* padding-left: 2rem; */\n    opacity: .6;\n"]);return re=function(){return n},n}function ce(){var n=Object(m.a)(["\n    width: 100%;\n    display:grid; \n    grid-template-columns: 5rem 3fr 2fr 1fr 1fr 1fr;\n    background-color: var(--background-primary-color);\n    border-bottom: 1px solid var(--secondary-text-color);\n    margin-bottom: 0;\n/* \n    display: table-row; */\n\n    font-weight: bolder;\n\n    background-color: var(--background-primary-color);\n\n    "," {\n        background-color: var(--background-primary-color);\n        border-bottom: 1px solid var(--secondary-text-color);\n\n    }\n\n    @media all and (max-width: 920px) {\n        font-size: 1.2rem\n    }\n"]);return ce=function(){return n},n}function oe(){var n=Object(m.a)(["\n    /* min-width: 12rem; */\n    display: table-cell;\n    padding: 2rem;\n    text-align: center;\n    position: sticky;\n    top: 0;\n    z-index: 9;\n\n    p{\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n    }\n"]);return oe=function(){return n},n}function ie(){var n=Object(m.a)(["\n    position: relative;\n    max-height: 30rem;\n    overflow-y: scroll;\n    overflow-x: hidden;\n    /* padding: 2rem 2rem 0 2rem; */\n    padding-top: 0;\n    font-size: 1.4rem;\n    border-collapse: collapse;\n\n\n    ::-webkit-scrollbar {\n        width: 10px;\n    }\n\n    /* Track */\n    ::-webkit-scrollbar-track {\n        background:  var(--background-primary-color);\n    }\n\n    /* Handle */\n    ::-webkit-scrollbar-thumb {\n        background: var(--primary-color);\n    }\n\n    /* Handle on hover */\n    ::-webkit-scrollbar-thumb:hover {\n        background: var(--primary-color);\n    }\n"]);return ie=function(){return n},n}function ae(){var n=Object(m.a)(["\n    font-size: 1.2rem;\n    background-color: var(--primary-color);\n    font-weight: bolder;\n"]);return ae=function(){return n},n}function de(){var n=Object(m.a)(["\n    display: flex;\n    justify-content: space-between;\n    padding: 2rem;\n\n    h3 {\n        font-size: 2.5rem;\n    }\n"]);return de=function(){return n},n}function le(){var n=Object(m.a)(["\n    grid-column: 2/3;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n    padding-left: 2rem;\n    padding-right: 2rem;\n\n    @media all and (max-width: 1000px) {\n        grid-row: 1/2;\n        grid-column: unset;\n\n    }\n\n"]);return le=function(){return n},n}function ue(){var n=Object(m.a)(["\n    background-color: var(--background-primary-color);\n    border-radius: 50%;\n    width: 5rem;\n    height: 5rem;\n    margin: 0 auto;\n    /* margin-bottom: 1.5rem; */\n"]);return ue=function(){return n},n}function se(){var n=Object(m.a)(["\n    cursor: pointer;\n    display: grid;\n    align-items: center;\n    grid-template-columns: 10rem 1fr 2fr 1fr 1fr 10rem;\n\n    margin-bottom: 1rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n\n    transition: all .3s ease-out;\n\n    img {\n        /* background-color:#000; */\n        width: 5rem;\n        height: 5rem;\n        margin-bottom: 1rem; \n        object-fit: contain;\n        object-position: center;\n    }\n\n    &:hover {\n        background-color: var(--primary-color); \n        font-weight: bolder;\n        color: var(--button-font-color);\n    }\n"]);return se=function(){return n},n}function be(){var n=Object(m.a)(["\n    display: grid;\n    align-items: center;\n    grid-template-columns: 10rem 1fr 2fr 1fr 1fr 10rem;\n    border-bottom: 1px solid var(--secondary-text-color);\n    font-weight: bolder;\n"]);return be=function(){return n},n}function je(){var n=Object(m.a)(["\n    /* display: flex;\n    flex-wrap: wrap;\n    gap: 2rem; */\n"]);return je=function(){return n},n}function ve(){var n=Object(m.a)(["\n    margin: 5rem 0;\n\n    h3 {\n        font-size: 3rem;\n        margin-bottom: 3rem;\n    }\n"]);return ve=function(){return n},n}function pe(){var n=Object(m.a)(["\n    display: block;\n    margin-left: auto;\n"]);return pe=function(){return n},n}function me(){var n=Object(m.a)(["\n    /* max-width: 40rem; */\n    padding: 2rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n    /* margin: 0 auto; */\n    border-radius: .5rem;\n\n    h3 {\n        /* text-align: center; */\n        font-size: 2.5rem;\n    }\n\n    div {\n\n        &:not(:last-child) {\n            margin-bottom: 3rem;\n\n        }\n    }\n"]);return me=function(){return n},n}function fe(){var n=Object(m.a)(["\n    display: grid;\n    grid-template-columns: 1fr 2fr;\n    grid-gap: 3rem;\n    align-items: start;\n\n    @media all and (max-width: 1000px) {\n        grid-template-columns: 1fr;\n    }\n"]);return fe=function(){return n},n}var Oe=f.c.div(fe()),he=f.c.div(me()),xe=Object(f.c)(O.a)(pe()),ge=f.c.div(ve()),ye=f.c.div(je()),ke=f.c.div(be()),we=f.c.div(se()),Ce=f.c.div(ue()),Pe=f.c.div(le()),Se=f.c.div(de()),ze=Object(f.c)(O.a)(ae()),De=f.c.div(ie()),Ne=f.c.div(oe()),Qe=f.c.div(ce(),Ne),Le=f.c.p(re()),Ae=f.c.div(te()),Fe=(Object(f.c)(O.a)(ee()),Object(f.c)(O.a)(ne())),He=function(n){var e=n.back,t=(n.next,Object(a.useContext)(u.OrderContext)),c=t.cart,d=t.addLenses,l=t.createCombinedProducts,s=t.selectedProduct,b=t.selectProduct,j=Object(a.useState)(""),v=Object(i.a)(j,2),m=v[0],f=v[1],O=Object(a.useState)([]),h=Object(i.a)(O,2),x=h[0],g=h[1],y=Object(a.useState)({limit:9,skip:0}),k=Object(i.a)(y,2),w=k[0],C=k[1],P=Object(dn.c)("api/admin/lenses/filter",w),S=P.response,z=P.isLoading,D=P.refetch;return Object(a.useEffect)((function(){z||g(S.lenses)}),[z]),Object(r.jsxs)("div",{children:[Object(r.jsx)(on,{onClick:e}),Object(r.jsxs)(Oe,{children:[Object(r.jsxs)(he,{children:[Object(r.jsx)("h3",{children:"Vyh\u013eada\u0165 \u0161o\u0161ovky"}),Object(r.jsx)("div",{children:Object(r.jsx)(p.a,{label:"Vyh\u013eada\u0165 \u0161o\u0161ovky",value:m,handleChange:function(n){return f(n.target.value)},onKeyPress:function(n){""!==m&&"Enter"===n.key&&(C(Object(o.a)(Object(o.a)({},w),{},{query:m})),D())}})}),Object(r.jsx)(xe,{onClick:function(){""!==m&&(C(Object(o.a)(Object(o.a)({},w),{},{query:m})),D())},children:"H\u013eada\u0165"})]}),Object(r.jsxs)(Pe,{children:[Object(r.jsxs)(Se,{children:[Object(r.jsx)("h3",{children:"Vybran\xe9 polo\u017eky"}),null!==s&&Object(r.jsx)(ze,{onClick:function(){return b(null)},children:"Odzna\u010di\u0165"})]}),Object(r.jsxs)(De,{children:[Object(r.jsxs)(Qe,{children:[Object(r.jsx)(Ne,{children:"#"}),Object(r.jsx)(Ne,{children:"Produkt"}),Object(r.jsx)(Ne,{children:"\u0161o\u0161ovky"}),Object(r.jsx)(Ne,{children:"Cena"}),Object(r.jsx)(Ne,{children:"Ks"}),Object(r.jsx)(Ne,{children:"Z\u013eava v %"})]}),c.map((function(n,e){return 3!==n.product.type&&4!==n.product.type&&5!==n.product.type&&6!==n.product.type&&Object(r.jsx)($n,{idx:e,item:n},e)})),0===c.length&&Object(r.jsx)(Le,{children:"Nie s\xfa vybran\xe9 \u017eiadn\xe9 produkty"})]}),Object(r.jsx)(Ae,{children:Object(r.jsx)(Fe,{onClick:l,children:"Dokon\u010di\u0165 objedn\xe1vku"})})]})]}),Object(r.jsx)(ge,{children:Object(r.jsxs)(ye,{children:[Object(r.jsxs)(ke,{children:[Object(r.jsx)(Ne,{children:"eanK\xf3d"}),Object(r.jsx)(Ne,{children:"Obr\xe1zok"}),Object(r.jsx)(Ne,{children:"N\xe1zov"}),Object(r.jsx)(Ne,{children:"Dioptrie"}),Object(r.jsx)(Ne,{children:"Cylinder"}),Object(r.jsx)(Ne,{children:"Cena"})]}),x.map((function(n,e){return Object(r.jsxs)(we,{onClick:function(){return d(n)},children:[Object(r.jsx)(Ne,{children:n.eanCode}),Object(r.jsx)(Ne,{children:Object(r.jsx)(Ce,{})}),Object(r.jsx)(Ne,{children:n.name}),Object(r.jsx)(Ne,{children:n.dioptersRange&&Object(r.jsx)("p",{children:"od ".concat(n.dioptersRange[0]," do ").concat(n.dioptersRange[1])})}),Object(r.jsx)(Ne,{children:n.cylinderRange&&Object(r.jsx)("p",{children:"od ".concat(n.cylinderRange[0]," do ").concat(n.cylinderRange[1])})}),Object(r.jsxs)(Ne,{children:[(n.price/100).toFixed(2),"\u20ac"]})]},e)})),Object(r.jsxs)(we,{onClick:function(){return d(null)},children:[Object(r.jsx)(Ne,{children:"-"}),Object(r.jsx)(Ne,{children:Object(r.jsx)(Ce,{})}),Object(r.jsx)(Ne,{children:"\u017diadn\xe9 skl\xe1"}),Object(r.jsx)(Ne,{children:"-"}),Object(r.jsx)(Ne,{children:"-"}),Object(r.jsx)(Ne,{children:"0\u20ac"})]})]})})]})},Ee=t(75),Te=t(105);function Ue(){var n=Object(m.a)(["\n    margin-bottom: 2rem;\n"]);return Ue=function(){return n},n}function Ve(){var n=Object(m.a)(["\n    display: flex;\n    align-items: center;\n    margin-bottom: 2rem;\n\n\n    label {\n        display: block;\n        outline: none;\n        margin-left: 1rem;\n\n        &:focus {\n            outline: none;\n\n        }\n    }\n\n    input: {\n        display: block;\n    }\n"]);return Ve=function(){return n},n}function Me(){var n=Object(m.a)(["\n    display: flex;\n    align-items: center;\n    margin-bottom: 2rem;\n\n\n    label {\n        display: block;\n        outline: none;\n        margin-left: 1rem;\n\n        &:focus {\n            outline: none;\n\n        }\n    }\n\n    input: {\n        display: block;\n    }\n"]);return Me=function(){return n},n}function Ke(){var n=Object(m.a)(["\n    margin-top: 2rem;\n    margin-right: 2rem;\n"]);return Ke=function(){return n},n}function qe(){var n=Object(m.a)(["\n    margin-top: 1.5rem;\n    min-width: 16.5rem;\n    width: 100%;\n    background-color: var(--input-background-color);\n    color: var(--input-color);\n    border: none;\n    padding: .5rem .5rem .5rem 1rem;\n    font-size: inherit;\n    font-family: inherit;\n    display: block;\n    outline: none;\n    margin-bottom: 2rem;\n\n    &:focus {\n        outline: none;\n    }\n"]);return qe=function(){return n},n}function Ie(){var n=Object(m.a)(["\n    margin: 2rem 0 0;\n    background-color: var(--primary-color);\n    font-weight: bolder;\n"]);return Ie=function(){return n},n}function Ze(){var n=Object(m.a)(["\n    position: relative;\n    /* z-index: 999999; */\n\n    h2{ \n        margin-top: 2rem;\n    }\n    h4{ \n        margin-top: 2rem;\n    }\n"]);return Ze=function(){return n},n}var _e=f.c.div(Ze()),Re=Object(f.c)(O.a)(Ie()),Je=f.c.select(qe()),Be=Object(f.c)(F.a)(Ke()),Xe=f.c.div(Me()),Ge=f.c.div(Ve()),We=f.c.div(Ue()),Ye=function(n){var e,t,d,l,u,s,b,j,v,m,f=n.order,O=n.combinedProducts,h=n.createOrder,x=n.setHasChanged,g=n.isUpdating,y=n.updateOrder,k=Object(a.useState)({paymentType:"cash"}),w=Object(i.a)(k,2),C=w[0],P=w[1],S=Object(a.useState)(!1),z=Object(i.a)(S,2),D=z[0],N=z[1],Q=Object(a.useState)(!1),L=Object(i.a)(Q,2),F=L[0],H=L[1],E=Object(a.useState)(!1),T=Object(i.a)(E,2),U=T[0],V=T[1],M=function(n){var e=n.target,t=e.name,r=e.value;if(""===r)return delete C[t],void P(Object(o.a)({},C));P(Object(o.a)(Object(o.a)({},C),{},Object(c.a)({},t,r)))},K=function(n){var e=n.target,t=e.name,r=e.value;if(""===r)return delete C.overwrite[t],void P(Object(o.a)({},C));P(Object(o.a)(Object(o.a)({},C),{},{overwrite:Object(o.a)(Object(o.a)({},C.overwrite),{},Object(c.a)({},t,r))}))},q=function(n){if(n.preventDefault(),g){var e=Object(o.a)({},C);delete e.paymentType,delete e.shouldDeliver,x(!1),y(e,f.order._id)}else{var t=Object(o.a)(Object(o.a)({},C),{},{user:f.user._id,combinedProducts:O.map((function(n){return n._id})),status:D?"half-paid":"paid"});if(C.couponValue&&(t=Object(o.a)(Object(o.a)({},t),{},{couponValue:Object(A.b)(C.couponValue)})),C.paidAlready){var r=0;r=C.couponValue?Object(A.b)(C.couponValue)+Object(A.b)(C.paidAlready):Object(A.b)(C.paidAlready),t=Object(o.a)(Object(o.a)({},t),{},{paidAlready:r})}x(!1),h(t)}};return Object(a.useEffect)((function(){var n,e;g&&((null===f||void 0===f?void 0:f.order)&&(M({target:{name:"shouldDeliver",value:null===f||void 0===f||null===(n=f.order)||void 0===n?void 0:n.shouldDeliver}}),M({target:{name:"buyingAsCompany",value:null===f||void 0===f||null===(e=f.order)||void 0===e?void 0:e.buyingAsCompany}})))}),[g,f]),Object(a.useEffect)((function(){return function(){P({paymentType:"cash"}),N(!1),V(!1)}}),[]),Object(r.jsxs)(_e,{children:[Object(r.jsx)("h2",{children:g?"Upravi\u0165 objedn\xe1vku":"Dokon\u010di\u0165 objedn\xe1vku"}),!g&&Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Sp\xf4sob platby"}),Object(r.jsxs)(Je,{name:"paymentType",value:null!==(e=null===C||void 0===C?void 0:C.paymentType)&&void 0!==e?e:"cash",onChange:function(n){return M(n)},children:[Object(r.jsx)("option",{value:"cash",children:"Hotovos\u0165"}),Object(r.jsx)("option",{value:"card",children:"Karta"})]}),Object(r.jsxs)(Ge,{children:[Object(r.jsx)("input",{id:"hasCoupon",name:"hasCoupon",type:"checkbox",value:F,onChange:function(){F?(H(!1),C.couponValue&&(delete C.couponValue,P(Object(o.a)({},C)))):H(!0)}}),Object(r.jsx)("label",{htmlFor:"hasCoupon",children:"Prida\u0165 kup\xf3n"})]}),F&&Object(r.jsx)(We,{children:Object(r.jsx)(p.a,{label:"Hodnota kup\xf3nu",name:"couponValue",type:"text",value:(null===C||void 0===C?void 0:C.couponValue)||"",onChange:function(n){return M(n)}})}),Object(r.jsxs)(Ge,{children:[Object(r.jsx)("input",{id:"hasDeposit",name:"hasDeposit",type:"checkbox",value:D,onChange:function(){D?(N(!1),C.paidAlready&&(delete C.paidAlready,P(Object(o.a)({},C)))):N(!0)}}),Object(r.jsx)("label",{htmlFor:"hasDeposit",children:"Prida\u0165 z\xe1lohu"})]}),D&&Object(r.jsx)(p.a,{label:"Zaplaten\xe1 z\xe1loha",name:"paidAlready",type:"text",value:null!==(t=null===C||void 0===C?void 0:C.paidAlready)&&void 0!==t?t:"",onChange:function(n){return M(n)}})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Inform\xe1cie o doru\u010den\xed"}),!g&&Object(r.jsx)(Be,{label:"Doru\u010di\u0165 na adresu",isActive:null===C||void 0===C?void 0:C.shouldDeliver,handleClick:function(){return M({target:{name:"shouldDeliver",value:!(null===C||void 0===C?void 0:C.shouldDeliver)||!(null===C||void 0===C?void 0:C.shouldDeliver)}})}}),Object(r.jsx)(Be,{label:"N\xe1kup na firmu",isActive:null===C||void 0===C?void 0:C.buyingAsCompany,handleClick:function(){return M({target:{name:"buyingAsCompany",value:!(null===C||void 0===C?void 0:C.buyingAsCompany)||!(null===C||void 0===C?void 0:C.buyingAsCompany)}})}}),(null===C||void 0===C?void 0:C.shouldDeliver)&&Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Adresa"}),Object(r.jsx)("p",{children:f.user.psc}),Object(r.jsx)("p",{children:f.user.address}),Object(r.jsx)("p",{children:f.user.city}),Object(r.jsx)("p",{children:f.user.country}),Object(r.jsxs)("div",{children:[Object(r.jsxs)(Xe,{children:[Object(r.jsx)("input",{id:"overwrite",name:"overwrite",type:"checkbox",value:U,onChange:function(){U?(V(!1),C.overwrite&&(delete C.overwrite,P(Object(o.a)({},C)))):V(!0)}}),Object(r.jsx)("label",{htmlFor:"overwrite",children:"In\xe1 adresa"})]}),U&&Object(r.jsxs)("div",{children:[Object(r.jsx)(p.a,{label:"Adresa",name:"address",type:"text",value:null!==(d=null===C||void 0===C||null===(l=C.overwrite)||void 0===l?void 0:l.address)&&void 0!==d?d:"",onChange:function(n){return K(n)}}),Object(r.jsx)(p.a,{label:"PS\u010c",name:"psc",type:"text",value:null!==(u=null===C||void 0===C||null===(s=C.overwrite)||void 0===s?void 0:s.psc)&&void 0!==u?u:"",onChange:function(n){return K(n)}}),Object(r.jsx)(p.a,{label:"Mesto",name:"city",type:"text",value:null!==(b=null===C||void 0===C||null===(j=C.overwrite)||void 0===j?void 0:j.city)&&void 0!==b?b:"",onChange:function(n){return K(n)}}),Object(r.jsx)(p.a,{label:"\u0160t\xe1t",name:"country",type:"text",value:null!==(v=null===C||void 0===C||null===(m=C.overwrite)||void 0===m?void 0:m.country)&&void 0!==v?v:"",onChange:function(n){return K(n)}})]})]})]})]}),g&&Object(r.jsx)(Re,{onClick:q,children:"Upravi\u0165 objedn\xe1vku"}),!g&&Object(r.jsx)(Re,{onClick:q,children:"Vytvori\u0165 objedn\xe1vku"})]})},$e=t(29);function nt(){var n=Object(m.a)(["\n    /* width: 8rem; */\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n"]);return nt=function(){return n},n}function et(){var n=Object(m.a)(["\n    /* width: 8rem; */\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n"]);return et=function(){return n},n}var tt=f.c.span(et()),rt=Object(f.c)($e.b)(nt()),ct=function(n){var e,t,c,o,i=n.productId,a=Object(dn.b)("api/store/products",i,!i),l=a.isLoading,u=a.response;return(null===u||void 0===u||null===(e=u.product)||void 0===e||null===(t=e.name)||void 0===t?void 0:t.includes("Pseudo"))?Object(r.jsxs)(d.a.Fragment,{children:[Object(r.jsx)(tt,{children:" "}),Object(r.jsx)(tt,{children:" "})]}):Object(r.jsxs)(d.a.Fragment,{children:[Object(r.jsx)(tt,{children:l?"H\u013eadam...":null===u||void 0===u||null===(c=u.product)||void 0===c?void 0:c.eanCode}),Object(r.jsx)(rt,{to:"/dashboard/sklad/".concat(i),children:l?"H\u013eadam...":(null===u||void 0===u||null===(o=u.product)||void 0===o?void 0:o.name)||"Produkt sa nena\u0161iel"})]})};function ot(){var n=Object(m.a)(["\n    /* width: 8rem; */\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n"]);return ot=function(){return n},n}function it(){var n=Object(m.a)(["\n    /* width: 8rem; */\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n"]);return it=function(){return n},n}var at=f.c.span(it()),dt=Object(f.c)($e.b)(ot()),lt=function(n){var e,t,c=n.lensesId,o=Object(dn.b)("api/store/lenses",c,!c),i=o.isLoading,a=o.response;return Object(r.jsxs)(d.a.Fragment,{children:[Object(r.jsx)(at,{children:i?"H\u013eadam...":(null===a||void 0===a||null===(e=a.lenses)||void 0===e?void 0:e.eanCode)||""}),Object(r.jsx)(dt,{to:"/dashboard/sklad/".concat(c),children:i?"H\u013eadam...":(null===a||void 0===a||null===(t=a.lenses)||void 0===t?void 0:t.name)||""})]})},ut=t(21),st=t.n(ut),bt=t(20),jt=t(128),vt=t(107);function pt(){var n=Object(m.a)(["\n    display: block;\n    margin: 0 auto;\n    background-color: var(--primary-color);\n    font-weight: bolder;\n"]);return pt=function(){return n},n}function mt(){var n=Object(m.a)(["\n    width: 100%;\n    height: 100%;\n\n    position: fixed;\n    left: 0;\n    right: 0;\n    z-index: 99999;\n\n    border: none;\n    outline: none;\n    opacity: 0;\n\n    &:focus {\n        outline: none\n    }\n"]);return mt=function(){return n},n}function ft(){var n=Object(m.a)(["\n    width:100%;\n    max-width: 65rem;\n    max-height: 60rem;\n    color: var(--primary-text-color);\n\n    overflow-y: scroll;\n\n    /* display: flex;\n    flex-direction: column;\n    align-items: center; */\n\n    padding: 2rem;\n    border-radius: .5rem;\n    background-color: var(--background-primary-color);\n\n    position: relative;\n    z-index: 999999;\n\n    "," {\n        box-shadow: none;\n    }\n\n    h3{ \n        margin-bottom: 2rem;\n    }\n\n    ::-webkit-scrollbar {\n        width: 10px;\n    }\n\n    /* Track */\n    ::-webkit-scrollbar-track {\n        background:  var(--background-primary-color);\n    }\n\n    /* Handle */\n    ::-webkit-scrollbar-thumb {\n        background: var(--primary-color);\n    }\n\n    /* Handle on hover */\n    ::-webkit-scrollbar-thumb:hover {\n        background: var(--primary-color);\n    }\n"]);return ft=function(){return n},n}function Ot(){var n=Object(m.a)(["\n    position: fixed;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    z-index: 99999;\n\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    background-color: rgba(0,0,0,0.3);\n"]);return Ot=function(){return n},n}var ht=f.c.div(Ot()),xt=f.c.div(ft(),vt.h),gt=f.c.button(mt()),yt=Object(f.c)(O.a)(pt()),kt=function(n){var e=n.close,t=n.userId,d=n.refetchUser,l=n.addUser,u=Object(a.useContext)(bt.a),s=u.isAdmin,b=u.isOptometrist,j=Object(a.useContext)(v.UserContext),p=j.user,m=j.isUpdating,f=j.handleChange,O=j.handleParameterChange,h=j.handleCompanyChange,x=j.getUser,g=j.updateUser,y=Object(a.useState)({}),k=Object(i.a)(y,2),w=k[0],C=k[1];return Object(a.useEffect)((function(){C(Object(o.a)(Object(o.a)({},w),{},{name:p.fName+" "+p.lName}))}),[w.fName,w.lName]),Object(a.useEffect)((function(){t&&x(t)}),[t]),st.a.createPortal(Object(r.jsxs)(ht,{children:[Object(r.jsx)(gt,{onClick:e}),Object(r.jsxs)(xt,{children:[Object(r.jsx)(jt.a,{user:p,isAdmin:s,isUpdating:m,isOptometrist:b,handleChange:function(n){var e=n.target,t=e.name,r=e.value;f(n),""!==r?C(Object(o.a)(Object(o.a)({},w),{},Object(c.a)({},t,r))):delete w[t]},handleParameterChange:function(n,e){var t=n.target,r=t.name,i=t.value,a=p.lenses[r];a[e]=i,O(n,e),C(Object(o.a)(Object(o.a)({},w),{},{lenses:Object(o.a)(Object(o.a)({},p.lenses),{},Object(c.a)({},r,a))}))},handleCompanyChange:function(n){var e=n.target,t=e.name,r=e.value;if(h(n),""===r)return delete w.company[t],void(0===Object.keys(w.company).length&&delete w.company);C(Object(o.a)(Object(o.a)({},w),{},{company:Object(o.a)(Object(o.a)({},w.company),{},Object(c.a)({},t,r))}))},isOrder:!0,isCustomer:!0}),Object(r.jsx)(yt,{onClick:function(n,t){n.preventDefault(),console.log(w),w.fName||w.lName?(delete w.fName,delete w.lName):w.fName&&w.lName||delete w.name;var r=Object(o.a)({},w);w.company&&(r=Object(o.a)(Object(o.a)({},w),{},{company:Object(o.a)(Object(o.a)({},p.company),w.company)})),g(r,p._id,"isOrder",d,e,l)},children:"Ulo\u017ei\u0165"})]})]}),document.getElementById("portal"))};function wt(){var n=Object(m.a)(["\n    cursor: pointer;\n    position: absolute;\n    right: 2rem;\n    top: 2rem;\n    font-size: 2.5rem;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    color: var(--primary-color);\n"]);return wt=function(){return n},n}function Ct(){var n=Object(m.a)(["\n    &:not(:last-child) {\n        margin-right: .5rem;\n    }\n\n    &:last-child {\n        background-color: var(--primary-color);\n        font-weight: bolder;\n    }\n"]);return Ct=function(){return n},n}function Pt(){var n=Object(m.a)(["\n    padding: 2rem;\n    border-radius: .5rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n    margin-bottom: 3rem;\n\n\n    h3 {\n        margin-bottom: 1rem;\n    }\n"]);return Pt=function(){return n},n}function St(){var n=Object(m.a)(["\n    padding: 2rem;\n    border-radius: .5rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n    margin-bottom: 3rem;\n\n    h3 {\n        margin-bottom: 1rem;\n    }\n\n    h4 {\n        margin-top: 1rem;\n        margin-bottom: .5rem;\n    }\n\n    div {\n        p {\n            opacity: .83;\n        }\n\n        &:not(:last-child) {\n            margin-bottom: 1rem;\n        }\n\n        a {\n            background-color: var(--primary-color);\n            font-weight: bolder;\n            color: #fff;\n            display: inline-block;\n            padding: .5rem 2.5rem;\n            margin-top: 1rem;\n        }\n    }\n\n"]);return St=function(){return n},n}function zt(){var n=Object(m.a)(["\n    opacity: .83;\n    font-size: 1.4rem;\n    margin-left: 1.5rem;\n\n    &:not(:last-child) {\n        margin-bottom: .5rem;\n    }\n"]);return zt=function(){return n},n}function Dt(){var n=Object(m.a)(["\n    position: relative;\n    padding: 2rem;\n    border-radius: .5rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n\n\n    h3 {\n        margin-bottom: .5rem;\n    }\n\n    h4 {\n        margin-top: 1rem;\n        margin-bottom: .5rem;\n    }\n\n"]);return Dt=function(){return n},n}function Nt(){var n=Object(m.a)(["\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    grid-gap: 3rem;\n    align-items: start;\n"]);return Nt=function(){return n},n}function Qt(){var n=Object(m.a)(["\n    margin-top: 2rem;\n    display:flex;\n    justify-content: flex-end;\n    align-items: center;\n\n    span {\n        display: block;\n        margin-right: .5rem;\n        \n    }\n\n    p {\n        font-weight: bolder;\n        font-size: 2rem;\n    }\n"]);return Qt=function(){return n},n}function Lt(){var n=Object(m.a)(["\n    display: grid;\n    align-content: center;\n    grid-template-columns: 5rem 2fr 8rem 8rem 2fr 8rem 8rem 5rem 10rem 10rem;\n    /* box-shadow: 0 0 1.5rem 0 rgba(0,0,0, 0.08); */\n    /* margin-bottom: 1rem; */\n    font-size: 1.2rem;\n    background-color: var(--background-primary-color);\n\n    &:nth-of-type(2n) {\n        background-color: var(--body-background-primary-color);\n    }\n"]);return Lt=function(){return n},n}function At(){var n=Object(m.a)(["\n    display: grid;\n    align-content: center;\n    grid-template-columns: 5rem 2fr 8rem 8rem 2fr 8rem 8rem 5rem 10rem 10rem;\n    font-weight: bolder;\n    border-bottom: 1px solid var(--secondary-text-color);\n    font-size: 1.2rem;\n\n\n    "," {\n                &:nth-of-type(2) {\n                    /* background-color: red; */\n                    display: grid;\n                    grid-template-columns: 1fr 1fr;\n                }\n    }\n"]);return At=function(){return n},n}function Ft(){var n=Object(m.a)(["\n    padding: .5rem;\n    text-align: center;\n\n    img {\n        width: 5rem;\n    }\n\n    &:nth-of-type(2), &:nth-of-type(5) {\n        /* background-color: red; */\n        display: grid;\n        grid-template-columns: 1fr 1fr;\n    }\n\n\n\n\n"]);return Ft=function(){return n},n}function Ht(){var n=Object(m.a)(["\n    margin-bottom: 2rem;\n"]);return Ht=function(){return n},n}function Et(){var n=Object(m.a)(["\n    padding: 2rem;\n    border-radius: .5rem;\n    box-shadow: var(--container-shadow);\n    margin-bottom: 3rem;\n    background-color: var(--container-background-color);\n\n"]);return Et=function(){return n},n}var Tt=f.c.div(Et()),Ut=f.c.h3(Ht()),Vt=f.c.div(Ft()),Mt=f.c.div(At(),Vt),Kt=f.c.div(Lt()),qt=f.c.div(Qt()),It=f.c.div(Nt()),Zt=f.c.div(Dt()),_t=f.c.p(zt()),Rt=f.c.div(St()),Jt=f.c.div(Pt()),Bt=Object(f.c)(O.a)(Ct()),Xt=f.c.div(wt()),Gt=function(n){n.addNextProduct;var e,t,c,o,d,l,s,b,j,v,p,m,f,O,h,x,g,y,k,w,C,P=n.setHasChanged,S=n.isUpdating,z=n.refetchUser,D=Object(a.useContext)(u.OrderContext),N=D.order,Q=D.changeStep,F=D.addUser,H=Object(a.useContext)(Ee.OrdersContext),E=H.createOrder,T=H.updateOrder,U=H.getPDF,V=Object(a.useState)(0),M=Object(i.a)(V,2),K=M[0],q=M[1],I=new Date(null===N||void 0===N||null===(e=N.order)||void 0===e?void 0:e.date),Z=Object(a.useState)(!1),_=Object(i.a)(Z,2),R=_[0],J=_[1];return Object(a.useEffect)((function(){N.combinedProducts&&q(N.combinedProducts.reduce((function(n,e){return n+e.discountedPrice}),0))}),[N.combinedProducts]),Object(r.jsxs)("div",{children:[R&&Object(r.jsx)(kt,{close:function(){J(!1)},userId:N.user._id,refetchUser:z,addUser:F}),Object(r.jsxs)(Tt,{children:[Object(r.jsx)(Ut,{children:"Preh\u013ead objedn\xe1vky"}),Object(r.jsxs)(Mt,{children:[Object(r.jsx)(Vt,{children:"#"}),Object(r.jsxs)(Vt,{children:[Object(r.jsx)("span",{children:"Eank\xf3d"}),Object(r.jsx)("span",{children:"N\xe1zov produktu"})]}),Object(r.jsx)(Vt,{children:"Cena"}),Object(r.jsx)(Vt,{children:"Po z\u013eave"}),Object(r.jsxs)(Vt,{children:[Object(r.jsx)("span",{children:"Eank\xf3d"}),Object(r.jsx)("span",{children:"N\xe1zov \u0161o\u0161ovky"})]}),Object(r.jsx)(Vt,{children:"Cena"}),Object(r.jsx)(Vt,{children:"Po z\u013eave"}),Object(r.jsx)(Vt,{children:"Ks"}),Object(r.jsx)(Vt,{children:"Spolu"}),Object(r.jsx)(Vt,{children:"Po z\u013eave"})]}),N.combinedProducts&&N.combinedProducts.map((function(n,e){var t,c,o,i,a,d,l,u,s,b,j,v,p,m;return Object(r.jsxs)(Kt,{children:[Object(r.jsx)(Vt,{children:e+1}),Object(r.jsx)(Vt,{children:(null===n||void 0===n?void 0:n.product)?Object(r.jsx)(ct,{productId:null===n||void 0===n?void 0:n.product}):""}),Object(r.jsx)(Vt,{children:0!==(null===n||void 0===n||null===(t=n.productPrice)||void 0===t?void 0:t.full)?"".concat(((null===n||void 0===n||null===(c=n.productPrice)||void 0===c?void 0:c.full)/100).toFixed(2),"\u20ac"):""}),Object(r.jsxs)(Vt,{children:[0!==(null===n||void 0===n||null===(o=n.productPrice)||void 0===o?void 0:o.discounted)?"".concat(((null===n||void 0===n||null===(i=n.productPrice)||void 0===i?void 0:i.discounted)/100).toFixed(2),"\u20ac"):""," ",(null===n||void 0===n||null===(a=n.discount)||void 0===a||null===(d=a.product)||void 0===d?void 0:d.percent)&&"(".concat(null===n||void 0===n||null===(l=n.discount)||void 0===l||null===(u=l.product)||void 0===u?void 0:u.percent,"%)")]}),Object(r.jsx)(Vt,{children:(null===n||void 0===n?void 0:n.lens)?Object(r.jsx)(lt,{lensesId:null===n||void 0===n?void 0:n.lens}):""}),Object(r.jsx)(Vt,{children:(null===n||void 0===n?void 0:n.lensPrice)?"".concat(((null===n||void 0===n||null===(s=n.lensPrice)||void 0===s?void 0:s.full)/100).toFixed(2),"\u20ac"):""}),Object(r.jsxs)(Vt,{children:[(null===n||void 0===n?void 0:n.lensPrice)?"".concat(((null===n||void 0===n||null===(b=n.lensPrice)||void 0===b?void 0:b.discounted)/100).toFixed(2),"\u20ac"):""," ",(null===n||void 0===n||null===(j=n.discount)||void 0===j||null===(v=j.lenses)||void 0===v?void 0:v.percent)&&"(".concat(null===n||void 0===n||null===(p=n.discount)||void 0===p||null===(m=p.lenses)||void 0===m?void 0:m.percent,"%)")]}),Object(r.jsx)(Vt,{children:(null===n||void 0===n?void 0:n.lens)&&(null===n||void 0===n?void 0:n.lensesQuant)}),Object(r.jsx)(Vt,{children:(null===n||void 0===n?void 0:n.price)?"".concat(((null===n||void 0===n?void 0:n.price)/100).toFixed(2),"\u20ac"):""}),Object(r.jsxs)(Vt,{children:[((null===n||void 0===n?void 0:n.discountedPrice)/100).toFixed(2),"\u20ac"]})]},e)})),Object(r.jsx)(qt,{children:Object(r.jsxs)("p",{children:["Spolu: ",(K/100).toFixed(2),"\u20ac"]})})]}),Object(r.jsxs)(It,{children:[Object(r.jsxs)(Zt,{children:[Object(r.jsx)(Xt,{onClick:function(){return J(!0)},children:Object(r.jsx)(L.h,{})}),Object(r.jsx)("h3",{children:"Z\xe1kaznik"}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Meno a priezvisko"}),Object(r.jsx)(_t,{children:null===N||void 0===N||null===(t=N.user)||void 0===t?void 0:t.name})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Adresa"}),Object(r.jsx)(_t,{children:null===N||void 0===N||null===(c=N.user)||void 0===c?void 0:c.psc}),Object(r.jsx)(_t,{children:null===N||void 0===N||null===(o=N.user)||void 0===o?void 0:o.address}),Object(r.jsx)(_t,{children:null===N||void 0===N||null===(d=N.user)||void 0===d?void 0:d.city}),Object(r.jsx)(_t,{children:null===N||void 0===N||null===(l=N.user)||void 0===l?void 0:l.country})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Kontakt"}),Object(r.jsx)(_t,{children:null===N||void 0===N||null===(s=N.user)||void 0===s?void 0:s.email}),Object(r.jsx)(_t,{children:null===N||void 0===N||null===(b=N.user)||void 0===b?void 0:b.phone})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Parametre"}),N&&N.user&&Object(r.jsx)(Te.a,{parameters:null===N||void 0===N||null===(j=N.user)||void 0===j?void 0:j.lenses,disabledInputs:!0})]})]}),Object(r.jsxs)("div",{children:[!S&&Object(r.jsxs)(Jt,{children:[Object(r.jsx)("h3",{children:"Mo\u017enosti"}),Object(r.jsx)(Bt,{onClick:function(){return Q("select-product")},children:"Prida\u0165 produkt"}),Object(r.jsx)(Ye,{order:N,combinedProducts:N.combinedProducts,createOrder:E,setHasChanged:P,isUpdating:S,updateOrder:T})]}),S&&Object(r.jsx)(Jt,{children:Object(r.jsx)(Ye,{order:N,combinedProducts:N.combinedProducts,createOrder:E,setHasChanged:P,isUpdating:S,updateOrder:T})}),S&&(null===N||void 0===N||null===(v=N.order)||void 0===v?void 0:v.overwrite)&&Object(r.jsxs)(Rt,{children:[Object(r.jsx)("h3",{children:"Doru\u010dovacia adresa"}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Adresa"}),Object(r.jsx)(_t,{children:null===N||void 0===N||null===(p=N.order)||void 0===p||null===(m=p.overwrite)||void 0===m?void 0:m.psc}),Object(r.jsx)(_t,{children:null===N||void 0===N||null===(f=N.order)||void 0===f||null===(O=f.overwrite)||void 0===O?void 0:O.address}),Object(r.jsx)(_t,{children:null===N||void 0===N||null===(h=N.order)||void 0===h||null===(x=h.overwrite)||void 0===x?void 0:x.city}),Object(r.jsx)(_t,{children:null===N||void 0===N||null===(g=N.order)||void 0===g||null===(y=g.overwrite)||void 0===y?void 0:y.country})]})]}),N.order&&Object(r.jsxs)(Rt,{children:[Object(r.jsx)("h3",{children:"Detaily objedn\xe1vky"}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"D\xe1tum objedn\xe1vky"}),Object(r.jsx)(_t,{children:I.toLocaleDateString("sk-SK",{weekday:"long",month:"long",day:"numeric"})})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Doru\u010di\u0165 na adresu"}),Object(r.jsx)(_t,{children:N.order.shouldDeliver?"\xc1no":"Nie"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"N\xe1kup na firmu"}),Object(r.jsx)(_t,{children:N.order.buyingAsCompany?"\xc1no":"Nie"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Stav objedn\xe1vky"}),Object(r.jsx)(_t,{children:Object(an.d)(N.order.status)})]}),(null===N||void 0===N||null===(k=N.order)||void 0===k?void 0:k.advancePaymentType)&&Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Z\xe1loha"}),Object(r.jsx)(_t,{children:"Z\xe1loha: ".concat(((N.order.paidAlready-N.order.couponValue1)/100).toFixed(2),"\u20ac (").concat(Object(an.c)(N.order.advancePaymentType),")")})]}),(null===N||void 0===N||null===(w=N.order)||void 0===w?void 0:w.couponValue1)>0&&Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Kup\xf3n"}),Object(r.jsx)(_t,{children:"Hodnota: ".concat((N.order.couponValue1/100).toFixed(2),"\u20ac")}),(null===N||void 0===N||null===(C=N.order)||void 0===C?void 0:C.couponValue2)>0&&Object(r.jsx)(_t,{children:"Hodnota: ".concat((N.order.couponValue2/100).toFixed(2),"\u20ac")})]}),"half-paid"!==N.order.status&&Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Sp\xf4sob \xfahrady doplatku"}),Object(r.jsx)(_t,{children:Object(an.c)(N.order.paymentType)})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Vybavuje prev\xe1dzka"}),Object(r.jsx)(_t,{children:0===N.order.premises?"Neuveden\xe9":A.g[N.order.premises]})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"PDF"}),Object(r.jsx)(Bt,{onClick:function(){return U(N.order._id,!0)},children:"Black"}),Object(r.jsx)(Bt,{onClick:function(){return U(N.order._id)},children:"Zobraz PDF"})]})]})]})]})]})},Wt=t(15);function Yt(){var n=Object(m.a)(["\n    display: flex;\n    justify-content: space-between;\n\n    ","\n    padding-top: 3rem;\n    padding-bottom: 3rem;\n\n    h1 {\n        color: var(--primary-text-color);\n    }\n\n    @media all and (max-width: 800px) {\n        flex-wrap: wrap;\n\n        div:nth-child(2) {\n            margin-bottom: 2rem;\n        }\n    }\n"]);return Yt=function(){return n},n}var $t=f.c.div(Yt(),Wt.g);e.default=function(){var n,e=Object(a.useContext)(u.OrderContext),t=e.step,d=e.order,v=e.setOrder,p=e.addUser,m=e.resetOrder,f=e.changeStep,O=Object(s.i)(),h=O.userId,x=O.orderId,g=Object(a.useState)(!1),y=Object(i.a)(g,2),k=y[0],w=y[1],C=Object(a.useState)(!1),P=Object(i.a)(C,2),S=P[0],z=P[1],D=Object(a.useContext)(l.a),N=D.getMessage,L=D.setShowModal,A=D.closeModal,F=D.isLoading,H=D.showModal,E=D.message,T=Object(dn.b)("api/admin/users",h,!("nova-objednavka"!==h)),U=Object(dn.b)("api/admin/orders",x,!x);return Object(a.useEffect)((function(){"nova-objednavka"!==h&&x?(z(!0),f("summary"),U.response&&(p(U.response.order.orderedBy),v(Object(o.a)(Object(o.a)({},d),{},{order:U.response.order,user:U.response.order.orderedBy,combinedProducts:U.response.order.combinedProducts})))):"nova-objednavka"!==h&&void 0===x&&(f("select-product"),T.response&&p(T.response.user))}),[h,x,T.response,U.response]),Object(a.useEffect)((function(){T.isLoading||p(T.response.user)}),[T.isLoading]),Object(a.useEffect)((function(){return function(){f("select-user"),m({}),w(!1),z(!1)}}),[]),Object(r.jsxs)("section",{children:[Object(r.jsx)(s.a,{when:k,message:"M\xe1te nedokon\u010den\xfa objedn\xe1vku, skuto\u010dne chcete od\xeds\u0165?"}),H&&Object(r.jsx)(j.a,{loading:F,title:E,close:A}),Object(r.jsx)($t,{children:Object(r.jsx)("div",{children:Object(r.jsx)("h1",{children:S?"Objednavka \u010d\xedslo ".concat(null===d||void 0===d||null===(n=d.order)||void 0===n?void 0:n.customId):"Nov\xe1 objedn\xe1vka"})})}),Object(r.jsx)(b.a,{children:Object(r.jsxs)("div",{children:["select-user"===t&&Object(r.jsx)(Q,{next:function(){return f("select-product")},addToOrder:function(n){w(!0);var e=n.name,t=n.value;v(Object(o.a)(Object(o.a)({},d),{},Object(c.a)({},e,t)))}}),"select-product"===t&&Object(r.jsx)(Tn,{back:function(){return f("select-user")},next:f,showErrorMessage:function(n){N(n),L(!0)}}),"select-lenses"===t&&Object(r.jsx)(He,{back:function(){return f("select-product")},next:function(){return f("summary")}}),"summary"===t&&Object(r.jsx)(Gt,{isUpdating:S,back:function(){return f("select-lenses")},addNextProduct:function(){f("findProduct"),(null===d||void 0===d?void 0:d.product)&&((null===d||void 0===d?void 0:d.lenses)?(delete d.lenses,delete d.product):delete d.product,v(Object(o.a)({},d)))},setHasChanged:w,refetchUser:T.refetch})]})})]})}},66:function(n,e,t){"use strict";t.d(e,"b",(function(){return r})),t.d(e,"a",(function(){return c})),t.d(e,"c",(function(){return o})),t.d(e,"d",(function(){return i}));var r=function(n){return!!n&&("number"===typeof n?n>0:n.reduce((function(n,e){return n+e}))>0)},c=function(n){if(!n)return"Nedostupn\xe9";if("number"===typeof n)return n>0?"".concat(n,"ks"):"Nedostupn\xe9";var e=n.reduce((function(n,e){return n+e}));return e>0?"".concat(e,"ks"):"Nedostupn\xe9"},o=function(n){return"cash"===n?"Hotovos\u0165":"card"===n?"Karta":"coupon"===n?"Kup\xf3n":n},i=function(n){return"finished"===n?"Dokon\u010den\xe9":"fulfilled"===n?"Vybaven\xe9":"pending"===n?"\u010cak\xe1 na vybavenie":"paid"===n?"Zaplaten\xe9":"half-paid"===n?"Z\xe1lohovan\xe9":"cancelled"===n?"Zru\u0161en\xe9":void 0}},67:function(n,e,t){"use strict";t.r(e),t.d(e,"OrderContext",(function(){return p}));var r=t(2),c=t(8),o=t.n(c),i=t(12),a=t(31),d=t(57),l=t(13),u=t(5),s=t(1),b=t(19),j=t(20),v=t(55),p=Object(s.createContext)({step:"",order:{},cart:[],selectedProduct:null,setOrder:function(){},addUser:function(){},addProduct:function(){},addProductDiscount:function(){},addLensesParameters:function(){},deleteProduct:function(){},addLenses:function(){},addLensesDiscount:function(){},resetOrder:function(){},changeStep:function(){},selectProduct:function(){},createCombinedProducts:function(){},incrementQuantity:function(){},decrementQuantity:function(){},incrementProductQuantity:function(){},decrementProductQuantity:function(){}});e.default=function(n){var e=n.children,t=Object(s.useContext)(j.a).token,c=Object(s.useContext)(b.a),m=c.closeModal,f=c.getMessage,O=c.setIsLoading,h=c.setShowModal,x=Object(s.useState)("select-user"),g=Object(u.a)(x,2),y=g[0],k=g[1],w=Object(s.useState)({}),C=Object(u.a)(w,2),P=C[0],S=C[1],z=Object(s.useState)([]),D=Object(u.a)(z,2),N=D[0],Q=D[1],L=Object(s.useState)(null),A=Object(u.a)(L,2),F=A[0],H=A[1],E=function(n){S(Object(l.a)(Object(l.a)({},P),{},{combinedProducts:Object(d.a)(n)}))};console.log(N);var T=function(n){k(n)},U=function(){var n=Object(i.a)(o.a.mark((function n(){var e,r,c,i,a,u;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(0!==N.length){n.next=2;break}return n.abrupt("return");case 2:return O(!0),h(!0),e=[],N.forEach((function(n){Object(d.a)(Array(n.productQuant)).forEach((function(){e.push(Object(l.a)(Object(l.a)(Object(l.a)(Object(l.a)({product:n.product.isPseudo?"pseudo":n.product._id},n.discount&&{discount:Object(l.a)(Object(l.a)({},n.discount.product&&{product:n.discount.product.flat?{flat:Object(v.b)(n.discount.product.flat)}:Object(l.a)({},n.discount.product)}),n.discount.lenses&&{lenses:n.discount.lenses.flat?{flat:Object(v.b)(n.discount.lenses.flat)}:Object(l.a)({},n.discount.lenses)})}),n.lens&&{lens:n.lens._id}),n.lensesQuant&&{lensesQuant:n.lensesQuant}),n.lenses&&{contactLenses:n.lenses}))}))})),console.log(e),(r=new Headers).append("auth-token",t),r.append("Content-Type","application/json"),c=JSON.stringify({combinedProducts:e}),i={method:"POST",headers:r,body:c,redirect:"follow"},n.prev=12,n.next=15,fetch("".concat("https://imooptik-backend-jbuievsjdq-ew.a.run.app","/api/store/combinedProducts/createMany"),i);case 15:return a=n.sent,n.next=18,a.json();case 18:if(u=n.sent,console.log(u),!u.combinedProducts){n.next=25;break}return E(u.combinedProducts),m(),T("summary"),n.abrupt("return");case 25:O(!1),f(u.messageSK),n.next=34;break;case 29:n.prev=29,n.t0=n.catch(12),console.log(n.t0),f("Nieco sa pokazilo"),O(!1);case 34:case"end":return n.stop()}}),n,null,[[12,29]])})));return function(){return n.apply(this,arguments)}}();return Object(r.jsx)(p.Provider,{value:{step:y,order:P,cart:N,selectedProduct:F,setOrder:S,addUser:function(n){S(Object(l.a)(Object(l.a)({},P),{},{user:n}))},addProduct:function(n){Q((function(e){return[].concat(Object(d.a)(e),[{product:n,productQuant:1}])}))},addProductDiscount:function(n,e,t){if(""===t){var r=N.map((function(e,t){return n===t?Object.keys(e.discount).length>1?(delete e.discount.product,e):(delete e.discount,e):e}));Q(r)}else{var c=N.map((function(r,c){return n===c?Object(l.a)(Object(l.a)({},r),{},{discount:Object(l.a)(Object(l.a)({},r.discount),{},{product:Object(a.a)({},e,t)})}):r}));Q(c)}},addLensesParameters:function(n,e){var t=N.map((function(t,r){return n===r&&Object.keys(e).length>0?Object(l.a)(Object(l.a)({},t),{},{lenses:Object(l.a)({},e)}):t}));Q(t)},deleteProduct:function(n,e){var t=N.filter((function(e,t){return t!==n}));Q(t),e&&setTimeout((function(){e(null)}),100)},addLenses:function(n){if(null!==n||null!==F){if(null!==F){var e=N.map((function(e,t){return t===F?null===n?(delete e.lensesQuant,delete e.lens,e):Object(l.a)(Object(l.a)({},e),{},{lens:n,lensesQuant:2}):e}));Q(e)}else Q((function(e){return[].concat(Object(d.a)(e),[{product:{_id:Math.floor(10*Math.random()),isPseudo:!0},lens:n,lensesQuant:1}])}));H(null)}},addLensesDiscount:function(n,e,t){if(""===t){var r=N.map((function(e,t){return n===t?Object.keys(e.discount).length>1?(delete e.discount.product,e):(delete e.discount,e):e}));Q(r)}else{var c=N.map((function(r,c){return n===c?Object(l.a)(Object(l.a)({},r),{},{discount:Object(l.a)(Object(l.a)({},r.discount),{},{lenses:Object(a.a)({},e,t)})}):r}));Q(c)}},resetOrder:function(){S({})},changeStep:T,selectProduct:function(n,e){H(F===n?null:n)},createCombinedProducts:U,incrementQuantity:function(n,e,t){t.stopPropagation();var r=N.map((function(t,r){return e===r?Object(l.a)(Object(l.a)({},t),{},{lensesQuant:n+1}):t}));Q(r)},decrementQuantity:function(n,e,t){if(t.stopPropagation(),1!==n){var r=N.map((function(t,r){return e===r?Object(l.a)(Object(l.a)({},t),{},{lensesQuant:n-1}):t}));Q(r)}},incrementProductQuantity:function(n,e,t){t.stopPropagation();var r=N.map((function(t,r){return e===r?Object(l.a)(Object(l.a)({},t),{},{productQuant:n+1}):t}));Q(r)},decrementProductQuantity:function(n,e,t){if(t.stopPropagation(),1!==n){var r=N.map((function(t,r){return e===r?Object(l.a)(Object(l.a)({},t),{},{productQuant:n-1}):t}));Q(r)}}},children:e})}},75:function(n,e,t){"use strict";t.r(e),t.d(e,"OrdersContext",(function(){return j}));var r=t(2),c=t(13),o=t(8),i=t.n(o),a=t(12),d=t(5),l=t(1),u=t(3),s=t(20),b=t(19),j=Object(l.createContext)({orders:null,getPDF:function(){},getOrders:function(){},createOrder:function(){},updateOrder:function(){},finishOrder:function(){},cancelOrder:function(){}});e.default=function(n){var e=n.children,t=Object(u.h)().push,o=Object(l.useContext)(b.a),v=o.setIsLoading,p=o.setShowModal,m=o.getMessage,f=o.closeModal,O=Object(l.useContext)(s.a).token,h=Object(l.useState)(null),x=Object(d.a)(h,2),g=x[0],y=x[1],k=new Headers;k.append("auth-token",O),k.append("Content-Type","application/json");var w=function(){var n=Object(a.a)(i.a.mark((function n(){var e,t,r;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return v(!0),p(!0),e={method:"GET",headers:k,redirect:"follow"},n.prev=3,n.next=6,fetch("".concat("https://imooptik-backend-jbuievsjdq-ew.a.run.app","/api/admin/orders"),e);case 6:return t=n.sent,n.next=9,t.json();case 9:if(!(r=n.sent).orders){n.next=14;break}return y(r.orders),f(),n.abrupt("return");case 14:m(r.messageSK),v(!1),n.next=23;break;case 18:n.prev=18,n.t0=n.catch(3),console.log(n.t0),m("Nieco sa pokazilo"),v(!1);case 23:case"end":return n.stop()}}),n,null,[[3,18]])})));return function(){return n.apply(this,arguments)}}(),C=function(){var n=Object(a.a)(i.a.mark((function n(e){var t,r,o,a,d=arguments;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=d.length>1&&void 0!==d[1]&&d[1],v(!0),p(!0),r=Object(c.a)(Object(c.a)({method:"POST",headers:k},t&&{body:JSON.stringify({black:!0})}),{},{redirect:"follow"}),n.prev=4,n.next=7,fetch("".concat("https://imooptik-backend-jbuievsjdq-ew.a.run.app","/api/admin/orders/").concat(e,"/createPdf"),r);case 7:return o=n.sent,n.next=10,o.json();case 10:(a=n.sent).filename&&(v(!1),m(a.messageSK),setTimeout((function(){var n=window.open("".concat("https://imooptik-backend-jbuievsjdq-ew.a.run.app","/uploads/pdf/").concat(a.filename),"_blank","noreferrer noopener");null===n||void 0===n||n.focus()}),100)),m(a.messageSK),v(!1),n.next=21;break;case 16:n.prev=16,n.t0=n.catch(4),console.log(n.t0),m("Nieco sa pokazilo"),v(!1);case 21:case"end":return n.stop()}}),n,null,[[4,16]])})));return function(e){return n.apply(this,arguments)}}(),P=function(){var n=Object(a.a)(i.a.mark((function n(e){var r,o,a,d,l;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return v(!0),p(!0),r=Object(c.a)({},e),o=JSON.stringify(r),a={method:"POST",headers:k,body:o,redirect:"follow"},n.prev=5,n.next=8,fetch("".concat("https://imooptik-backend-jbuievsjdq-ew.a.run.app","/api/admin/orders"),a);case 8:return d=n.sent,n.next=11,d.json();case 11:if(!(l=n.sent).error){n.next=16;break}return m(l.messageSK),v(!1),n.abrupt("return");case 16:l.order&&(w(),f(),t("/dashboard/objednavky"),setTimeout((function(){C(l.order._id)}),100)),n.next=24;break;case 19:n.prev=19,n.t0=n.catch(5),console.log(n.t0),m("Nieco sa pokazilo"),v(!1);case 24:case"end":return n.stop()}}),n,null,[[5,19]])})));return function(e){return n.apply(this,arguments)}}(),S=function(){var n=Object(a.a)(i.a.mark((function n(e,r){var o,a,d,l,u;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return v(!0),p(!0),o=Object(c.a)({},e),a=JSON.stringify(o),d={method:"PATCH",headers:k,body:a,redirect:"follow"},n.prev=5,n.next=8,fetch("".concat("https://imooptik-backend-jbuievsjdq-ew.a.run.app","/api/admin/orders/").concat(r),d);case 8:return l=n.sent,n.next=11,l.json();case 11:(u=n.sent).order&&(w(),f(),t("/dashboard/objednavky")),m(u.messageSK),v(!1),n.next=22;break;case 17:n.prev=17,n.t0=n.catch(5),console.log(n.t0),m("Nieco sa pokazilo"),v(!1);case 22:case"end":return n.stop()}}),n,null,[[5,17]])})));return function(e,t){return n.apply(this,arguments)}}(),z=function(){var n=Object(a.a)(i.a.mark((function n(e,t){var r,c,o;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return v(!0),p(!0),r={method:"POST",headers:k,redirect:"follow"},n.prev=3,n.next=6,fetch("".concat("https://imooptik-backend-jbuievsjdq-ew.a.run.app","/api/admin/orders/").concat(e,"/fulfill"),r);case 6:return c=n.sent,n.next=9,c.json();case 9:if(!(o=n.sent).order){n.next=14;break}return t(),f(),n.abrupt("return");case 14:m(o.messageSK),v(!1),n.next=23;break;case 18:n.prev=18,n.t0=n.catch(3),console.log(n.t0),m("Nieco sa pokazilo"),v(!1);case 23:case"end":return n.stop()}}),n,null,[[3,18]])})));return function(e,t){return n.apply(this,arguments)}}(),D=function(){var n=Object(a.a)(i.a.mark((function n(e,t){var r,c,o;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return v(!0),p(!0),r={method:"POST",headers:k,redirect:"follow"},n.prev=3,n.next=6,fetch("".concat("https://imooptik-backend-jbuievsjdq-ew.a.run.app","/api/admin/orders/").concat(e,"/cancel"),r);case 6:return c=n.sent,n.next=9,c.json();case 9:if(!(o=n.sent).order){n.next=13;break}return setTimeout((function(){t(),f()}),100),n.abrupt("return");case 13:m(o.messageSK),v(!1),n.next=22;break;case 17:n.prev=17,n.t0=n.catch(3),console.log(n.t0),m("Nieco sa pokazilo"),v(!1);case 22:case"end":return n.stop()}}),n,null,[[3,17]])})));return function(e,t){return n.apply(this,arguments)}}();return Object(r.jsx)(j.Provider,{value:{orders:g,getPDF:C,getOrders:w,createOrder:P,updateOrder:S,finishOrder:z,cancelOrder:D},children:e})}}}]);
//# sourceMappingURL=17.0d272572.chunk.js.map