{"version":3,"sources":["sections/post/post.styles.jsx","sections/post/post.section.jsx","context/blog/blog.queries.jsx","context/blog/blog.context.jsx"],"names":["Header","styled","div","paddingStyles","GridContainer","Container","PostImage","hasImage","DeleteButton","CustomButtom","AddButton","Title","h2","ContentTextare","ReactQuill","CustomUndo","viewBox","className","points","d","CustomRedo","Size","Quill","import","whitelist","register","Font","modules","toolbar","container","handlers","undo","this","quill","history","redo","delay","maxStack","userOnly","formats","QuillToolbar","id","defaultValue","value","PostSection","useParams","push","useHistory","useContext","BlogContext","createPost","isLoading","message","showLoading","setIsLoading","getPost","post","handlePostUpdate","resetBlog","closeModal","LoadingModalContext","ImageContext","selectedImage","setSelectedImage","useState","title","setTitle","description","setDescription","content","setContent","image","setImage","draft","toggleDraft","showImageModal","setImageModal","isUpdating","setIsUpdating","useEffect","name","html","_id","onSubmit","e","preventDefault","length","loading","close","label","isActive","handleClick","prevValue","type","handleChange","target","required","rows","onClick","src","process","imagePath","alt","onChange","fetchSinglePost","fetch","createNewPost","token","img","myHeaders","Headers","append","requestOptions","method","headers","body","JSON","stringify","redirect","updatePost","deletePost","createContext","posts","postsCount","getPosts","handlePostDelete","BlogProvider","children","AuthContext","getMessage","setShowModal","setPosts","setPost","setPostsCount","a","response","json","data","blogs","count","blog","console","log","postResponse","postData","Provider"],"mappings":"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","file":"static/js/21.51ef4fc8.chunk.js","sourcesContent":["import styled from 'styled-components'\r\nimport { paddingStyles } from '../../global.styles'\r\nimport CustomButtom from '../../components/custom-button/custom-button.component'\r\nimport ReactQuill from 'react-quill';\r\n\r\n\r\nexport const Header = styled.div`\r\n    ${paddingStyles}\r\n    padding-top: 3rem;\r\n    padding-bottom: 3rem;\r\n    color: var(--primary-text-color);\r\n`\r\n\r\nexport const GridContainer = styled.div`\r\n    display: grid;\r\n    align-items: start;\r\n    grid-template-columns: 1fr 1fr;\r\n    grid-gap: 2rem;\r\n    height: inherit;\r\n    height: 100%;\r\n\r\n        @media all and (max-width: 800px) {\r\n            grid-template-columns: 1fr ;\r\n        }\r\n\r\n`\r\n\r\nexport const Container = styled.div`\r\n    padding: 2rem;\r\n    background-color: var(--container-background-color);\r\n    box-shadow: var(--container-shadow);\r\n`\r\n\r\nexport const PostImage = styled.div`\r\n    cursor: pointer;\r\n    display:flex;\r\n    align-items: center;\r\n    justify-content:center;\r\n    width: 100%;\r\n    background-color: ${({ hasImage }) => hasImage ? \"transparent\" : \"var(--input-background-color)\"};\r\n    margin-top: 3rem;\r\n    padding: 6rem;\r\n\r\n    position: relative;\r\n\r\n    img {\r\n        position: absolute;\r\n        width: 100%;\r\n        /* height: 100%; */\r\n        max-height: 40rem;\r\n        left: 0;\r\n        top: 0;\r\n        object-fit: cover;\r\n        object-position: center;\r\n\r\n    }\r\n`\r\n\r\nexport const DeleteButton = styled(CustomButtom)`\r\n    font-size: 1.4rem;\r\n    margin: 0 2rem;\r\n    background-color: var(--color-red);\r\n\r\n    @media all and (max-width: 500px) {\r\n        margin: 0 .8rem;\r\n    }\r\n`\r\nexport const AddButton = styled(CustomButtom)`\r\n    font-size: 1.4rem;\r\n`\r\n\r\nexport const Title = styled.h2`\r\n    margin-bottom: 2rem;\r\n`\r\n\r\nexport const ContentTextare = styled(ReactQuill)`\r\n    height: 50rem;\r\n    background-color: var(--input-background-color);\r\n    color: var(--input-color);\r\n    \r\n    .ql-container, .ql-toolbar {\r\n        border: none;\r\n    }\r\n`\r\n","import React, { useState, useContext, useEffect } from 'react'\r\nimport { BlogContext } from '../../context/blog/blog.context'\r\nimport { ImageContext } from '../../context/image/image.context'\r\nimport { LoadingModalContext } from '../../context/loading-modal/loading-modal.contenxt'\r\nimport { useParams, useHistory } from 'react-router-dom'\r\n\r\nimport ScrollContainer from '../../components/scroll-container/scroll-container.component'\r\nimport CustomInput from '../../components/custom-input/custom-input.component'\r\nimport CustomTextarea from '../../components/custom-textarea/custom-textarea.component'\r\nimport CustomCheckbox from '../../components/custom-checkbox/custom-checkbox.component'\r\nimport Popup from '../../components/popup/pop-up.component'\r\nimport ModalImage from '../../components/modal-images/modal-images.component'\r\nimport { Quill } from 'react-quill'\r\n\r\nimport {\r\n    FixedContainer\r\n} from '../../global.styles'\r\n\r\n\r\nimport {\r\n    Header,\r\n    GridContainer,\r\n    PostImage,\r\n    DeleteButton,\r\n    AddButton,\r\n    Title,\r\n    ContentTextare,\r\n    Container,\r\n} from './post.styles'\r\n\r\nconst PostSection = () => {\r\n    const { id } = useParams()\r\n    const { push } = useHistory()\r\n    const {\r\n        createPost,\r\n        isLoading,\r\n        message,\r\n        showLoading,\r\n        setIsLoading,\r\n        getPost,\r\n        post,\r\n        handlePostUpdate,\r\n        resetBlog\r\n    } = useContext(BlogContext)\r\n    const { closeModal } = useContext(LoadingModalContext)\r\n    const { selectedImage, setSelectedImage } = useContext(ImageContext)\r\n    const [title, setTitle] = useState('')\r\n    const [description, setDescription] = useState('')\r\n    const [content, setContent] = useState('')\r\n    const [image, setImage] = useState('')\r\n    const [draft, toggleDraft] = useState(false)\r\n    const [showImageModal, setImageModal] = useState(false)\r\n    const [isUpdating, setIsUpdating] = useState(false)\r\n\r\n    const handleSubmit = e => {\r\n        e.preventDefault()\r\n\r\n        if (image.length <= 0) return\r\n        if (content.length <= 0) return\r\n\r\n        if (id === 'novy-prispevok') {\r\n            createPost(image, title, description, draft, content)\r\n        } else {\r\n            handlePostUpdate(title, description, draft, content, image, id)\r\n        }\r\n\r\n        push('/dashboard/blog')\r\n\r\n    }\r\n\r\n    useEffect(() => {\r\n        setSelectedImage(null)\r\n\r\n        if (id !== 'novy-prispevok') {\r\n            getPost(id)\r\n            setIsUpdating(true)\r\n        }\r\n    }, [id])\r\n\r\n    useEffect(() => {\r\n        if (id !== 'novy-prispevok') {\r\n            if (post) {\r\n                setTitle(post.name)\r\n                setDescription(post.description)\r\n                setContent(post.html)\r\n                toggleDraft(post.draft)\r\n                if (post.image) {\r\n                    setImage(post.image._id)\r\n                    setSelectedImage(post.image)\r\n                }\r\n            }\r\n        }\r\n    }, [post])\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            closeModal()\r\n            resetBlog()\r\n            setTitle('')\r\n            setDescription('')\r\n            setContent('')\r\n            setImage('')\r\n            toggleDraft(false)\r\n            setImageModal(false)\r\n            setIsUpdating(false)\r\n        }\r\n    }, [])\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit}>\r\n            {isLoading && <Popup loading={showLoading} title={message} close={() => setIsLoading(false)} />}\r\n            {showImageModal && <ModalImage close={() => setImageModal(false)} setImage={setImage} />}\r\n\r\n            <Header>\r\n                <FixedContainer>\r\n                    <div>\r\n                        <h1>Post</h1>\r\n                    </div>\r\n                    <div>\r\n                        <CustomCheckbox\r\n                            label='Draft'\r\n                            isActive={draft}\r\n                            handleClick={() => toggleDraft(prevValue => !prevValue)}\r\n                        />\r\n                        <DeleteButton>Vymazať</DeleteButton>\r\n                        <AddButton type='submit'>{isUpdating ? \"Upraviť príspevok\" : \"Pridať príspevok\"}</AddButton>\r\n                    </div>\r\n\r\n                </FixedContainer>\r\n            </Header>\r\n\r\n            <ScrollContainer>\r\n\r\n                <GridContainer>\r\n                    <Container>\r\n                        <h2>Informácia</h2>\r\n                        <CustomInput\r\n                            label=\"Nadpis\"\r\n                            type='text'\r\n                            name='title'\r\n                            value={title}\r\n                            handleChange={(e) => setTitle(e.target.value)}\r\n                            required\r\n                        />\r\n                        <CustomTextarea\r\n                            label=\"Popis\"\r\n                            name='description'\r\n                            rows='5'\r\n                            value={description}\r\n                            handleChange={(e) => setDescription(e.target.value)}\r\n                            required\r\n                        />\r\n                        <h2>Titulná fotka</h2>\r\n                        <PostImage onClick={() => setImageModal(true)} hasImage={selectedImage}>\r\n                            {!selectedImage && \"Vybrať obrázok\"}\r\n                            {selectedImage && <img src={`${process.env.REACT_APP_BACKEND_ENDPOINT}/uploads/${selectedImage.imagePath}`} alt={selectedImage.alt} />}\r\n                        </PostImage>\r\n                    </Container>\r\n                    <Container>\r\n                        <Title>Obsah</Title>\r\n                        <QuillToolbar />\r\n                        <ContentTextare\r\n                            value={content}\r\n                            onChange={setContent}\r\n                            modules={modules}\r\n                            formats={formats}\r\n                        />\r\n                    </Container>\r\n\r\n                </GridContainer>\r\n\r\n            </ScrollContainer>\r\n        </form>\r\n    )\r\n}\r\n\r\n\r\nconst CustomUndo = () => (\r\n    <svg viewBox=\"0 0 18 18\">\r\n        <polygon className=\"ql-fill ql-stroke\" points=\"6 10 4 12 2 10 6 10\" />\r\n        <path\r\n            className=\"ql-stroke\"\r\n            d=\"M8.09,13.91A4.6,4.6,0,0,0,9,14,5,5,0,1,0,4,9\"\r\n        />\r\n    </svg>\r\n);\r\n\r\n// Redo button icon component for Quill editor\r\nconst CustomRedo = () => (\r\n    <svg viewBox=\"0 0 18 18\">\r\n        <polygon className=\"ql-fill ql-stroke\" points=\"12 10 14 12 16 10 12 10\" />\r\n        <path\r\n            className=\"ql-stroke\"\r\n            d=\"M9.91,13.91A4.6,4.6,0,0,1,9,14a5,5,0,1,1,5-5\"\r\n        />\r\n    </svg>\r\n);\r\n\r\n// Undo and redo functions for Custom Toolbar\r\nfunction undoChange() {\r\n    this.quill.history.undo();\r\n}\r\nfunction redoChange() {\r\n    this.quill.history.redo();\r\n}\r\n\r\n// Add sizes to whitelist and register them\r\nconst Size = Quill.import(\"formats/size\");\r\nSize.whitelist = [\"extra-small\", \"small\", \"medium\", \"large\"];\r\nQuill.register(Size, true);\r\n\r\n// Add fonts to whitelist and register them\r\nconst Font = Quill.import(\"formats/font\");\r\nFont.whitelist = [\r\n    \"arial\",\r\n    \"comic-sans\",\r\n    \"courier-new\",\r\n    \"georgia\",\r\n    \"helvetica\",\r\n    \"lucida\"\r\n];\r\nQuill.register(Font, true);\r\n\r\n// Modules object for setting up the Quill editor\r\nconst modules = {\r\n    toolbar: {\r\n        container: \"#toolbar\",\r\n        handlers: {\r\n            undo: undoChange,\r\n            redo: redoChange\r\n        }\r\n    },\r\n    history: {\r\n        delay: 500,\r\n        maxStack: 100,\r\n        userOnly: true\r\n    }\r\n};\r\n\r\n// Formats objects for setting up the Quill editor\r\nconst formats = [\r\n    \"header\",\r\n    \"font\",\r\n    \"size\",\r\n    \"bold\",\r\n    \"italic\",\r\n    \"underline\",\r\n    \"align\",\r\n    \"strike\",\r\n    \"script\",\r\n    \"blockquote\",\r\n    \"background\",\r\n    \"list\",\r\n    \"bullet\",\r\n    \"indent\",\r\n    \"link\",\r\n    \"image\",\r\n    \"color\",\r\n    \"code-block\"\r\n];\r\n\r\n// Quill Toolbar component\r\nconst QuillToolbar = () => (\r\n    <div id=\"toolbar\" className=\"toolbar\">\r\n        <span className=\"ql-formats\">\r\n            <select className=\"ql-size\" defaultValue=\"medium\">\r\n                <option value=\"extra-small\">Size 1</option>\r\n                <option value=\"small\">Size 2</option>\r\n                <option value=\"medium\">Size 3</option>\r\n                <option value=\"large\">Size 4</option>\r\n            </select>\r\n            <select className=\"ql-header\" defaultValue=\"3\">\r\n                <option value=\"1\">Heading</option>\r\n                <option value=\"2\">Subheading</option>\r\n                <option value=\"3\">Normal</option>\r\n            </select>\r\n        </span>\r\n        <span className=\"ql-formats\">\r\n            <button className=\"ql-bold\" />\r\n            <button className=\"ql-italic\" />\r\n            <button className=\"ql-underline\" />\r\n            <button className=\"ql-strike\" />\r\n        </span>\r\n        <span className=\"ql-formats\">\r\n            <button className=\"ql-list\" value=\"ordered\" />\r\n            <button className=\"ql-list\" value=\"bullet\" />\r\n            <button className=\"ql-indent\" value=\"-1\" />\r\n            <button className=\"ql-indent\" value=\"+1\" />\r\n        </span>\r\n        <span className=\"ql-formats\">\r\n            <button className=\"ql-script\" value=\"super\" />\r\n            <button className=\"ql-script\" value=\"sub\" />\r\n            <button className=\"ql-blockquote\" />\r\n            <button className=\"ql-direction\" />\r\n        </span>\r\n        <span className=\"ql-formats\">\r\n            <select className=\"ql-align\" />\r\n            <select className=\"ql-color\" />\r\n            <select className=\"ql-background\" />\r\n        </span>\r\n        <span className=\"ql-formats\">\r\n            <button className=\"ql-link\" />\r\n            <button className=\"ql-image\" />\r\n            <button className=\"ql-video\" />\r\n        </span>\r\n        <span className=\"ql-formats\">\r\n            <button className=\"ql-formula\" />\r\n            <button className=\"ql-code-block\" />\r\n            <button className=\"ql-clean\" />\r\n        </span>\r\n        <span className=\"ql-formats\">\r\n            <button className=\"ql-undo\">\r\n                <CustomUndo />\r\n            </button>\r\n            <button className=\"ql-redo\">\r\n                <CustomRedo />\r\n            </button>\r\n        </span>\r\n    </div>\r\n);\r\n\r\n\r\nexport default PostSection\r\n","\r\n\r\nexport const fetchPosts = () => {\r\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/blogs`)\r\n}\r\n\r\nexport const fetchSinglePost = (id) => {\r\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/blogs/${id}`)\r\n}\r\n\r\nexport const createNewPost = (token, name, description, draft, html, img) => {\r\n    const myHeaders = new Headers();\r\n    myHeaders.append(\"auth-token\", token);\r\n    myHeaders.append(\"Content-Type\", \"application/json\");\r\n\r\n    const raw = JSON.stringify({ \"name\": name, \"description\": description, \"draft\": draft, \"html\": html, 'image': img });\r\n\r\n    const requestOptions = {\r\n        method: 'POST',\r\n        headers: myHeaders,\r\n        body: raw,\r\n        redirect: 'follow'\r\n    };\r\n\r\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/blogs`, requestOptions)\r\n}\r\n\r\nexport const updatePost = (token, name, description, draft, html, img, id) => {\r\n    const myHeaders = new Headers();\r\n    myHeaders.append(\"auth-token\", token);\r\n    myHeaders.append(\"Content-Type\", \"application/json\");\r\n\r\n    const raw = JSON.stringify({ \"name\": name, \"description\": description, \"draft\": draft, \"html\": html, 'image': img });\r\n\r\n    const requestOptions = {\r\n        method: 'PATCH',\r\n        headers: myHeaders,\r\n        body: raw,\r\n        redirect: 'follow'\r\n    };\r\n\r\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/blogs/${id}`, requestOptions)\r\n\r\n}\r\n\r\nexport const deletePost = (token, id) => {\r\n    const myHeaders = new Headers();\r\n    myHeaders.append(\"auth-token\", token);\r\n    myHeaders.append(\"Content-Type\", \"application/json\");\r\n\r\n\r\n    const requestOptions = {\r\n        method: 'DELETE',\r\n        headers: myHeaders,\r\n        redirect: 'follow'\r\n    };\r\n\r\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/blogs/${id}`, requestOptions)\r\n\r\n}\r\n\r\n","import React, { createContext, useState, useContext } from 'react'\r\nimport { AuthContext } from '../auth/auth.context'\r\nimport { LoadingModalContext } from '../loading-modal/loading-modal.contenxt'\r\nimport {\r\n    fetchPosts,\r\n    createNewPost,\r\n    fetchSinglePost,\r\n    updatePost,\r\n    deletePost,\r\n} from './blog.queries'\r\n\r\n\r\nexport const BlogContext = createContext({\r\n    posts: null,\r\n    post: null,\r\n    postsCount: 0,\r\n    getPosts: () => { },\r\n    createPost: () => { },\r\n    getPost: () => { },\r\n    handlePostUpdate: () => { },\r\n    handlePostDelete: () => { },\r\n    resetBlog: () => { }\r\n})\r\n\r\nconst BlogProvider = ({ children }) => {\r\n    const { token } = useContext(AuthContext)\r\n\r\n    const {\r\n        getMessage,\r\n        setIsLoading,\r\n        setShowModal\r\n    } = useContext(LoadingModalContext)\r\n\r\n    const [posts, setPosts] = useState(null)\r\n    const [post, setPost] = useState(null)\r\n    const [postsCount, setPostsCount] = useState(0)\r\n\r\n    const getPosts = async () => {\r\n        setShowModal(true)\r\n        setIsLoading(true)\r\n\r\n        const response = await fetchPosts()\r\n        const data = await response.json()\r\n\r\n        setPosts(data.blogs)\r\n        setPostsCount(data.count)\r\n\r\n        setShowModal(false)\r\n        setIsLoading(false)\r\n    }\r\n\r\n    const getPost = async (id) => {\r\n        setShowModal(true)\r\n        setIsLoading(true)\r\n\r\n        try {\r\n\r\n            const response = await fetchSinglePost(id)\r\n            const data = await response.json()\r\n\r\n            if (data.blog) {\r\n                setPost(data.blog)\r\n                setIsLoading(false)\r\n                getMessage(data.message)\r\n                return\r\n            }\r\n\r\n            setIsLoading(false)\r\n            getMessage(data.message)\r\n            // setPosts(data.blogs)\r\n            // setPostsCount(data.count)\r\n        } catch (err) {\r\n            console.log(err)\r\n            getMessage(\"Nieco sa pokazilo\")\r\n            setIsLoading(false)\r\n        }\r\n\r\n\r\n        setShowModal(false)\r\n        setIsLoading(false)\r\n    }\r\n\r\n    const createPost = async (img, name, description, draft, html) => {\r\n        setShowModal(true)\r\n        setIsLoading(true)\r\n\r\n        try {\r\n            const postResponse = await createNewPost(token, name, description, draft, html, img)\r\n            const postData = await postResponse.json()\r\n\r\n            getMessage(postData.message)\r\n            setIsLoading(false)\r\n            getPosts()\r\n        } catch (err) {\r\n            console.log(err)\r\n            getMessage(\"Nieco sa pokazilo\")\r\n            setIsLoading(false)\r\n        }\r\n    }\r\n\r\n    const handlePostUpdate = async (name, description, draft, html, img, id) => {\r\n        setShowModal(true)\r\n        setIsLoading(true)\r\n\r\n        try {\r\n            const postResponse = await updatePost(token, name, description, draft, html, img, id)\r\n            const postData = await postResponse.json()\r\n\r\n            getMessage(postData.message)\r\n            setIsLoading(false)\r\n            getPosts()\r\n        } catch (err) {\r\n            console.log(err)\r\n            getMessage(\"Nieco sa pokazilo\")\r\n            setIsLoading(false)\r\n        }\r\n    }\r\n\r\n    const handlePostDelete = async (id) => {\r\n        setShowModal(true)\r\n        setIsLoading(true)\r\n\r\n        try {\r\n            const postResponse = await deletePost(token, id)\r\n            const postData = await postResponse.json()\r\n\r\n            getMessage(postData.message)\r\n            setIsLoading(false)\r\n            getPosts()\r\n\r\n        } catch (err) {\r\n            console.log(err)\r\n            getMessage(\"Nieco sa pokazilo\")\r\n            setIsLoading(false)\r\n        }\r\n    }\r\n\r\n    const resetBlog = () => {\r\n        setPost(null)\r\n    }\r\n\r\n    return (\r\n        <BlogContext.Provider\r\n            value={{\r\n                posts,\r\n                post,\r\n                postsCount,\r\n                getPosts,\r\n                createPost,\r\n                getPost,\r\n                handlePostUpdate,\r\n                handlePostDelete,\r\n                resetBlog,\r\n            }}\r\n        >\r\n            {children}\r\n        </BlogContext.Provider>\r\n    )\r\n}\r\n\r\nexport default BlogProvider"],"sourceRoot":""}