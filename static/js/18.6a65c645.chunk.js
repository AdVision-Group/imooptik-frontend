(this.webpackJsonpimooptik=this.webpackJsonpimooptik||[]).push([[18],{70:function(e,n,t){"use strict";t.r(n),t.d(n,"UserContext",(function(){return v}));var a=t(1),s=t(7),r=t.n(s),c=t(12),o=t(32),i=t(19),u=t(5),l=t(0),d=t(4),p=t(8),h=t(17),f=function(e){var n=new Headers;n.append("auth-token",e);var t={method:"GET",headers:n,redirect:"follow"};return fetch("".concat("http://195.110.58.166:8080","/api/admin/users"),t)},m=function(e,n){var t=new Headers;t.append("auth-token",e),t.append("Content-Type","application/json");var a={method:"GET",headers:t,redirect:"follow"};return fetch("".concat("http://195.110.58.166:8080","/api/admin/users/").concat(n),a)},b=function(e,n){var t=n._id,a=n.address,s=n.admin,r=n.city,c=n.country,o=n.email,i=n.lenses,u=i.cylinder,l=i.cylinderAxes,d=i.diopters,p=i.distance,h=n.name,f=n.phone,m=n.psc,b=n.premises,g=new Headers;g.append("auth-token",e);var j={method:"PATCH",headers:g,body:JSON.stringify({address:a||" ",admin:s,premises:b,city:r||" ",country:c||" ",email:o,lenses:{cylinder:u,cylinderAxes:l,diopters:d,distance:p},name:h,phone:f||" ",psc:m||" "}),redirect:"follow"};return fetch("".concat("http://195.110.58.166:8080","/api/admin/users/").concat(t),j)},g=function(e,n){console.log(n);var t=n.name,a=n.email,s=new Headers;s.append("auth-token",e),s.append("Content-Type","application/json");var r={method:"POST",headers:s,body:JSON.stringify({email:a,name:t}),redirect:"follow"};return fetch("".concat("http://195.110.58.166:8080","/api/auth/register"),r)},j=function(e,n){console.log(n);var t=n.name,a=n.email,s=n.password,r=n.premises,c=n.admin,o=new Headers;o.append("auth-token",e),o.append("Content-Type","application/json");var i={method:"POST",headers:o,body:JSON.stringify({admin:c,email:a,name:t,premises:r,password:s}),redirect:"follow"};return fetch("".concat("http://195.110.58.166:8080","/api/auth/register"),i)},O={address:"",admin:0,premises:0,boughtProducts:{},city:"",country:"",date:"",email:"",finishedRegistration:!1,lenses:{cylinder:[0,0],cylinderAxes:[0,0],diopters:[0,0],distance:[0,0]},name:"",orders:[],phone:"",psc:"",tempUser:!1,totalSpent:0,watchList:[],fName:"",lName:"",password:"",confirmPassword:""},v=Object(l.createContext)({isUpdating:!1,activeIndex:0,handleChangeFilterItem:function(){},filterItems:[],totalCount:0,users:null,user:null,getUsers:function(){},getUser:function(){},handleChange:function(){},handleDioptersChange:function(){},handleDistanceChange:function(){},handleCylinderChange:function(){},handleCylinderAxesChange:function(){},updateUser:function(){},resetUser:function(){},formToShow:0,switchFormButtons:[],toggleUserForm:function(){},createUser:function(){}});n.default=function(e){var n=e.children,t=Object(d.g)().push,s=Object(l.useContext)(p.a).token,x=Object(l.useContext)(h.a),y=x.closeModal,k=x.getMessage,w=x.setIsLoading,C=x.setShowModal,N=Object(l.useState)(O),U=Object(u.a)(N,2),S=U[0],A=U[1],z=Object(l.useState)(null),T=Object(u.a)(z,2),I=T[0],F=T[1],H=Object(l.useState)(0),P=Object(u.a)(H,2),D=P[0],J=P[1],Z=Object(l.useState)(!1),E=Object(u.a)(Z,2),M=E[0],B=E[1],G=Object(l.useState)(0),L=Object(u.a)(G,2),R=L[0],_=L[1],q=Object(l.useState)(0),K=Object(u.a)(q,2),Q=K[0],V=K[1];Object(l.useEffect)((function(){A(Object(i.a)(Object(i.a)({},S),{},{name:S.fName+" "+S.lName}))}),[S.fName,S.lName]);var W=function(){var e=Object(c.a)(r.a.mark((function e(){var n,t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),C(!0),e.prev=2,e.next=5,f(s);case 5:return n=e.sent,e.next=8,n.json();case 8:t=e.sent,console.log(t),t.users?(F(t.users),J(t.count),w(!1),y()):(k(t.message),w(!1)),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(2),console.log(e.t0),k("Nieco sa pokazilo"),w(!1);case 18:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Object(c.a)(r.a.mark((function e(n){var t,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),C(!0),B(!0),e.prev=3,e.next=6,m(s,n);case 6:return t=e.sent,e.next=9,t.json();case 9:(a=e.sent).user?(A(Object(i.a)(Object(i.a)(Object(i.a)({},S),a.user),{},{lenses:{cylinder:a.user.lenses.cylinder.length?a.user.lenses.cylinder:[0,0],cylinderAxes:a.user.lenses.cylinderAxes.length?a.user.lenses.cylinderAxes:[0,0],diopters:a.user.lenses.diopters.length?a.user.lenses.diopters:[0,0],distance:a.user.lenses.distance.length?a.user.lenses.distance:[0,0]},fName:a.user.name?a.user.name.split(" ")[0]:"",lName:a.user.name?a.user.name.split(" ")[1]:""})),w(!1),y()):(k(a.message),w(!1)),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(3),console.log(e.t0),k("Nieco sa pokazilo"),w(!1);case 18:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(n){return e.apply(this,arguments)}}(),Y=function(){var e=Object(c.a)(r.a.mark((function e(n){var a,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),C(!0),console.log(n),e.prev=3,e.next=6,b(s,n);case 6:return a=e.sent,e.next=9,a.json();case 9:c=e.sent,console.log(c),c.error&&(w(!1),k(c.message)),w(!1),y(),t("/dashboard/zakaznici"),W(),e.next=23;break;case 18:e.prev=18,e.t0=e.catch(3),console.log(e.t0),k("Nieco sa pokazilo"),w(!1);case 23:case"end":return e.stop()}}),e,null,[[3,18]])})));return function(n){return e.apply(this,arguments)}}(),$=function(){var e=Object(c.a)(r.a.mark((function e(n){var a,c,o,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w(!0),C(!0),e.prev=2,0!==Q){e.next=21;break}return e.next=6,g(s,n);case 6:return a=e.sent,e.next=9,a.json();case 9:if(c=e.sent,console.log(c),!c.error){e.next=15;break}return k(c.message),w(!1),e.abrupt("return");case 15:w(!1),W(),t("/dashboard/zakaznici"),y(),e.next=36;break;case 21:return e.next=23,j(s,n);case 23:return o=e.sent,e.next=26,o.json();case 26:if(i=e.sent,console.log(i),!i.error){e.next=32;break}return k(i.message),w(!1),e.abrupt("return");case 32:w(!1),W(),t("/dashboard/zakaznici"),y();case 36:e.next=43;break;case 38:e.prev=38,e.t0=e.catch(2),console.log(e.t0),k("Nieco sa pokazilo"),w(!1);case 43:case"end":return e.stop()}}),e,null,[[2,38]])})));return function(n){return e.apply(this,arguments)}}();return Object(a.jsx)(v.Provider,{value:{isUpdating:M,activeIndex:R,handleChangeFilterItem:function(e){_(e)},filterItems:[{id:0,name:"Z\xe1kaznici",filter:0},{id:1,name:"Zamestnanci 1",filter:1},{id:2,name:"Zamestnanci 2",filter:2},{id:3,name:"Admin 3",filter:3}],users:I,user:S,totalCount:D,getUsers:W,getUser:X,handleChange:function(e){var n=e.target,t=n.name,a=n.value;A(Object(i.a)(Object(i.a)({},S),{},Object(o.a)({},t,a)))},handleDioptersChange:function(e,n){var t=S.lenses.diopters;t[n]=Number(e.target.value),A(Object(i.a)(Object(i.a)({},S),{},{lenses:Object(i.a)(Object(i.a)({},S.lenses),{},{diopters:t})}))},handleDistanceChange:function(e,n){var t=S.lenses.distance;t[n]=Number(e.target.value),A(Object(i.a)(Object(i.a)({},S),{},{lenses:Object(i.a)(Object(i.a)({},S.lenses),{},{distance:t})}))},handleCylinderChange:function(e,n){var t=S.lenses.cylinder;t[n]=Number(e.target.value),A(Object(i.a)(Object(i.a)({},S),{},{lenses:Object(i.a)(Object(i.a)({},S.lenses),{},{cylinder:t})}))},handleCylinderAxesChange:function(e,n){var t=S.lenses.cylinderAxes;t[n]=Number(e.target.value),A(Object(i.a)(Object(i.a)({},S),{},{lenses:Object(i.a)(Object(i.a)({},S.lenses),{},{cylinderAxes:t})}))},updateUser:Y,resetUser:function(){A(Object(i.a)({},O)),B(!1),V(0)},formToShow:Q,switchFormButtons:[{name:"Z\xe1kazn\xedk"},{name:"Admin"}],toggleUserForm:function(e,n){e.preventDefault(),V(n)},createUser:$},children:n})}}}]);
//# sourceMappingURL=18.6a65c645.chunk.js.map