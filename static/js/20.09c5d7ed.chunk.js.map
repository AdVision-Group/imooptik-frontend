{"version":3,"sources":["utils/warehouse.utils.jsx","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","context/order/order.context.jsx"],"names":["brands","retailNames","retailNamesTabs","id","name","glassesColors","glassesMaterials","glassesShapes","formatPrice","price","toString","value","includes","split","length","Number","formatfloatNumber","number","_toConsumableArray","arr","Array","isArray","arrayLikeToArray","iter","Symbol","iterator","Object","from","unsupportedIterableToArray","TypeError","OrderContext","createContext","step","order","cart","selectedProduct","setOrder","addUser","addProduct","addProductDiscount","addLensesParameters","deleteProduct","addLenses","addLensesDiscount","resetOrder","changeStep","selectProduct","createCombinedProducts","incrementQuantity","decrementQuantity","incrementProductQuantity","decrementProductQuantity","OrderProvider","children","token","useContext","AuthContext","LoadingModalContext","closeModal","getMessage","setIsLoading","setShowModal","useState","setStep","setCart","setSelectedProduct","addCombinedProducts","combinedProductsArr","combinedProducts","console","log","newStepString","a","forEach","item","productQuant","push","product","isPseudo","_id","discount","flat","lenses","lens","lensesQuant","contactLenses","myHeaders","Headers","append","raw","JSON","stringify","requestOptions","method","headers","body","redirect","fetch","process","response","json","data","messageSK","Provider","user","productObj","prevValue","idx","type","newCart","map","index","keys","lensesObj","productIdx","handleSelectProduct","filter","setTimeout","Math","floor","random","event","stopPropagation"],"mappings":"sGAAA,gRAAO,IAAMA,EAAS,CAClB,SACA,kBACA,UACA,WACA,YACA,WACA,UACA,eACA,mBACA,UACA,gBACA,OACA,kBACA,OACA,iBACA,SACA,kBACA,QACA,SACA,QACA,iBACA,WACA,QACA,QACA,QACA,UACA,YACA,SACA,aACA,UACA,SACA,cACA,WACA,SACA,SACA,OACA,eACA,WACA,SACA,SACA,WACA,SACA,oBACA,QACA,oBACA,QACA,eACA,UACA,sBACA,QACA,YACA,cACA,WACA,iBACA,UACA,SAoBSC,EAAc,CACvB,QACA,qBACA,0BACA,8BACA,sBACA,8BACA,yBAGSC,EAAkB,CAC3B,CACIC,GAAI,EACJC,KAAM,eAEV,CACID,GAAI,EACJC,KAAM,sBAEV,CACID,GAAI,EACJC,KAAM,2BAEV,CACID,GAAI,EACJC,KAAM,+BAEV,CACID,GAAI,EACJC,KAAM,uBAEV,CACID,GAAI,EACJC,KAAM,+BAEV,CACID,GAAI,EACJC,KAAM,0BAIDC,EAAgB,CACzB,iBACA,WACA,kBACA,UACA,WACA,gBACA,WACA,aACA,YACA,UACA,cAGSC,EAAmB,CAC5B,YACA,MACA,WACA,OACA,SACA,SAGSC,EAAgB,CACzB,QACA,UACA,WACA,UACA,OACA,WACA,aACA,YACA,2BACA,WACA,qBAGSC,EAAc,WAAiB,IAAhBC,EAAe,uDAAP,GAChCA,EAAMC,WACN,IAAIC,EAAQ,EACZ,OAAIF,EAAMG,SAAS,KACoB,IAA/BH,EAAMI,MAAM,KAAK,GAAGC,QACpBH,EAAQF,EAAMI,MAAM,KAAK,GAAKJ,EAAMI,MAAM,KAAK,GAAK,IAC7CE,OAAOJ,KAEdA,EAAQF,EAAMI,MAAM,KAAK,GAAKJ,EAAMI,MAAM,KAAK,GACxCE,OAAOJ,IAGXI,OAAe,IAARN,IAITO,EAAoB,SAAAC,GAG7B,OAAIA,EAAOL,SAAS,KACRK,EAAOJ,MAAM,KAAK,GAAK,IAAMI,EAAOJ,MAAM,KAAK,GAGhDI,I,0FC7KA,SAASC,EAAmBC,GACzC,OCJa,SAA4BA,GACzC,GAAIC,MAAMC,QAAQF,GAAM,OAA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","file":"static/js/20.09c5d7ed.chunk.js","sourcesContent":["export const brands = [\n    \"Adidas\",\n    \"Armani Exchange\",\n    \"Arnette\",\n    \"Blackfin\",\n    \"Blumarine\",\n    \"Burberry\",\n    \"Bvlgari\",\n    \"Calvin Klein\",\n    \"Carolina Herrera\",\n    \"Carrera\",\n    \"David Beckham\",\n    \"Dior\",\n    \"Dolce & Gabbana\",\n    \"Elle\",\n    \"Emporio Armani\",\n    \"Esprit\",\n    \"Etnia Barcelona\",\n    \"Fendi\",\n    \"Fossil\",\n    \"Furla\",\n    \"Giorgio Armani\",\n    \"Givenchy\",\n    \"Gucci\",\n    \"Guess\",\n    \"H.I.S\",\n    \"Hawkers\",\n    \"Hugo Boss\",\n    \"Jaguar\",\n    \"Jimmy Choo\",\n    \"Lacoste\",\n    \"Liu Jo\",\n    \"Marc Jacobs\",\n    \"Max Mara\",\n    \"Max&Co\",\n    \"Meller\",\n    \"Mexx\",\n    \"Michael Kors\",\n    \"Moschino\",\n    \"Oakley\",\n    \"Persol\",\n    \"Polaroid\",\n    \"Police\",\n    \"Polo Ralph Lauren\",\n    \"Prada\",\n    \"Prada Linea Rossa\",\n    \"Ralph\",\n    \"Ralph Lauren\",\n    \"Ray-Ban\",\n    \"Salvatore Ferragamo\",\n    \"Smith\",\n    \"Strellson\",\n    \"Tiffany&Co.\",\n    \"Tom Ford\",\n    \"Tommy Hilfiger\",\n    \"Versace\",\n    \"Vogue\"\n]\n\nexport const lensesBrands = [\n    \"Acuvue\",\n    \"Adore\",\n    \"Air Optix\",\n    \"Biofinity\",\n    \"Biomedics\",\n    \"Clariti\",\n    \"ColourVue\",\n    \"Comfilcon A\",\n    \"Dailies\",\n    \"Freshlook\",\n    \"Lenjoy\",\n    \"Proclear\",\n    \"Purevision\",\n    \"Soflens\",\n]\n\nexport const retailNames = [\n    \"eshop\",\n    \"Centrálny sklad\",\n    \"Obchodná, Bratislava\",\n    \"Miletičova, Bratislava\",\n    \"Vajnory, Bratislava\",\n    \"Vajnorská 53, Bratislava\",\n    \"OC Branč, Senica\"\n]\n\nexport const retailNamesTabs = [\n    {\n        id: 0,\n        name: \"Všetky\",\n    },\n    {\n        id: 1,\n        name: \"Centrálny sklad\",\n    },\n    {\n        id: 2,\n        name: \"Obchodná, Bratislava\",\n    },\n    {\n        id: 3,\n        name: \"Miletičova, Bratislava\",\n    },\n    {\n        id: 4,\n        name: \"Vajnory, Bratislava\",\n    },\n    {\n        id: 5,\n        name: \"Vajnorská 53, Bratislava\",\n    },\n    {\n        id: 6,\n        name: \"OC Branč, Senica\",\n    },\n]\n\nexport const glassesColors = [\n    \"Čierná\",\n    \"Modrá\",\n    \"Červená\",\n    \"Sivá\",\n    \"Zlatá\",\n    \"Strieborná\",\n    \"Hnedá\",\n    \"Fialová\",\n    \"Zelená\",\n    \"Sedá\",\n    \"Bordová\",\n]\n\nexport const glassesMaterials = [\n    \"Acetát\",\n    \"Kov\",\n    \"Titán\",\n    \"TR90\",\n    \"Patent\",\n    \"Optyl\",\n]\n\nexport const glassesShapes = [\n    \"Pilot\",\n    \"Squared\",\n    \"Browline\",\n    \"Cat eye\",\n    \"Tiny\",\n    \"Oversize\",\n    \"Okrúhle\",\n    \"Oválne\",\n    \"Obdĺžnikové\",\n    \"Flat top\",\n    \"Špeciálne\"\n]\n\nexport const formatPrice = (price = \"\") => {\n    price.toString()\n    let value = 0\n    if (price.includes(',')) {\n        if (price.split(',')[1].length === 1) {\n            value = price.split(',')[0] + price.split(',')[1] + \"0\"\n            return Number(value)\n        } else {\n            value = price.split(',')[0] + price.split(',')[1]\n            return Number(value)\n        }\n    } else {\n        return Number(price * 100)\n    }\n}\n\nexport const formatfloatNumber = number => {\n    let value = 0\n\n    if (number.includes(',')) {\n        value = number.split(',')[0] + '.' + number.split(',')[1]\n        return value\n    } else {\n        return number\n    }\n}","import arrayWithoutHoles from \"@babel/runtime/helpers/esm/arrayWithoutHoles\";\nimport iterableToArray from \"@babel/runtime/helpers/esm/iterableToArray\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableSpread from \"@babel/runtime/helpers/esm/nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import React, { createContext, useState, useContext } from 'react'\nimport { LoadingModalContext } from '../loading-modal/loading-modal.contenxt'\nimport { AuthContext } from '../auth/auth.context'\n\nimport {formatPrice} from '../../utils/warehouse.utils'\n\nexport const OrderContext = createContext({\n    step: \"\",\n    order: {},\n    cart: [],\n    selectedProduct: null,\n    setOrder: () => { },\n    addUser: () => { },\n    addProduct: () => { },\n    addProductDiscount: () => { },\n    addLensesParameters: () => { },\n    deleteProduct: () => { },\n    addLenses: () => { },\n    addLensesDiscount: () => { },\n    resetOrder: () => { },\n    changeStep: () => { },\n    selectProduct: () => { },\n    createCombinedProducts: () => { },\n    incrementQuantity: () => { },\n    decrementQuantity: () => { },\n    incrementProductQuantity: () => {},\n    decrementProductQuantity: () => {},\n})\n\nconst OrderProvider = ({ children }) => {\n    const { token } = useContext(AuthContext)\n    const { closeModal, getMessage, setIsLoading, setShowModal } = useContext(LoadingModalContext)\n    const [step, setStep] = useState('select-user')\n    const [order, setOrder] = useState({})\n    const [cart, setCart] = useState([])\n    const [selectedProduct, setSelectedProduct] = useState(null)\n\n    const addUser = (user) => {\n        setOrder({\n            ...order,\n            user: user\n        })\n    }\n\n    const addCombinedProducts = (combinedProductsArr) => {\n\n        setOrder({\n            ...order,\n            combinedProducts: [\n                // ...(order?.combinedProducts) && { ...order?.combinedProducts },\n                ...combinedProductsArr\n            ]\n        })\n    }\n\n    const selectProduct = (productIdx, event) => {\n        if (selectedProduct === productIdx) {\n            setSelectedProduct(null)\n        } else {\n            setSelectedProduct(productIdx)\n        }\n    }\n\n    const addProduct = (productObj) => {\n        setCart(prevValue => [\n            ...prevValue,\n            { product: productObj, productQuant: 1 }\n        ])\n    }\n\n    const addProductDiscount = (idx, type, value) => {\n        if (value === \"\") {\n            const newCart = cart.map((item, index) => {\n                if (idx === index) {\n                    if (Object.keys(item.discount).length > 1) {\n                        delete item.discount[\"product\"]\n                        return item\n                    } else {\n                        delete item[\"discount\"]\n                        return item\n                    }\n                } else {\n                    return item\n                }\n            })\n            setCart(newCart)\n        } else {\n            const newCart = cart.map((item, index) => {\n                if (idx === index) {\n                    return {\n                        ...item,\n                        discount: {\n                            ...item.discount,\n                            product: {\n                                [type]: value\n                            }\n                        }\n                    }\n                } else {\n                    return item\n                }\n            })\n            setCart(newCart)\n        }\n    }\n\nconsole.log(cart)\n\n    const addLensesDiscount = (idx, type, value) => {\n        if (value === \"\") {\n            const newCart = cart.map((item, index) => {\n                if (idx === index) {\n                    if (Object.keys(item.discount).length > 1) {\n                        delete item.discount[\"product\"]\n                        return item\n                    } else {\n                        delete item[\"discount\"]\n                        return item\n                    }\n                } else {\n                    return item\n                }\n            })\n            setCart(newCart)\n        } else {\n            const newCart = cart.map((item, index) => {\n                if (idx === index) {\n                    return {\n                        ...item,\n                        discount: {\n                            ...item.discount,\n                            lenses: {\n                                [type]: value\n                            }\n                        }\n                    }\n                } else {\n                    return item\n                }\n            })\n            setCart(newCart)\n        }\n    }\n\n    const addLensesParameters = (idx, lensesObj) => {\n        const newCart = cart.map((item, index) => {\n            if (idx === index) {\n                if (Object.keys(lensesObj).length > 0) {\n                    return {\n                        ...item,\n                        lenses: {\n                            ...lensesObj\n                        }\n                    }\n                } else {\n                    return item\n                }\n            } else {\n                return item\n            }\n        })\n        setCart(newCart)\n    }\n\n    const deleteProduct = (productIdx, handleSelectProduct) => {\n        const newCart = cart.filter((item, idx) => idx !== productIdx)\n        setCart(newCart)\n        if (!handleSelectProduct) return\n        setTimeout(() => {\n            handleSelectProduct(null)\n\n        }, 100)\n    }\n\n    const addLenses = (lensesObj) => {\n        if (lensesObj === null && selectedProduct === null) return\n        if (selectedProduct !== null) {\n            const newCart = cart.map((item, idx) => {\n                if (idx === selectedProduct) {\n                    if (lensesObj === null) {\n                        delete item[\"lensesQuant\"]\n                        delete item[\"lens\"]\n                        return item\n                    } else {\n                        return ({\n                            ...item,\n                            lens: lensesObj,\n                            lensesQuant: 2\n                        })\n                    }\n                } else {\n                    return item\n                }\n            })\n            setCart(newCart)\n        } else {\n            setCart(prevValue => [\n                ...prevValue,\n                {\n                    product: {\n                        _id: Math.floor(Math.random() * 10),\n                        isPseudo: true\n                    },\n                    lens: lensesObj,\n                    lensesQuant: 1\n                }\n            ])\n        }\n\n        setSelectedProduct(null)\n    }\n\n    const incrementProductQuantity = (prevValue, idx, event) => {\n        event.stopPropagation()\n        const newCart = cart.map((item, index) => {\n            if (idx === index) {\n                return ({\n                    ...item,\n                    productQuant: prevValue + 1\n                })\n            } else {\n                return item\n            }\n        })\n        setCart(newCart)\n    }\n\n    const incrementQuantity = (prevValue, idx, event) => {\n        event.stopPropagation()\n        const newCart = cart.map((item, index) => {\n            if (idx === index) {\n                return ({\n                    ...item,\n                    lensesQuant: prevValue + 1\n                })\n            } else {\n                return item\n            }\n        })\n        setCart(newCart)\n    }\n    \n    const decrementProductQuantity = (prevValue, idx, event) => {\n        event.stopPropagation()\n\n        if (prevValue === 1) return\n        const newCart = cart.map((item, index) => {\n            if (idx === index) {\n                return ({\n                    ...item,\n                    productQuant: prevValue - 1\n                })\n            } else {\n                return item\n            }\n        })\n        setCart(newCart)\n    }\n    const decrementQuantity = (prevValue, idx, event) => {\n        event.stopPropagation()\n\n        if (prevValue === 1) return\n        const newCart = cart.map((item, index) => {\n            if (idx === index) {\n                return ({\n                    ...item,\n                    lensesQuant: prevValue - 1\n                })\n            } else {\n                return item\n            }\n        })\n        setCart(newCart)\n    }\n\n    const resetOrder = () => {\n        setOrder({})\n    }\n\n    const changeStep = (newStepString) => {\n        setStep(newStepString)\n    }\n\n    const createCombinedProducts = async () => {\n        if (cart.length === 0) return\n        setIsLoading(true)\n        setShowModal(true)\n\n        const combinedProductsArr = []\n        \n        cart.forEach(item => {\n            [...Array(item.productQuant)].forEach(() => {\n                combinedProductsArr.push(({\n                    product: item.product.isPseudo ? \"pseudo\" : item.product._id,\n                    ...(item.discount) && { discount: { \n                        ...(item.discount.product) && { product: item.discount.product['flat'] ? { flat: formatPrice(item.discount.product.flat)} : {...item.discount.product} },\n                        ...(item.discount.lenses) && { lenses: item.discount.lenses['flat'] ? { flat: formatPrice(item.discount.lenses.flat)} : {...item.discount.lenses} },\n                     } },\n                    ...(item.lens) && { lens: item.lens._id },\n                    ...(item.lensesQuant) && { lensesQuant: item.lensesQuant },\n                    // ...(item.lens && order.user) && { lenses: order.user.lenses },\n                    ...(item.lenses) && { contactLenses: item.lenses }\n                }))\n            })\n\n        })\n\n\n        console.log(combinedProductsArr)\n        \n        const myHeaders = new Headers();\n        myHeaders.append(\"auth-token\", token);\n        myHeaders.append(\"Content-Type\", \"application/json\");\n\n\n        const raw = JSON.stringify({\n            combinedProducts: combinedProductsArr\n        })\n\n        const requestOptions = {\n            method: 'POST',\n            headers: myHeaders,\n            body: raw,\n            redirect: 'follow'\n        };\n\n        try {\n            // /api/store/combinedProducts/createMany\n            const response = await fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/store/combinedProducts/createMany`, requestOptions)\n            const data = await response.json()\n\n            console.log(data)\n\n            if (data.combinedProducts) {\n                addCombinedProducts(data.combinedProducts)\n                closeModal()\n                changeStep(\"summary\")\n                return\n            }\n\n            setIsLoading(false)\n            getMessage(data.messageSK)\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    return (\n        <OrderContext.Provider\n            value={{\n                step,\n                order,\n                cart,\n                selectedProduct,\n                setOrder,\n                addUser,\n                addProduct,\n                addProductDiscount,\n                addLensesParameters,\n                deleteProduct,\n                addLenses,\n                addLensesDiscount,\n                resetOrder,\n                changeStep,\n                selectProduct,\n                createCombinedProducts,\n                incrementQuantity,\n                decrementQuantity,\n                incrementProductQuantity,\n                decrementProductQuantity\n            }}\n        >\n            {children}\n        </OrderContext.Provider>\n    )\n}\n\nexport default OrderProvider"],"sourceRoot":""}