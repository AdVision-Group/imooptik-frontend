{"version":3,"sources":["context/warehouse/warehouse.utils.jsx","context/image/image.queries.jsx","context/image/image.context.jsx","context/warehouse/warehouse.queries.jsx","context/warehouse/warehouse.context.jsx"],"names":["initProductObj","name","description","price","type","brand","soldAmount","available","eanCode","colorCode","colorName","imagePath","image","eshop","specs","frameColor","frameMaterial","frameStyle","lensColor","sex","size","initLensesObj","id","dioptersRange","cylinderRange","retailNames","productCategories","value","brands","formatPrice","includes","split","length","Number","uploadImage","token","img","imgName","imgAlt","myHeaders","Headers","append","requestOptions","method","headers","body","JSON","stringify","redirect","fetch","process","fetchFilteredImages","limit","skip","sortBy","dateCreated","deleteImage","ImageContext","createContext","isDisabled","images","selectedImage","getImages","handleImage","handleDeleteImage","setSelectedImage","getNextImages","getPrevImage","ImageProvider","children","useContext","LoadingModalContext","getMessage","setIsLoading","setShowModal","closeModal","AuthContext","useState","setIsDisabled","setImages","setSkip","setImage","close","a","response","json","data","console","log","_id","addToSkip","message","e","preventDefault","respone","Provider","fetchProducts","fetchSingleProduct","fetchLenses","fetchSingleLenses","delLense","postLenses","newProduct","map","val","patchLenses","postProduct","raw","patchProduct","product","deleteProduct","WarehouseContext","formToShow","toggleProductForms","showUpdateForm","isUpdating","activeCategoryIndex","categories","getEanCode","toggleDraft","handleCategoryChange","handleAvailableChange","handleSizeChange","selectImage","products","handleChange","handleSpecsChange","resetProduct","lenses","lensesArr","handleLensesChange","handleLensesDioptersRangeChange","handleLensesCylinderRangeChange","totalCount","getProducts","getSingleProduct","createNewProduct","handleProductDelete","updateProduct","createNewLenses","getLenses","getSigleLenses","updateLenses","deleteLenses","lensesParameters","handleParameterChange","WarehouseProvider","currentUser","push","useHistory","setTotalCount","setIsUpdating","setActiveCategoryIndex","setFormToShow","admin","setProduct","setProducts","setLenses","setLensesArr","diopters","curvature","average","setLensesParameters","count","error","premises","toFixed","filter","num","idx","productToAdd","toString","success","productToUpdate","switchFormButtons","formName","code","arr","target","imgId"],"mappings":"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","file":"static/js/0.07e57b04.chunk.js","sourcesContent":["export const initProductObj = {\n    // Product id\n    // Product name: Ultra glasses\n    name: \"\",\n    // Product description: Awesome product\n    description: \"\",\n    // price in cents: 1050 => 10.50\n    price: '0',\n    // product type: glesses, lenses, ...\n    type: 1,\n    // brand name: Adidas\n    brand: \"\",\n    //kolko sa ich zatial predalo\n    soldAmount: 0,\n    //kolko je kusov na ktorej prevádzke [arr] \n    available: [0],\n    //ean kod = unikatny kod ktory ma kazdy produkt\n    eanCode: \"\",\n    //farebny kod, ktory spolu s ean kodom tvori \"identitu\" produktu. Moze existovat viacero\n    //produktov s rovnakym ean kodom ale rozlicnym color kodom. Je to takto urobené kvôli skladovému\n    //systému napr. mam na sklade iny pocet zltych ramov isteho druhu ako ciernych\n    colorCode: \"\",\n    //meno farby\n    colorName: \"\",\n    //path k obrazku na serveri (toto bude mozno array este sa uvidi)\n    imagePath: \"\",\n    image: null,\n    eshop: true,\n\n    specs: {\n        frameColor: \"\",\n        frameMaterial: \"\",\n        frameStyle: \"\",\n        lensColor: \"\",\n        sex: \"M\",\n        size: [0, 0, 0],\n    }\n}\n\nexport const initLensesObj = {\n    // id [5fd4cae9f9432022689dd223]\n    id: \"\",\n    // Lense name\n    name: \"\",\n    // Paradne sosovky\n    description: \"\",\n    //vsetky skla su dostupne len pre isty interval dioptrií a cylindrov, ak si zvolím ze mam dioptrie\n    //mimo tohto intervalu tak si tieto skla k mojim okuliarom vybrat nemozem\n    dioptersRange: [\"0\", \"0\"],\n    cylinderRange: [\"0\", \"0\"],\n    //cena v centoch\n    price: \"0\",\n    brand: \"\",\n    imagePath: ''\n}\n\nexport const retailNames = [\n    \"Obchodná 57, Bratislava\",\n    \"Miletičova 38, Bratislava\",\n    \"Vajnory, Bratislava\",\n    \"Senica, OC Branč\",\n    \"Trnava, City Aréna\"\n]\n\n// Category variables\nexport const productCategories = [\n    {\n        name: \"Dioptrické\",\n        value: 1\n    },\n    {\n        name: \"Slnečné\",\n        value: 2\n    },\n    {\n        name: \"Športové\",\n        value: 3\n    },\n    {\n        name: \"Šošovky\",\n        value: 4\n    },\n    {\n        name: \"Doplnky\",\n        value: 5\n    },\n]\n\n\n\nexport const resetProductObj = () => {\n    return initProductObj\n}\n\nexport const resetLensesObj = () => {\n    return initLensesObj\n}\n\nexport const brands = [\n    \"Adidas\",\n    \"Armani Exchange\",\n    \"Arnette\",\n    \"Blackfin\",\n    \"Blumarine\",\n    \"Burberry\",\n    \"Bvlgari\",\n    \"Calvin Klein\",\n    \"Carolina Herrera\",\n    \"Carrera\",\n    \"David Beckham\",\n    \"Dior\",\n    \"Dolce & Gabbana\",\n    \"Elle\",\n    \"Emporio Armani\",\n    \"Esprit\",\n    \"Etnia Barcelona\",\n    \"Fendi\",\n    \"Fossil\",\n    \"Furla\",\n    \"Giorgio Armani\",\n    \"Givenchy\",\n    \"Gucci\",\n    \"Guess\",\n    \"H.I.S\",\n    \"Hawkers\",\n    \"Hugo Boss\",\n    \"Jaguar\",\n    \"Jimmy Choo\",\n    \"Lacoste\",\n    \"Liu Jo\",\n    \"Marc Jacobs\",\n    \"Max Mara\",\n    \"Max&Co\",\n    \"Meller\",\n    \"Mexx\",\n    \"Michael Kors\",\n    \"Moschino\",\n    \"Oakley\",\n    \"Persol\",\n    \"Polaroid\",\n    \"Police\",\n    \"Polo Ralph Lauren\",\n    \"Prada\",\n    \"Prada Linea Rossa\",\n    \"Ralph\",\n    \"Ralph Lauren\",\n    \"Ray-Ban\",\n    \"Salvatore Ferragamo\",\n    \"Smith\",\n    \"Strellson\",\n    \"Tiffany&Co.\",\n    \"Tom Ford\",\n    \"Tommy Hilfiger\",\n    \"Versace\",\n    \"Vogue\"\n]\n\nexport const formatPrice = price => {\n    let value = 0\n    if (price.includes(',')) {\n        if (price.split(',')[1].length === 1) {\n            value = price.split(',')[0] + price.split(',')[1] + \"0\"\n            return Number(value)\n        } else {\n            value = price.split(',')[0] + price.split(',')[1]\n            return Number(value)\n        }\n    } else {\n        return Number(price * 100)\n    }\n}","export const uploadImage = (token, img, imgName, imgAlt) => {\n    const myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n    myHeaders.append(\"Content-Type\", \"application/json\");\n\n\n    const raw = JSON.stringify({ \"name\": imgName || \" \", \"alt\": imgAlt || \" \", 'image': img });\n\n    const requestOptions = {\n        method: 'POST',\n        headers: myHeaders,\n        body: raw,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/images/upload`, requestOptions)\n}\n\nexport const fetchImages = () => {\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/images`)\n}\n\nexport const fetchFilteredImages = (token, limit, skip) => {\n    const myHeaders = new Headers();\n    // myHeaders.append(\"auth-token\", token);\n    myHeaders.append(\"Content-Type\", \"application/json\");\n\n\n    const raw = JSON.stringify({\n        sortBy: {\n            dateCreated: -1\n        },\n        limit,\n        skip\n    });\n\n    const requestOptions = {\n        method: 'POST',\n        headers: myHeaders,\n        body: raw,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/images/filter`, requestOptions)\n}\n\nexport const deleteImage = (token, id) => {\n    const myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n\n    const requestOptions = {\n        method: 'DELETE',\n        headers: myHeaders,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/images/${id}`, requestOptions)\n}","import React, { createContext, useState, useContext } from 'react'\nimport { LoadingModalContext } from '../loading-modal/loading-modal.contenxt'\nimport { AuthContext } from '../auth/auth.context'\nimport { deleteImage, fetchImages, uploadImage, fetchFilteredImages } from './image.queries'\n\nexport const ImageContext = createContext({\n    isDisabled: false,\n    images: null,\n    selectedImage: null,\n    getImages: () => { },\n    handleImage: () => { },\n    handleDeleteImage: () => { },\n    setSelectedImage: () => { },\n    getNextImages: () => { },\n    getPrevImage: () => { }\n})\n\nconst ImageProvider = ({ children }) => {\n    const {\n        getMessage,\n        setIsLoading,\n        setShowModal,\n        closeModal\n    } = useContext(LoadingModalContext)\n\n    const { token } = useContext(AuthContext)\n\n    const [isDisabled, setIsDisabled] = useState(false)\n    const [images, setImages] = useState(null)\n    const [selectedImage, setSelectedImage] = useState(null)\n    const [limit, setLimit] = useState(4)\n    const [skip, setSkip] = useState(0)\n\n    const handleImage = async (img, imgName, imgAlt, setImage, close) => {\n        setShowModal(true)\n        setIsLoading(true)\n        setIsDisabled(true)\n\n        try {\n            const response = await uploadImage(token, img, imgName, imgAlt)\n            const data = await response.json()\n            console.log(data)\n\n            if (data.image) {\n                setSelectedImage(data.image)\n                setImage(data.image._id)\n                getImages()\n                close()\n            }\n\n            setShowModal(false)\n            setIsLoading(false)\n            setIsDisabled(false)\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n            setIsDisabled(false)\n        }\n    }\n\n    const getNextImages = async (addToSkip) => {\n        try {\n            if (images.length !== limit) return\n\n            const response = await fetchFilteredImages(token, limit, skip + addToSkip)\n            const data = await response.json()\n\n            if (data.images) {\n                setImages(data.images)\n\n                setSkip(skip + addToSkip)\n            }\n\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    const getPrevImage = async (addToSkip) => {\n        if (skip === 0) return\n        try {\n            const response = await fetchFilteredImages(token, limit, skip - addToSkip)\n            const data = await response.json()\n\n            if (data.images) {\n                setImages(data.images)\n\n                setSkip(skip - addToSkip)\n\n            }\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    const getImages = async () => {\n        setShowModal(true)\n        setIsLoading(true)\n\n        try {\n            // const response = await fetchImages()\n            const response = await fetchFilteredImages(token, limit, skip)\n\n            const data = await response.json()\n\n            if (data.images) {\n                setImages(data.images)\n            }\n\n            getMessage(data.message)\n            setIsLoading(false)\n            closeModal()\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    const handleDeleteImage = async (id, e) => {\n        e.preventDefault()\n        setShowModal(true)\n        setIsLoading(true)\n\n        try {\n            const respone = await deleteImage(token, id)\n            const data = await respone.json()\n\n            getMessage(data.message)\n            setIsLoading(false)\n            getImages()\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    return (\n        <ImageContext.Provider\n            value={{\n                isDisabled,\n                images,\n                selectedImage,\n                getImages,\n                handleImage,\n                handleDeleteImage,\n                setSelectedImage,\n                getNextImages,\n                getPrevImage\n            }}\n        >\n            {children}\n        </ImageContext.Provider>\n    )\n}\n\nexport default ImageProvider","export const fetchProducts = (token) => {\n    const myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n\n    const requestOptions = {\n        method: 'GET',\n        headers: myHeaders,\n        redirect: 'follow'\n    };\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/products`, requestOptions)\n}\n\nexport const fetchSingleProduct = (id) => {\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/store/products/${id}`)\n}\n\nexport const fetchLenses = (token) => {\n    var myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n\n\n    var requestOptions = {\n        method: 'GET',\n        headers: myHeaders,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/lenses`, requestOptions)\n}\n\nexport const fetchSingleLenses = (id) => {\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/store/lenses/${id}`)\n}\n\n\nexport const delLense = (token, id) => {\n    var myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n\n\n    var requestOptions = {\n        method: 'DELETE',\n        headers: myHeaders,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/lenses/${id}`, requestOptions)\n\n}\n\n\nexport const postLenses = (token, newProduct) => {\n\n    const {\n        brand,\n        cylinderRange,\n        description,\n        dioptersRange,\n        name,\n        price,\n        imagePath,\n        eshop\n    } = newProduct\n\n\n    const myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n    myHeaders.append(\"Content-Type\", \"application/json\");\n\n    const raw = JSON.stringify({\n        \"brand\": brand || \" \",\n        \"cylinderRange\": cylinderRange.map(val => Number(val)),\n        \"name\": name,\n        \"price\": Number(price),\n        \"description\": description,\n        \"image\": imagePath,\n        \"dioptersRange\": dioptersRange.map(val => Number(val)),\n        \"eshop\": eshop\n    });\n\n    const requestOptions = {\n        method: 'POST',\n        headers: myHeaders,\n        body: raw,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/lenses`, requestOptions)\n}\nexport const patchLenses = (token, newProduct) => {\n\n    const {\n        _id,\n        brand,\n        cylinderRange,\n        description,\n        dioptersRange,\n        name,\n        price,\n        imagePath,\n        eshop\n    } = newProduct\n\n    const myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n    myHeaders.append(\"Content-Type\", \"application/json\");\n\n    const raw = JSON.stringify({\n        \"brand\": brand || ' ',\n        \"cylinderRange\": cylinderRange.map(val => Number(val)),\n        \"name\": name,\n        \"price\": Number(price),\n        \"description\": description,\n        \"image\": imagePath,\n        \"dioptersRange\": dioptersRange.map(val => Number(val)),\n        \"eshop\": eshop\n    });\n\n    const requestOptions = {\n        method: 'PATCH',\n        headers: myHeaders,\n        body: raw,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/lenses/${_id}`, requestOptions)\n}\n\n\nexport const postProduct = (token, newProduct) => {\n    const {\n        available,\n        brand,\n        colorCode,\n        // colorName,\n        description,\n        eanCode,\n        eshop,\n        name,\n        price,\n        specs: {\n            frameColor,\n            frameMaterial,\n            frameStyle,\n            lensColor,\n            sex,\n        },\n        type,\n        imagePath\n    } = newProduct\n\n    const myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n    myHeaders.append(\"Content-Type\", \"application/json\");\n\n    let raw = {}\n\n    console.log(available)\n\n    if (type === 4 || type === 5) {\n        raw = JSON.stringify({\n            available: available.length > 1 ? [...available, 0] : available[0],\n            brand: brand || \" \",\n            colorCode: colorCode || \" \",\n            // colorName,\n            description: description || \" \",\n            eanCode,\n            eshop,\n            name,\n            price,\n            // specs: {\n            // frameColor: frameColor || \" \",\n            // frameMaterial: frameMaterial || \" \",\n            // frameStyle: frameStyle || \" \",\n            // lensColor: lensColor || \" \",\n            // sex,\n            // },\n            type,\n            image: imagePath\n        })\n    } else {\n        raw = JSON.stringify({\n            available: available.length > 1 ? [...available, 0] : available[0],\n            brand: brand || \" \",\n            colorCode: colorCode || \" \",\n            // colorName,\n            description: description || \" \",\n            eanCode,\n            eshop,\n            name,\n            price,\n            specs: {\n                frameColor: frameColor || \" \",\n                frameMaterial: frameMaterial || \" \",\n                frameStyle: frameStyle || \" \",\n                lensColor: lensColor || \" \",\n                sex,\n            },\n            type,\n            image: imagePath\n        })\n    }\n\n    console.log(raw)\n\n    const requestOptions = {\n        method: 'POST',\n        headers: myHeaders,\n        body: raw,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/products`, requestOptions)\n}\n\nexport const patchProduct = (token, product) => {\n    const {\n        available,\n        brand,\n        colorCode,\n        // colorName,\n        description,\n        eanCode,\n        eshop,\n        name,\n        price,\n        specs: {\n            frameColor,\n            frameMaterial,\n            frameStyle,\n            lensColor,\n            sex,\n        },\n        type,\n        imagePath,\n        _id\n    } = product\n\n    const myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n    myHeaders.append(\"Content-Type\", \"application/json\");\n\n    let raw = {}\n\n    if (type === 4 || type === 5) {\n        raw = JSON.stringify({\n            available: available.length > 1 ? [...available, 0] : available[0],\n            brand: brand || \" \",\n            colorCode: colorCode || \" \",\n            // colorName,\n            description: description || \" \",\n            eanCode,\n            eshop,\n            name,\n            price,\n            // specs: {\n            // frameColor: frameColor || \" \",\n            // frameMaterial: frameMaterial || \" \",\n            // frameStyle: frameStyle || \" \",\n            // lensColor: lensColor || \" \",\n            // sex,\n            // },\n            type,\n            image: imagePath\n        })\n    } else {\n        raw = JSON.stringify({\n            available: available.length > 1 ? [...available, 0] : available[0],\n            brand: brand || \" \",\n            colorCode: colorCode || \" \",\n            // colorName,\n            description: description || \" \",\n            eanCode,\n            eshop,\n            name,\n            price,\n            specs: {\n                frameColor: frameColor || \" \",\n                frameMaterial: frameMaterial || \" \",\n                frameStyle: frameStyle || \" \",\n                lensColor: lensColor || \" \",\n                sex,\n            },\n            type,\n            image: imagePath\n        })\n    }\n\n    console.log(raw)\n\n    const requestOptions = {\n        method: 'PATCH',\n        headers: myHeaders,\n        body: raw,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/products/${_id}`, requestOptions)\n}\n\nexport const deleteProduct = (token, id) => {\n    const myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n    myHeaders.append(\"Content-Type\", \"application/json\");\n\n    const requestOptions = {\n        method: 'DELETE',\n        headers: myHeaders,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/products/${id}`, requestOptions)\n\n}","import React, { createContext, useState, useContext } from 'react'\nimport { useHistory } from 'react-router-dom'\nimport { LoadingModalContext } from '../loading-modal/loading-modal.contenxt'\nimport { AuthContext } from '../auth/auth.context'\nimport { ImageContext } from '../image/image.context'\nimport {\n    fetchProducts,\n    postProduct,\n    deleteProduct,\n    patchProduct,\n    postLenses,\n    fetchLenses,\n    patchLenses,\n    delLense,\n    fetchSingleProduct,\n    fetchSingleLenses\n    // fetchFilteredProducts\n} from './warehouse.queries'\n\nimport {\n    initProductObj,\n    initLensesObj,\n    productCategories,\n    formatPrice\n} from './warehouse.utils'\n\n\n\nexport const WarehouseContext = createContext({\n    formToShow: 0,\n    toggleProductForms: () => { },\n    showUpdateForm: () => { },\n    isUpdating: false,\n    activeCategoryIndex: 0,\n    categories: [],\n    getEanCode: () => { },\n    toggleDraft: () => { },\n    handleCategoryChange: () => { },\n    handleAvailableChange: () => { },\n    handleSizeChange: () => { },\n    selectImage: () => { },\n    product: null,\n    products: null,\n    handleChange: () => { },\n    handleSpecsChange: () => { },\n    resetProduct: () => { },\n    lenses: null,\n    lensesArr: null,\n    handleLensesChange: () => { },\n    handleLensesDioptersRangeChange: () => { },\n    handleLensesCylinderRangeChange: () => { },\n    totalCount: 0,\n    getProducts: () => { },\n    getSingleProduct: () => { },\n    createNewProduct: () => { },\n    handleProductDelete: () => { },\n    updateProduct: () => { },\n    createNewLenses: () => { },\n    getLenses: () => { },\n    getSigleLenses: () => { },\n    updateLenses: () => { },\n    deleteLenses: () => { },\n    lensesParameters: {},\n    handleParameterChange: () => { }\n})\n\n\nconst WarehouseProvider = ({ children }) => {\n    const { token, currentUser } = useContext(AuthContext)\n    const { setIsLoading, setShowModal, getMessage, closeModal } = useContext(LoadingModalContext)\n    const { setSelectedImage } = useContext(ImageContext)\n    const { push } = useHistory()\n\n    // ------------------------\n\n    const [totalCount, setTotalCount] = useState(0)\n    const [isUpdating, setIsUpdating] = useState(false)\n    const [activeCategoryIndex, setActiveCategoryIndex] = useState(0)\n\n    // ------------------------\n\n    const switchFormButtons = [\n        {\n            name: \"Okuliare a i.\"\n        },\n        {\n            name: \"Sklá\"\n        }\n    ]\n    const [formToShow, setFormToShow] = useState(0)\n\n    // ------------------------\n\n    const [categories] = useState(productCategories)\n    const [product, setProduct] = useState(currentUser.admin === 1 ? initProductObj : { ...initProductObj, available: [0, 0, 0, 0] })\n    const [products, setProducts] = useState(null)\n\n    // ------------------------\n\n    const [lenses, setLenses] = useState(initLensesObj)\n    const [lensesArr, setLensesArr] = useState(null)\n\n    const [lensesParameters, setLensesParameters] = useState({\n        diopters: [0, 0],\n        curvature: 0,\n        average: 0\n    })\n\n    const handleParameterChange = (e, idx) => {\n        const { name, value } = e.target\n        let arr = lensesParameters.lenses[name]\n        arr[idx] = Number(value)\n        setLensesParameters({\n            ...lensesParameters,\n            [name]: arr\n        })\n    }\n\n    // ------------------------\n    // PRODUCT ACTIONS\n    // ------------------------\n\n    const getEanCode = (code) => {\n        setProduct({\n            ...product,\n            eanCode: code\n        })\n    }\n\n    const toggleProductForms = (e, idx) => {\n        e.preventDefault()\n        setFormToShow(idx)\n    }\n\n    const toggleDraft = () => {\n        setProduct({\n            ...product,\n            eshop: !product.eshop\n        })\n        setLenses({\n            ...lenses,\n            eshop: !product.eshop\n        })\n    }\n\n    const handleChange = (e) => {\n        const { name, value } = e.target\n        setProduct({\n            ...product,\n            [name]: value\n        })\n    }\n    const handleSpecsChange = (e) => {\n        const { name, value } = e.target\n        setProduct({\n            ...product,\n            specs: {\n                ...product.specs,\n                [name]: value\n            }\n        })\n    }\n\n    const handleCategoryChange = (value) => {\n        setActiveCategoryIndex(value)\n        setProduct({\n            ...product,\n            type: value\n        })\n    }\n\n    const handleAvailableChange = (e, idx) => {\n        let arr = product.available\n        arr[idx] = Number(e.target.value)\n        setProduct({\n            ...product,\n            available: arr\n        })\n    }\n\n    const handleSizeChange = (e, idx) => {\n        let arr = product.specs.size\n        arr[idx] = Number(e.target.value)\n        setProduct({\n            ...product,\n            specs: {\n                ...product.specs,\n                size: arr\n            }\n        })\n    }\n\n    const selectImage = (imgId) => {\n        setProduct({\n            ...product,\n            imagePath: imgId\n        })\n        setLenses({\n            ...lenses,\n            imagePath: imgId\n        })\n    }\n\n    const resetProduct = () => {\n        setProduct(currentUser.admin === 1 ? initProductObj : { ...initProductObj, available: [0, 0, 0, 0] })\n        setLenses(initLensesObj)\n        setSelectedImage(null)\n        setIsUpdating(false)\n        setActiveCategoryIndex(0)\n        setFormToShow(0)\n    }\n\n    const handleLensesChange = (e) => {\n        const { name, value } = e.target\n        setLenses({\n            ...lenses,\n            [name]: value\n        })\n    }\n\n    const handleLensesCylinderRangeChange = (e, idx) => {\n        let arr = lenses.cylinderRange\n        arr[idx] = Number(e.target.value)\n        setLenses({\n            ...lenses,\n            cylinderRange: arr\n        })\n    }\n\n    const handleLensesDioptersRangeChange = (e, idx) => {\n        let arr = lenses.dioptersRange\n        arr[idx] = Number(e.target.value)\n        setLenses({\n            ...lenses,\n            dioptersRange: arr\n        })\n    }\n\n    const showUpdateForm = (formName) => {\n        setFormToShow(formName)\n        setIsUpdating(true)\n\n    }\n\n    // ------------------------\n    // START GLASSES ACTIONS\n    // ------------------------\n\n    // Get all products\n    const getProducts = async () => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        try {\n            const response = await fetchProducts(token)\n            const data = await response.json()\n\n            if (data.products) {\n                setTotalCount(totalCount + data.count)\n                setProducts(data.products)\n                setIsLoading(false)\n                closeModal()\n                return\n            }\n\n            getMessage(data.message)\n            setIsLoading(false)\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    // Get single product\n\n    const getSingleProduct = async (id) => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        try {\n            const response = await fetchSingleProduct(id)\n            const data = await response.json()\n\n            if (data.error) {\n                getMessage(data.message)\n                setIsLoading(false)\n                return\n            }\n\n            if (data.product) {\n                console.log(data.product)\n                if (currentUser.admin === 1) {\n\n                    setProduct({\n                        ...product,\n                        ...data.product,\n                        specs: {\n                            ...product.specs,\n                            ...data.product.specs\n                        },\n                        imagePath: data.product.image._id,\n                        available: [data.product.available[currentUser.premises - 1]],\n                        price: (data.product.price / 100).toFixed(2)\n                    })\n                } else {\n                    setProduct({\n                        ...product,\n                        ...data.product,\n                        specs: {\n                            ...product.specs,\n                            ...data.product.specs\n                        },\n                        imagePath: data.product.image._id,\n                        available: data.product.available.filter((num, idx) => idx !== 4),\n                        price: (data.product.price / 100).toFixed(2)\n\n\n                    })\n                }\n                setActiveCategoryIndex(data.product.type)\n                setSelectedImage(data.product.image)\n                setIsUpdating(true)\n            }\n\n            closeModal()\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n\n    }\n\n    // Create Glasses\n    const createNewProduct = async (productToAdd) => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        try {\n            const response = await postProduct(token, {\n                ...productToAdd,\n                price: formatPrice(productToAdd.price.toString())\n            })\n            const data = await response.json()\n\n            console.log(data)\n\n            if (data.error) {\n                getMessage(data.message)\n                setIsLoading(false)\n                return\n            }\n\n            setIsLoading(false)\n            getMessage(data.success)\n            resetProduct()\n            push('/dashboard/obchod')\n            getProducts()\n            closeModal()\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    // Update Glasses\n    const updateProduct = async (productToUpdate) => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        try {\n            const response = await patchProduct(token, {\n                ...productToUpdate,\n                price: formatPrice(productToUpdate.price.toString())\n            })\n            const data = await response.json()\n            console.log(data)\n\n            if (data.error) {\n                getMessage(data.message)\n                setIsLoading(false)\n                return\n            }\n\n            getMessage(data.message)\n            setIsLoading(false)\n            push('/dashboard/obchod')\n            getProducts()\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    // Delete glasses\n    const handleProductDelete = async (id) => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        try {\n            const response = await deleteProduct(token, id)\n            const data = await response.json()\n\n            setIsLoading(false)\n            getMessage(data.message)\n            getProducts()\n            push('/dashboard/obchod')\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    // ------------------------\n    // END GLASSES ACTIONS\n    // ------------------------\n\n\n    // ------------------------\n    // START LENSES ACTIONS\n    // ------------------------\n\n    // Get all lenses\n    const getLenses = async () => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        try {\n            const response = await fetchLenses(token)\n            const data = await response.json()\n\n            if (data.lenses) {\n                setTotalCount(totalCount + data.count)\n                setLensesArr(data.lenses)\n                setIsLoading(false)\n                closeModal()\n                return\n            }\n\n            setIsLoading(false)\n            getMessage(data.message)\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    // Get single lenses\n    const getSigleLenses = async (id) => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        try {\n            const response = await fetchSingleLenses(id)\n            const data = await response.json()\n\n            console.log(data)\n\n\n            if (data.error) {\n                getMessage(data.message)\n                setIsLoading(false)\n                return\n            }\n\n            if (data.lenses) {\n                setLenses({\n                    ...lenses,\n                    ...data.lenses,\n                    imagePath: data.lenses.image._id,\n                    price: (data.lenses.price / 100).toFixed(2)\n                })\n                setSelectedImage(data.lenses.image)\n                setIsUpdating(true)\n            }\n\n            closeModal()\n\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    // Create Lense\n    const createNewLenses = async (productToAdd) => {\n        setIsLoading(true)\n        setShowModal(true)\n\n\n\n        try {\n            const response = await postLenses(token, {\n                ...productToAdd,\n                price: formatPrice(productToAdd.price.toString())\n            })\n            const data = await response.json()\n\n            if (data) {\n                setIsLoading(false)\n                getMessage(data.message)\n                push('/dashboard/obchod')\n                getLenses()\n                closeModal()\n            }\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    // Update Lense\n    const updateLenses = async (productToAdd) => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        try {\n            const response = await patchLenses(token, {\n                ...productToAdd,\n                price: formatPrice(productToAdd.price.toString())\n            })\n            const data = await response.json()\n\n            if (data) {\n                setIsLoading(false)\n                getMessage(data.message)\n                push('/dashboard/obchod')\n                getLenses()\n            }\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    // Delete Lense\n    const deleteLenses = async (id) => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        try {\n            const response = await delLense(token, id)\n            const data = await response.json()\n\n            if (data.error) {\n                setIsLoading(false)\n                getMessage(data.message)\n            }\n\n\n            getLenses()\n            setIsLoading(false)\n            getMessage(data.message)\n            push('/dashboard/obchod')\n            closeModal()\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    // ------------------------\n    // END LENSES ACTIONS\n    // ------------------------\n\n    return (\n        <WarehouseContext.Provider\n            value={{\n                switchFormButtons,\n                formToShow,\n                toggleProductForms,\n                showUpdateForm,\n                isUpdating,\n                activeCategoryIndex,\n                categories,\n                getEanCode,\n                toggleDraft,\n                handleCategoryChange,\n                handleAvailableChange,\n                handleSizeChange,\n                selectImage,\n                product,\n                products,\n                handleChange,\n                handleSpecsChange,\n                resetProduct,\n                lenses,\n                lensesArr,\n                handleLensesChange,\n                handleLensesDioptersRangeChange,\n                handleLensesCylinderRangeChange,\n                totalCount,\n                getProducts,\n                getSingleProduct,\n                createNewProduct,\n                handleProductDelete,\n                updateProduct,\n                createNewLenses,\n                getLenses,\n                getSigleLenses,\n                updateLenses,\n                deleteLenses,\n                lensesParameters,\n                handleParameterChange,\n            }}\n        >\n            {children}\n        </WarehouseContext.Provider>\n    )\n}\n\nexport default WarehouseProvider"],"sourceRoot":""}