(this.webpackJsonpimooptik=this.webpackJsonpimooptik||[]).push([[23],{79:function(e,t,n){"use strict";n.r(t),n.d(t,"BookingContext",(function(){return b}));var a=n(1),r=n(9),s=n.n(r),o=n(12),c=n(10),u=n(0),i=n(17),l=n(16),p=function(e){return fetch("".concat("http://195.110.58.166:8080","/api/booking/calendars/").concat(e))},f=function(e){var t=new Headers;t.append("auth-token",e);var n={method:"GET",headers:t,redirect:"follow"};return fetch("".concat("http://195.110.58.166:8080","/api/admin/booking/userBookings"),n)},b=Object(u.createContext)({calendar:null,calendars:null,getCalendars:function(){},getCalendar:function(){},bookings:null,getBookings:function(){},userBookings:null,getUserBookings:function(){},activeCalendar:0,resetBooking:function(){},selectedDate:{name:"",value:""},setSelectedDate:function(){}});t.default=function(e){var t=e.children,n=Object(u.useContext)(l.a).token,r=Object(u.useContext)(i.a),g=r.getMessage,k=r.setIsLoading,d=r.setShowModal,v=r.closeModal,h=Object(u.useState)(0),x=Object(c.a)(h,2),j=x[0],m=x[1],O=Object(u.useState)(null),w=Object(c.a)(O,2),B=w[0],C=w[1],S=Object(u.useState)({name:"",interval:30,startTimes:["10/00","10/00","10/00","10/00","10/00","X","X"],endTimes:["16/00","16/00","18/00","16/00","16/00","X","X"],daysIntoFuture:60,premises:1,allowMinutesBefore:120,exceptDays:"24/12/2020:00/00-23/59"}),y=Object(c.a)(S,2),X=y[0],D=y[1],M=Object(u.useState)({name:"",value:""}),T=Object(c.a)(M,2),z=T[0],N=T[1],I=function(){var e=Object(o.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(!0),d(!0),e.prev=2,e.next=5,fetch("".concat("http://195.110.58.166:8080","/api/booking/calendars"));case 5:return t=e.sent,e.next=8,t.json();case 8:if(!(n=e.sent).error){e.next=13;break}return g(n.message),k(!1),e.abrupt("return");case 13:n.calendars&&(C(n.calendars),k(!1),v()),g(n.message),k(!1),e.next=23;break;case 18:e.prev=18,e.t0=e.catch(2),console.log(e.t0),g("Nieco sa pokazilo"),k(!1);case 23:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(o.a)(s.a.mark((function e(t,n){var a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(!0),d(!0),N({name:"",value:""}),e.prev=3,e.next=6,p(t);case 6:return a=e.sent,e.next=9,a.json();case 9:if(r=e.sent,console.log(r),!r.calendar){e.next=16;break}return D(r.calendar),m(n),v(),e.abrupt("return");case 16:g(r.message),k(!1),e.next=25;break;case 20:e.prev=20,e.t0=e.catch(3),console.log(e.t0),g("Nieco sa pokazilo"),k(!1);case 25:case"end":return e.stop()}}),e,null,[[3,20]])})));return function(t,n){return e.apply(this,arguments)}}(),J=Object(u.useState)(null),U=Object(c.a)(J,2),E=U[0],G=U[1],H=Object(u.useState)(null),L=Object(c.a)(H,2),P=L[0],q=L[1],A=function(){var e=Object(o.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(!0),d(!0),e.prev=2,e.next=5,fetch("".concat("http://195.110.58.166:8080","/api/booking/bookings"));case 5:return t=e.sent,e.next=8,t.json();case 8:if(!(n=e.sent).error){e.next=13;break}return g(n.message),k(!1),e.abrupt("return");case 13:n.bookings&&(G(n.bookings),k(!1),v()),g(n.message),k(!1),e.next=23;break;case 18:e.prev=18,e.t0=e.catch(2),console.log(e.t0),g("Nieco sa pokazilo"),k(!1);case 23:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(o.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(!0),d(!0),e.prev=2,e.next=5,f(n);case 5:return t=e.sent,e.next=8,t.json();case 8:if(!(a=e.sent).userBookings){e.next=13;break}return q(a.userBookings),v(),e.abrupt("return");case 13:g(a.message),k(!1),e.next=22;break;case 17:e.prev=17,e.t0=e.catch(2),console.log(e.t0),g("Nieco sa pokazilo"),k(!1);case 22:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}();return Object(a.jsx)(b.Provider,{value:{calendar:X,calendars:B,getCalendars:I,getCalendar:F,bookings:E,getBookings:A,userBookings:P,getUserBookings:K,activeCalendar:j,resetBooking:function(){m(0),D({name:"",interval:30,startTimes:["10/00","10/00","10/00","10/00","10/00","X","X"],endTimes:["16/00","16/00","18/00","16/00","16/00","X","X"],daysIntoFuture:60,premises:1,allowMinutesBefore:120,exceptDays:"24/12/2020:00/00-23/59"})},selectedDate:z,setSelectedDate:N},children:t})}}}]);
//# sourceMappingURL=23.f109a63b.chunk.js.map