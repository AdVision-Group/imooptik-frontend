(this.webpackJsonpimooptik=this.webpackJsonpimooptik||[]).push([[16,31],{232:function(n,e,r){"use strict";r.r(e);var t=r(2),c=r(31),o=r(21),i=r(10),a=r(1),d=r.n(a),u=r(18),l=r(67),s=r(3),b=r(54),j=r(32),v=r(85),m=r(52),f=r(5),p=r(6),O=r(28);function h(){var n=Object(f.a)(["\n    max-width: 40rem;\n    padding: 2rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n    margin: 0 auto;\n    border-radius: .5rem;\n\n    h3 {\n        text-align: center;\n        font-size: 3rem;\n    }\n\n    div {\n\n        &:not(:last-child) {\n            margin-bottom: 3rem;\n\n        }\n    }\n"]);return h=function(){return n},n}function x(){var n=Object(f.a)(["\n    padding: 2rem;\n    text-align: center;\n\n    img {\n        width: 5rem;\n    }\n"]);return x=function(){return n},n}function g(){var n=Object(f.a)(["\n    margin: 5rem 0;\n"]);return g=function(){return n},n}function y(){var n=Object(f.a)(["\n    display: block;\n    margin: 0 auto;\n"]);return y=function(){return n},n}function k(){var n=Object(f.a)(["\n    cursor: pointer;\n    display: grid;\n    align-content: center;\n    grid-template-columns: 1fr 2fr 25rem;\n    margin-bottom: 1rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n\n    transition: all .3s ease-out;\n\n    &:hover {\n        background-color: var(--primary-color); \n        font-weight: bolder;\n        color: var(--button-font-color);\n    }\n"]);return k=function(){return n},n}function w(){var n=Object(f.a)(["\n    display: grid;\n    align-content: center;\n    grid-template-columns: 1fr 2fr 25rem;\n    border-bottom: 1px solid var(--secondary-text-color);\n    font-weight: bolder;\n"]);return w=function(){return n},n}var C=p.c.div(w()),P=p.c.div(k()),z=Object(p.c)(O.a)(y()),S=p.c.div(g()),D=p.c.div(x()),N=p.c.div(h()),L=function(n){var e=n.next,r=n.addToOrder,c=Object(a.useState)(""),o=Object(i.a)(c,2),d=o[0],u=o[1],l=Object(a.useState)([]),s=Object(i.a)(l,2),b=s[0],j=s[1],f=Object(a.useContext)(v.UserContext),p=f.users,O=f.getFilteredUsers,h=f.getUserByQuery;return Object(a.useEffect)((function(){p||O({limit:5,filters:{admin:0}}),p&&j(p)}),[p]),Object(a.useEffect)((function(){p&&""===d&&(O({limit:5,filters:{admin:0}}),j(p))}),[d]),Object(a.useEffect)((function(){return function(){u(""),j([])}}),[]),Object(t.jsxs)("div",{children:[Object(t.jsxs)(N,{children:[Object(t.jsx)("h3",{children:"Vyh\u013eada\u0165 z\xe1kaznika"}),Object(t.jsx)("div",{children:Object(t.jsx)(m.a,{label:"Meno, priezvisko, email alebo tel. \u010d\xedslo",value:d,onChange:function(n){return u(n.target.value)},onKeyPress:function(n){""!==d&&"Enter"===n.key&&h({query:d,filters:{admin:0}})}})}),Object(t.jsx)(z,{onClick:function(){""!==d&&h({query:d,filters:{admin:0}})},children:"H\u013eada\u0165"})]}),Object(t.jsxs)(S,{children:[Object(t.jsxs)(C,{children:[Object(t.jsx)(D,{children:"Meno a priezvisko"}),Object(t.jsx)(D,{children:"Email"}),Object(t.jsx)(D,{children:"Mo\u017enosti"})]}),b.map((function(n,c){return Object(t.jsxs)(P,{onClick:function(){return function(n){r({name:"user",value:n}),e()}(n)},children:[Object(t.jsx)(D,{children:n.name}),Object(t.jsx)(D,{children:n.email}),Object(t.jsx)(D,{children:n.phone})]},c)}))]})]})},T=r(58);function U(){var n=Object(f.a)(["\n    padding: 0 2rem;\n    opacity: .6;\n"]);return U=function(){return n},n}function E(){var n=Object(f.a)(["\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    grid-gap: 2rem;\n    margin: 0 1rem 2rem;\n    padding: 0 1rem;\n"]);return E=function(){return n},n}function A(){var n=Object(f.a)(["\n    margin-top: 1.5rem;\n    min-width: 16.5rem;\n    width: 100%;\n    background-color: var(--input-background-color);\n    color: var(--input-color);\n    border: none;\n    padding: .5rem .5rem .5rem 1rem;\n    font-size: inherit;\n    font-family: inherit;\n    display: block;\n    outline: none;\n\n    &:focus {\n        outline: none;\n    }\n"]);return A=function(){return n},n}function F(){var n=Object(f.a)(["\n    grid-column: 1/6;\n\n"]);return F=function(){return n},n}function H(){var n=Object(f.a)(["\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    color: var(--primary-color);\n    font-size: 2rem;\n"]);return H=function(){return n},n}function M(){var n=Object(f.a)(["\n    display:grid; \n    align-items: center;\n    grid-template-columns: 5rem 2fr 2fr 2fr 1fr;\n    background-color: var(--background-primary-color);\n    /* border: .05rem solid var(--secondary-text-color); */\n\n    &:hover  ",'{\n        position: relative;\n        :nth-of-type(1) {\n            cursor: pointer;\n            ::after {\n                content: "X";\n                position: absolute;\n                padding: .5rem 1rem;\n                border-radius: 50%;\n                left: 50%;\n                top: 50%;\n                transform: translate(-50%, -50%);\n                background-color: var(--color-red);\n                color: var(--button-font-color);\n                font-size: 1.2rem;\n            }\n        }\n    }\n']);return M=function(){return n},n}function K(){var n=Object(f.a)(["\n    padding: 2rem;\n    text-align: center;\n\n    input {\n        text-align: end;\n        background-color: var(--input-background-color);\n        color: var(--input-color);\n        font-size: 1.5rem;\n        padding: 1rem 1rem 1rem 2rem;\n        display: block;\n        width: 100%;\n        border: none;\n        border-radius: .5rem;\n        /* border-bottom: 1px solid #000; */\n        font-family: inherit;\n    }\n\n"]);return K=function(){return n},n}var Q=p.c.div(K()),I=p.c.div(M(),Q),Z=p.c.div(H()),_=p.c.div(F()),R=p.c.select(A()),V=p.c.div(E()),q=p.c.h4(U()),J=function(n){var e,r,d,u,s,b=n.item,j=n.idx,v=Object(a.useContext)(l.OrderContext),f=v.deleteProduct,p=v.addProductDiscount,O=v.addLensesParameters,h=Object(a.useState)(!1),x=Object(i.a)(h,2),g=x[0],y=x[1],k=Object(a.useState)({}),w=Object(i.a)(k,2),C=w[0],P=w[1],z=function(n,e,r){var t=n.target,i=t.name,a=t.value,d=r;d[e]=""===a?1001:Number(a),P(Object(o.a)(Object(o.a)({},C),{},Object(c.a)({},i,d)))};return Object(a.useEffect)((function(){O(j,C)}),[C]),Object(a.useEffect)((function(){b.product.type&&3===b.product.type&&P({curve:[b.product.contactLenses.allowedCurves[0],b.product.contactLenses.allowedCurves[0]],diameter:[b.product.contactLenses.allowedDiameters[0],b.product.contactLenses.allowedDiameters[0]],diopters:[0,0]})}),[b.product]),Object(t.jsxs)(I,{children:[Object(t.jsx)(Q,{onClick:function(){return f(j)},children:j+1}),Object(t.jsx)(Q,{children:(null===b||void 0===b||null===(e=b.product)||void 0===e?void 0:e.name)?null===b||void 0===b||null===(r=b.product)||void 0===r?void 0:r.name:"\u0160o\u0161ovky"}),Object(t.jsx)(Q,{children:(null===b||void 0===b||null===(d=b.product)||void 0===d?void 0:d.price)?"".concat(((null===b||void 0===b||null===(u=b.product)||void 0===u?void 0:u.price)/100).toFixed(2),"\u20ac"):""}),Object(t.jsx)(Q,{children:Object(t.jsx)("div",{children:Object(t.jsx)("input",{value:(null===b||void 0===b||null===(s=b.discount)||void 0===s?void 0:s.product)?null===b||void 0===b?void 0:b.discount.product.percent:"",onChange:function(n){return p(j,n.target.value)}})})}),Object(t.jsx)(Q,{children:Object(t.jsx)(Z,{onClick:function(){y((function(n){return!n}))},children:Object(t.jsx)(T.a,{})})}),g&&Object(t.jsxs)(_,{children:[3!==b.product.type&&Object(t.jsx)("div",{children:Object(t.jsx)(q,{children:"\u017diadne mo\u017enosti"})}),3===b.product.type&&Object(t.jsxs)(V,{children:[Object(t.jsxs)("div",{children:[Object(t.jsx)("h4",{children:"\u013dave oko"}),Object(t.jsx)(R,{name:"curve",value:C.curve[0],onChange:function(n){return z(n,0,C.curve)},children:b.product.contactLenses.allowedCurves.map((function(n,e){return Object(t.jsx)("option",{value:n,children:n},e)}))}),Object(t.jsx)(R,{name:"diameter",value:C.diameter[0],onChange:function(n){return z(n,0,C.diameter)},children:b.product.contactLenses.allowedDiameters.map((function(n,e){return Object(t.jsx)("option",{value:n,children:n},e)}))}),Object(t.jsx)(m.a,{name:"diopters",type:"number",value:C.diopters[0],min:b.product.contactLenses.dioptersRange[0],max:b.product.contactLenses.dioptersRange[1],step:.25,onChange:function(n){return z(n,0,C.diopters)}})]}),Object(t.jsxs)("div",{children:[Object(t.jsx)("h4",{children:"Prav\xe9 oko"}),Object(t.jsx)(R,{name:"curve",value:C.curve[1],onChange:function(n){return z(n,1,C.curve)},children:b.product.contactLenses.allowedCurves.map((function(n,e){return Object(t.jsx)("option",{value:n,children:n},e)}))}),Object(t.jsx)(R,{name:"diameter",value:C.diameter[1],onChange:function(n){return z(n,1,C.diameter)},children:b.product.contactLenses.allowedDiameters.map((function(n,e){return Object(t.jsx)("option",{value:n,children:n},e)}))}),Object(t.jsx)(m.a,{type:"number",value:C.diopters[1],min:b.product.contactLenses.dioptersRange[0],max:b.product.contactLenses.dioptersRange[1],step:.25,name:"diopters",onChange:function(n){return z(n,1,C.diopters)}})]})]})]})]})},B=r(230);function X(){var n=Object(f.a)(["\n    cursor: pointer;\n    border: 4px solid var(--backbutton-color);\n    color: var(--backbutton-color);\n    border-radius: 50%;\n    padding: 1.2rem 1.2rem;\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    margin-bottom: 3rem;\n"]);return X=function(){return n},n}var G=p.c.div(X()),W=function(n){var e=Object.assign({},n);return Object(t.jsx)(G,Object(o.a)(Object(o.a)({},e),{},{children:Object(t.jsx)(B.a,{})}))},Y=r(66),$=r(53);function nn(){var n=Object(f.a)(["\n    cursor: pointer;\n    display: grid;\n    align-items: center;\n    grid-template-columns: 10rem 15rem 1fr 1fr 10rem 1fr;\n    margin-bottom: 1rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n\n    transition: all .3s ease-out;\n\n    &:hover {\n        background-color: var(--primary-color); \n        font-weight: bolder;\n        color: var(--button-font-color);\n    }\n"]);return nn=function(){return n},n}function en(){var n=Object(f.a)(["\n    display: grid;\n    align-items: center;\n    grid-template-columns: 10rem 15rem 1fr 1fr 10rem 1fr;\n    border-bottom: 1px solid var(--secondary-text-color);\n    font-weight: bolder;\n\n\n"]);return en=function(){return n},n}function rn(){var n=Object(f.a)(["\n    padding: 2rem;\n    text-align: center;\n\n    img {\n        width: 5rem;\n    }\n"]);return rn=function(){return n},n}function tn(){var n=Object(f.a)(["\n    margin: 5rem 0;\n\n"]);return tn=function(){return n},n}function cn(){var n=Object(f.a)(["\n    display: block;\n    margin-left: auto;\n"]);return cn=function(){return n},n}function on(){var n=Object(f.a)(["\n    /* max-width: 40rem; */\n    padding: 2rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n    /* margin: 0 auto; */\n    border-radius: .5rem;\n\n    h3 {\n        /* text-align: center; */\n        font-size: 2.5rem;\n    }\n\n    div {\n\n        &:not(:last-child) {\n            margin-bottom: 3rem;\n\n        }\n    }\n"]);return on=function(){return n},n}function an(){var n=Object(f.a)(["\n    font-size: 1.4rem;\n    background-color: var(--primary-color);\n    font-weight: bolder;\n    display: block;\n    margin-left: 1rem;\n    /* margin: 2rem 2rem 2rem auto; */\n"]);return an=function(){return n},n}function dn(){var n=Object(f.a)(["\n    font-size: 1.4rem;\n    display: block;\n\n"]);return dn=function(){return n},n}function un(){var n=Object(f.a)(["\n    margin: 2rem 2rem;\n    display: flex;\n    justify-content: flex-end;\n"]);return un=function(){return n},n}function ln(){var n=Object(f.a)(["\n    padding-top: 2rem;\n    padding-left: 2rem;\n    opacity: .6;\n"]);return ln=function(){return n},n}function sn(){var n=Object(f.a)(["\n    display:grid; \n    grid-template-columns: 5rem 2fr 2fr 2fr 1fr;\n    background-color: var(--background-primary-color);\n    border-bottom: 1px solid var(--secondary-text-color);\n    margin: 2rem;\n    margin-right: calc(2rem + 10px);\n    margin-bottom: 0;\n"]);return sn=function(){return n},n}function bn(){var n=Object(f.a)(["\n    max-height: 30rem;\n    overflow-y: scroll;\n    padding: 2rem 2rem 0 2rem;\n    padding-top: 0;\n\n    ::-webkit-scrollbar {\n        width: 10px;\n    }\n\n    /* Track */\n    ::-webkit-scrollbar-track {\n        background:  var(--background-primary-color);\n    }\n\n    /* Handle */\n    ::-webkit-scrollbar-thumb {\n        background: var(--primary-color);\n    }\n\n    /* Handle on hover */\n    ::-webkit-scrollbar-thumb:hover {\n        background: var(--primary-color);\n    }\n"]);return bn=function(){return n},n}function jn(){var n=Object(f.a)(["\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n\n    h3 {\n        padding: 2rem;\n        font-size: 2.5rem;\n\n    }\n\n    @media all and (max-width: 1000px) {\n        grid-row: 1/2;\n    }\n"]);return jn=function(){return n},n}function vn(){var n=Object(f.a)(["\n    display: grid;\n    grid-template-columns: 1fr 2fr;\n    grid-gap: 3rem;\n    align-items: start;\n\n    @media all and (max-width: 1000px) { \n        grid-template-columns: 1fr;\n    }\n\n"]);return vn=function(){return n},n}var mn=p.c.div(vn()),fn=p.c.div(jn()),pn=p.c.div(bn()),On=p.c.div(sn()),hn=p.c.p(ln()),xn=p.c.div(un()),gn=Object(p.c)(O.a)(dn()),yn=Object(p.c)(O.a)(an()),kn=p.c.div(on()),wn=Object(p.c)(O.a)(cn()),Cn=p.c.div(tn()),Pn=p.c.div(rn()),zn=p.c.div(en()),Sn=p.c.div(nn()),Dn=function(n){var e=n.back,r=n.next,c=n.showErrorMessage,d=Object(a.useContext)(l.OrderContext),u=d.addProduct,s=d.cart,b=d.createCombinedProducts,j=Object(a.useState)(""),v=Object(i.a)(j,2),f=v[0],p=v[1],O=Object(a.useState)([]),h=Object(i.a)(O,2),x=h[0],g=h[1],y=Object(a.useState)({limit:10,skip:0}),k=Object(i.a)(y,2),w=k[0],C=k[1],P=Object($.c)("api/admin/products/filter",w),z=P.response,S=P.isLoading,D=P.refetch;return Object(a.useEffect)((function(){S||g(z.products)}),[S]),Object(t.jsxs)("div",{children:[Object(t.jsx)(W,{onClick:e}),Object(t.jsxs)(mn,{children:[Object(t.jsxs)(kn,{children:[Object(t.jsx)("h3",{children:"Vyh\u013eada\u0165 produkt"}),Object(t.jsx)("div",{children:Object(t.jsx)(m.a,{label:"N\xe1zov produktu, eanCode alebo popis",value:f,handleChange:function(n){return p(n.target.value)},onKeyPress:function(n){""!==f&&"Enter"===n.key&&(C(Object(o.a)(Object(o.a)({},w),{},{query:f})),D())}})}),Object(t.jsx)(wn,{onClick:function(){""!==f&&(C(Object(o.a)(Object(o.a)({},w),{},{query:f})),D())},children:"H\u013eada\u0165"})]}),Object(t.jsxs)(fn,{children:[Object(t.jsx)("h3",{children:"Vybrat\xe9 polo\u017eky"}),Object(t.jsxs)(On,{children:[Object(t.jsx)(Pn,{children:"#"}),Object(t.jsx)(Pn,{children:"Produkt"}),Object(t.jsx)(Pn,{children:"Cena"}),Object(t.jsx)(Pn,{children:"Zlava v %"}),Object(t.jsx)(Pn,{children:"Viac"})]}),Object(t.jsxs)(pn,{children:[s.map((function(n,e){return Object(t.jsx)(J,{item:n,idx:e},e)})),0===s.length&&Object(t.jsx)(hn,{children:"Nie s\xfa vybran\xe9 \u017eiadn\xe9 produkty"})]}),Object(t.jsxs)(xn,{children:[Object(t.jsx)(gn,{onClick:function(){return r("select-lenses")},children:"Preis\u0165 na \u0161osovky"}),Object(t.jsx)(yn,{onClick:b,children:"Dokon\u010di\u0165 objedn\xe1vku"})]})]})]}),Object(t.jsxs)(Cn,{children:[Object(t.jsxs)(zn,{children:[Object(t.jsx)(Pn,{children:"eanK\xf3d"}),Object(t.jsx)(Pn,{children:"Obr\xe1zok"}),Object(t.jsx)(Pn,{children:"N\xe1zov"}),Object(t.jsx)(Pn,{children:"Zna\u010dka"}),Object(t.jsx)(Pn,{children:"Cena"}),Object(t.jsx)(Pn,{children:"Na sklade"})]}),x.map((function(n,e){return Object(t.jsxs)(Sn,{onClick:function(){return Object(Y.b)(n.available)||6===n.type?u(n):c("Produkt nieje na sklade.")},children:[Object(t.jsx)(Pn,{children:n.eanCode}),Object(t.jsx)(Pn,{children:(null===n||void 0===n?void 0:n.image)&&Object(t.jsx)("img",{src:"".concat("http://195.110.58.166:8080","/uploads/").concat(n.image.imagePath),alt:n.image.alt})}),Object(t.jsx)(Pn,{children:n.name}),Object(t.jsx)(Pn,{children:n.brand}),Object(t.jsxs)(Pn,{children:[(n.price/100).toFixed(2),"\u20ac"]}),Object(t.jsx)(Pn,{children:6===n.type?"Slu\u017eba":Object(Y.a)(n.available)})]},e)}))]})]})},Nn=r(57);function Ln(){var n=Object(f.a)(["\n    margin-top: 1rem;\n    margin-right: 2rem;\n\n\n"]);return Ln=function(){return n},n}function Tn(){var n=Object(f.a)(["\n    padding: 1rem 1rem;\n    margin: 0 1rem 1rem;\n    /* background-color: red; */\n    display: flex;\n    justify-content: space-between;\n    align-items: flex-end;\n    border-bottom: .05rem solid var(--secondary-text-color);\n\n\n"]);return Tn=function(){return n},n}function Un(){var n=Object(f.a)(["\n    grid-column: 1/5;\n\n"]);return Un=function(){return n},n}function En(){var n=Object(f.a)(["\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    color: var(--primary-color);\n    font-size: 2rem;\n"]);return En=function(){return n},n}function An(){var n=Object(f.a)(["\n    cursor: pointer;\n    display:grid; \n    align-items: center;\n    grid-template-columns: 5rem 2fr 2fr 2fr 1fr 2fr;\n    background-color: var(--background-primary-color);\n    /* border: .05rem solid var(--secondary-text-color); */\n\n    border: ",";\n\n    &:hover  ",'{\n        position: relative;\n        :nth-of-type(1) {\n            cursor: pointer;\n            ::after {\n                content: "X";\n                position: absolute;\n                padding: .5rem 1rem;\n                border-radius: 50%;\n                left: 50%;\n                top: 50%;\n                transform: translate(-50%, -50%);\n                background-color: var(--color-red);\n                color: var(--button-font-color);\n                font-size: 1.2rem;\n            }\n        }\n    }\n']);return An=function(){return n},n}function Fn(){var n=Object(f.a)(["\n    display: flex;\n    align-items: center;\n\n    button {\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        padding: .5rem;\n        color: var(--primary-color);\n    }\n\n    p {\n        font-size: 1.6rem;\n    }\n"]);return Fn=function(){return n},n}function Hn(){var n=Object(f.a)(["\n    padding: 2rem;\n    text-align: center;\n\n    input {\n        text-align: end;\n        background-color: var(--input-background-color);\n        color: var(--input-color);\n        font-size: 1.5rem;\n        padding: 1rem 1rem 1rem 2rem;\n        display: block;\n        width: 100%;\n        border: none;\n        border-radius: .5rem;\n        /* border-bottom: 1px solid #000; */\n        font-family: inherit;\n    }\n"]);return Hn=function(){return n},n}var Mn=p.c.div(Hn()),Kn=p.c.div(Fn()),Qn=p.c.div(An(),(function(n){return n.isSelected?".05rem solid var(--primary-color)":".05rem solid transparent"}),Mn),In=(p.c.div(En()),p.c.div(Un()),p.c.div(Tn()),Object(p.c)(Nn.a)(Ln()),function(n){var e,r,c,o,i,d=n.idx,u=n.item,s=Object(a.useContext)(l.OrderContext),b=s.selectProduct,j=s.selectedProduct,v=s.addLensesDiscount,m=s.deleteProduct,f=s.incrementQuantity,p=s.decrementQuantity,O=function(n,e){3===u.product.type||4===u.product.type||5===u.product.type||u.product.isPseudo||b(n,e)};return Object(t.jsxs)(Qn,{isSelected:j===d,onClick:function(n){return O(d,n)},children:[Object(t.jsx)(Mn,{onClick:function(){return function(n){m(n,O)}(d)},children:d+1}),Object(t.jsx)(Mn,{children:null===u||void 0===u||null===(e=u.product)||void 0===e?void 0:e.name}),Object(t.jsx)(Mn,{children:null===u||void 0===u||null===(r=u.lens)||void 0===r?void 0:r.name}),Object(t.jsx)(Mn,{children:(null===u||void 0===u||null===(c=u.lens)||void 0===c?void 0:c.price)?"".concat(((null===u||void 0===u||null===(o=u.lens)||void 0===o?void 0:o.price)/100).toFixed(2),"\u20ac"):""}),Object(t.jsx)(Mn,{children:(null===u||void 0===u?void 0:u.lensesQuant)&&Object(t.jsxs)(Kn,{children:[Object(t.jsx)("button",{onClick:function(n){return p(null===u||void 0===u?void 0:u.lensesQuant,d,n)},children:Object(t.jsx)(T.n,{})}),Object(t.jsx)("p",{children:null===u||void 0===u?void 0:u.lensesQuant}),Object(t.jsx)("button",{onClick:function(n){return f(null===u||void 0===u?void 0:u.lensesQuant,d,n)},children:Object(t.jsx)(T.q,{})})]})}),Object(t.jsx)(Mn,{children:Object(t.jsx)("input",{value:(null===u||void 0===u||null===(i=u.discount)||void 0===i?void 0:i.lenses)?null===u||void 0===u?void 0:u.discount.lenses.percent:"",onChange:function(n){return v(d,n.target.value)}})})]})});function Zn(){var n=Object(f.a)(["\n    font-size: 1.4rem;\n    background-color: var(--primary-color);\n    font-weight: bolder;\n    display: block;\n    margin-left: 1rem;\n    /* margin: 2rem 2rem 2rem auto; */\n"]);return Zn=function(){return n},n}function _n(){var n=Object(f.a)(["\n    font-size: 1.4rem;\n    display: block;\n\n"]);return _n=function(){return n},n}function Rn(){var n=Object(f.a)(["\n    background-color: var(--container-background-color);\n\n    margin: 2rem 2rem;\n    display: flex;\n    justify-content: flex-end;\n"]);return Rn=function(){return n},n}function Vn(){var n=Object(f.a)(["\n    padding-top: 2rem;\n    padding-left: 2rem;\n    opacity: .6;\n"]);return Vn=function(){return n},n}function qn(){var n=Object(f.a)(["\n    display:grid; \n    grid-template-columns: 5rem 2fr 2fr 2fr 1fr 2fr;\n    background-color: var(--background-primary-color);\n    border-bottom: 1px solid var(--secondary-text-color);\n    margin: 2rem;\n    margin-right: calc(2rem + 10px);\n    margin-bottom: 0;\n"]);return qn=function(){return n},n}function Jn(){var n=Object(f.a)(["\n    padding: 2rem;\n    text-align: center;\n\n"]);return Jn=function(){return n},n}function Bn(){var n=Object(f.a)(["\n    max-height: 30rem;\n    overflow-y: scroll;\n    padding: 2rem 2rem 0 2rem;\n    padding-top: 0;\n    font-size: 1.4rem;\n\n\n    ::-webkit-scrollbar {\n        width: 10px;\n    }\n\n    /* Track */\n    ::-webkit-scrollbar-track {\n        background:  var(--background-primary-color);\n    }\n\n    /* Handle */\n    ::-webkit-scrollbar-thumb {\n        background: var(--primary-color);\n    }\n\n    /* Handle on hover */\n    ::-webkit-scrollbar-thumb:hover {\n        background: var(--primary-color);\n    }\n"]);return Bn=function(){return n},n}function Xn(){var n=Object(f.a)(["\n    font-size: 1.2rem;\n    background-color: var(--primary-color);\n    font-weight: bolder;\n"]);return Xn=function(){return n},n}function Gn(){var n=Object(f.a)(["\n    display: flex;\n    justify-content: space-between;\n    padding: 2rem;\n\n    h3 {\n        font-size: 2.5rem;\n    }\n"]);return Gn=function(){return n},n}function Wn(){var n=Object(f.a)(["\n    grid-column: 2/3;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n\n    @media all and (max-width: 1000px) {\n        grid-row: 1/2;\n        grid-column: unset;\n\n    }\n\n"]);return Wn=function(){return n},n}function Yn(){var n=Object(f.a)(["\n    background-color: var(--background-primary-color);\n    border-radius: 50%;\n    width: 5rem;\n    height: 5rem;\n    margin: 0 auto;\n    /* margin-bottom: 1.5rem; */\n"]);return Yn=function(){return n},n}function $n(){var n=Object(f.a)(["\n    cursor: pointer;\n    display: grid;\n    align-items: center;\n    grid-template-columns: 10rem 1fr 2fr 1fr 1fr 10rem;\n\n    margin-bottom: 1rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n\n    transition: all .3s ease-out;\n\n    img {\n        /* background-color:#000; */\n        width: 5rem;\n        height: 5rem;\n        margin-bottom: 1rem; \n        object-fit: contain;\n        object-position: center;\n    }\n\n    &:hover {\n        background-color: var(--primary-color); \n        font-weight: bolder;\n        color: var(--button-font-color);\n    }\n"]);return $n=function(){return n},n}function ne(){var n=Object(f.a)(["\n    display: grid;\n    align-items: center;\n    grid-template-columns: 10rem 1fr 2fr 1fr 1fr 10rem;\n    border-bottom: 1px solid var(--secondary-text-color);\n    font-weight: bolder;\n"]);return ne=function(){return n},n}function ee(){var n=Object(f.a)(["\n    /* display: flex;\n    flex-wrap: wrap;\n    gap: 2rem; */\n"]);return ee=function(){return n},n}function re(){var n=Object(f.a)(["\n    margin: 5rem 0;\n\n    h3 {\n        font-size: 3rem;\n        margin-bottom: 3rem;\n    }\n"]);return re=function(){return n},n}function te(){var n=Object(f.a)(["\n    display: block;\n    margin-left: auto;\n"]);return te=function(){return n},n}function ce(){var n=Object(f.a)(["\n    /* max-width: 40rem; */\n    padding: 2rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n    /* margin: 0 auto; */\n    border-radius: .5rem;\n\n    h3 {\n        /* text-align: center; */\n        font-size: 2.5rem;\n    }\n\n    div {\n\n        &:not(:last-child) {\n            margin-bottom: 3rem;\n\n        }\n    }\n"]);return ce=function(){return n},n}function oe(){var n=Object(f.a)(["\n    display: grid;\n    grid-template-columns: 1fr 2fr;\n    grid-gap: 3rem;\n    align-items: start;\n\n    @media all and (max-width: 1000px) {\n        grid-template-columns: 1fr;\n    }\n"]);return oe=function(){return n},n}var ie=p.c.div(oe()),ae=p.c.div(ce()),de=Object(p.c)(O.a)(te()),ue=p.c.div(re()),le=p.c.div(ee()),se=p.c.div(ne()),be=p.c.div($n()),je=p.c.div(Yn()),ve=p.c.div(Wn()),me=p.c.div(Gn()),fe=Object(p.c)(O.a)(Xn()),pe=p.c.div(Bn()),Oe=p.c.div(Jn()),he=p.c.div(qn()),xe=p.c.p(Vn()),ge=p.c.div(Rn()),ye=(Object(p.c)(O.a)(_n()),Object(p.c)(O.a)(Zn())),ke=function(n){var e=n.back,r=(n.next,Object(a.useContext)(l.OrderContext)),c=r.cart,d=r.addLenses,u=r.createCombinedProducts,s=r.selectedProduct,b=r.selectProduct,j=Object(a.useState)(""),v=Object(i.a)(j,2),f=v[0],p=v[1],O=Object(a.useState)([]),h=Object(i.a)(O,2),x=h[0],g=h[1],y=Object(a.useState)({limit:9,skip:0}),k=Object(i.a)(y,2),w=k[0],C=k[1],P=Object($.c)("api/admin/lenses/filter",w),z=P.response,S=P.isLoading,D=P.refetch;return Object(a.useEffect)((function(){S||g(z.lenses)}),[S]),Object(t.jsxs)("div",{children:[Object(t.jsx)(W,{onClick:e}),Object(t.jsxs)(ie,{children:[Object(t.jsxs)(ae,{children:[Object(t.jsx)("h3",{children:"Vyh\u013eada\u0165 \u0161o\u0161ovky"}),Object(t.jsx)("div",{children:Object(t.jsx)(m.a,{label:"Vyhlada\u0165 \u0161o\u0161ovky",value:f,handleChange:function(n){return p(n.target.value)},onKeyPress:function(n){""!==f&&"Enter"===n.key&&(C(Object(o.a)(Object(o.a)({},w),{},{query:f})),D())}})}),Object(t.jsx)(de,{onClick:function(){""!==f&&(C(Object(o.a)(Object(o.a)({},w),{},{query:f})),D())},children:"H\u013eada\u0165"})]}),Object(t.jsxs)(ve,{children:[Object(t.jsxs)(me,{children:[Object(t.jsx)("h3",{children:"Vybrat\xe9 polo\u017eky"}),null!==s&&Object(t.jsx)(fe,{onClick:function(){return b(null)},children:"Odzna\u010di\u0165"})]}),Object(t.jsxs)(he,{children:[Object(t.jsx)(Oe,{children:"#"}),Object(t.jsx)(Oe,{children:"Produkt"}),Object(t.jsx)(Oe,{children:"\u0160osovky"}),Object(t.jsx)(Oe,{children:"Cena"}),Object(t.jsx)(Oe,{children:"Ks"}),Object(t.jsx)(Oe,{children:"Z\u013eava v %"})]}),Object(t.jsxs)(pe,{children:[c.map((function(n,e){return 3!==n.product.type&&4!==n.product.type&&5!==n.product.type&&6!==n.product.type&&Object(t.jsx)(In,{idx:e,item:n},e)})),0===c.length&&Object(t.jsx)(xe,{children:"Nie s\xfa vybran\xe9 \u017eiadn\xe9 produkty"})]}),Object(t.jsx)(ge,{children:Object(t.jsx)(ye,{onClick:u,children:"Dokon\u010di\u0165 objedn\xe1vku"})})]})]}),Object(t.jsx)(ue,{children:Object(t.jsxs)(le,{children:[Object(t.jsxs)(se,{children:[Object(t.jsx)(Oe,{children:"eanK\xf3d"}),Object(t.jsx)(Oe,{children:"Obr\xe1zok"}),Object(t.jsx)(Oe,{children:"N\xe1zov"}),Object(t.jsx)(Oe,{children:"Dioptrie"}),Object(t.jsx)(Oe,{children:"Cylinder"}),Object(t.jsx)(Oe,{children:"Cena"})]}),x.map((function(n,e){return Object(t.jsxs)(be,{onClick:function(){return d(n)},children:[Object(t.jsx)(Oe,{children:n.eanCode}),Object(t.jsx)(Oe,{children:Object(t.jsx)(je,{})}),Object(t.jsx)(Oe,{children:n.name}),Object(t.jsx)(Oe,{children:n.dioptersRange&&Object(t.jsx)("p",{children:"od ".concat(n.dioptersRange[0]," do ").concat(n.dioptersRange[1])})}),Object(t.jsx)(Oe,{children:n.cylinderRange&&Object(t.jsx)("p",{children:"od ".concat(n.cylinderRange[0]," do ").concat(n.cylinderRange[1])})}),Object(t.jsxs)(Oe,{children:[(n.price/100).toFixed(2),"\u20ac"]})]},e)})),Object(t.jsxs)(be,{onClick:function(){return d(null)},children:[Object(t.jsx)(Oe,{children:"-"}),Object(t.jsx)(Oe,{children:Object(t.jsx)(je,{})}),Object(t.jsx)(Oe,{children:"\u017diadn\xe9 skl\xe1"}),Object(t.jsx)(Oe,{children:"-"}),Object(t.jsx)(Oe,{children:"-"}),Object(t.jsx)(Oe,{children:"0\u20ac"})]})]})})]})},we=r(74),Ce=r(98),Pe=r(55);function ze(){var n=Object(f.a)(["\n    display: flex;\n    align-items: center;\n    margin-bottom: 2rem;\n\n\n    label {\n        display: block;\n        outline: none;\n        margin-left: 1rem;\n\n        &:focus {\n            outline: none;\n\n        }\n    }\n\n    input: {\n        display: block;\n    }\n"]);return ze=function(){return n},n}function Se(){var n=Object(f.a)(["\n    display: flex;\n    align-items: center;\n    margin-bottom: 2rem;\n\n\n    label {\n        display: block;\n        outline: none;\n        margin-left: 1rem;\n\n        &:focus {\n            outline: none;\n\n        }\n    }\n\n    input: {\n        display: block;\n    }\n"]);return Se=function(){return n},n}function De(){var n=Object(f.a)(["\n    margin-top: 2rem;\n    margin-right: 2rem;\n"]);return De=function(){return n},n}function Ne(){var n=Object(f.a)(["\n    margin-top: 1.5rem;\n    min-width: 16.5rem;\n    width: 100%;\n    background-color: var(--input-background-color);\n    color: var(--input-color);\n    border: none;\n    padding: .5rem .5rem .5rem 1rem;\n    font-size: inherit;\n    font-family: inherit;\n    display: block;\n    outline: none;\n    margin-bottom: 2rem;\n\n    &:focus {\n        outline: none;\n    }\n"]);return Ne=function(){return n},n}function Le(){var n=Object(f.a)(["\n    margin: 2rem 0 0;\n    background-color: var(--primary-color);\n    font-weight: bolder;\n"]);return Le=function(){return n},n}function Te(){var n=Object(f.a)(["\n    position: relative;\n    /* z-index: 999999; */\n\n    h2{ \n        margin-top: 2rem;\n    }\n    h4{ \n        margin-top: 2rem;\n    }\n"]);return Te=function(){return n},n}var Ue=p.c.div(Te()),Ee=Object(p.c)(O.a)(Le()),Ae=p.c.select(Ne()),Fe=Object(p.c)(Nn.a)(De()),He=p.c.div(Se()),Me=p.c.div(ze()),Ke=function(n){var e,r,d,u,l,s,b,j,v,f,p=n.order,O=n.combinedProducts,h=n.createOrder,x=n.setHasChanged,g=n.isUpdating,y=n.updateOrder,k=Object(a.useState)({paymentType:"cash"}),w=Object(i.a)(k,2),C=w[0],P=w[1],z=Object(a.useState)(!1),S=Object(i.a)(z,2),D=S[0],N=S[1],L=Object(a.useState)(!1),T=Object(i.a)(L,2),U=T[0],E=T[1],A=function(n){var e=n.target,r=e.name,t=e.value;if(""===t)return delete C[r],void P(Object(o.a)({},C));P(Object(o.a)(Object(o.a)({},C),{},Object(c.a)({},r,t)))},F=function(n){var e=n.target,r=e.name,t=e.value;if(""===t)return delete C.overwrite[r],void P(Object(o.a)({},C));P(Object(o.a)(Object(o.a)({},C),{},{overwrite:Object(o.a)(Object(o.a)({},C.overwrite),{},Object(c.a)({},r,t))}))},H=function(n){if(n.preventDefault(),g){var e=Object(o.a)({},C);delete e.paymentType,delete e.shouldDeliver,x(!1),y(e,p.order._id)}else{var r=Object(o.a)(Object(o.a)({},C),{},{user:p.user._id,combinedProducts:O.map((function(n){return n._id})),status:D?"half-paid":"paid"});C.paidAlready&&(r=Object(o.a)(Object(o.a)({},r),{},{paidAlready:Object(Pe.a)(C.paidAlready)})),x(!1),h(r)}};return Object(a.useEffect)((function(){var n,e;g&&((null===p||void 0===p?void 0:p.order)&&(A({target:{name:"shouldDeliver",value:null===p||void 0===p||null===(n=p.order)||void 0===n?void 0:n.shouldDeliver}}),A({target:{name:"buyingAsCompany",value:null===p||void 0===p||null===(e=p.order)||void 0===e?void 0:e.buyingAsCompany}})))}),[g,p]),Object(a.useEffect)((function(){return function(){P({paymentType:"cash"}),N(!1),E(!1)}}),[]),Object(t.jsxs)(Ue,{children:[Object(t.jsx)("h2",{children:g?"Upravi\u0165 objedn\xe1vku":"Dokon\u010deni\u0165 objedn\xe1vky"}),!g&&Object(t.jsxs)("div",{children:[Object(t.jsx)("h4",{children:"Sp\xf4sob platby"}),Object(t.jsxs)(Ae,{name:"paymentType",value:null!==(e=null===C||void 0===C?void 0:C.paymentType)&&void 0!==e?e:"cash",onChange:function(n){return A(n)},children:[Object(t.jsx)("option",{value:"cash",children:"Hotovos\u0165"}),Object(t.jsx)("option",{value:"card",children:"Karta"}),Object(t.jsx)("option",{value:"coupon",children:"Kup\xf3n"})]}),Object(t.jsxs)(Me,{children:[Object(t.jsx)("input",{id:"hasDeposit",name:"hasDeposit",type:"checkbox",value:D,onChange:function(){D?(N(!1),C.paidAlready&&(delete C.paidAlready,P(Object(o.a)({},C)))):N(!0)}}),Object(t.jsx)("label",{htmlFor:"hasDeposit",children:"Prida\u0165 z\xe1lohu"})]}),D&&Object(t.jsx)(m.a,{label:"Zaplaten\xe1 z\xe1loha",name:"paidAlready",type:"text",value:null!==(r=null===C||void 0===C?void 0:C.paidAlready)&&void 0!==r?r:"",onChange:function(n){return A(n)}})]}),Object(t.jsxs)("div",{children:[Object(t.jsx)("h4",{children:"Inform\xe1cie o doru\u010den\xed"}),Object(t.jsx)(Fe,{label:"Doru\u010di\u0165 na adresu",isActive:null===C||void 0===C?void 0:C.shouldDeliver,handleClick:function(){return A({target:{name:"shouldDeliver",value:!(null===C||void 0===C?void 0:C.shouldDeliver)||!(null===C||void 0===C?void 0:C.shouldDeliver)}})}}),Object(t.jsx)(Fe,{label:"N\xe1kup na firmu",isActive:null===C||void 0===C?void 0:C.buyingAsCompany,handleClick:function(){return A({target:{name:"buyingAsCompany",value:!(null===C||void 0===C?void 0:C.buyingAsCompany)||!(null===C||void 0===C?void 0:C.buyingAsCompany)}})}}),(null===C||void 0===C?void 0:C.shouldDeliver)&&Object(t.jsxs)("div",{children:[Object(t.jsx)("h4",{children:"Adresa"}),Object(t.jsx)("p",{children:p.user.psc}),Object(t.jsx)("p",{children:p.user.address}),Object(t.jsx)("p",{children:p.user.city}),Object(t.jsx)("p",{children:p.user.country}),Object(t.jsxs)("div",{children:[Object(t.jsxs)(He,{children:[Object(t.jsx)("input",{id:"overwrite",name:"overwrite",type:"checkbox",value:U,onChange:function(){U?(E(!1),C.overwrite&&(delete C.overwrite,P(Object(o.a)({},C)))):E(!0)}}),Object(t.jsx)("label",{htmlFor:"overwrite",children:"In\xe1 adresa"})]}),U&&Object(t.jsxs)("div",{children:[Object(t.jsx)(m.a,{label:"Adresa",name:"address",type:"text",value:null!==(d=null===C||void 0===C||null===(u=C.overwrite)||void 0===u?void 0:u.address)&&void 0!==d?d:"",onChange:function(n){return F(n)}}),Object(t.jsx)(m.a,{label:"PS\u010c",name:"psc",type:"text",value:null!==(l=null===C||void 0===C||null===(s=C.overwrite)||void 0===s?void 0:s.psc)&&void 0!==l?l:"",onChange:function(n){return F(n)}}),Object(t.jsx)(m.a,{label:"Mesto",name:"city",type:"text",value:null!==(b=null===C||void 0===C||null===(j=C.overwrite)||void 0===j?void 0:j.city)&&void 0!==b?b:"",onChange:function(n){return F(n)}}),Object(t.jsx)(m.a,{label:"\u0160t\xe1t",name:"country",type:"text",value:null!==(v=null===C||void 0===C||null===(f=C.overwrite)||void 0===f?void 0:f.country)&&void 0!==v?v:"",onChange:function(n){return F(n)}})]})]})]})]}),g&&Object(t.jsx)(Ee,{onClick:H,children:"Upravi\u0165 objedn\xe1vku"}),!g&&Object(t.jsx)(Ee,{onClick:H,children:"Vytvori\u0165 objedn\xe1vku"})]})};function Qe(){var n=Object(f.a)(["\n    /* width: 8rem; */\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n"]);return Qe=function(){return n},n}var Ie=p.c.span(Qe()),Ze=function(n){var e,r,c,o,i=n.productId,a=Object($.b)("api/store/products",i,!i),u=a.isLoading,l=a.response;return(null===l||void 0===l||null===(e=l.product)||void 0===e||null===(r=e.name)||void 0===r?void 0:r.includes("Pseudo"))?Object(t.jsxs)(d.a.Fragment,{children:[Object(t.jsx)(Ie,{children:" "}),Object(t.jsx)(Ie,{children:" "})]}):Object(t.jsxs)(d.a.Fragment,{children:[Object(t.jsx)(Ie,{children:u?"H\u013eadam...":null===l||void 0===l||null===(c=l.product)||void 0===c?void 0:c.eanCode}),Object(t.jsx)(Ie,{children:u?"H\u013eadam...":(null===l||void 0===l||null===(o=l.product)||void 0===o?void 0:o.name)||"Produkt sa nena\u0161iel"})]})};function _e(){var n=Object(f.a)(["\n    /* width: 8rem; */\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n"]);return _e=function(){return n},n}var Re=p.c.span(_e()),Ve=function(n){var e,r,c=n.lensesId,o=Object($.b)("api/store/lenses",c,!c),i=o.isLoading,a=o.response;return Object(t.jsxs)(d.a.Fragment,{children:[Object(t.jsx)(Re,{children:i?"H\u013eadam...":(null===a||void 0===a||null===(e=a.lenses)||void 0===e?void 0:e.eanCode)||""}),Object(t.jsx)(Re,{children:i?"H\u013eadam...":(null===a||void 0===a||null===(r=a.lenses)||void 0===r?void 0:r.name)||""})]})},qe=r(20),Je=r.n(qe),Be=r(19),Xe=r(123),Ge=r(101);function We(){var n=Object(f.a)(["\n    display: block;\n    margin: 0 auto;\n    background-color: var(--primary-color);\n    font-weight: bolder;\n"]);return We=function(){return n},n}function Ye(){var n=Object(f.a)(["\n    width: 100%;\n    height: 100%;\n\n    position: fixed;\n    left: 0;\n    right: 0;\n    z-index: 99999;\n\n    border: none;\n    outline: none;\n    opacity: 0;\n\n    &:focus {\n        outline: none\n    }\n"]);return Ye=function(){return n},n}function $e(){var n=Object(f.a)(["\n    width:100%;\n    max-width: 65rem;\n    max-height: 60rem;\n    color: var(--primary-text-color);\n\n    overflow-y: scroll;\n\n    /* display: flex;\n    flex-direction: column;\n    align-items: center; */\n\n    padding: 2rem;\n    border-radius: .5rem;\n    background-color: var(--background-primary-color);\n\n    position: relative;\n    z-index: 999999;\n\n    "," {\n        box-shadow: none;\n    }\n\n    h3{ \n        margin-bottom: 2rem;\n    }\n\n    ::-webkit-scrollbar {\n        width: 10px;\n    }\n\n    /* Track */\n    ::-webkit-scrollbar-track {\n        background:  var(--background-primary-color);\n    }\n\n    /* Handle */\n    ::-webkit-scrollbar-thumb {\n        background: var(--primary-color);\n    }\n\n    /* Handle on hover */\n    ::-webkit-scrollbar-thumb:hover {\n        background: var(--primary-color);\n    }\n"]);return $e=function(){return n},n}function nr(){var n=Object(f.a)(["\n    position: fixed;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    z-index: 99999;\n\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    background-color: rgba(0,0,0,0.3);\n"]);return nr=function(){return n},n}var er=p.c.div(nr()),rr=p.c.div($e(),Ge.h),tr=p.c.button(Ye()),cr=Object(p.c)(O.a)(We()),or=function(n){var e=n.close,r=n.userId,d=n.refetchUser,u=n.addUser,l=Object(a.useContext)(Be.a),s=l.isAdmin,b=l.isOptometrist,j=Object(a.useContext)(v.UserContext),m=j.user,f=j.isUpdating,p=j.handleChange,O=j.handleParameterChange,h=j.handleCompanyChange,x=j.getUser,g=j.updateUser,y=Object(a.useState)({}),k=Object(i.a)(y,2),w=k[0],C=k[1];return Object(a.useEffect)((function(){C(Object(o.a)(Object(o.a)({},w),{},{name:m.fName+" "+m.lName}))}),[w.fName,w.lName]),Object(a.useEffect)((function(){r&&x(r)}),[r]),Je.a.createPortal(Object(t.jsxs)(er,{children:[Object(t.jsx)(tr,{onClick:e}),Object(t.jsxs)(rr,{children:[Object(t.jsx)(Xe.a,{user:m,isAdmin:s,isUpdating:f,isOptometrist:b,handleChange:function(n){var e=n.target,r=e.name,t=e.value;p(n),""!==t?C(Object(o.a)(Object(o.a)({},w),{},Object(c.a)({},r,t))):delete w[r]},handleParameterChange:function(n,e){var r=n.target,t=r.name,i=r.value,a=m.lenses[t];a[e]=i,O(n,e),C(Object(o.a)(Object(o.a)({},w),{},{lenses:Object(o.a)(Object(o.a)({},m.lenses),{},Object(c.a)({},t,a))}))},handleCompanyChange:function(n){var e=n.target,r=e.name,t=e.value;if(h(n),""===t)return delete w.company[r],void(0===Object.keys(w.company).length&&delete w.company);C(Object(o.a)(Object(o.a)({},w),{},{company:Object(o.a)(Object(o.a)({},w.company),{},Object(c.a)({},r,t))}))},isOrder:!0}),Object(t.jsx)(cr,{onClick:function(n,r){n.preventDefault(),w.fName||w.lName?(delete w.fName,delete w.lName):w.fName&&w.lName||delete w.name,g(w,m._id,"isOrder",d,e,u)},children:"Ulo\u017ei\u0165"})]})]}),document.getElementById("portal"))},ir=r(65);function ar(){var n=Object(f.a)(["\n    cursor: pointer;\n    position: absolute;\n    right: 2rem;\n    top: 2rem;\n    font-size: 2.5rem;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    color: var(--primary-color);\n"]);return ar=function(){return n},n}function dr(){var n=Object(f.a)(["\n    &:not(:last-child) {\n        margin-right: .5rem;\n    }\n\n    &:last-child {\n        background-color: var(--primary-color);\n        font-weight: bolder;\n    }\n"]);return dr=function(){return n},n}function ur(){var n=Object(f.a)(["\n    padding: 2rem;\n    border-radius: .5rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n    margin-bottom: 3rem;\n\n\n    h3 {\n        margin-bottom: 1rem;\n    }\n"]);return ur=function(){return n},n}function lr(){var n=Object(f.a)(["\n    padding: 2rem;\n    border-radius: .5rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n    margin-bottom: 3rem;\n\n    h3 {\n        margin-bottom: 1rem;\n    }\n\n    h4 {\n        margin-top: 1rem;\n        margin-bottom: .5rem;\n    }\n\n    div {\n        p {\n            opacity: .83;\n        }\n\n        &:not(:last-child) {\n            margin-bottom: 1rem;\n        }\n\n        a {\n            background-color: var(--primary-color);\n            font-weight: bolder;\n            color: #fff;\n            display: inline-block;\n            padding: .5rem 2.5rem;\n            margin-top: 1rem;\n        }\n    }\n\n"]);return lr=function(){return n},n}function sr(){var n=Object(f.a)(["\n    opacity: .83;\n    font-size: 1.4rem;\n    margin-left: 1.5rem;\n\n    &:not(:last-child) {\n        margin-bottom: .5rem;\n    }\n"]);return sr=function(){return n},n}function br(){var n=Object(f.a)(["\n    position: relative;\n    padding: 2rem;\n    border-radius: .5rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n\n\n    h3 {\n        margin-bottom: .5rem;\n    }\n\n    h4 {\n        margin-top: 1rem;\n        margin-bottom: .5rem;\n    }\n\n"]);return br=function(){return n},n}function jr(){var n=Object(f.a)(["\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    grid-gap: 3rem;\n    align-items: start;\n"]);return jr=function(){return n},n}function vr(){var n=Object(f.a)(["\n    margin-top: 2rem;\n    display:flex;\n    justify-content: flex-end;\n    align-items: center;\n\n    span {\n        display: block;\n        margin-right: .5rem;\n        \n    }\n\n    p {\n        font-weight: bolder;\n        font-size: 2rem;\n    }\n"]);return vr=function(){return n},n}function mr(){var n=Object(f.a)(["\n    display: grid;\n    align-content: center;\n    grid-template-columns: 5rem 2fr 8rem 8rem 2fr 8rem 8rem 5rem 10rem 10rem;\n    /* box-shadow: 0 0 1.5rem 0 rgba(0,0,0, 0.08); */\n    /* margin-bottom: 1rem; */\n    font-size: 1.2rem;\n    background-color: var(--background-primary-color);\n\n    &:nth-of-type(2n) {\n        background-color: var(--body-background-primary-color);\n    }\n"]);return mr=function(){return n},n}function fr(){var n=Object(f.a)(["\n    display: grid;\n    align-content: center;\n    grid-template-columns: 5rem 2fr 8rem 8rem 2fr 8rem 8rem 5rem 10rem 10rem;\n    font-weight: bolder;\n    border-bottom: 1px solid var(--secondary-text-color);\n    font-size: 1.2rem;\n\n\n    "," {\n                &:nth-of-type(2) {\n                    /* background-color: red; */\n                    display: grid;\n                    grid-template-columns: 1fr 1fr;\n                }\n    }\n"]);return fr=function(){return n},n}function pr(){var n=Object(f.a)(["\n    padding: .5rem;\n    text-align: center;\n\n    img {\n        width: 5rem;\n    }\n\n    &:nth-of-type(2), &:nth-of-type(5) {\n        /* background-color: red; */\n        display: grid;\n        grid-template-columns: 1fr 1fr;\n    }\n\n\n\n\n"]);return pr=function(){return n},n}function Or(){var n=Object(f.a)(["\n    margin-bottom: 2rem;\n"]);return Or=function(){return n},n}function hr(){var n=Object(f.a)(["\n    padding: 2rem;\n    border-radius: .5rem;\n    box-shadow: var(--container-shadow);\n    margin-bottom: 3rem;\n    background-color: var(--container-background-color);\n\n"]);return hr=function(){return n},n}var xr=p.c.div(hr()),gr=p.c.h3(Or()),yr=p.c.div(pr()),kr=p.c.div(fr(),yr),wr=p.c.div(mr()),Cr=p.c.div(vr()),Pr=p.c.div(jr()),zr=p.c.div(br()),Sr=p.c.p(sr()),Dr=p.c.div(lr()),Nr=p.c.div(ur()),Lr=Object(p.c)(O.a)(dr()),Tr=p.c.div(ar()),Ur=function(n){n.addNextProduct;var e,r,c,o,d,u,s,b,j,v,m,f,p,O,h,x,g,y,k,w=n.setHasChanged,C=n.isUpdating,P=n.refetchUser,z=Object(a.useContext)(l.OrderContext),S=z.order,D=z.changeStep,N=z.addUser,L=Object(a.useContext)(we.OrdersContext),U=L.createOrder,E=L.updateOrder,A=L.getPDF,F=Object(a.useState)(0),H=Object(i.a)(F,2),M=H[0],K=H[1],Q=new Date(null===S||void 0===S||null===(e=S.order)||void 0===e?void 0:e.date),I=Object(a.useState)(!1),Z=Object(i.a)(I,2),_=Z[0],R=Z[1];return Object(a.useEffect)((function(){S.combinedProducts&&K(S.combinedProducts.reduce((function(n,e){return n+e.discountedPrice}),0))}),[S.combinedProducts]),console.log(S),Object(t.jsxs)("div",{children:[_&&Object(t.jsx)(or,{close:function(){R(!1)},userId:S.user._id,refetchUser:P,addUser:N}),Object(t.jsxs)(xr,{children:[Object(t.jsx)(gr,{children:"Preh\u013aad objedn\xe1vky"}),Object(t.jsxs)(kr,{children:[Object(t.jsx)(yr,{children:"#"}),Object(t.jsxs)(yr,{children:[Object(t.jsx)("span",{children:"Eank\xf3d"}),Object(t.jsx)("span",{children:"ProduktID"})]}),Object(t.jsx)(yr,{children:"Cena"}),Object(t.jsx)(yr,{children:"Po zlave"}),Object(t.jsxs)(yr,{children:[Object(t.jsx)("span",{children:"Eank\xf3d"}),Object(t.jsx)("span",{children:"\u0160osovkyID"})]}),Object(t.jsx)(yr,{children:"Cena"}),Object(t.jsx)(yr,{children:"Po zlave"}),Object(t.jsx)(yr,{children:"Ks"}),Object(t.jsx)(yr,{children:"Dohromady"}),Object(t.jsx)(yr,{children:"Po zlave"})]}),S.combinedProducts&&S.combinedProducts.map((function(n,e){var r,c,o,i,a,d;return Object(t.jsxs)(wr,{children:[Object(t.jsx)(yr,{children:e+1}),Object(t.jsx)(yr,{children:(null===n||void 0===n?void 0:n.product)?Object(t.jsx)(Ze,{productId:null===n||void 0===n?void 0:n.product}):""}),Object(t.jsx)(yr,{children:0!==(null===n||void 0===n||null===(r=n.productPrice)||void 0===r?void 0:r.full)?"".concat(((null===n||void 0===n||null===(c=n.productPrice)||void 0===c?void 0:c.full)/100).toFixed(2),"\u20ac"):""}),Object(t.jsx)(yr,{children:0!==(null===n||void 0===n||null===(o=n.productPrice)||void 0===o?void 0:o.discounted)?"".concat(((null===n||void 0===n||null===(i=n.productPrice)||void 0===i?void 0:i.discounted)/100).toFixed(2),"\u20ac"):""}),Object(t.jsx)(yr,{children:(null===n||void 0===n?void 0:n.lens)?Object(t.jsx)(Ve,{lensesId:null===n||void 0===n?void 0:n.lens}):""}),Object(t.jsx)(yr,{children:(null===n||void 0===n?void 0:n.lensPrice)?"".concat(((null===n||void 0===n||null===(a=n.lensPrice)||void 0===a?void 0:a.full)/100).toFixed(2),"\u20ac"):""}),Object(t.jsx)(yr,{children:(null===n||void 0===n?void 0:n.lensPrice)?"".concat(((null===n||void 0===n||null===(d=n.lensPrice)||void 0===d?void 0:d.discounted)/100).toFixed(2),"\u20ac"):""}),Object(t.jsx)(yr,{children:null===n||void 0===n?void 0:n.lensesQuant}),Object(t.jsx)(yr,{children:(null===n||void 0===n?void 0:n.price)?"".concat(((null===n||void 0===n?void 0:n.price)/100).toFixed(2),"\u20ac"):""}),Object(t.jsxs)(yr,{children:[((null===n||void 0===n?void 0:n.discountedPrice)/100).toFixed(2),"\u20ac"]})]},e)})),Object(t.jsx)(Cr,{children:Object(t.jsxs)("p",{children:["Spolu: ",(M/100).toFixed(2),"\u20ac"]})})]}),Object(t.jsxs)(Pr,{children:[Object(t.jsxs)(zr,{children:[Object(t.jsx)(Tr,{onClick:function(){return R(!0)},children:Object(t.jsx)(T.h,{})}),Object(t.jsx)("h3",{children:"Z\xe1kaznik"}),Object(t.jsxs)("div",{children:[Object(t.jsx)("h4",{children:"Meno a prizvisko"}),Object(t.jsx)(Sr,{children:null===S||void 0===S||null===(r=S.user)||void 0===r?void 0:r.name})]}),Object(t.jsxs)("div",{children:[Object(t.jsx)("h4",{children:"Adresa"}),Object(t.jsx)(Sr,{children:null===S||void 0===S||null===(c=S.user)||void 0===c?void 0:c.psc}),Object(t.jsx)(Sr,{children:null===S||void 0===S||null===(o=S.user)||void 0===o?void 0:o.address}),Object(t.jsx)(Sr,{children:null===S||void 0===S||null===(d=S.user)||void 0===d?void 0:d.city}),Object(t.jsx)(Sr,{children:null===S||void 0===S||null===(u=S.user)||void 0===u?void 0:u.country})]}),Object(t.jsxs)("div",{children:[Object(t.jsx)("h4",{children:"Kontakt"}),Object(t.jsx)(Sr,{children:null===S||void 0===S||null===(s=S.user)||void 0===s?void 0:s.email}),Object(t.jsx)(Sr,{children:null===S||void 0===S||null===(b=S.user)||void 0===b?void 0:b.phone})]}),Object(t.jsxs)("div",{children:[Object(t.jsx)("h4",{children:"Parametre"}),S&&S.user&&Object(t.jsx)(Ce.a,{parameters:null===S||void 0===S||null===(j=S.user)||void 0===j?void 0:j.lenses,disabledInputs:!0})]})]}),Object(t.jsxs)("div",{children:[!C&&Object(t.jsxs)(Nr,{children:[Object(t.jsx)("h3",{children:"Mo\u017enosti"}),Object(t.jsx)(Lr,{onClick:function(){return D("select-product")},children:"Prida\u0165 produkt"}),Object(t.jsx)(Ke,{order:S,combinedProducts:S.combinedProducts,createOrder:U,setHasChanged:w,isUpdating:C,updateOrder:E})]}),C&&Object(t.jsx)(Nr,{children:Object(t.jsx)(Ke,{order:S,combinedProducts:S.combinedProducts,createOrder:U,setHasChanged:w,isUpdating:C,updateOrder:E})}),C&&(null===S||void 0===S||null===(v=S.order)||void 0===v?void 0:v.overwrite)&&Object(t.jsxs)(Dr,{children:[Object(t.jsx)("h3",{children:"Doru\u010dovacia adresa"}),Object(t.jsxs)("div",{children:[Object(t.jsx)("h4",{children:"Adresa"}),Object(t.jsx)(Sr,{children:null===S||void 0===S||null===(m=S.order)||void 0===m||null===(f=m.overwrite)||void 0===f?void 0:f.psc}),Object(t.jsx)(Sr,{children:null===S||void 0===S||null===(p=S.order)||void 0===p||null===(O=p.overwrite)||void 0===O?void 0:O.address}),Object(t.jsx)(Sr,{children:null===S||void 0===S||null===(h=S.order)||void 0===h||null===(x=h.overwrite)||void 0===x?void 0:x.city}),Object(t.jsx)(Sr,{children:null===S||void 0===S||null===(g=S.order)||void 0===g||null===(y=g.overwrite)||void 0===y?void 0:y.country})]})]}),S.order&&Object(t.jsxs)(Dr,{children:[Object(t.jsx)("h3",{children:"Detaily objedn\xe1vky"}),Object(t.jsxs)("div",{children:[Object(t.jsx)("h4",{children:"D\xe1tum objedn\xe1vky"}),Object(t.jsx)(Sr,{children:Q.toLocaleDateString("sk-SK",{weekday:"long",month:"long",day:"numeric"})})]}),Object(t.jsxs)("div",{children:[Object(t.jsx)("h4",{children:"Doru\u010di\u0165 na adresu"}),Object(t.jsx)(Sr,{children:S.order.shouldDeliver?"\xc1no":"Nie"})]}),Object(t.jsxs)("div",{children:[Object(t.jsx)("h4",{children:"N\xe1kup na firmu"}),Object(t.jsx)(Sr,{children:S.order.buyingAsCompany?"\xc1no":"Nie"})]}),Object(t.jsxs)("div",{children:[Object(t.jsx)("h4",{children:"Stav objedn\xe1vky"}),Object(t.jsx)(Sr,{children:Object(Y.d)(S.order.status)})]}),(null===S||void 0===S||null===(k=S.order)||void 0===k?void 0:k.advancePaymentType)&&Object(t.jsxs)("div",{children:[Object(t.jsx)("h4",{children:"Z\xe1loha"}),Object(t.jsx)(Sr,{children:"Z\xe1loha: ".concat((S.order.paidAlready/100).toFixed(2),"\u20ac (").concat(Object(Y.c)(S.order.advancePaymentType),")")})]}),"half-paid"!==S.order.status&&Object(t.jsxs)("div",{children:[Object(t.jsx)("h4",{children:"Sp\xf4sob \xfahrady doplatku"}),Object(t.jsx)(Sr,{children:Object(Y.c)(S.order.paymentType)})]}),Object(t.jsxs)("div",{children:[Object(t.jsx)("h4",{children:"Vybavuje prev\xe1dzka"}),Object(t.jsx)(Sr,{children:0===S.order.premises?"Neuveden\xe9":ir.n[S.order.premises]})]}),Object(t.jsxs)("div",{children:[Object(t.jsx)("h4",{children:"PDF"}),Object(t.jsx)(Lr,{onClick:function(){return A(S.order._id)},children:"Zobraz PDF"})]})]})]})]})]})},Er=r(14);function Ar(){var n=Object(f.a)(["\n    display: flex;\n    justify-content: space-between;\n\n    ","\n    padding-top: 3rem;\n    padding-bottom: 3rem;\n\n    h1 {\n        color: var(--primary-text-color);\n    }\n\n    @media all and (max-width: 800px) {\n        flex-wrap: wrap;\n\n        div:nth-child(2) {\n            margin-bottom: 2rem;\n        }\n    }\n"]);return Ar=function(){return n},n}var Fr=p.c.div(Ar(),Er.g);e.default=function(){var n,e=Object(a.useContext)(l.OrderContext),r=e.step,d=e.order,v=e.setOrder,m=e.addUser,f=e.resetOrder,p=e.changeStep,O=Object(s.i)(),h=O.userId,x=O.orderId,g=Object(a.useState)(!1),y=Object(i.a)(g,2),k=y[0],w=y[1],C=Object(a.useState)(!1),P=Object(i.a)(C,2),z=P[0],S=P[1],D=Object(a.useContext)(u.a),N=D.getMessage,T=D.setShowModal,U=D.closeModal,E=D.isLoading,A=D.showModal,F=D.message,H=Object($.b)("api/admin/users",h,!("nova-objednavka"!==h)),M=Object($.b)("api/admin/orders",x,!x);return Object(a.useEffect)((function(){"nova-objednavka"!==h&&x?(S(!0),p("summary"),M.response&&(m(M.response.order.orderedBy),v(Object(o.a)(Object(o.a)({},d),{},{order:M.response.order,user:M.response.order.orderedBy,combinedProducts:M.response.order.combinedProducts})))):"nova-objednavka"!==h&&void 0===x&&(p("select-product"),H.response&&m(H.response.user))}),[h,x,H.response,M.response]),Object(a.useEffect)((function(){H.isLoading||m(H.response.user)}),[H.isLoading]),Object(a.useEffect)((function(){return function(){p("select-user"),f({}),w(!1),S(!1)}}),[]),Object(t.jsxs)("section",{children:[Object(t.jsx)(s.a,{when:k,message:"M\xe1te nedokon\u010den\xfa objedn\xe1vku, skuto\u010dne chcete od\xeds\u0165?"}),A&&Object(t.jsx)(j.a,{loading:E,title:F,close:U}),Object(t.jsx)(Fr,{children:Object(t.jsx)("div",{children:Object(t.jsx)("h1",{children:z?"Objednavka \u010d\xedslo ".concat(null===d||void 0===d||null===(n=d.order)||void 0===n?void 0:n.customId):"Nov\xe1 objedn\xe1vka"})})}),Object(t.jsx)(b.a,{children:Object(t.jsxs)("div",{children:["select-user"===r&&Object(t.jsx)(L,{next:function(){return p("select-product")},addToOrder:function(n){w(!0);var e=n.name,r=n.value;v(Object(o.a)(Object(o.a)({},d),{},Object(c.a)({},e,r)))}}),"select-product"===r&&Object(t.jsx)(Dn,{back:function(){return p("select-user")},next:p,showErrorMessage:function(n){N(n),T(!0)}}),"select-lenses"===r&&Object(t.jsx)(ke,{back:function(){return p("select-product")},next:function(){return p("summary")}}),"summary"===r&&Object(t.jsx)(Ur,{isUpdating:z,back:function(){return p("select-lenses")},addNextProduct:function(){p("findProduct"),(null===d||void 0===d?void 0:d.product)&&((null===d||void 0===d?void 0:d.lenses)?(delete d.lenses,delete d.product):delete d.product,v(Object(o.a)({},d)))},setHasChanged:w,refetchUser:H.refetch})]})})]})}},66:function(n,e,r){"use strict";r.d(e,"b",(function(){return t})),r.d(e,"a",(function(){return c})),r.d(e,"c",(function(){return o})),r.d(e,"d",(function(){return i}));var t=function(n){return!!n&&("number"===typeof n?n>0:n.reduce((function(n,e){return n+e}))>0)},c=function(n){if(!n)return"Nedostupn\xe9";if("number"===typeof n)return n>0?"".concat(n,"ks"):"Nedostupn\xe9";var e=n.reduce((function(n,e){return n+e}));return e>0?"".concat(e,"ks"):"Nedostupn\xe9"},o=function(n){return"cash"===n?"Hotovos\u0165":"card"===n?"Karta":"coupon"===n?"Kup\xf3n":n},i=function(n){return"finished"===n?"Dokon\u010den\xe9":"fulfilled"===n?"Vybaven\xe9":"pending"===n?"\u010cak\xe1 na vybavenie":"paid"===n?"Zaplaten\xe9":"half-paid"===n?"Z\xe1lohovan\xe9":"cancelled"===n?"Zru\u0161en\xe9":void 0}},67:function(n,e,r){"use strict";r.r(e),r.d(e,"OrderContext",(function(){return j}));var t=r(2),c=r(7),o=r.n(c),i=r(12),a=r(56),d=r(21),u=r(10),l=r(1),s=r(18),b=r(19),j=Object(l.createContext)({step:"",order:{},cart:[],selectedProduct:null,setOrder:function(){},addUser:function(){},addProduct:function(){},addProductDiscount:function(){},addLensesParameters:function(){},deleteProduct:function(){},addLenses:function(){},addLensesDiscount:function(){},resetOrder:function(){},changeStep:function(){},selectProduct:function(){},createCombinedProducts:function(){},incrementQuantity:function(){},decrementQuantity:function(){}});e.default=function(n){var e=n.children,r=Object(l.useContext)(b.a).token,c=Object(l.useContext)(s.a),v=c.closeModal,m=c.getMessage,f=c.setIsLoading,p=c.setShowModal,O=Object(l.useState)("select-user"),h=Object(u.a)(O,2),x=h[0],g=h[1],y=Object(l.useState)({}),k=Object(u.a)(y,2),w=k[0],C=k[1],P=Object(l.useState)([]),z=Object(u.a)(P,2),S=z[0],D=z[1],N=Object(l.useState)(null),L=Object(u.a)(N,2),T=L[0],U=L[1],E=function(n){C(Object(d.a)(Object(d.a)({},w),{},{combinedProducts:Object(a.a)(n)}))},A=function(n){g(n)},F=function(){var n=Object(i.a)(o.a.mark((function n(){var e,t,c,i,a,u;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(0!==S.length){n.next=2;break}return n.abrupt("return");case 2:return f(!0),p(!0),e=S.map((function(n){return Object(d.a)(Object(d.a)(Object(d.a)(Object(d.a)({product:n.product.isPseudo?"pseudo":n.product._id},n.discount&&{discount:Object(d.a)({},n.discount)}),n.lens&&{lens:n.lens._id}),n.lensesQuant&&{lensesQuant:n.lensesQuant}),n.lenses&&{contactLenses:n.lenses})})),(t=new Headers).append("auth-token",r),t.append("Content-Type","application/json"),c=JSON.stringify({combinedProducts:e}),i={method:"POST",headers:t,body:c,redirect:"follow"},n.prev=10,n.next=13,fetch("".concat("http://195.110.58.166:8080","/api/store/combinedProducts/createMany"),i);case 13:return a=n.sent,n.next=16,a.json();case 16:if(!(u=n.sent).combinedProducts){n.next=22;break}return E(u.combinedProducts),v(),A("summary"),n.abrupt("return");case 22:f(!1),m(u.messageSK),n.next=31;break;case 26:n.prev=26,n.t0=n.catch(10),console.log(n.t0),m("Nieco sa pokazilo"),f(!1);case 31:case"end":return n.stop()}}),n,null,[[10,26]])})));return function(){return n.apply(this,arguments)}}();return Object(t.jsx)(j.Provider,{value:{step:x,order:w,cart:S,selectedProduct:T,setOrder:C,addUser:function(n){C(Object(d.a)(Object(d.a)({},w),{},{user:n}))},addProduct:function(n){D((function(e){return[].concat(Object(a.a)(e),[{product:n}])}))},addProductDiscount:function(n,e){if(""===e){var r=S.map((function(e,r){return n===r?Object.keys(e.discount).length>1?(delete e.discount.product,e):(delete e.discount,e):e}));D(r)}else{var t=S.map((function(r,t){return n===t?Object(d.a)(Object(d.a)({},r),{},{discount:{product:{percent:e}}}):r}));D(t)}},addLensesParameters:function(n,e){var r=S.map((function(r,t){return n===t&&Object.keys(e).length>0?Object(d.a)(Object(d.a)({},r),{},{lenses:Object(d.a)({},e)}):r}));D(r)},deleteProduct:function(n,e){var r=S.filter((function(e,r){return r!==n}));D(r),e&&setTimeout((function(){e(null)}),100)},addLenses:function(n){if(null!==n||null!==T){if(null!==T){var e=S.map((function(e,r){return r===T?null===n?(delete e.lensesQuant,delete e.lens,e):Object(d.a)(Object(d.a)({},e),{},{lens:n,lensesQuant:2}):e}));D(e)}else D((function(e){return[].concat(Object(a.a)(e),[{product:{_id:Math.floor(10*Math.random()),isPseudo:!0},lens:n,lensesQuant:1}])}));U(null)}},addLensesDiscount:function(n,e){if(""===e){var r=S.map((function(e,r){return n===r?Object.keys(e.discount).length>1?(delete e.discount.lenses,e):(delete e.discount,e):e}));D(r)}else{var t=S.map((function(r,t){return n===t?Object(d.a)(Object(d.a)({},r),{},{discount:Object(d.a)(Object(d.a)({},r.discount),{},{lenses:{percent:e}})}):r}));D(t)}},resetOrder:function(){C({})},changeStep:A,selectProduct:function(n,e){U(T===n?null:n)},createCombinedProducts:F,incrementQuantity:function(n,e,r){r.stopPropagation();var t=S.map((function(r,t){return e===t?Object(d.a)(Object(d.a)({},r),{},{lensesQuant:n+1}):r}));D(t)},decrementQuantity:function(n,e,r){if(r.stopPropagation(),1!==n){var t=S.map((function(r,t){return e===t?Object(d.a)(Object(d.a)({},r),{},{lensesQuant:n-1}):r}));D(t)}}},children:e})}},74:function(n,e,r){"use strict";r.r(e),r.d(e,"OrdersContext",(function(){return j}));var t=r(2),c=r(21),o=r(7),i=r.n(o),a=r(12),d=r(10),u=r(1),l=r(3),s=r(19),b=r(18),j=Object(u.createContext)({orders:null,getPDF:function(){},getOrders:function(){},createOrder:function(){},updateOrder:function(){},finishOrder:function(){},cancelOrder:function(){}});e.default=function(n){var e=n.children,r=Object(l.h)().push,o=Object(u.useContext)(b.a),v=o.setIsLoading,m=o.setShowModal,f=o.getMessage,p=o.closeModal,O=Object(u.useContext)(s.a).token,h=Object(u.useState)(null),x=Object(d.a)(h,2),g=x[0],y=x[1],k=new Headers;k.append("auth-token",O),k.append("Content-Type","application/json");var w=function(){var n=Object(a.a)(i.a.mark((function n(){var e,r,t;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return v(!0),m(!0),e={method:"GET",headers:k,redirect:"follow"},n.prev=3,n.next=6,fetch("".concat("http://195.110.58.166:8080","/api/admin/orders"),e);case 6:return r=n.sent,n.next=9,r.json();case 9:if(!(t=n.sent).orders){n.next=14;break}return y(t.orders),p(),n.abrupt("return");case 14:f(t.messageSK),v(!1),n.next=23;break;case 18:n.prev=18,n.t0=n.catch(3),console.log(n.t0),f("Nieco sa pokazilo"),v(!1);case 23:case"end":return n.stop()}}),n,null,[[3,18]])})));return function(){return n.apply(this,arguments)}}(),C=function(){var n=Object(a.a)(i.a.mark((function n(e){var r,t,c;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return v(!0),m(!0),r={method:"POST",headers:k,redirect:"follow"},n.prev=3,n.next=6,fetch("".concat("http://195.110.58.166:8080","/api/admin/orders/").concat(e,"/createPdf"),r);case 6:return t=n.sent,n.next=9,t.json();case 9:(c=n.sent).filename&&(v(!1),f(c.messageSK),setTimeout((function(){var n=window.open("".concat("http://195.110.58.166:8080","/uploads/pdf/").concat(c.filename),"_blank","noreferrer noopener");null===n||void 0===n||n.focus()}),100)),f(c.messageSK),v(!1),n.next=20;break;case 15:n.prev=15,n.t0=n.catch(3),console.log(n.t0),f("Nieco sa pokazilo"),v(!1);case 20:case"end":return n.stop()}}),n,null,[[3,15]])})));return function(e){return n.apply(this,arguments)}}(),P=function(){var n=Object(a.a)(i.a.mark((function n(e){var t,o,a,d,u;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return v(!0),m(!0),t=Object(c.a)({},e),o=JSON.stringify(t),a={method:"POST",headers:k,body:o,redirect:"follow"},n.prev=5,n.next=8,fetch("".concat("http://195.110.58.166:8080","/api/admin/orders"),a);case 8:return d=n.sent,n.next=11,d.json();case 11:if(!(u=n.sent).error){n.next=16;break}return f(u.messageSK),v(!1),n.abrupt("return");case 16:u.order&&(w(),p(),r("/dashboard/objednavky"),setTimeout((function(){C(u.order._id)}),100)),n.next=24;break;case 19:n.prev=19,n.t0=n.catch(5),console.log(n.t0),f("Nieco sa pokazilo"),v(!1);case 24:case"end":return n.stop()}}),n,null,[[5,19]])})));return function(e){return n.apply(this,arguments)}}(),z=function(){var n=Object(a.a)(i.a.mark((function n(e,t){var o,a,d,u,l;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return v(!0),m(!0),o=Object(c.a)({},e),a=JSON.stringify(o),d={method:"PATCH",headers:k,body:a,redirect:"follow"},n.prev=5,n.next=8,fetch("".concat("http://195.110.58.166:8080","/api/admin/orders/").concat(t),d);case 8:return u=n.sent,n.next=11,u.json();case 11:(l=n.sent).order&&(w(),p(),r("/dashboard/objednavky")),f(l.messageSK),v(!1),n.next=22;break;case 17:n.prev=17,n.t0=n.catch(5),console.log(n.t0),f("Nieco sa pokazilo"),v(!1);case 22:case"end":return n.stop()}}),n,null,[[5,17]])})));return function(e,r){return n.apply(this,arguments)}}(),S=function(){var n=Object(a.a)(i.a.mark((function n(e,r){var t,c,o;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return v(!0),m(!0),t={method:"POST",headers:k,redirect:"follow"},n.prev=3,n.next=6,fetch("".concat("http://195.110.58.166:8080","/api/admin/orders/").concat(e,"/fulfill"),t);case 6:return c=n.sent,n.next=9,c.json();case 9:if(!(o=n.sent).order){n.next=14;break}return r(),p(),n.abrupt("return");case 14:f(o.messageSK),v(!1),n.next=23;break;case 18:n.prev=18,n.t0=n.catch(3),console.log(n.t0),f("Nieco sa pokazilo"),v(!1);case 23:case"end":return n.stop()}}),n,null,[[3,18]])})));return function(e,r){return n.apply(this,arguments)}}(),D=function(){var n=Object(a.a)(i.a.mark((function n(e,r){var t,c,o;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return v(!0),m(!0),t={method:"POST",headers:k,redirect:"follow"},n.prev=3,n.next=6,fetch("".concat("http://195.110.58.166:8080","/api/admin/orders/").concat(e,"/cancel"),t);case 6:return c=n.sent,n.next=9,c.json();case 9:if(!(o=n.sent).order){n.next=13;break}return setTimeout((function(){r(),p()}),100),n.abrupt("return");case 13:f(o.messageSK),v(!1),n.next=22;break;case 17:n.prev=17,n.t0=n.catch(3),console.log(n.t0),f("Nieco sa pokazilo"),v(!1);case 22:case"end":return n.stop()}}),n,null,[[3,17]])})));return function(e,r){return n.apply(this,arguments)}}();return Object(t.jsx)(j.Provider,{value:{orders:g,getPDF:C,getOrders:w,createOrder:P,updateOrder:z,finishOrder:S,cancelOrder:D},children:e})}}}]);
//# sourceMappingURL=16.e92dc6b3.chunk.js.map