{"version":3,"sources":["context/image/image.queries.jsx","context/image/image.context.jsx","context/warehouse/warehouse.utils.jsx","context/warehouse/warehouse.queries.jsx","context/warehouse/warehouse.context.jsx"],"names":["uploadImage","token","img","imgName","imgAlt","myHeaders","Headers","append","requestOptions","method","headers","body","JSON","stringify","redirect","fetch","process","fetchFilteredImages","limit","skip","sortBy","dateCreated","deleteImage","id","ImageContext","createContext","isDisabled","images","selectedImage","getImages","handleImage","handleDeleteImage","setSelectedImage","getNextImages","getPrevImage","ImageProvider","children","useContext","LoadingModalContext","getMessage","setIsLoading","setShowModal","closeModal","AuthContext","useState","setIsDisabled","setImages","setSkip","setImage","close","a","response","json","data","console","log","image","_id","addToSkip","length","message","e","preventDefault","respone","Provider","value","initProductObj","name","description","price","type","brand","soldAmount","available","eanCode","colorCode","colorName","imagePath","eshop","specs","frameColor","frameMaterial","frameStyle","lensColor","sex","size","initLensesObj","dioptersRange","cylinderRange","retailNames","productCategories","brands","fetchProducts","fetchSingleProduct","fetchLenses","fetchSingleLenses","delLense","postLenses","newProduct","map","val","Number","patchLenses","postProduct","raw","patchProduct","product","deleteProduct","WarehouseContext","formToShow","toggleProductForms","showUpdateForm","isUpdating","activeCategoryIndex","categories","toggleDraft","handleCategoryChange","handleAvailableChange","handleSizeChange","selectImage","products","handleChange","handleSpecsChange","resetProduct","lenses","lensesArr","handleLensesChange","handleLensesDioptersRangeChange","handleLensesCylinderRangeChange","totalCount","getProducts","getSingleProduct","createNewProduct","handleProductDelete","updateProduct","createNewLenses","getLenses","getSigleLenses","updateLenses","deleteLenses","lensesParameters","handleParameterChange","WarehouseProvider","currentUser","push","useHistory","setTotalCount","setIsUpdating","setActiveCategoryIndex","setFormToShow","admin","setProduct","setProducts","setLenses","setLensesArr","diopters","curvature","average","setLensesParameters","count","error","premises","filter","num","idx","productToAdd","success","productToUpdate","switchFormButtons","formName","arr","target","imgId"],"mappings":"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","file":"static/js/0.22a401e0.chunk.js","sourcesContent":["export const uploadImage = (token, img, imgName, imgAlt) => {\n    const myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n    myHeaders.append(\"Content-Type\", \"application/json\");\n\n\n    const raw = JSON.stringify({ \"name\": imgName || \" \", \"alt\": imgAlt || \" \", 'image': img });\n\n    const requestOptions = {\n        method: 'POST',\n        headers: myHeaders,\n        body: raw,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/images/upload`, requestOptions)\n}\n\nexport const fetchImages = () => {\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/images`)\n}\n\nexport const fetchFilteredImages = (token, limit, skip) => {\n    const myHeaders = new Headers();\n    // myHeaders.append(\"auth-token\", token);\n    myHeaders.append(\"Content-Type\", \"application/json\");\n\n\n    const raw = JSON.stringify({\n        sortBy: {\n            dateCreated: -1\n        },\n        limit,\n        skip\n    });\n\n    const requestOptions = {\n        method: 'POST',\n        headers: myHeaders,\n        body: raw,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/images/filter`, requestOptions)\n}\n\nexport const deleteImage = (token, id) => {\n    const myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n\n    const requestOptions = {\n        method: 'DELETE',\n        headers: myHeaders,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/images/${id}`, requestOptions)\n}","import React, { createContext, useState, useContext } from 'react'\nimport { LoadingModalContext } from '../loading-modal/loading-modal.contenxt'\nimport { AuthContext } from '../auth/auth.context'\nimport { deleteImage, fetchImages, uploadImage, fetchFilteredImages } from './image.queries'\n\nexport const ImageContext = createContext({\n    isDisabled: false,\n    images: null,\n    selectedImage: null,\n    getImages: () => { },\n    handleImage: () => { },\n    handleDeleteImage: () => { },\n    setSelectedImage: () => { },\n    getNextImages: () => { },\n    getPrevImage: () => { }\n})\n\nconst ImageProvider = ({ children }) => {\n    const {\n        getMessage,\n        setIsLoading,\n        setShowModal,\n        closeModal\n    } = useContext(LoadingModalContext)\n\n    const { token } = useContext(AuthContext)\n\n    const [isDisabled, setIsDisabled] = useState(false)\n    const [images, setImages] = useState(null)\n    const [selectedImage, setSelectedImage] = useState(null)\n    const [limit, setLimit] = useState(4)\n    const [skip, setSkip] = useState(0)\n\n    const handleImage = async (img, imgName, imgAlt, setImage, close) => {\n        setShowModal(true)\n        setIsLoading(true)\n        setIsDisabled(true)\n\n        try {\n            const response = await uploadImage(token, img, imgName, imgAlt)\n            const data = await response.json()\n            console.log(data)\n\n            if (data.image) {\n                setSelectedImage(data.image)\n                setImage(data.image._id)\n                getImages()\n                close()\n            }\n\n            setShowModal(false)\n            setIsLoading(false)\n            setIsDisabled(false)\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n            setIsDisabled(false)\n        }\n    }\n\n    const getNextImages = async (addToSkip) => {\n        try {\n            if (images.length !== limit) return\n\n            const response = await fetchFilteredImages(token, limit, skip + addToSkip)\n            const data = await response.json()\n\n            if (data.images) {\n                setImages(data.images)\n\n                setSkip(skip + addToSkip)\n            }\n\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    const getPrevImage = async (addToSkip) => {\n        if (skip === 0) return\n        try {\n            const response = await fetchFilteredImages(token, limit, skip - addToSkip)\n            const data = await response.json()\n\n            if (data.images) {\n                setImages(data.images)\n\n                setSkip(skip - addToSkip)\n\n            }\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    const getImages = async () => {\n        setShowModal(true)\n        setIsLoading(true)\n\n        try {\n            // const response = await fetchImages()\n            const response = await fetchFilteredImages(token, limit, skip)\n\n            const data = await response.json()\n\n            if (data.images) {\n                setImages(data.images)\n            }\n\n            getMessage(data.message)\n            setIsLoading(false)\n            closeModal()\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    const handleDeleteImage = async (id, e) => {\n        e.preventDefault()\n        setShowModal(true)\n        setIsLoading(true)\n\n        try {\n            const respone = await deleteImage(token, id)\n            const data = await respone.json()\n\n            getMessage(data.message)\n            setIsLoading(false)\n            getImages()\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    return (\n        <ImageContext.Provider\n            value={{\n                isDisabled,\n                images,\n                selectedImage,\n                getImages,\n                handleImage,\n                handleDeleteImage,\n                setSelectedImage,\n                getNextImages,\n                getPrevImage\n            }}\n        >\n            {children}\n        </ImageContext.Provider>\n    )\n}\n\nexport default ImageProvider","export const initProductObj = {\n    // Product id\n    // Product name: Ultra glasses\n    name: \"\",\n    // Product description: Awesome product\n    description: \"\",\n    // price in cents: 1050 => 10.50\n    price: '0',\n    // product type: glesses, lenses, ...\n    type: 1,\n    // brand name: Adidas\n    brand: \"\",\n    //kolko sa ich zatial predalo\n    soldAmount: 0,\n    //kolko je kusov na ktorej prevádzke [arr] \n    available: [0],\n    //ean kod = unikatny kod ktory ma kazdy produkt\n    eanCode: \"\",\n    //farebny kod, ktory spolu s ean kodom tvori \"identitu\" produktu. Moze existovat viacero\n    //produktov s rovnakym ean kodom ale rozlicnym color kodom. Je to takto urobené kvôli skladovému\n    //systému napr. mam na sklade iny pocet zltych ramov isteho druhu ako ciernych\n    colorCode: \"\",\n    //meno farby\n    colorName: \"\",\n    //path k obrazku na serveri (toto bude mozno array este sa uvidi)\n    imagePath: \"\",\n    image: null,\n    eshop: true,\n\n    specs: {\n        frameColor: \"\",\n        frameMaterial: \"\",\n        frameStyle: \"\",\n        lensColor: \"\",\n        sex: \"M\",\n        size: [0, 0, 0],\n    }\n}\n\nexport const initLensesObj = {\n    // id [5fd4cae9f9432022689dd223]\n    id: \"\",\n    // Lense name\n    name: \"\",\n    // Paradne sosovky\n    description: \"\",\n    //vsetky skla su dostupne len pre isty interval dioptrií a cylindrov, ak si zvolím ze mam dioptrie\n    //mimo tohto intervalu tak si tieto skla k mojim okuliarom vybrat nemozem\n    dioptersRange: [\"0\", \"0\"],\n    cylinderRange: [\"0\", \"0\"],\n    //cena v centoch\n    price: \"0\",\n    brand: \"\",\n    imagePath: ''\n}\n\nexport const retailNames = [\n    \"Obchodná 57, Bratislava\",\n    \"Miletičova 38, Bratislava\",\n    \"Vajnory, Bratislava\",\n    \"Senica, OC Branč\",\n    \"Trnava, City Aréna\"\n]\n\n// Category variables\nexport const productCategories = [\n    {\n        name: \"Dioptrické\",\n        value: 1\n    },\n    {\n        name: \"Slnečné\",\n        value: 2\n    },\n    {\n        name: \"Športové\",\n        value: 3\n    },\n    {\n        name: \"Šošovky\",\n        value: 4\n    },\n    {\n        name: \"Doplnky\",\n        value: 5\n    },\n]\n\n\n\nexport const resetProductObj = () => {\n    return initProductObj\n}\n\nexport const resetLensesObj = () => {\n    return initLensesObj\n}\n\nexport const brands = [\n    \"Adidas\",\n    \"Armani Exchange\",\n    \"Arnette\",\n    \"Blackfin\",\n    \"Blumarine\",\n    \"Burberry\",\n    \"Bvlgari\",\n    \"Calvin Klein\",\n    \"Carolina Herrera\",\n    \"Carrera\",\n    \"David Beckham\",\n    \"Dior\",\n    \"Dolce & Gabbana\",\n    \"Elle\",\n    \"Emporio Armani\",\n    \"Esprit\",\n    \"Etnia Barcelona\",\n    \"Fendi\",\n    \"Fossil\",\n    \"Furla\",\n    \"Giorgio Armani\",\n    \"Givenchy\",\n    \"Gucci\",\n    \"Guess\",\n    \"H.I.S\",\n    \"Hawkers\",\n    \"Hugo Boss\",\n    \"Jaguar\",\n    \"Jimmy Choo\",\n    \"Lacoste\",\n    \"Liu Jo\",\n    \"Marc Jacobs\",\n    \"Max Mara\",\n    \"Max&Co\",\n    \"Meller\",\n    \"Mexx\",\n    \"Michael Kors\",\n    \"Moschino\",\n    \"Oakley\",\n    \"Persol\",\n    \"Polaroid\",\n    \"Police\",\n    \"Polo Ralph Lauren\",\n    \"Prada\",\n    \"Prada Linea Rossa\",\n    \"Ralph\",\n    \"Ralph Lauren\",\n    \"Ray-Ban\",\n    \"Salvatore Ferragamo\",\n    \"Smith\",\n    \"Strellson\",\n    \"Tiffany&Co.\",\n    \"Tom Ford\",\n    \"Tommy Hilfiger\",\n    \"Versace\",\n    \"Vogue\"\n]","export const fetchProducts = (token) => {\n    const myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n\n    const requestOptions = {\n        method: 'GET',\n        headers: myHeaders,\n        redirect: 'follow'\n    };\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/products`, requestOptions)\n}\n\nexport const fetchSingleProduct = (id) => {\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/store/products/${id}`)\n}\n\nexport const fetchLenses = (token) => {\n    var myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n\n\n    var requestOptions = {\n        method: 'GET',\n        headers: myHeaders,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/lenses`, requestOptions)\n}\n\nexport const fetchSingleLenses = (id) => {\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/store/lenses/${id}`)\n}\n\n\nexport const delLense = (token, id) => {\n    var myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n\n\n    var requestOptions = {\n        method: 'DELETE',\n        headers: myHeaders,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/lenses/${id}`, requestOptions)\n\n}\n\n\nexport const postLenses = (token, newProduct) => {\n\n    const {\n        brand,\n        cylinderRange,\n        description,\n        dioptersRange,\n        name,\n        price,\n        imagePath,\n        eshop\n    } = newProduct\n\n\n    const myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n    myHeaders.append(\"Content-Type\", \"application/json\");\n\n    const raw = JSON.stringify({\n        \"brand\": brand || \" \",\n        \"cylinderRange\": cylinderRange.map(val => Number(val)),\n        \"name\": name,\n        \"price\": Number(price),\n        \"description\": description,\n        \"image\": imagePath,\n        \"dioptersRange\": dioptersRange.map(val => Number(val)),\n        \"eshop\": eshop\n    });\n\n    const requestOptions = {\n        method: 'POST',\n        headers: myHeaders,\n        body: raw,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/lenses`, requestOptions)\n}\nexport const patchLenses = (token, newProduct) => {\n\n    const {\n        _id,\n        brand,\n        cylinderRange,\n        description,\n        dioptersRange,\n        name,\n        price,\n        imagePath,\n        eshop\n    } = newProduct\n\n    const myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n    myHeaders.append(\"Content-Type\", \"application/json\");\n\n    const raw = JSON.stringify({\n        \"brand\": brand || ' ',\n        \"cylinderRange\": cylinderRange.map(val => Number(val)),\n        \"name\": name,\n        \"price\": Number(price),\n        \"description\": description,\n        \"image\": imagePath,\n        \"dioptersRange\": dioptersRange.map(val => Number(val)),\n        \"eshop\": eshop\n    });\n\n    const requestOptions = {\n        method: 'PATCH',\n        headers: myHeaders,\n        body: raw,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/lenses/${_id}`, requestOptions)\n}\n\n\nexport const postProduct = (token, newProduct) => {\n    const {\n        available,\n        brand,\n        colorCode,\n        // colorName,\n        description,\n        eanCode,\n        eshop,\n        name,\n        price,\n        specs: {\n            frameColor,\n            frameMaterial,\n            frameStyle,\n            lensColor,\n            sex,\n        },\n        type,\n        imagePath\n    } = newProduct\n\n    const myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n    myHeaders.append(\"Content-Type\", \"application/json\");\n\n    let raw = {}\n\n    console.log(available)\n\n    if (type === 4 || type === 5) {\n        raw = JSON.stringify({\n            available: available.length > 1 ? [...available, 0] : available[0],\n            brand: brand || \" \",\n            colorCode: colorCode || \" \",\n            // colorName,\n            description: description || \" \",\n            eanCode,\n            eshop,\n            name,\n            price,\n            // specs: {\n            // frameColor: frameColor || \" \",\n            // frameMaterial: frameMaterial || \" \",\n            // frameStyle: frameStyle || \" \",\n            // lensColor: lensColor || \" \",\n            // sex,\n            // },\n            type,\n            image: imagePath\n        })\n    } else {\n        raw = JSON.stringify({\n            available: available.length > 1 ? [...available, 0] : available[0],\n            brand: brand || \" \",\n            colorCode: colorCode || \" \",\n            // colorName,\n            description: description || \" \",\n            eanCode,\n            eshop,\n            name,\n            price,\n            specs: {\n                frameColor: frameColor || \" \",\n                frameMaterial: frameMaterial || \" \",\n                frameStyle: frameStyle || \" \",\n                lensColor: lensColor || \" \",\n                sex,\n            },\n            type,\n            image: imagePath\n        })\n    }\n\n    console.log(raw)\n\n    const requestOptions = {\n        method: 'POST',\n        headers: myHeaders,\n        body: raw,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/products`, requestOptions)\n}\n\nexport const patchProduct = (token, product) => {\n    const {\n        available,\n        brand,\n        colorCode,\n        // colorName,\n        description,\n        eanCode,\n        eshop,\n        name,\n        price,\n        specs: {\n            frameColor,\n            frameMaterial,\n            frameStyle,\n            lensColor,\n            sex,\n        },\n        type,\n        imagePath,\n        _id\n    } = product\n\n    const myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n    myHeaders.append(\"Content-Type\", \"application/json\");\n\n    let raw = {}\n\n    if (type === 4 || type === 5) {\n        raw = JSON.stringify({\n            available: available.length > 1 ? [...available, 0] : available[0],\n            brand: brand || \" \",\n            colorCode: colorCode || \" \",\n            // colorName,\n            description: description || \" \",\n            eanCode,\n            eshop,\n            name,\n            price,\n            // specs: {\n            // frameColor: frameColor || \" \",\n            // frameMaterial: frameMaterial || \" \",\n            // frameStyle: frameStyle || \" \",\n            // lensColor: lensColor || \" \",\n            // sex,\n            // },\n            type,\n            image: imagePath\n        })\n    } else {\n        raw = JSON.stringify({\n            available: available.length > 1 ? [...available, 0] : available[0],\n            brand: brand || \" \",\n            colorCode: colorCode || \" \",\n            // colorName,\n            description: description || \" \",\n            eanCode,\n            eshop,\n            name,\n            price,\n            specs: {\n                frameColor: frameColor || \" \",\n                frameMaterial: frameMaterial || \" \",\n                frameStyle: frameStyle || \" \",\n                lensColor: lensColor || \" \",\n                sex,\n            },\n            type,\n            image: imagePath\n        })\n    }\n\n    console.log(raw)\n\n    const requestOptions = {\n        method: 'PATCH',\n        headers: myHeaders,\n        body: raw,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/products/${_id}`, requestOptions)\n}\n\nexport const deleteProduct = (token, id) => {\n    const myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n    myHeaders.append(\"Content-Type\", \"application/json\");\n\n    const requestOptions = {\n        method: 'DELETE',\n        headers: myHeaders,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/products/${id}`, requestOptions)\n\n}","import React, { createContext, useState, useContext } from 'react'\nimport { useHistory } from 'react-router-dom'\nimport { LoadingModalContext } from '../loading-modal/loading-modal.contenxt'\nimport { AuthContext } from '../auth/auth.context'\nimport { ImageContext } from '../image/image.context'\nimport {\n    fetchProducts,\n    postProduct,\n    deleteProduct,\n    patchProduct,\n    postLenses,\n    fetchLenses,\n    patchLenses,\n    delLense,\n    fetchSingleProduct,\n    fetchSingleLenses\n    // fetchFilteredProducts\n} from './warehouse.queries'\n\nimport {\n    initProductObj,\n    initLensesObj,\n    productCategories\n} from './warehouse.utils'\n\n\nexport const WarehouseContext = createContext({\n    formToShow: 0,\n    toggleProductForms: () => { },\n    showUpdateForm: () => { },\n    isUpdating: false,\n    activeCategoryIndex: 0,\n    categories: [],\n    toggleDraft: () => { },\n    handleCategoryChange: () => { },\n    handleAvailableChange: () => { },\n    handleSizeChange: () => { },\n    selectImage: () => { },\n    product: null,\n    products: null,\n    handleChange: () => { },\n    handleSpecsChange: () => { },\n    resetProduct: () => { },\n    lenses: null,\n    lensesArr: null,\n    handleLensesChange: () => { },\n    handleLensesDioptersRangeChange: () => { },\n    handleLensesCylinderRangeChange: () => { },\n    totalCount: 0,\n    getProducts: () => { },\n    getSingleProduct: () => { },\n    createNewProduct: () => { },\n    handleProductDelete: () => { },\n    updateProduct: () => { },\n    createNewLenses: () => { },\n    getLenses: () => { },\n    getSigleLenses: () => { },\n    updateLenses: () => { },\n    deleteLenses: () => { },\n    lensesParameters: {},\n    handleParameterChange: () => { }\n})\n\n\nconst WarehouseProvider = ({ children }) => {\n    const { token, currentUser } = useContext(AuthContext)\n    const { setIsLoading, setShowModal, getMessage, closeModal } = useContext(LoadingModalContext)\n    const { setSelectedImage } = useContext(ImageContext)\n    const { push } = useHistory()\n\n    // ------------------------\n\n    const [totalCount, setTotalCount] = useState(0)\n    const [isUpdating, setIsUpdating] = useState(false)\n    const [activeCategoryIndex, setActiveCategoryIndex] = useState(0)\n\n    // ------------------------\n\n    const switchFormButtons = [\n        {\n            name: \"Okuliare a i.\"\n        },\n        {\n            name: \"Sklá\"\n        }\n    ]\n    const [formToShow, setFormToShow] = useState(0)\n\n    // ------------------------\n\n    const [categories] = useState(productCategories)\n    const [product, setProduct] = useState(currentUser.admin === 1 ? initProductObj : { ...initProductObj, available: [0, 0, 0, 0] })\n    const [products, setProducts] = useState(null)\n\n    // ------------------------\n\n    const [lenses, setLenses] = useState(initLensesObj)\n    const [lensesArr, setLensesArr] = useState(null)\n\n    const [lensesParameters, setLensesParameters] = useState({\n        diopters: [0, 0],\n        curvature: 0,\n        average: 0\n    })\n\n    const handleParameterChange = (e, idx) => {\n        const { name, value } = e.target\n        let arr = lensesParameters.lenses[name]\n        arr[idx] = Number(value)\n        setLensesParameters({\n            ...lensesParameters,\n            [name]: arr\n        })\n    }\n\n    // ------------------------\n    // PRODUCT ACTIONS\n    // ------------------------\n\n    const toggleProductForms = (e, idx) => {\n        e.preventDefault()\n        setFormToShow(idx)\n    }\n\n    const toggleDraft = () => {\n        setProduct({\n            ...product,\n            eshop: !product.eshop\n        })\n        setLenses({\n            ...lenses,\n            eshop: !product.eshop\n        })\n    }\n\n    const handleChange = (e) => {\n        const { name, value } = e.target\n        setProduct({\n            ...product,\n            [name]: value\n        })\n    }\n    const handleSpecsChange = (e) => {\n        const { name, value } = e.target\n        setProduct({\n            ...product,\n            specs: {\n                ...product.specs,\n                [name]: value\n            }\n        })\n    }\n\n    const handleCategoryChange = (value) => {\n        setActiveCategoryIndex(value)\n        setProduct({\n            ...product,\n            type: value\n        })\n    }\n\n    const handleAvailableChange = (e, idx) => {\n        let arr = product.available\n        arr[idx] = Number(e.target.value)\n        setProduct({\n            ...product,\n            available: arr\n        })\n    }\n\n    const handleSizeChange = (e, idx) => {\n        let arr = product.specs.size\n        arr[idx] = Number(e.target.value)\n        setProduct({\n            ...product,\n            specs: {\n                ...product.specs,\n                size: arr\n            }\n        })\n    }\n\n    const selectImage = (imgId) => {\n        setProduct({\n            ...product,\n            imagePath: imgId\n        })\n        setLenses({\n            ...lenses,\n            imagePath: imgId\n        })\n    }\n\n    const resetProduct = () => {\n        setProduct(currentUser.admin === 1 ? initProductObj : { ...initProductObj, available: [0, 0, 0, 0] })\n        setLenses(initLensesObj)\n        setSelectedImage(null)\n        setIsUpdating(false)\n        setActiveCategoryIndex(0)\n        setFormToShow(0)\n    }\n\n    const handleLensesChange = (e) => {\n        const { name, value } = e.target\n        setLenses({\n            ...lenses,\n            [name]: value\n        })\n    }\n\n    const handleLensesCylinderRangeChange = (e, idx) => {\n        let arr = lenses.cylinderRange\n        arr[idx] = Number(e.target.value)\n        setLenses({\n            ...lenses,\n            cylinderRange: arr\n        })\n    }\n\n    const handleLensesDioptersRangeChange = (e, idx) => {\n        let arr = lenses.dioptersRange\n        arr[idx] = Number(e.target.value)\n        setLenses({\n            ...lenses,\n            dioptersRange: arr\n        })\n    }\n\n    const showUpdateForm = (formName) => {\n        setFormToShow(formName)\n        setIsUpdating(true)\n\n    }\n\n    // ------------------------\n    // START GLASSES ACTIONS\n    // ------------------------\n\n    // Get all products\n    const getProducts = async () => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        try {\n            const response = await fetchProducts(token)\n            const data = await response.json()\n\n            if (data.products) {\n                setTotalCount(totalCount + data.count)\n                setProducts(data.products)\n                setIsLoading(false)\n                closeModal()\n                return\n            }\n\n            getMessage(data.message)\n            setIsLoading(false)\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    // Get single product\n\n    const getSingleProduct = async (id) => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        try {\n            const response = await fetchSingleProduct(id)\n            const data = await response.json()\n\n            if (data.error) {\n                getMessage(data.message)\n                setIsLoading(false)\n                return\n            }\n\n            if (data.product) {\n                if (currentUser.admin === 1) {\n                    setProduct({\n                        ...product,\n                        ...data.product,\n                        specs: {\n                            ...product.specs,\n                            ...data.product.specs\n                        },\n                        imagePath: data.product.image._id,\n                        available: [data.product.available[currentUser.premises - 1]]\n                    })\n                } else {\n                    setProduct({\n                        ...product,\n                        ...data.product,\n                        specs: {\n                            ...product.specs,\n                            ...data.product.specs\n                        },\n                        imagePath: data.product.image._id,\n                        available: data.product.available.filter((num, idx) => idx !== 4)\n\n                    })\n                }\n                setActiveCategoryIndex(data.product.type)\n                setSelectedImage(data.product.image)\n                setIsUpdating(true)\n            }\n\n            closeModal()\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n\n    }\n\n    // Create Glasses\n    const createNewProduct = async (productToAdd) => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        try {\n            const response = await postProduct(token, productToAdd)\n            const data = await response.json()\n\n            console.log(data)\n\n            if (data.error) {\n                getMessage(data.message)\n                setIsLoading(false)\n                return\n            }\n\n            setIsLoading(false)\n            getMessage(data.success)\n            resetProduct()\n            push('/dashboard/obchod')\n            getProducts()\n            closeModal()\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    // Update Glasses\n    const updateProduct = async (productToUpdate) => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        try {\n            const response = await patchProduct(token, productToUpdate)\n            const data = await response.json()\n            console.log(data)\n\n            if (data.error) {\n                getMessage(data.message)\n                setIsLoading(false)\n                return\n            }\n\n            getMessage(data.message)\n            setIsLoading(false)\n            push('/dashboard/obchod')\n            getProducts()\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    // Delete glasses\n    const handleProductDelete = async (id) => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        try {\n            const response = await deleteProduct(token, id)\n            const data = await response.json()\n\n            setIsLoading(false)\n            getMessage(data.message)\n            getProducts()\n            push('/dashboard/obchod')\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    // ------------------------\n    // END GLASSES ACTIONS\n    // ------------------------\n\n\n    // ------------------------\n    // START LENSES ACTIONS\n    // ------------------------\n\n    // Get all lenses\n    const getLenses = async () => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        try {\n            const response = await fetchLenses(token)\n            const data = await response.json()\n\n            if (data.lenses) {\n                setTotalCount(totalCount + data.count)\n                setLensesArr(data.lenses)\n                setIsLoading(false)\n                closeModal()\n                return\n            }\n\n            setIsLoading(false)\n            getMessage(data.message)\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    // Get single lenses\n    const getSigleLenses = async (id) => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        try {\n            const response = await fetchSingleLenses(id)\n            const data = await response.json()\n\n            console.log(data)\n\n\n            if (data.error) {\n                getMessage(data.message)\n                setIsLoading(false)\n                return\n            }\n\n            if (data.lenses) {\n                setLenses({\n                    ...lenses,\n                    ...data.lenses,\n                    imagePath: data.lenses.image._id\n                })\n                setSelectedImage(data.lenses.image)\n                setIsUpdating(true)\n            }\n\n            closeModal()\n\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    // Create Lense\n    const createNewLenses = async (productToAdd) => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        try {\n            const response = await postLenses(token, productToAdd)\n            const data = await response.json()\n\n            if (data) {\n                setIsLoading(false)\n                getMessage(data.message)\n                push('/dashboard/obchod')\n                getLenses()\n                closeModal()\n            }\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    // Update Lense\n    const updateLenses = async (productToAdd) => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        try {\n            const response = await patchLenses(token, productToAdd)\n            const data = await response.json()\n\n            console.log(data)\n\n            if (data) {\n                setIsLoading(false)\n                getMessage(data.message)\n                push('/dashboard/obchod')\n                getLenses()\n            }\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    // Delete Lense\n    const deleteLenses = async (id) => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        try {\n            const response = await delLense(token, id)\n            const data = await response.json()\n\n            if (data.error) {\n                setIsLoading(false)\n                getMessage(data.message)\n            }\n\n\n            getLenses()\n            setIsLoading(false)\n            getMessage(data.message)\n            push('/dashboard/obchod')\n            closeModal()\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    // ------------------------\n    // END LENSES ACTIONS\n    // ------------------------\n\n    return (\n        <WarehouseContext.Provider\n            value={{\n                switchFormButtons,\n                formToShow,\n                toggleProductForms,\n                showUpdateForm,\n                isUpdating,\n                activeCategoryIndex,\n                categories,\n                toggleDraft,\n                handleCategoryChange,\n                handleAvailableChange,\n                handleSizeChange,\n                selectImage,\n                product,\n                products,\n                handleChange,\n                handleSpecsChange,\n                resetProduct,\n                lenses,\n                lensesArr,\n                handleLensesChange,\n                handleLensesDioptersRangeChange,\n                handleLensesCylinderRangeChange,\n                totalCount,\n                getProducts,\n                getSingleProduct,\n                createNewProduct,\n                handleProductDelete,\n                updateProduct,\n                createNewLenses,\n                getLenses,\n                getSigleLenses,\n                updateLenses,\n                deleteLenses,\n                lensesParameters,\n                handleParameterChange,\n            }}\n        >\n            {children}\n        </WarehouseContext.Provider>\n    )\n}\n\nexport default WarehouseProvider"],"sourceRoot":""}