(this.webpackJsonpimooptik=this.webpackJsonpimooptik||[]).push([[20,28],{222:function(n,e,t){"use strict";t.r(e);var r=t(2),c=t(32),o=t(21),i=t(54),a=t(10),d=t(1),s=t(18),l=t(3),u=t(52),j=t(31),b=t(7),h=t.n(b),m=t(12),v=t(19),O=t(51),p=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";n.toString();var e=0;return n.includes(",")?1===n.split(",")[1].length?(e=n.split(",")[0]+n.split(",")[1]+"0",Number(e)):(e=n.split(",")[0]+n.split(",")[1],Number(e)):Number(100*n)},f=t(5),x=t(6),g=t(63),y=t(28);function k(){var n=Object(f.a)(["\n    background-color: var(--body-background-primary-color);\n    border-radius: 50%;\n    width: 10rem;\n    height: 10rem;\n    margin: 0 auto;\n    margin-bottom: 1.5rem;\n"]);return k=function(){return n},n}function w(){var n=Object(f.a)(["\n    cursor: pointer;\n    width: 100%;\n    max-width: 32rem;\n    padding: 2rem;\n    border-radius: .5rem;\n    box-shadow: var(--container-shadow);\n    text-align: center;\n    transition: transform .3s ease-out,\n                box-shadow .3s ease-out;\n    margin: 2rem auto;\n\n    &:last-child {\n        display:flex;\n        flex-direction: column;\n        justify-content: space-between;\n    }\n\n    h4 {\n        font-size: 2.5rem;\n        margin-bottom: 1.5rem\n    }\n\n    img {\n        /* background-color:#000; */\n        width: 15rem;\n        height: 15rem;\n        margin-bottom: 1rem; \n        object-fit: contain;\n        object-position: center;\n    }\n\n    p {\n        opacity: .65;\n        &:not(:last-child){\n            margin-bottom: .5rem;\n        }\n    }\n\n    h5 {\n        font-size: 2.5rem;\n    }\n"]);return w=function(){return n},n}function C(){var n=Object(f.a)(["\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    grid-gap: 2rem;\n    margin-bottom: 2rem;\n"]);return C=function(){return n},n}function P(){var n=Object(f.a)(["\n    margin-top: 1.5rem;\n    min-width: 16.5rem;\n    width: 100%;\n    background-color: var(--input-background-color);\n    color: var(--input-color);\n    border: none;\n    padding: .5rem .5rem .5rem 1rem;\n    font-size: inherit;\n    font-family: inherit;\n    display: block;\n    outline: none;\n\n    &:focus {\n        outline: none;\n    }\n"]);return P=function(){return n},n}function z(){var n=Object(f.a)(["\n    display: flex;\n    align-items: center;\n    margin-bottom: 2rem;\n\n\n    label {\n        display: block;\n        outline: none;\n        margin-left: 1rem;\n\n        &:focus {\n            outline: none;\n\n        }\n    }\n\n    input: {\n        display: block;\n    }\n"]);return z=function(){return n},n}function S(){var n=Object(f.a)(["\n    display: block;\n    margin: 2rem auto 0;\n"]);return S=function(){return n},n}function L(){var n=Object(f.a)(["\n    /* background-color: gray; */\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    margin-top: 4rem;\n    margin-bottom: 4rem;\n\n    img {\n        width: 20rem;\n        \n    }\n\n    span {\n        opacity: .6;\n        font-size: 1.2rem;\n        display: block;\n        text-align: center;\n    }\n\n    p {\n        font-weight: bolder;\n        font-size: 2rem;\n    }\n"]);return L=function(){return n},n}function D(){var n=Object(f.a)(["\n    margin-top: 1rem;\n    margin-right: 2rem;\n"]);return D=function(){return n},n}function E(){var n=Object(f.a)(["\n    width: 100%;\n    height: 100%;\n\n    position: fixed;\n    left: 0;\n    right: 0;\n    z-index: 99999;\n\n    border: none;\n    outline: none;\n    opacity: 0;\n\n    &:focus {\n        outline: none\n    }\n"]);return E=function(){return n},n}function N(){var n=Object(f.a)(["\n    width:100%;\n    max-width: 50rem;\n    max-height: 60rem;\n\n    overflow-y: scroll;\n\n    /* display: flex;\n    flex-direction: column;\n    align-items: center; */\n\n    padding: 2rem;\n    border-radius: .5rem;\n    background-color: var(--background-primary-color);\n    color: var(--primary-text-color);\n\n    position: relative;\n    z-index: 999999;\n\n    h2{ \n        margin-bottom: 2rem;\n        text-align: center;\n    }\n"]);return N=function(){return n},n}function M(){var n=Object(f.a)(["\n    position: fixed;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    z-index: 99999;\n\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    background-color: rgba(0,0,0,0.3);\n"]);return M=function(){return n},n}var F=x.c.div(M()),R=x.c.div(N()),A=x.c.button(E()),T=Object(x.c)(g.a)(D()),I=x.c.div(L()),H=Object(x.c)(y.a)(S()),U=x.c.div(z()),K=x.c.select(P()),Z=x.c.div(C()),_=x.c.div(w()),B=x.c.div(k()),V=function(n){var e,t,i,u,j=n.close,b=n.order,f=n.addCombineProduct,x=n.next,g=Object(d.useContext)(s.a),y=g.setIsLoading,k=g.getMessage,w=g.setShowModal,C=g.closeModal,P=Object(d.useContext)(v.a),z=P.isAdmin,S=P.token,L=b.product,D=b.lenses,E=L.contactLenses,N=Object(d.useState)({}),M=Object(a.a)(N,2),V=M[0],q=M[1],J=Object(d.useState)({}),Q=Object(a.a)(J,2),W=Q[0],G=Q[1],X=Object(d.useState)({}),Y=Object(a.a)(X,2),$=Y[0],nn=Y[1],en=Object(d.useState)("flat"),tn=Object(a.a)(en,2),rn=tn[0],cn=tn[1],on=Object(d.useState)("flat"),an=Object(a.a)(on,2),dn=an[0],sn=an[1],ln=Object(d.useState)(!1),un=Object(a.a)(ln,2),jn=un[0],bn=un[1],hn=Object(d.useState)(!1),mn=Object(a.a)(hn,2),vn=mn[0],On=mn[1],pn=Object(d.useState)(!1),fn=Object(a.a)(pn,2),xn=fn[0],gn=fn[1];console.log(b),console.log(W),console.log(D);var yn=function(n){G({}),cn(n)},kn=function(n){nn({}),sn(n)},wn=function(n,e,t){var r=n.target,i=r.name,a=r.value,d=t;d[e]=""===a?1001:Number(a),q(Object(o.a)(Object(o.a)({},V),{},{contactLenses:Object(o.a)(Object(o.a)({},V.contactLenses),{},Object(c.a)({},i,d))}))},Cn=function(){var n=Object(m.a)(h.a.mark((function n(e){var t,r,c,i,a,d;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.preventDefault(),y(!0),w(!0),t={},L.type&&(5===L.type&&(t={product:b.product._id}),3===L.type?t={product:b.product._id,contactLenses:V.contactLenses}:(t={product:b.product._id},b.lenses&&(t={product:b.product._id,lens:b.lenses._id})),jn?(t="flat"===rn?Object(o.a)(Object(o.a)({},t),{},{discount:{product:{flat:p(W.flat)}}}):Object(o.a)(Object(o.a)({},t),{},{discount:{product:Object(o.a)({},W)}}),vn&&(t="flat"===dn?Object(o.a)(Object(o.a)({},t),{},{discount:{product:{flat:p(W.flat)},lenses:{flat:p($.flat)}}}):Object(o.a)(Object(o.a)({},t),{},{discount:{product:Object(o.a)({},W),lenses:Object(o.a)({},$)}}))):vn&&(t="flat"===dn?Object(o.a)(Object(o.a)({},t),{},{discount:{lenses:{flat:p($.flat)}}}):Object(o.a)(Object(o.a)({},t),{},{discount:{lenses:Object(o.a)({},$)}}))),console.log("COMBINED PRODUCT BEFORE SEND"),console.log(t),r=JSON.stringify(t),(c=new Headers).append("auth-token",S),c.append("Content-Type","application/json"),i={method:"POST",headers:c,body:r,redirect:"follow"},n.prev=12,n.next=15,fetch("".concat("http://195.110.58.166:8080","/api/store/combinedProducts"),i);case 15:return a=n.sent,n.next=18,a.json();case 18:d=n.sent,console.log(d),d.combinedProduct&&(f(d.combinedProduct),C(),x()),y(!1),k(d.message),n.next=30;break;case 25:n.prev=25,n.t0=n.catch(12),console.log(n.t0),k("Nieco sa pokazilo"),y(!1);case 30:case"end":return n.stop()}}),n,null,[[12,25]])})));return function(e){return n.apply(this,arguments)}}();return Object(d.useEffect)((function(){L.type&&3===L.type&&q({contactLenses:{curve:[L.contactLenses.allowedCurves[0],L.contactLenses.allowedCurves[0]],diameter:[L.contactLenses.allowedDiameters[0],L.contactLenses.allowedDiameters[0]],diopters:[0,0]}})}),[L]),Object(d.useEffect)((function(){return function(){q({}),G({}),cn("flat"),bn(!1),gn(!1)}}),[]),Object(r.jsxs)(F,{children:[Object(r.jsx)(l.a,{when:xn,message:"Chcete opusti\u0165 t\xfato str\xe1nku?"}),Object(r.jsx)(A,{onClick:j}),Object(r.jsxs)(R,{children:[Object(r.jsx)("h2",{children:"Produkt ktory chcete prida\u0165"}),Object(r.jsxs)(I,{children:[Object(r.jsx)("div",{children:L.image&&Object(r.jsx)("img",{src:"".concat("http://195.110.58.166:8080","/uploads/").concat(L.image.imagePath),alt:L.image.alt})}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:L.name}),Object(r.jsx)("span",{children:L.eanCode})]}),Object(r.jsx)("div",{children:Object(r.jsxs)("p",{children:[(L.price/100).toFixed(2),"\u20ac"]})})]}),D&&Object(r.jsxs)(_,{children:[Object(r.jsx)("h4",{children:D.name}),Object(r.jsx)(B,{}),Object(r.jsx)("p",{children:D.description}),D.dioptersRange&&Object(r.jsx)("p",{children:"Dioptrie od ".concat(D.dioptersRange[0]," do ").concat(D.dioptersRange[1])}),D.cylinderRange&&Object(r.jsx)("p",{children:"Cylinder  od ".concat(D.cylinderRange[0]," do ").concat(D.cylinderRange[1])}),Object(r.jsxs)("h5",{children:[(D.price/100).toFixed(2),"\u20ac"]})]}),V.contactLenses&&3===L.type&&Object(r.jsxs)(Z,{children:[Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"\u013dave oko"}),Object(r.jsx)(K,{name:"curve",value:V.contactLenses.curve[0],onChange:function(n){return wn(n,0,V.contactLenses.curve)},children:L.contactLenses.allowedCurves.map((function(n,e){return Object(r.jsx)("option",{value:n,children:n},e)}))}),Object(r.jsx)(K,{name:"diameter",value:V.contactLenses.diameter[0],onChange:function(n){return wn(n,0,V.contactLenses.diameter)},children:L.contactLenses.allowedDiameters.map((function(n,e){return Object(r.jsx)("option",{value:n,children:n},e)}))}),Object(r.jsx)(O.a,{name:"diopters",type:"number",value:V.contactLenses.diopters[0],min:E.dioptersRange[0],max:E.dioptersRange[1],step:.25,onChange:function(n){return wn(n,0,V.contactLenses.diopters)}})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Prav\xe9 oko"}),Object(r.jsx)(K,{name:"curve",value:V.contactLenses.curve[1],onChange:function(n){return wn(n,1,V.contactLenses.curve)},children:L.contactLenses.allowedCurves.map((function(n,e){return Object(r.jsx)("option",{value:n,children:n},e)}))}),Object(r.jsx)(K,{name:"diameter",value:V.contactLenses.diameter[1],onChange:function(n){return wn(n,1,V.contactLenses.diameter)},children:L.contactLenses.allowedDiameters.map((function(n,e){return Object(r.jsx)("option",{value:n,children:n},e)}))}),Object(r.jsx)(O.a,{type:"number",value:V.contactLenses.diopters[1],min:E.dioptersRange[0],max:E.dioptersRange[1],step:.25,name:"diopters",onChange:function(n){return wn(n,1,V.contactLenses.diopters)}})]})]}),z&&Object(r.jsxs)("div",{children:[Object(r.jsxs)(U,{children:[Object(r.jsx)("input",{id:"discount",name:"discount",type:"checkbox",value:jn,onChange:function(){return bn(!jn)}}),Object(r.jsx)("label",{htmlFor:"discount",children:"Prida\u0165 zlavu pre produkt"})]}),jn&&Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Zlava pre produkt"}),Object(r.jsxs)("div",{children:[Object(r.jsx)(T,{label:"Fixn\xe1 suma",value:"flat",name:"flat",isActive:"flat"===rn,handleClick:function(){return yn("flat")}}),Object(r.jsx)(T,{label:"Percert\xe1",value:"percent",name:"percent",isActive:"percent"===rn,handleClick:function(){return yn("percent")}})]}),Object(r.jsx)("div",{children:Object(r.jsx)(O.a,{label:"Hodnota",value:"flat"===rn?null!==(e=W.flat)&&void 0!==e?e:"":null!==(t=W.percent)&&void 0!==t?t:"",onChange:function(n){!function(n){var e=n.target,t=e.name,r=e.value;if(""===r)return delete W[t],void G(Object(o.a)({},W));G(Object(o.a)(Object(o.a)({},W),{},Object(c.a)({},t,r)))}({target:{name:rn,value:n.target.value}},L.type)}})})]})]}),z&&(null===b||void 0===b?void 0:b.lenses)&&Object(r.jsxs)("div",{children:[Object(r.jsxs)(U,{children:[Object(r.jsx)("input",{id:"lensdiscount",name:"lensdiscount",type:"checkbox",value:vn,onChange:function(){return On(!vn)}}),Object(r.jsx)("label",{htmlFor:"lensdiscount",children:"Prida\u0165 zlavu pre \u0161o\u0161ovky"})]}),vn&&Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Zlava pre \u0161o\u0161ovky"}),Object(r.jsxs)("div",{children:[Object(r.jsx)(T,{label:"Fixn\xe1 suma",value:"flat",name:"flat",isActive:"flat"===dn,handleClick:function(){return kn("flat")}}),Object(r.jsx)(T,{label:"Percert\xe1",value:"percent",name:"percent",isActive:"percent"===dn,handleClick:function(){return kn("percent")}})]}),Object(r.jsx)("div",{children:Object(r.jsx)(O.a,{label:"Hodnota",value:"flat"===dn?null!==(i=$.flat)&&void 0!==i?i:"":null!==(u=$.percent)&&void 0!==u?u:"",onChange:function(n){!function(n){var e=n.target,t=e.name,r=e.value;if(""===r)return delete $[t],void nn(Object(o.a)({},$));nn(Object(o.a)(Object(o.a)({},$),{},Object(c.a)({},t,r)))}({target:{name:dn,value:n.target.value}})}})})]})]}),Object(r.jsx)(H,{onClick:Cn,children:"Prida\u0165 do objedn\xe1vky"})]})]})},q=t(71);function J(){var n=Object(f.a)(["\n    max-width: 40rem;\n    padding: 2rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n    margin: 0 auto;\n    border-radius: .5rem;\n\n    h3 {\n        text-align: center;\n        font-size: 3rem;\n    }\n\n    div {\n\n        &:not(:last-child) {\n            margin-bottom: 3rem;\n\n        }\n    }\n"]);return J=function(){return n},n}function Q(){var n=Object(f.a)(["\n    padding: 2rem;\n    text-align: center;\n\n    img {\n        width: 5rem;\n    }\n"]);return Q=function(){return n},n}function W(){var n=Object(f.a)(["\n    margin: 5rem 0;\n"]);return W=function(){return n},n}function G(){var n=Object(f.a)(["\n    display: block;\n    margin: 0 auto;\n"]);return G=function(){return n},n}function X(){var n=Object(f.a)(["\n    cursor: pointer;\n    display: grid;\n    align-content: center;\n    grid-template-columns: 1fr 2fr 25rem;\n    margin-bottom: 1rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n\n    transition: all .3s ease-out;\n\n    &:hover {\n        background-color: var(--color-primary); \n        font-weight: bolder;\n        color: var(--button-font-color);\n    }\n"]);return X=function(){return n},n}function Y(){var n=Object(f.a)(["\n    display: grid;\n    align-content: center;\n    grid-template-columns: 1fr 2fr 25rem;\n    border-bottom: 1px solid var(--secondary-text-colo);\n    font-weight: bolder;\n"]);return Y=function(){return n},n}var $=x.c.div(Y()),nn=x.c.div(X()),en=Object(x.c)(y.a)(G()),tn=x.c.div(W()),rn=x.c.div(Q()),cn=x.c.div(J()),on=function(n){var e=n.next,t=n.addToOrder,c=Object(d.useState)(""),o=Object(a.a)(c,2),i=o[0],s=o[1],l=Object(d.useState)([]),u=Object(a.a)(l,2),j=u[0],b=u[1],h=Object(d.useContext)(q.UserContext),m=h.users,v=h.getFilteredUsers,p=h.getUserByQuery;return Object(d.useEffect)((function(){m||v({limit:5}),m&&b(m)}),[m]),Object(d.useEffect)((function(){m&&""===i&&(v({limit:5}),b(m))}),[i]),Object(d.useEffect)((function(){return function(){s(""),b([])}}),[]),Object(r.jsxs)("div",{children:[Object(r.jsxs)(cn,{children:[Object(r.jsx)("h3",{children:"Vyh\u013eada\u0165 z\xe1kaznika"}),Object(r.jsx)("div",{children:Object(r.jsx)(O.a,{label:"Meno, priezvisko, email alebo tel. \u010d\xedslo",value:i,onChange:function(n){return s(n.target.value)},onKeyPress:function(n){""!==i&&"Enter"===n.key&&p({query:i})}})}),Object(r.jsx)(en,{onClick:function(){""!==i&&p({query:i})},children:"H\u013eada\u0165"})]}),Object(r.jsxs)(tn,{children:[Object(r.jsxs)($,{children:[Object(r.jsx)(rn,{children:"Meno a priezvisko"}),Object(r.jsx)(rn,{children:"Email"}),Object(r.jsx)(rn,{children:"Mo\u017enosti"})]}),j.map((function(n,c){return Object(r.jsxs)(nn,{onClick:function(){return function(n){t({name:"user",value:n}),e()}(n)},children:[Object(r.jsx)(rn,{children:n.name}),Object(r.jsx)(rn,{children:n.email}),Object(r.jsx)(rn,{children:n.phone})]},c)}))]})]})},an=t(72),dn=t(220);function sn(){var n=Object(f.a)(["\n    cursor: pointer;\n    border: 4px solid var(--backbutton-color);\n    color: var(--backbutton-color);\n    border-radius: 50%;\n    padding: 1.2rem 1.2rem;\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    margin-bottom: 3rem;\n"]);return sn=function(){return n},n}var ln=x.c.div(sn()),un=function(n){var e=Object.assign({},n);return Object(r.jsx)(ln,Object(o.a)(Object(o.a)({},e),{},{children:Object(r.jsx)(dn.a,{})}))};function jn(){var n=Object(f.a)(["\n    cursor: pointer;\n    display: grid;\n    align-content: center;\n    grid-template-columns: 10rem 15rem 1fr 1fr 10rem 1fr;\n    margin-bottom: 1rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n\n    transition: all .3s ease-out;\n\n    &:hover {\n        background-color: var(--primary-color); \n        font-weight: bolder;\n        color: var(--primary-text-color);\n    }\n"]);return jn=function(){return n},n}function bn(){var n=Object(f.a)(["\n    display: grid;\n    align-content: center;\n    grid-template-columns: 10rem 15rem 1fr 1fr 10rem 1fr;\n    border-bottom: 1px solid var(--secondary-text-color);\n    font-weight: bolder;\n"]);return bn=function(){return n},n}function hn(){var n=Object(f.a)(["\n    padding: 2rem;\n    text-align: center;\n\n    img {\n        width: 5rem;\n    }\n"]);return hn=function(){return n},n}function mn(){var n=Object(f.a)(["\n    margin: 5rem 0;\n"]);return mn=function(){return n},n}function vn(){var n=Object(f.a)(["\n    display: block;\n    margin: 0 auto;\n"]);return vn=function(){return n},n}function On(){var n=Object(f.a)(["\n    max-width: 40rem;\n    padding: 2rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n    margin: 0 auto;\n    border-radius: .5rem;\n\n    h3 {\n        text-align: center;\n        font-size: 3rem;\n    }\n\n    div {\n\n        &:not(:last-child) {\n            margin-bottom: 3rem;\n\n        }\n    }\n"]);return On=function(){return n},n}var pn=x.c.div(On()),fn=Object(x.c)(y.a)(vn()),xn=x.c.div(mn()),gn=x.c.div(hn()),yn=x.c.div(bn()),kn=x.c.div(jn()),wn=function(n){var e=n.back,t=n.next,c=n.addToOrder,o=n.showModal,i=n.showErrorMessage,s=Object(d.useState)(""),l=Object(a.a)(s,2),u=l[0],j=l[1],b=Object(d.useState)([]),h=Object(a.a)(b,2),m=h[0],v=h[1],p=Object(d.useContext)(an.WarehouseContext),f=p.products,x=p.getProductsByQuery;return Object(d.useEffect)((function(){(!f||m.length<1)&&x({limit:10}),f&&v(f)}),[f]),Object(d.useEffect)((function(){f&&""===u&&x({limit:10})}),[u]),Object(d.useEffect)((function(){return function(){v([])}}),[]),Object(r.jsxs)("div",{children:[Object(r.jsx)(un,{onClick:e}),Object(r.jsxs)(pn,{children:[Object(r.jsx)("h3",{children:"Vyh\u013eada\u0165 produkt"}),Object(r.jsx)("div",{children:Object(r.jsx)(O.a,{label:"N\xe1zov produktu, eanCode alebo popis",value:u,handleChange:function(n){return j(n.target.value)},onKeyPress:function(n){""!==u&&"Enter"===n.key&&x({query:u})}})}),Object(r.jsx)(fn,{onClick:function(){""!==u&&x({query:u})},children:"H\u013eada\u0165"})]}),Object(r.jsxs)(xn,{children:[Object(r.jsxs)(yn,{children:[Object(r.jsx)(gn,{children:"eanCode"}),Object(r.jsx)(gn,{children:"Obr\xe1zok"}),Object(r.jsx)(gn,{children:"N\xe1zov"}),Object(r.jsx)(gn,{children:"Zna\u010dka"}),Object(r.jsx)(gn,{children:"Cena"}),Object(r.jsx)(gn,{children:"Dostupnos\u0165"})]}),m.map((function(n,e){return Object(r.jsxs)(kn,{onClick:function(){return(e=n.available)&&("number"===typeof e?e>0:e.reduce((function(n,e){return n+e}))>0)?function(n){c({name:"product",value:n}),1===n.type?t("selectLenses"):o()}(n):i("Produkt nieje na sklade.");var e},children:[Object(r.jsx)(gn,{children:n.eanCode}),Object(r.jsx)(gn,{children:(null===n||void 0===n?void 0:n.image)&&Object(r.jsx)("img",{src:"".concat("http://195.110.58.166:8080","/uploads/").concat(n.image.imagePath),alt:n.image.alt})}),Object(r.jsx)(gn,{children:n.name}),Object(r.jsx)(gn,{children:n.brand}),Object(r.jsxs)(gn,{children:[(n.price/100).toFixed(2),"\u20ac"]}),Object(r.jsx)(gn,{children:(a=n.available,a?"number"===typeof a?a>0?"Na sklade":"Nedostupn\xe9":a.reduce((function(n,e){return n+e}))>0?"Na sklade":"Nedostupn\xe9":"Nedostupn\xe9")})]},e);var a}))]})]})},Cn=t(84);function Pn(){var n=Object(f.a)(["\n    background-color: var(--background-primary-color);\n    border-radius: 50%;\n    width: 10rem;\n    height: 10rem;\n    margin: 0 auto;\n    margin-bottom: 1.5rem;\n"]);return Pn=function(){return n},n}function zn(){var n=Object(f.a)(["\n    cursor: pointer;\n    width: 100%;\n    max-width: 32rem;\n    padding: 2rem;\n    border-radius: .5rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n    text-align: center;\n    transition: transform .3s ease-out,\n                box-shadow .3s ease-out;\n\n    &:last-child {\n        display:flex;\n        flex-direction: column;\n        justify-content: space-between;\n    }\n\n    h4 {\n        font-size: 2.5rem;\n        margin-bottom: 1.5rem\n    }\n\n    img {\n        /* background-color:#000; */\n        width: 15rem;\n        height: 15rem;\n        margin-bottom: 1rem; \n        object-fit: contain;\n        object-position: center;\n    }\n\n    p {\n        opacity: .65;\n        &:not(:last-child){\n            margin-bottom: .5rem;\n        }\n    }\n\n    h5 {\n        font-size: 2.5rem;\n    }\n\n    &:hover {\n        transform: scale(1.03);\n        box-shadow: var(--container-shadow);\n    }\n"]);return zn=function(){return n},n}function Sn(){var n=Object(f.a)(["\n    display: flex;\n    flex-wrap: wrap;\n    gap: 2rem;\n"]);return Sn=function(){return n},n}function Ln(){var n=Object(f.a)(["\n    margin: 5rem 0;\n\n    h3 {\n        font-size: 3rem;\n        margin-bottom: 3rem;\n    }\n"]);return Ln=function(){return n},n}function Dn(){var n=Object(f.a)(["\n    h3 {\n        font-size: 3rem;\n        margin-bottom: 1rem;\n    }\n"]);return Dn=function(){return n},n}var En=x.c.div(Dn()),Nn=x.c.div(Ln()),Mn=x.c.div(Sn()),Fn=x.c.div(zn()),Rn=x.c.div(Pn()),An=function(n){var e=n.back,t=(n.next,n.addToOrder),c=n.order,o=n.showModal,i=Object(d.useState)([]),s=Object(a.a)(i,2),l=s[0],u=s[1],j=Object(d.useContext)(an.WarehouseContext),b=j.lensesProducts,h=j.getLenses,m=function(n){t({name:"lenses",value:n}),o()};return Object(d.useEffect)((function(){b||h(),b&&u(b)}),[b]),Object(r.jsxs)("div",{children:[Object(r.jsx)(un,{onClick:e}),Object(r.jsx)("div",{children:Object(r.jsxs)(En,{children:[Object(r.jsx)("h3",{children:"Parametre z\xe1kaznika"}),Object(r.jsx)(Cn.a,{parameters:c.user.lenses,disabledInputs:!0})]})}),Object(r.jsxs)(Nn,{children:[Object(r.jsx)("h3",{children:"V\xfdber \u0160o\u0161oviek"}),Object(r.jsxs)(Mn,{children:[l.map((function(n,e){return Object(r.jsxs)(Fn,{onClick:function(){return m(n)},children:[Object(r.jsx)("h4",{children:n.name}),Object(r.jsx)(Rn,{}),Object(r.jsx)("p",{children:n.description}),n.dioptersRange&&Object(r.jsx)("p",{children:"Dioptrie od ".concat(n.dioptersRange[0]," do ").concat(n.dioptersRange[1])}),n.cylinderRange&&Object(r.jsx)("p",{children:"Cylinder  od ".concat(n.cylinderRange[0]," do ").concat(n.cylinderRange[1])}),Object(r.jsxs)("h5",{children:[(n.price/100).toFixed(2),"\u20ac"]})]},e)})),Object(r.jsxs)(Fn,{onClick:function(){return m(null)},children:[Object(r.jsx)("h4",{children:"\u017diadn\xe9 skl\xe1"}),Object(r.jsx)(Rn,{}),Object(r.jsx)("h5",{children:"0\u20ac"})]})]})]})]})},Tn=t(67);function In(){var n=Object(f.a)(["\n    display: flex;\n    align-items: center;\n    margin-bottom: 2rem;\n\n\n    label {\n        display: block;\n        outline: none;\n        margin-left: 1rem;\n\n        &:focus {\n            outline: none;\n\n        }\n    }\n\n    input: {\n        display: block;\n    }\n"]);return In=function(){return n},n}function Hn(){var n=Object(f.a)(["\n    display: flex;\n    align-items: center;\n    margin-bottom: 2rem;\n\n\n    label {\n        display: block;\n        outline: none;\n        margin-left: 1rem;\n\n        &:focus {\n            outline: none;\n\n        }\n    }\n\n    input: {\n        display: block;\n    }\n"]);return Hn=function(){return n},n}function Un(){var n=Object(f.a)(["\n    margin-top: 2rem;\n    margin-right: 2rem;\n"]);return Un=function(){return n},n}function Kn(){var n=Object(f.a)(["\n    margin-top: 1.5rem;\n    min-width: 16.5rem;\n    width: 100%;\n    background-color: var(--input-background-color);\n    color: var(--input-color);\n    border: none;\n    padding: .5rem .5rem .5rem 1rem;\n    font-size: inherit;\n    font-family: inherit;\n    display: block;\n    outline: none;\n    margin-bottom: 2rem;\n\n    &:focus {\n        outline: none;\n    }\n"]);return Kn=function(){return n},n}function Zn(){var n=Object(f.a)(["\n    display: block;\n    margin: 2rem auto 0;\n"]);return Zn=function(){return n},n}function _n(){var n=Object(f.a)(["\n    width: 100%;\n    height: 100%;\n\n    position: fixed;\n    left: 0;\n    right: 0;\n    z-index: 99999;\n\n    border: none;\n    outline: none;\n    opacity: 0;\n\n    &:focus {\n        outline: none\n    }\n"]);return _n=function(){return n},n}function Bn(){var n=Object(f.a)(["\n    width:100%;\n    max-width: 50rem;\n    max-height: 60rem;\n\n    overflow-y: scroll;\n\n    /* display: flex;\n    flex-direction: column;\n    align-items: center; */\n\n    padding: 2rem;\n    border-radius: .5rem;\n    background-color: var(--background-primary-color);\n\n    position: relative;\n    z-index: 999999;\n\n    h2{ \n        margin-bottom: 2rem;\n        text-align: center;\n    }\n    h4{ \n        margin-top: 2rem;\n    }\n"]);return Bn=function(){return n},n}function Vn(){var n=Object(f.a)(["\n    position: fixed;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    z-index: 99999;\n\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    background-color: rgba(0,0,0,0.3);\n"]);return Vn=function(){return n},n}var qn=x.c.div(Vn()),Jn=x.c.div(Bn()),Qn=x.c.button(_n()),Wn=Object(x.c)(y.a)(Zn()),Gn=x.c.select(Kn()),Xn=Object(x.c)(g.a)(Un()),Yn=x.c.div(Hn()),$n=x.c.div(In()),ne=function(n){var e,t,i,s,l,u,j,b,h,m,v=n.close,p=n.order,f=n.combinedProducts,x=n.createOrder,g=n.setHasChanged,y=Object(d.useState)({paymentType:"cash"}),k=Object(a.a)(y,2),w=k[0],C=k[1],P=Object(d.useState)(!1),z=Object(a.a)(P,2),S=z[0],L=z[1],D=Object(d.useState)(!1),E=Object(a.a)(D,2),N=E[0],M=E[1],F=function(n){var e=n.target,t=e.name,r=e.value;if(""===r)return delete w[t],void C(Object(o.a)({},w));C(Object(o.a)(Object(o.a)({},w),{},Object(c.a)({},t,r)))},R=function(n){var e=n.target,t=e.name,r=e.value;if(""===r)return delete w.overwrite[t],void C(Object(o.a)({},w));C(Object(o.a)(Object(o.a)({},w),{},{overwrite:Object(o.a)(Object(o.a)({},w.overwrite),{},Object(c.a)({},t,r))}))};Object(d.useEffect)((function(){return function(){}}),[]);return Object(r.jsxs)(qn,{children:[Object(r.jsx)(Qn,{onClick:v}),Object(r.jsxs)(Jn,{children:[Object(r.jsx)("h2",{children:"Dokon\u010denie objedn\xe1vky"}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Sp\xf4sob platby"}),Object(r.jsxs)(Gn,{name:"paymentType",value:null!==(e=null===w||void 0===w?void 0:w.paymentType)&&void 0!==e?e:"cash",onChange:function(n){return F(n)},children:[Object(r.jsx)("option",{value:"cash",children:"Hotovos\u0165"}),Object(r.jsx)("option",{value:"card",children:"Karta"}),Object(r.jsx)("option",{value:"coupon",children:"Kup\xf3n"})]}),Object(r.jsxs)($n,{children:[Object(r.jsx)("input",{id:"hasDeposit",name:"hasDeposit",type:"checkbox",value:S,onChange:function(){S?(L(!1),w.paidAlready&&(delete w.paidAlready,C(Object(o.a)({},w)))):L(!0)}}),Object(r.jsx)("label",{htmlFor:"hasDeposit",children:"Prida\u0165 z\xe1lohu"})]}),S&&Object(r.jsx)(O.a,{label:"Zaplaten\xe1 z\xe1loha",name:"paidAlready",type:"text",value:null!==(t=null===w||void 0===w?void 0:w.paidAlready)&&void 0!==t?t:"",onChange:function(n){return F(n)}})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"\u010eal\u0161ie inform\xe1cie"}),Object(r.jsx)(Xn,{label:"Doru\u010di\u0165 na adresu",isActive:null===w||void 0===w?void 0:w.shouldDeliver,handleClick:function(){return F({target:{name:"shouldDeliver",value:!(null===w||void 0===w?void 0:w.shouldDeliver)||!(null===w||void 0===w?void 0:w.shouldDeliver)}})}}),Object(r.jsx)(Xn,{label:"N\xe1kup na firmu",isActive:null===w||void 0===w?void 0:w.buyingAsCompany,handleClick:function(){return F({target:{name:"buyingAsCompany",value:!(null===w||void 0===w?void 0:w.buyingAsCompany)||!(null===w||void 0===w?void 0:w.buyingAsCompany)}})}}),(null===w||void 0===w?void 0:w.shouldDeliver)&&Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Adresa"}),Object(r.jsx)("p",{children:p.user.psc}),Object(r.jsx)("p",{children:p.user.address}),Object(r.jsx)("p",{children:p.user.city}),Object(r.jsx)("p",{children:p.user.country}),Object(r.jsxs)("div",{children:[Object(r.jsxs)(Yn,{children:[Object(r.jsx)("input",{id:"overwrite",name:"overwrite",type:"checkbox",value:N,onChange:function(){N?(M(!1),w.overwrite&&(delete w.overwrite,C(Object(o.a)({},w)))):M(!0)}}),Object(r.jsx)("label",{htmlFor:"overwrite",children:"In\xe1 adresa"})]}),N&&Object(r.jsxs)("div",{children:[Object(r.jsx)(O.a,{label:"Adresa",name:"address",type:"text",value:null!==(i=null===w||void 0===w||null===(s=w.overwrite)||void 0===s?void 0:s.address)&&void 0!==i?i:"",onChange:function(n){return R(n)}}),Object(r.jsx)(O.a,{label:"PS\u010c",name:"psc",type:"text",value:null!==(l=null===w||void 0===w||null===(u=w.overwrite)||void 0===u?void 0:u.psc)&&void 0!==l?l:"",onChange:function(n){return R(n)}}),Object(r.jsx)(O.a,{label:"Mesto",name:"city",type:"text",value:null!==(j=null===w||void 0===w||null===(b=w.overwrite)||void 0===b?void 0:b.city)&&void 0!==j?j:"",onChange:function(n){return R(n)}}),Object(r.jsx)(O.a,{label:"\u0160t\xe1t",name:"country",type:"text",value:null!==(h=null===w||void 0===w||null===(m=w.overwrite)||void 0===m?void 0:m.country)&&void 0!==h?h:"",onChange:function(n){return R(n)}})]})]})]})]}),Object(r.jsx)(Wn,{onClick:function(n){n.preventDefault();var e=Object(o.a)(Object(o.a)({},w),{},{user:p.user._id,combinedProducts:f.map((function(n){return n._id})),status:S?"half-paid":"paid"});console.log(e),g(!1),x(e)},children:"Vytvori\u0165 objedn\xe1vku"})]})]})},ee=t(53),te=function(n){var e=n.productId,t=Object(ee.b)("api/store/products",e,!e),c=t.isLoading,o=t.response;return Object(r.jsx)("span",{style:{whiteSpace:"nowrap"},children:c?"H\u013eadam...":o.product.name.slice(0,6).concat("...")})},re=function(n){var e=n.lensesId,t=Object(ee.b)("api/store/lenses",e,!e),c=t.isLoading,o=t.response;return Object(r.jsx)("span",{style:{whiteSpace:"nowrap"},children:c?"H\u013eadam...":o.lenses.name.slice(0,8).concat("...")})},ce=t(56);function oe(){var n=Object(f.a)(["\n    &:not(:last-child) {\n        margin-right: .5rem;\n    }\n\n    &:last-child {\n        background-color: var(--primary-color);\n        font-weight: bolder;\n    }\n"]);return oe=function(){return n},n}function ie(){var n=Object(f.a)(["\n    padding: 2rem;\n    border-radius: .5rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n\n\n    h3 {\n        margin-bottom: 1rem;\n    }\n"]);return ie=function(){return n},n}function ae(){var n=Object(f.a)(["\n    padding: 2rem;\n    border-radius: .5rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n    margin-bottom: 3rem;\n\n    h3 {\n        margin-bottom: 1rem;\n    }\n\n    div {\n        p {\n            opacity: .83;\n        }\n\n        &:not(:last-child) {\n            margin-bottom: 1rem;\n        }\n\n        a {\n            background-color: #000;\n            color: #fff;\n            display: inline-block;\n            padding: .5rem 2.5rem;\n            margin-top: 1rem;\n        }\n    }\n\n"]);return ae=function(){return n},n}function de(){var n=Object(f.a)(["\n    opacity: .83;\n    font-size: 1.4rem;\n    margin-left: 1.5rem;\n\n    &:not(:last-child) {\n        margin-bottom: .5rem;\n    }\n"]);return de=function(){return n},n}function se(){var n=Object(f.a)(["\n    padding: 2rem;\n    border-radius: .5rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n\n\n    h3 {\n        margin-bottom: .5rem;\n    }\n\n    h4 {\n        margin-top: 1rem;\n\n    }\n\n"]);return se=function(){return n},n}function le(){var n=Object(f.a)(["\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    grid-gap: 3rem;\n    align-items: start;\n"]);return le=function(){return n},n}function ue(){var n=Object(f.a)(["\n    margin-top: 2rem;\n    display:flex;\n    justify-content: flex-end;\n    align-items: center;\n\n    span {\n        display: block;\n        margin-right: .5rem;\n        \n    }\n\n    p {\n        font-weight: bolder;\n        font-size: 2.5rem;\n    }\n"]);return ue=function(){return n},n}function je(){var n=Object(f.a)(["\n    padding: 2rem;\n    text-align: center;\n\n    img {\n        width: 5rem;\n    }\n"]);return je=function(){return n},n}function be(){var n=Object(f.a)(["\n    display: grid;\n    align-content: center;\n    grid-template-columns: 5rem 1fr 10rem 10rem 1fr 10rem 10rem 10rem 10rem;\n    /* box-shadow: 0 0 1.5rem 0 rgba(0,0,0, 0.08); */\n    /* margin-bottom: 1rem; */\n"]);return be=function(){return n},n}function he(){var n=Object(f.a)(["\n    display: grid;\n    align-content: center;\n    grid-template-columns: 5rem 1fr 10rem 10rem 1fr 10rem 10rem 10rem 10rem;\n    font-weight: bolder;\n    border-bottom: 1px solid var(--secondary-text-color);\n"]);return he=function(){return n},n}function me(){var n=Object(f.a)(["\n    margin-bottom: 3rem;\n"]);return me=function(){return n},n}function ve(){var n=Object(f.a)(["\n    padding: 2rem;\n    border-radius: .5rem;\n    box-shadow: var(--container-shadow);\n    margin-bottom: 3rem;\n    background-color: var(--container-background-color);\n\n"]);return ve=function(){return n},n}var Oe=x.c.div(ve()),pe=x.c.h3(me()),fe=x.c.div(he()),xe=x.c.div(be()),ge=x.c.div(je()),ye=x.c.div(ue()),ke=x.c.div(le()),we=x.c.div(se()),Ce=x.c.p(de()),Pe=x.c.div(ae()),ze=x.c.div(ie()),Se=Object(x.c)(y.a)(oe()),Le=function(n){var e,t,c,o,i,s,l,u,j,b=n.order,h=n.combinedProducts,m=n.addNextProduct,v=n.setHasChanged,O=n.isUpdating,p=Object(d.useContext)(Tn.OrdersContext).createOrder,f=Object(d.useState)(!1),x=Object(a.a)(f,2),g=x[0],y=x[1],k=Object(d.useState)(0),w=Object(a.a)(k,2),C=w[0],P=w[1],z=new Date(null===b||void 0===b||null===(e=b.order)||void 0===e?void 0:e.date);console.log(b),console.log(h),Object(d.useEffect)((function(){h&&P(h.reduce((function(n,e){return n+e.discountedPrice}),0))}),[h]);var S;return Object(r.jsxs)("div",{children:[g&&Object(r.jsx)(ne,{close:function(){return y(!1)},order:b,combinedProducts:h,createOrder:p,setHasChanged:v}),Object(r.jsxs)(Oe,{children:[Object(r.jsx)(pe,{children:"Preh\u013aad objedn\xe1vky"}),Object(r.jsxs)(fe,{children:[Object(r.jsx)(ge,{children:"#"}),Object(r.jsx)(ge,{children:"ProduktID"}),Object(r.jsx)(ge,{children:"Cena"}),Object(r.jsx)(ge,{children:"Po zlave"}),Object(r.jsx)(ge,{children:"\u0160osovkyID"}),Object(r.jsx)(ge,{children:"Cena"}),Object(r.jsx)(ge,{children:"Po zlave"}),Object(r.jsx)(ge,{children:"Dohromady"}),Object(r.jsx)(ge,{children:"Po zlave"})]}),h.map((function(n,e){var t,c,o,i;return Object(r.jsxs)(xe,{children:[Object(r.jsx)(ge,{children:e+1}),Object(r.jsx)(ge,{children:(null===n||void 0===n?void 0:n.product)?Object(r.jsx)(te,{productId:null===n||void 0===n?void 0:n.product}):""}),Object(r.jsx)(ge,{children:(null===n||void 0===n?void 0:n.productPrice)?"".concat(((null===n||void 0===n||null===(t=n.productPrice)||void 0===t?void 0:t.full)/100).toFixed(2),"\u20ac"):""}),Object(r.jsx)(ge,{children:(null===n||void 0===n?void 0:n.productPrice)?"".concat(((null===n||void 0===n||null===(c=n.productPrice)||void 0===c?void 0:c.discounted)/100).toFixed(2),"\u20ac"):""}),Object(r.jsx)(ge,{children:(null===n||void 0===n?void 0:n.lens)?Object(r.jsx)(re,{lensesId:null===n||void 0===n?void 0:n.lens}):""}),Object(r.jsx)(ge,{children:(null===n||void 0===n?void 0:n.lensPrice)?"".concat(((null===n||void 0===n||null===(o=n.lensPrice)||void 0===o?void 0:o.full)/100).toFixed(2),"\u20ac"):""}),Object(r.jsx)(ge,{children:(null===n||void 0===n?void 0:n.lensPrice)?"".concat(((null===n||void 0===n||null===(i=n.lensPrice)||void 0===i?void 0:i.discounted)/100).toFixed(2),"\u20ac"):""}),Object(r.jsx)(ge,{children:(null===n||void 0===n?void 0:n.price)?"".concat(((null===n||void 0===n?void 0:n.price)/100).toFixed(2),"\u20ac"):""}),Object(r.jsxs)(ge,{children:[((null===n||void 0===n?void 0:n.discountedPrice)/100).toFixed(2),"\u20ac"]})]},e)})),Object(r.jsx)(ye,{children:Object(r.jsxs)("p",{children:["Spolu: ",(C/100).toFixed(2),"\u20ac"]})})]}),Object(r.jsxs)(ke,{children:[Object(r.jsxs)(we,{children:[Object(r.jsx)("h3",{children:"Z\xe1kaznik"}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Meno a prizvisko"}),Object(r.jsx)(Ce,{children:null===b||void 0===b||null===(t=b.user)||void 0===t?void 0:t.name})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Adresa"}),Object(r.jsx)(Ce,{children:null===b||void 0===b||null===(c=b.user)||void 0===c?void 0:c.psc}),Object(r.jsx)(Ce,{children:null===b||void 0===b||null===(o=b.user)||void 0===o?void 0:o.address}),Object(r.jsx)(Ce,{children:null===b||void 0===b||null===(i=b.user)||void 0===i?void 0:i.city}),Object(r.jsx)(Ce,{children:null===b||void 0===b||null===(s=b.user)||void 0===s?void 0:s.country})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Kontakt"}),Object(r.jsx)(Ce,{children:null===b||void 0===b||null===(l=b.user)||void 0===l?void 0:l.email}),Object(r.jsx)(Ce,{children:null===b||void 0===b||null===(u=b.user)||void 0===u?void 0:u.phone})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Parametre"}),b&&b.user&&Object(r.jsx)(Cn.a,{parameters:null===b||void 0===b||null===(j=b.user)||void 0===j?void 0:j.lenses,disabledInputs:!0})]})]}),Object(r.jsxs)("div",{children:[b.order&&Object(r.jsxs)(Pe,{children:[Object(r.jsx)("h3",{children:"Detaily objedn\xe1vky"}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"D\xe1tum objedn\xe1vky"}),Object(r.jsx)("p",{children:z.toLocaleDateString("sk-SK",{weekday:"long",month:"long",day:"numeric"})})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Doru\u010di\u0165 na adresu"}),Object(r.jsx)("p",{children:b.order.shouldDeliver?"\xc1no":"Nie"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"N\xe1kup na firmu"}),Object(r.jsx)("p",{children:b.order.buyingAsCompany?"\xc1no":"Nie"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Sp\xf4sob \xfahrady"}),Object(r.jsx)("p",{children:(S=b.order.paymentType,"cash"===S?"Hotovos\u0165":"card"===S?"Karta":"coupon"===S?"Kup\xf3n":S)})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Stav objedn\xe1vky"}),Object(r.jsx)("p",{children:"half-paid"===b.order.status?"Z\xe1loha: ".concat((b.order.paidAlready/100).toFixed(2),"\u20ac"):"Zaplaten\xe9"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Vybavuje prev\xe1dzka"}),Object(r.jsx)("p",{children:0===b.order.premises?"Neuveden\xe9":ce.n[b.order.premises-1]})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"PDF"}),Object(r.jsx)("a",{href:"".concat("http://195.110.58.166:8080","/uploads/pdf/").concat(b.order.pdfPath),target:"_blank",rel:"noreferrer noopener",children:"Zobraz PDF"})]})]}),!O&&Object(r.jsxs)(ze,{children:[Object(r.jsx)("h3",{children:"Mo\u017enosti"}),Object(r.jsx)(Se,{onClick:m,children:"Prida\u0165 produkt"}),Object(r.jsx)(Se,{onClick:function(){return y(!0)},children:"Dokon\u010di\u0165 objednavku"})]})]})]})]})},De=t(14);function Ee(){var n=Object(f.a)(["\n    display: flex;\n    justify-content: space-between;\n\n    ","\n    padding-top: 3rem;\n    padding-bottom: 3rem;\n\n    h1 {\n        color: var(--primary-text-color);\n    }\n\n    @media all and (max-width: 800px) {\n        flex-wrap: wrap;\n\n        div:nth-child(2) {\n            margin-bottom: 2rem;\n        }\n    }\n"]);return Ee=function(){return n},n}var Ne=x.c.div(Ee(),De.e);e.default=function(){var n,e=Object(l.i)(),t=e.userId,b=e.orderId,h=Object(d.useState)("selectUser"),m=Object(a.a)(h,2),v=m[0],O=m[1],p=Object(d.useState)({}),f=Object(a.a)(p,2),x=f[0],g=f[1],y=Object(d.useState)(!1),k=Object(a.a)(y,2),w=k[0],C=k[1],P=Object(d.useState)(!1),z=Object(a.a)(P,2),S=z[0],L=z[1],D=Object(d.useState)(!1),E=Object(a.a)(D,2),N=E[0],M=E[1],F=Object(d.useState)([]),R=Object(a.a)(F,2),A=R[0],T=R[1],I=function(n){C(!0);var e=n.name,t=n.value;g(Object(o.a)(Object(o.a)({},x),{},Object(c.a)({},e,t)))},H=Object(d.useContext)(s.a),U=H.getMessage,K=H.setShowModal,Z=H.closeModal,_=H.isLoading,B=H.showModal,q=H.message,J=Object(ee.b)("api/admin/orders",b);return Object(d.useEffect)((function(){"nova-objednavka"!==t&&b&&(M(!0),O("summary"),J.response&&(g(Object(o.a)(Object(o.a)({},x),{},{order:J.response.order,user:J.response.order.orderedBy})),T(J.response.order.combinedProducts)))}),[t,b,J.response]),Object(d.useEffect)((function(){"nova-objednavka"!==t||b||x.user&&O("findProduct")}),[x.user]),Object(d.useEffect)((function(){return function(){O("selectUser"),g({}),C(!1),L(!1),T([]),M(!1)}}),[]),Object(r.jsxs)("section",{children:[Object(r.jsx)(l.a,{when:w,message:"M\xe1te nedokon\u010den\xfa objedn\xe1vku, skuto\u010dne chcete od\xeds\u0165?"}),B&&Object(r.jsx)(j.a,{loading:_,title:q,close:Z}),S&&Object(r.jsx)(V,{order:x,close:function(){return L(!1)},addCombineProduct:function(n){T([].concat(Object(i.a)(A),[n]))},next:function(){O("summary"),L(!1)}}),Object(r.jsx)(Ne,{children:Object(r.jsx)("div",{children:Object(r.jsx)("h1",{children:N?"Objednavka \u010d\xedslo ".concat(null===x||void 0===x||null===(n=x.order)||void 0===n?void 0:n.customId):"Nov\xe1 objedn\xe1vka"})})}),Object(r.jsx)(u.a,{children:Object(r.jsxs)("div",{children:["selectUser"===v&&Object(r.jsx)(on,{next:function(){return O("findProduct")},addToOrder:I}),"findProduct"===v&&Object(r.jsx)(wn,{back:function(){return O("selectUser")},next:O,addToOrder:I,showErrorMessage:function(n){U(n),K(!0)},showModal:function(){return L(!0)}}),"selectLenses"===v&&Object(r.jsx)(An,{back:function(){return O("findProduct")},next:function(){return O("summary")},addToOrder:I,order:x,showModal:function(){return L(!0)}}),"summary"===v&&Object(r.jsx)(Le,{order:x,isUpdating:N,combinedProducts:A,back:function(){return O("selectLenses")},addNextProduct:function(){O("findProduct"),(null===x||void 0===x?void 0:x.product)&&((null===x||void 0===x?void 0:x.lenses)?(delete x.lenses,delete x.product):delete x.product,g(Object(o.a)({},x)))},setHasChanged:C})]})})]})}},67:function(n,e,t){"use strict";t.r(e),t.d(e,"OrdersContext",(function(){return b}));var r=t(2),c=t(21),o=t(7),i=t.n(o),a=t(12),d=t(10),s=t(1),l=t(3),u=t(19),j=t(18),b=Object(s.createContext)({orders:null,getOrders:function(){},createOrder:function(){},finishOrder:function(){}});e.default=function(n){var e=n.children,t=Object(l.h)().push,o=Object(s.useContext)(j.a),h=o.setIsLoading,m=o.setShowModal,v=o.getMessage,O=o.closeModal,p=Object(s.useContext)(u.a).token,f=Object(s.useState)(null),x=Object(d.a)(f,2),g=x[0],y=x[1],k=new Headers;k.append("auth-token",p),k.append("Content-Type","application/json");var w=function(){var n=Object(a.a)(i.a.mark((function n(){var e,t,r;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return h(!0),m(!0),e={method:"GET",headers:k,redirect:"follow"},n.prev=3,n.next=6,fetch("".concat("http://195.110.58.166:8080","/api/admin/orders"),e);case 6:return t=n.sent,n.next=9,t.json();case 9:if(r=n.sent,console.log(r),!r.orders){n.next=15;break}return y(r.orders),O(),n.abrupt("return");case 15:v(r.message),h(!1),n.next=24;break;case 19:n.prev=19,n.t0=n.catch(3),console.log(n.t0),v("Nieco sa pokazilo"),h(!1);case 24:case"end":return n.stop()}}),n,null,[[3,19]])})));return function(){return n.apply(this,arguments)}}(),C=function(){var n=Object(a.a)(i.a.mark((function n(e){var r,o,a,d,s;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return h(!0),m(!0),r=Object(c.a)({},e),console.log("ORDER BEFORE SEND"),console.log(r),o=JSON.stringify(r),a={method:"POST",headers:k,body:o,redirect:"follow"},n.prev=7,n.next=10,fetch("".concat("http://195.110.58.166:8080","/api/admin/orders"),a);case 10:return d=n.sent,n.next=13,d.json();case 13:s=n.sent,console.log(s),s.order&&(w(),O(),t("/dashboard/objednavky")),v(s.message),h(!1),n.next=25;break;case 20:n.prev=20,n.t0=n.catch(7),console.log(n.t0),v("Nieco sa pokazilo"),h(!1);case 25:case"end":return n.stop()}}),n,null,[[7,20]])})));return function(e){return n.apply(this,arguments)}}(),P=function(){var n=Object(a.a)(i.a.mark((function n(e){var t,r,c;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return h(!0),m(!0),t={method:"POST",headers:k,redirect:"follow"},n.prev=3,n.next=6,fetch("".concat("http://195.110.58.166:8080","/api/admin/orders/").concat(e,"/fulfill"),t);case 6:return r=n.sent,n.next=9,r.json();case 9:if(c=n.sent,console.log(c),"undelegated-order"!==c.error){n.next=15;break}return h(!1),v("Objedn\xe1vka nem\xf4\u017ee by\u0165 dokon\u010den\xe1 ak nieje priraden\xe1 k prev\xe1dzke"),n.abrupt("return");case 15:if(!c.order){n.next=18;break}return O(),n.abrupt("return");case 18:v(c.message),h(!1),n.next=27;break;case 22:n.prev=22,n.t0=n.catch(3),console.log(n.t0),v("Nieco sa pokazilo"),h(!1);case 27:case"end":return n.stop()}}),n,null,[[3,22]])})));return function(e){return n.apply(this,arguments)}}();return Object(r.jsx)(b.Provider,{value:{orders:g,getOrders:w,createOrder:C,finishOrder:P},children:e})}}}]);
//# sourceMappingURL=20.1cd50d5b.chunk.js.map