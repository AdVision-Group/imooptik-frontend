{"version":3,"sources":["context/user/user.queries.jsx","context/user/user.utils.jsx","context/user/user.context.jsx"],"names":["fetchUser","token","id","myHeaders","Headers","append","requestOptions","method","headers","redirect","fetch","process","patchUser","user","body","JSON","stringify","postUser","name","email","postAdmin","password","premises","admin","Number","initUserObj","address","boughtProducts","city","country","date","finishedRegistration","company","ico","dic","icdph","psc","lenses","cylinder","cylinderAxes","diopters","distance","addition","basis","prism","vys","orders","phone","tempUser","totalSpent","watchList","fName","lName","confirmPassword","birthDate","Date","now","optometrist","UserContext","createContext","isUpdating","activeIndex","handleChangeFilterItem","filterItems","totalCount","users","getUser","handleChange","handleParameterChange","handleCompanyChange","updateUser","resetUser","formToShow","switchFormButtons","toggleUserForm","createUser","getFilteredUsers","getUserByQuery","deleteUser","UserProvider","children","push","useHistory","useContext","AuthContext","LoadingModalContext","closeModal","getMessage","setIsLoading","setShowModal","useState","setUser","setUsers","console","count","log","setIsUpdating","setActiveIndex","setFormToShow","useEffect","a","response","json","data","split","message","path","refetchUser","close","addUser","error","messageSK","filters","_id","type","includes","userId","filter","raw","query","Provider","value","itemIndex","e","target","idx","arr","preventDefault"],"mappings":"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","file":"static/js/33.78833ee4.chunk.js","sourcesContent":["export const fetchUsers = (token) => {\n    const myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n\n\n    const requestOptions = {\n        method: 'GET',\n        headers: myHeaders,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/users`, requestOptions)\n\n}\n\nexport const fetchUser = (token, id) => {\n    const myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n    myHeaders.append(\"Content-Type\", \"application/json\");\n\n\n    const requestOptions = {\n        method: 'GET',\n        headers: myHeaders,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/users/${id}`, requestOptions)\n}\n\nexport const patchUser = (token, user, id) => {\n    // const {\n    //     _id: id,\n    //     address,\n    //     admin,\n    //     city,\n    //     country,\n    //     email,\n    //     lenses: {\n    //         cylinder,\n    //         cylinderAxes,\n    //         diopters,\n    //         distance,\n    //         addition,\n    //         basis,\n    //         prism,\n    //     },\n    //     name,\n    //     phone,\n    //     psc,\n    //     premises\n    // } = user\n\n    const myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n    myHeaders.append(\"Content-Type\", \"application/json\");\n\n\n    const raw = JSON.stringify({\n        ...user\n        // address: address || undefined,\n        // admin: admin,\n        // premises: Number(premises) === 0 ? undefined : premises,\n        // city: city || undefined,\n        // country: country || undefined,\n        // email: email || undefined,\n        // lenses: {\n        //     cylinder: cylinder,\n        //     cylinderAxes: cylinderAxes,\n        //     diopters: diopters,\n        //     distance: distance,\n        //     addition: addition,\n        //     basis: basis,\n        //     prism: prism,\n        // },\n        // name: name,\n        // phone: phone || undefined,\n        // psc: psc || undefined,\n    })\n\n    const requestOptions = {\n        method: 'PATCH',\n        headers: myHeaders,\n        body: raw,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/users/${id}`, requestOptions)\n}\n\nexport const postUser = (token, user) => {\n    const {\n        name,\n        email,\n    } = user\n\n\n    const myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n    myHeaders.append(\"Content-Type\", \"application/json\");\n\n\n    const raw = JSON.stringify({\n        email: email,\n        name: name,\n    })\n\n    const requestOptions = {\n        method: 'POST',\n        headers: myHeaders,\n        body: raw,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/auth/register`, requestOptions)\n}\n\nexport const postAdmin = (token, user) => {\n\n    const {\n        name,\n        email,\n        password,\n        premises,\n        admin\n    } = user\n\n    const myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n    myHeaders.append(\"Content-Type\", \"application/json\");\n\n\n    const raw = JSON.stringify({\n        admin: Number(admin),\n        email: email,\n        name: name,\n        premises: Number(premises),\n        password\n    })\n\n    const requestOptions = {\n        method: 'POST',\n        headers: myHeaders,\n        body: raw,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/auth/register`, requestOptions)\n}","export const initUserObj = {\n    address: \"\",\n    admin: 0,\n    premises: 0,\n    boughtProducts: {},\n    city: \"\",\n    country: \"\",\n    date: \"\",\n    email: \"\",\n    finishedRegistration: false,\n    company: {\n        ico: \"\",\n        dic: \"\",\n        icdph: \"\",\n        address: '',\n        psc: '',\n        country: '',\n    },\n    lenses: {\n        cylinder: [1001, 1001, 1001, 1001],\n        cylinderAxes: [1001, 1001, 1001, 1001],\n        diopters: [1001, 1001, 1001, 1001],\n        distance: [1001, 1001, 1001, 1001],\n        addition: [1001, 1001, 1001, 1001],\n        basis: [1001, 1001, 1001, 1001],\n        prism: [1001, 1001, 1001, 1001],\n        vys: [1001, 1001, 1001, 1001],\n    },\n    name: \"\",\n    orders: [],\n    phone: \"\",\n    psc: \"\",\n    tempUser: false,\n    totalSpent: 0,\n    watchList: [],\n    fName: \"\",\n    lName: \"\",\n    password: '',\n    confirmPassword: \"\",\n    birthDate: Date.now(),\n    optometrist: false\n\n}","import React, { createContext, useState, useContext, useEffect } from 'react'\nimport { useHistory } from 'react-router-dom'\nimport { AuthContext } from '../auth/auth.context'\nimport { LoadingModalContext } from '../loading-modal/loading-modal.contenxt'\n// import { OrderContext } from '../order/order.context'\n\nimport {\n    // fetchUsers,\n    fetchUser,\n    patchUser,\n    postAdmin,\n    postUser,\n} from './user.queries'\n\nimport {\n    initUserObj\n} from './user.utils'\n\nexport const UserContext = createContext({\n    isUpdating: false,\n    activeIndex: 0,\n    handleChangeFilterItem: () => { },\n    filterItems: [],\n    totalCount: 0,\n    users: null,\n    user: null,\n    // getUsers: () => { },\n    getUser: () => { },\n    handleChange: () => { },\n    handleParameterChange: () => { },\n    handleCompanyChange: () => { },\n    updateUser: () => { },\n    resetUser: () => { },\n    formToShow: 0,\n    switchFormButtons: [],\n    toggleUserForm: () => { },\n    createUser: () => { },\n    getFilteredUsers: () => { },\n    getUserByQuery: () => { },\n    deleteUser: () => { },\n})\n\nconst UserProvider = ({ children }) => {\n    const { push } = useHistory()\n    const { token } = useContext(AuthContext)\n    const {\n        closeModal,\n        getMessage,\n        setIsLoading,\n        setShowModal\n    } = useContext(LoadingModalContext)\n\n    // ------------------------\n\n    const [user, setUser] = useState(initUserObj)\n    const [users, setUsers] = useState(null)\n    const [totalCount] = useState(0)\n\n    // ------------------------\n\n    console.count(\"USERCONTEXT\")\n    console.log(user)\n\n    const [isUpdating, setIsUpdating] = useState(false)\n    const [activeIndex, setActiveIndex] = useState(0)\n    const filterItems = [\n        {\n            id: 0,\n            name: \"Zákazníci\",\n            filter: 0,\n        },\n        {\n            id: 1,\n            name: \"Zamestnanci\",\n            filter: 1,\n        },\n        {\n            id: 2,\n            name: \"Vedúci\",\n            filter: 2,\n        },\n        // {\n        //     id: 3,\n        //     name: \"Velký brat\",\n        //     filter: 3,\n        // },\n        // {\n        //     id: 4,\n        //     name: \"Odstránené\",\n        //     filter: 3\n        // }\n    ]\n\n    // ------------------------\n\n    const [formToShow, setFormToShow] = useState(0)\n    const switchFormButtons = [\n        {\n            name: \"Zákazník\"\n        },\n        {\n            name: \"Zamestnanec\"\n        }\n    ]\n\n    const toggleUserForm = (e, idx) => {\n        e.preventDefault()\n        setFormToShow(idx)\n    }\n\n    // ------------------------\n\n\n    const handleChangeFilterItem = (itemIndex) => {\n        setActiveIndex(itemIndex)\n    }\n\n    const handleChange = (e) => {\n        const { name, value } = e.target\n\n        setUser({\n            ...user,\n            [name]: value\n        })\n    }\n\n    const handleParameterChange = (e, idx) => {\n        const { name, value } = e.target\n        let arr = user.lenses[name]\n        arr[idx] = value === '' ? 1001 : value\n        setUser({\n            ...user,\n            lenses: {\n                ...user.lenses,\n                [name]: arr\n            }\n        })\n    }\n\n    const handleCompanyChange = (e) => {\n        const { name, value } = e.target\n        setUser({\n            ...user,\n            company: {\n                ...user.company,\n                [name]: value\n            }\n        })\n    }\n\n    useEffect(() => {\n        setUser({\n            ...user,\n            name: user?.fName + \" \" + user?.lName\n        })\n    }, [user?.fName, user?.lName])\n\n    const resetUser = () => {\n        setUser(initUserObj)\n        setIsUpdating(false)\n        setFormToShow(0)\n    }\n\n    // ------------------------\n    // USER ACTIONS\n    // ------------------------\n\n    // Get all users\n    // const getUsers = async () => {\n    //     setIsLoading(true)\n    //     setShowModal(true)\n\n    //     try {\n    //         const response = await fetchUsers(token)\n    //         const data = await response.json()\n\n    //         console.log(data)\n    //         if (data.users) {\n    //             setUsers(data.users)\n    //             setTotalCount(data.count)\n    //             setIsLoading(false)\n    //             closeModal()\n\n    //         } else {\n    //             getMessage(data.message)\n    //             setIsLoading(false)\n    //         }\n    //     } catch (err) {\n    //         console.log(err)\n    //         getMessage(\"Nieco sa pokazilo\")\n    //         setIsLoading(false)\n    //     }\n    // }\n\n    // Get single user\n    const getUser = async (id) => {\n        setIsLoading(true)\n        setShowModal(true)\n        setIsUpdating(true)\n\n        try {\n            const response = await fetchUser(token, id)\n            const data = await response.json()\n\n            if (data.user) {\n                setUser({\n                    ...user,\n                    ...data.user,\n                    fName: data.user.name ? data.user.name.split(\" \")[0] : \"\",\n                    lName: data.user.name ? data.user.name.split(\" \")[1] : \"\"\n                })\n                setIsLoading(false)\n                closeModal()\n\n            } else {\n                getMessage(data.message)\n                setIsLoading(false)\n            }\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    // Update user\n    const updateUser = async (user, id, path, refetchUser, close, addUser) => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        try {\n            const response = await patchUser(token, user, id)\n            const data = await response.json()\n\n            if (data.error) {\n                getMessage(data.messageSK)\n                setIsLoading(false)\n                return\n            }\n\n\n            setIsLoading(false)\n            closeModal()\n\n            if (path === 'order') {\n                push(`/dashboard/objednavky/${id}`)\n            } else if (path === 'profile') {\n                push(`/dashboard/zakaznici/${id}`)\n            } else if (path === 'isOrder') {\n                setUser({\n                    ...user,\n                    ...data.user,\n                    fName: data.user.name ? data.user.name.split(\" \")[0] : \"\",\n                    lName: data.user.name ? data.user.name.split(\" \")[1] : \"\"\n                })\n\n                addUser({\n                    ...user,\n                    ...data.user,\n                    fName: data.user.name ? data.user.name.split(\" \")[0] : \"\",\n                    lName: data.user.name ? data.user.name.split(\" \")[1] : \"\"\n                })\n                // console.log(\"REFETCH USER\")\n                // console.log(\"REFETCH USER\")\n                // console.log(\"REFETCH USER\")\n                // refetchUser()\n                close()\n            } else {\n                push(\"/dashboard/zakaznici\")\n            }\n\n            getFilteredUsers({\n                filters: {\n                    admin: activeIndex\n                }\n            })\n            // http://localhost:1000/#/dashboard/zakaznici\n\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    const createUser = async (user, path) => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        try {\n            if (formToShow === 0) {\n                let data = {}\n                if (!user._id) {\n                    const response = await postUser(token, user)\n                    data = await response.json()\n\n                    if (data.error) {\n                        getMessage(data.message)\n\n                        if (data.type === 'email') {\n                            getMessage(\"Email existuje\")\n                        }\n                        if (data.error === 'format' && data.message.includes('email')) {\n                            getMessage(\"Email musi byt platny email\")\n                        }\n                        setIsLoading(false)\n                        return\n                    }\n\n                    setUser({\n                        ...data.user,\n                        _id: data.user._id\n                    })\n                }\n\n                const userId = data.user ? data.user._id : user._id\n\n                updateUser({\n                    ...user\n                }, userId, path)\n\n                // setIsLoading(false)\n                // getUsers()\n                // push('/dashboard/zakaznici')\n                // closeModal()\n\n            } else {\n                if (user.password !== user.confirmPassword) {\n                    getMessage(\"Heslá sa nezhodujú\")\n                    setIsLoading(false)\n                    return\n                }\n\n                const response = await postAdmin(token, user)\n                const data = await response.json()\n\n                if (data.error) {\n                    getMessage(data.message)\n                    setIsLoading(false)\n                    return\n                }\n\n                setIsLoading(false)\n                getFilteredUsers({\n                    filters: {\n                        admin: activeIndex\n                    }\n                })\n\n                push(\"/dashboard/zakaznici\")\n                closeModal()\n            }\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Niečo sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n\n\n    // ----------------------------------------------\n    // ----------------------------------------------\n    // ----------------------------------------------\n\n    const myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n    myHeaders.append(\"Content-Type\", \"application/json\");\n\n    const deleteUser = async (id) => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        const requestOptions = {\n            method: 'DELETE',\n            headers: myHeaders,\n            // body: raw,\n            redirect: 'follow'\n        };\n\n        try {\n            const response = await fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/users/${id}`, requestOptions)\n            const data = await response.json()\n\n            if (data.user) {\n\n                push(\"/dashboard/zakaznici\")\n                setIsLoading(false)\n                closeModal()\n                return\n            }\n\n            getMessage(data.messageSK)\n            setIsLoading(false)\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Niečo sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    const getFilteredUsers = async (filter) => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        const raw = JSON.stringify(filter)\n\n        const requestOptions = {\n            method: 'POST',\n            headers: myHeaders,\n            body: raw,\n            redirect: 'follow'\n        };\n\n        try {\n            const response = await fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/users/filter`, requestOptions)\n            const data = await response.json()\n\n            if (data.users) {\n                setUsers(data.users)\n                closeModal()\n                return\n            }\n\n            getMessage(data.messageSK)\n            setIsLoading(false)\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    const getUserByQuery = async (query) => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        const raw = JSON.stringify(query)\n\n        const requestOptions = {\n            method: 'POST',\n            headers: myHeaders,\n            body: raw,\n            redirect: 'follow'\n        };\n\n        try {\n            const response = await fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/users/filter`, requestOptions)\n            const data = await response.json()\n\n            if (data.users) {\n                setUsers(data.users)\n                closeModal()\n                return\n            }\n\n            getMessage(data.message)\n            setIsLoading(false)\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    return (\n        <UserContext.Provider\n            value={{\n                isUpdating,\n                activeIndex,\n                handleChangeFilterItem,\n                filterItems,\n                users,\n                user,\n                totalCount,\n                // getUsers,\n                getUser,\n                handleChange,\n                handleParameterChange,\n                handleCompanyChange,\n                updateUser,\n                resetUser,\n                formToShow,\n                switchFormButtons,\n                toggleUserForm,\n                createUser,\n                getFilteredUsers,\n                getUserByQuery,\n                deleteUser\n            }}\n        >\n            {children}\n        </UserContext.Provider>\n    )\n}\n\nexport default UserProvider"],"sourceRoot":""}