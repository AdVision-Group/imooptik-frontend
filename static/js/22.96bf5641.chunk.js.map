{"version":3,"sources":["context/booking/booking.queries.jsx","context/booking/booking.context.jsx"],"names":["fetchSingleCalendar","id","fetch","process","fetchUserBookings","token","myHeaders","Headers","append","requestOptions","method","headers","redirect","BookingContext","createContext","calendar","calendars","getCalendars","getCalendar","bookings","getBookings","userBookings","getUserBookings","activeCalendar","resetBooking","selectedDate","name","value","setSelectedDate","BookingProvider","children","useContext","AuthContext","LoadingModalContext","getMessage","setIsLoading","setShowModal","closeModal","useState","setActiveCalendar","setCalendars","setCalendar","a","response","json","data","error","message","console","log","idx","setBookings","setUserBookings","Provider"],"mappings":"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","file":"static/js/22.96bf5641.chunk.js","sourcesContent":["\n\nexport const fetchCalendars = () => {\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/booking/calendars`)\n}\n\nexport const fetchSingleCalendar = (id) => {\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/booking/calendars/${id}`)\n}\n\nexport const fetchBookings = () => {\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/booking/bookings`)\n}\nexport const fetchBookingRows = () => {\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/booking/bookingRows`)\n}\n\nexport const fetchUserBookings = (token) => {\n    const myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n\n    const requestOptions = {\n        method: 'GET',\n        headers: myHeaders,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/booking/userBookings`, requestOptions)\n}","import React, { createContext, useState, useContext } from 'react'\nimport { LoadingModalContext } from '../loading-modal/loading-modal.contenxt'\nimport { AuthContext } from '../auth/auth.context'\n\nimport {\n    fetchCalendars,\n    fetchSingleCalendar,\n    fetchBookings,\n    // fetchBookingRows,\n    fetchUserBookings\n} from './booking.queries'\n\nexport const BookingContext = createContext({\n    calendar: null,\n    calendars: null,\n    getCalendars: () => { },\n    getCalendar: () => { },\n    bookings: null,\n    getBookings: () => { },\n    userBookings: null,\n    getUserBookings: () => { },\n    // bookingRows: null,\n    // getBookingRows: () => { },\n    activeCalendar: 0,\n    resetBooking: () => { },\n    selectedDate: {\n        name: \"\",\n        value: ''\n    },\n    setSelectedDate: () => { }\n})\n\nconst BookingProvider = ({ children }) => {\n    const { token } = useContext(AuthContext)\n    const {\n        getMessage,\n        setIsLoading,\n        setShowModal,\n        closeModal\n    } = useContext(LoadingModalContext)\n\n    // ------------------------\n    // CALENDAR ACTIONS\n    // ------------------------\n    const [activeCalendar, setActiveCalendar] = useState(0)\n    const [calendars, setCalendars] = useState(null)\n    const [calendar, setCalendar] = useState(null)\n    const [selectedDate, setSelectedDate] = useState({\n        name: '',\n        value: ''\n    })\n\n    // Get all calendars\n    const getCalendars = async () => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        try {\n            const response = await fetchCalendars()\n            const data = await response.json()\n\n            if (data.error) {\n                getMessage(data.message)\n                setIsLoading(false)\n                return\n            }\n\n            if (data.calendars) {\n                setCalendars(data.calendars)\n                setIsLoading(false)\n                closeModal()\n            }\n\n            getMessage(data.message)\n            setIsLoading(false)\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    // Get single calendar\n    const getCalendar = async (id, idx) => {\n        setIsLoading(true)\n        setShowModal(true)\n        setSelectedDate({\n            name: '',\n            value: ''\n        })\n\n        try {\n            const response = await fetchSingleCalendar(id)\n            const data = await response.json()\n\n            console.log(data)\n            if (data.calendar) {\n                setCalendar(data.calendar)\n                setActiveCalendar(idx)\n                closeModal()\n                return\n            }\n\n            getMessage(data.message)\n            setIsLoading(false)\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    // ------------------------\n    // BOOKINGS ACTIONS\n    // ------------------------\n    const [bookings, setBookings] = useState(null)\n    const [userBookings, setUserBookings] = useState(null)\n\n    const getBookings = async () => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        try {\n            const response = await fetchBookings()\n            const data = await response.json()\n\n            if (data.error) {\n                getMessage(data.message)\n                setIsLoading(false)\n                return\n            }\n\n            if (data.bookings) {\n                setBookings(data.bookings)\n                setIsLoading(false)\n                closeModal()\n            }\n\n            getMessage(data.message)\n            setIsLoading(false)\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    const getUserBookings = async () => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        try {\n            const response = await fetchUserBookings(token)\n            const data = await response.json()\n\n            if (data.userBookings) {\n                setUserBookings(data.userBookings)\n                closeModal()\n                return\n            }\n\n            getMessage(data.message)\n            setIsLoading(false)\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    const resetBooking = () => {\n        setActiveCalendar(0)\n    }\n\n    return (\n        <BookingContext.Provider\n            value={{\n                calendar,\n                calendars,\n                getCalendars,\n                getCalendar,\n                bookings,\n                getBookings,\n                userBookings,\n                getUserBookings,\n                // bookingRows,\n                // getBookingRows,\n                activeCalendar,\n                resetBooking,\n                selectedDate,\n                setSelectedDate,\n            }}\n        >\n            {children}\n        </BookingContext.Provider>\n    )\n}\n\nexport default BookingProvider"],"sourceRoot":""}