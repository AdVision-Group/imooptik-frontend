(this.webpackJsonpimooptik=this.webpackJsonpimooptik||[]).push([[25],{99:function(e,t,n){"use strict";n.r(t),n.d(t,"AnalyticsContext",(function(){return l}));var a=n(2),o=n(7),r=n.n(o),s=n(12),c=n(10),i=n(1),u=n(18),p=n(19),l=Object(i.createContext)({stats:null,getAnalytics:function(){},generateReport:function(){}});t.default=function(e){var t=e.children,n=Object(i.useContext)(u.a).token,o=Object(i.useContext)(p.a),d=o.closeModal,f=o.getMessage,h=o.setShowModal,v=o.setIsLoading,b=Object(i.useState)(null),g=Object(c.a)(b,2),x=g[0],k=g[1],m=new Headers;m.append("auth-token",n),m.append("Content-Type","application/json");var j=function(){var e=Object(s.a)(r.a.mark((function e(t){var n,a,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),v(!0),n={method:"GET",headers:m,redirect:"follow"},e.prev=3,e.next=6,fetch("".concat("http://195.110.58.166:8080","/api/admin/stats?timespan=").concat(t),n);case 6:return a=e.sent,e.next=9,a.json();case 9:if(o=e.sent,console.log(o),!o.stats){e.next=15;break}return k(o.stats),d(),e.abrupt("return");case 15:f(o.messageSK),v(!1),e.next=24;break;case 19:e.prev=19,e.t0=e.catch(3),console.log(e.t0),f("Nieco sa pokazilo"),v(!1);case 24:case"end":return e.stop()}}),e,null,[[3,19]])})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(s.a)(r.a.mark((function e(t){var n,a,o,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),v(!0),n=JSON.stringify(t),a={method:"POST",headers:m,body:n,redirect:"follow"},e.prev=4,e.next=7,fetch("".concat("http://195.110.58.166:8080","/api/admin/stats/generateReport"),a);case 7:return o=e.sent,e.next=10,o.json();case 10:s=e.sent,console.log(s),s.name&&setTimeout((function(){var e=window.open("".concat("http://195.110.58.166:8080","/uploads/excel/").concat(s.name),"_blank","noreferrer noopener");null===e||void 0===e||e.focus()}),2e3),f(s.messageSK),v(!1),e.next=22;break;case 17:e.prev=17,e.t0=e.catch(4),console.log(e.t0),f("Nieco sa pokazilo"),v(!1);case 22:case"end":return e.stop()}}),e,null,[[4,17]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)(l.Provider,{value:{stats:x,getAnalytics:j,generateReport:w},children:t})}}}]);
//# sourceMappingURL=25.23a0d5c2.chunk.js.map