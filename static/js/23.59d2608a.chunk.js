(this.webpackJsonpimooptik=this.webpackJsonpimooptik||[]).push([[23],{77:function(e,t,n){"use strict";n.r(t),n.d(t,"BookingContext",(function(){return j}));var a=n(1),r=n(9),o=n.n(r),c=n(12),s=n(31),u=n(19),i=n(10),l=n(0),p=n(16),d=n(17),f=n(2),b=function(e){return fetch("".concat("http://195.110.58.166:8080","/api/booking/calendars/").concat(e))},g=function(e){var t=new Headers;t.append("auth-token",e);var n={method:"GET",headers:t,redirect:"follow"};return fetch("".concat("http://195.110.58.166:8080","/api/admin/booking/userBookings"),n)},h=function(e,t){var n=new Headers;n.append("auth-token",e),n.append("Content-Type","application/json"),console.log(t);var a={method:"POST",headers:n,body:JSON.stringify(Object(u.a)({},t)),redirect:"follow"};return fetch("".concat("http://195.110.58.166:8080","/api/admin/booking/calendars"),a)},k=function(e,t){var n=new Headers;n.append("auth-token",e),n.append("Content-Type","application/json"),console.log(t);var a=t.name,r=t.interval,o=t.startTimes,c=t.endTimes,s=t.daysIntoFuture,u=t.allowMinutesBefore,i={method:"PATCH",headers:n,body:JSON.stringify({name:a,interval:r,startTimes:o,endTimes:c,daysIntoFuture:s,allowMinutesBefore:u}),redirect:"follow"};return fetch("".concat("http://195.110.58.166:8080","/api/admin/booking/calendars/").concat(t._id),i)},v=function(e){return fetch("".concat("http://195.110.58.166:8080","/api/admin/booking/calendars/").concat(e),{method:"DELETE",redirect:"follow"})},m={name:"",interval:30,startTimes:["10/00","10/00","10/00","10/00","10/00","X","X"],endTimes:["16/00","16/00","18/00","16/00","16/00","X","X"],daysIntoFuture:60,premises:1,allowMinutesBefore:120,exceptDays:{"24/12/2020":"00/00-23/59"}},j=Object(l.createContext)({calendar:null,calendars:null,handleCalendarChange:function(){},handleDayTimeChange:function(){},getCalendars:function(){},getCalendar:function(){},createCalendar:function(){},updateCalendar:function(){},delCalendar:function(){},isUpdatingCalendar:!1,bookings:null,getBookings:function(){},userBookings:null,getUserBookings:function(){},activeCalendar:0,resetBooking:function(){},selectedDate:{name:"",value:""},setSelectedDate:function(){}});t.default=function(e){var t=e.children,n=Object(f.g)().push,r=Object(l.useContext)(d.a).token,x=Object(l.useContext)(p.a),O=x.getMessage,w=x.setIsLoading,C=x.setShowModal,y=x.closeModal,B=Object(l.useState)(!1),T=Object(i.a)(B,2),S=T[0],z=T[1],N=Object(l.useState)(0),D=Object(i.a)(N,2),M=D[0],E=D[1],H=Object(l.useState)(null),I=Object(i.a)(H,2),J=I[0],U=I[1],X=Object(l.useState)(m),F=Object(i.a)(X,2),P=F[0],L=F[1],A=Object(l.useState)({name:"",value:""}),G=Object(i.a)(A,2),_=G[0],q=G[1],K=function(){var e=Object(c.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),C(!0),e.prev=2,e.next=5,fetch("".concat("http://195.110.58.166:8080","/api/booking/calendars"));case 5:return t=e.sent,e.next=8,t.json();case 8:if(!(n=e.sent).error){e.next=13;break}return O(n.message),w(!1),e.abrupt("return");case 13:if(!n.calendars){e.next=18;break}return U(n.calendars),w(!1),y(),e.abrupt("return");case 18:O(n.message),w(!1),e.next=27;break;case 22:e.prev=22,e.t0=e.catch(2),console.log(e.t0),O("Nieco sa pokazilo"),w(!1);case 27:case"end":return e.stop()}}),e,null,[[2,22]])})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=Object(c.a)(o.a.mark((function e(t,n){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),C(!0),q({name:"",value:""}),n||z(!0),e.prev=4,e.next=7,b(t);case 7:return a=e.sent,e.next=10,a.json();case 10:if(r=e.sent,console.log(r),!r.calendar){e.next=17;break}return L(r.calendar),E(n),y(),e.abrupt("return");case 17:O(r.message),w(!1),e.next=26;break;case 21:e.prev=21,e.t0=e.catch(4),console.log(e.t0),O("Nieco sa pokazilo"),w(!1);case 26:case"end":return e.stop()}}),e,null,[[4,21]])})));return function(t,n){return e.apply(this,arguments)}}(),R=function(){var e=Object(c.a)(o.a.mark((function e(t){var a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),C(!0),e.prev=2,e.next=5,h(r,t);case 5:return a=e.sent,e.next=8,a.json();case 8:if(!(c=e.sent).calendar){e.next=15;break}return w(!1),y(),K(),n("/dashboard/rezervacie"),e.abrupt("return");case 15:w(!1),O(c.message),e.next=24;break;case 19:e.prev=19,e.t0=e.catch(2),console.log(e.t0),O("Nieco sa pokazilo"),w(!1);case 24:case"end":return e.stop()}}),e,null,[[2,19]])})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(c.a)(o.a.mark((function e(t){var a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),C(!0),e.prev=2,e.next=5,k(r,t);case 5:return a=e.sent,e.next=8,a.json();case 8:if(c=e.sent,console.log(c),!c.calendar){e.next=16;break}return w(!1),y(),K(),n("/dashboard/rezervacie"),e.abrupt("return");case 16:w(!1),O(c.message),e.next=25;break;case 20:e.prev=20,e.t0=e.catch(2),console.log(e.t0),O("Nieco sa pokazilo"),w(!1);case 25:case"end":return e.stop()}}),e,null,[[2,20]])})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(c.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),C(!0),e.prev=2,e.next=5,v(t);case 5:return n=e.sent,e.next=8,n.json();case 8:a=e.sent,console.log(a),w(!1),O(a.message),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(2),console.log(e.t0),O("Nieco sa pokazilo"),w(!1);case 19:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t){return e.apply(this,arguments)}}(),Y=Object(l.useState)(null),Z=Object(i.a)(Y,2),$=Z[0],ee=Z[1],te=Object(l.useState)(null),ne=Object(i.a)(te,2),ae=ne[0],re=ne[1],oe=function(){var e=Object(c.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),C(!0),e.prev=2,e.next=5,fetch("".concat("http://195.110.58.166:8080","/api/booking/bookings"));case 5:return t=e.sent,e.next=8,t.json();case 8:if(!(n=e.sent).error){e.next=13;break}return O(n.message),w(!1),e.abrupt("return");case 13:n.bookings&&(ee(n.bookings),w(!1),y()),O(n.message),w(!1),e.next=23;break;case 18:e.prev=18,e.t0=e.catch(2),console.log(e.t0),O("Nieco sa pokazilo"),w(!1);case 23:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(){return e.apply(this,arguments)}}(),ce=function(){var e=Object(c.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),C(!0),e.prev=2,e.next=5,g(r);case 5:return t=e.sent,e.next=8,t.json();case 8:if(!(n=e.sent).userBookings){e.next=13;break}return re(n.userBookings),y(),e.abrupt("return");case 13:O(n.message),w(!1),e.next=22;break;case 17:e.prev=17,e.t0=e.catch(2),console.log(e.t0),O("Nieco sa pokazilo"),w(!1);case 22:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}();return Object(a.jsx)(j.Provider,{value:{calendar:P,calendars:J,handleCalendarChange:function(e){var t=e.target,n=t.name,a=t.value;L(Object(u.a)(Object(u.a)({},P),{},Object(s.a)({},n,a)))},handleDayTimeChange:function(e,t){var n=e.target,a=n.name,r=n.value,o=P.startTimes;o[t]=r,L(Object(u.a)(Object(u.a)({},P),{},Object(s.a)({},a,o)))},getCalendars:K,getCalendar:Q,createCalendar:R,updateCalendar:V,delCalendar:W,isUpdatingCalendar:S,bookings:$,getBookings:oe,userBookings:ae,getUserBookings:ce,activeCalendar:M,resetBooking:function(){E(0),L(m),z(!1)},selectedDate:_,setSelectedDate:q},children:t})}}}]);
//# sourceMappingURL=23.59d2608a.chunk.js.map