(this.webpackJsonpimooptik=this.webpackJsonpimooptik||[]).push([[27],{74:function(e,t,n){"use strict";n.r(t),n.d(t,"CouponsContext",(function(){return h}));var o=n(2),a=n(7),c=n.n(a),r=n(12),s=n(31),u=n(21),p=n(10),i=n(1),l=n(18),d=n(19),f=n(3),h=Object(i.createContext)({coupon:null,coupons:null,handleChange:function(){},getCoupon:function(){},getCoupons:function(){},createCoupon:function(){},deleteCoupon:function(){},isUpdating:!1,resetCoupons:function(){}}),v={code:"",type:"percentage",value:0,maxUses:0,minValue:0,maxUsesTotal:0};t.default=function(e){var t=e.children,n=Object(i.useContext)(l.a),a=n.closeModal,m=n.getMessage,b=n.setIsLoading,x=n.setShowModal,j=Object(i.useContext)(d.a).token,g=Object(f.h)().push,k=new Headers;k.append("auth-token",j),k.append("Content-Type","application/json");var O=Object(i.useState)(v),C=Object(p.a)(O,2),w=C[0],y=C[1],U=Object(i.useState)(null),T=Object(p.a)(U,2),N=T[0],S=T[1],E=Object(i.useState)(!1),V=Object(p.a)(E,2),z=V[0],G=V[1],J=function(){var e=Object(r.a)(c.a.mark((function e(t){var n,o,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Get coupon"),G(!0),b(!0),x(!0),n={method:"GET",headers:k,redirect:"follow"},e.prev=5,e.next=8,fetch("".concat("http://195.110.58.166:8080","/api/admin/coupons/").concat(t),n);case 8:return o=e.sent,e.next=11,o.json();case 11:if(!(r=e.sent).coupon){e.next=16;break}return y(Object(u.a)(Object(u.a)({},w),r.coupon)),a(),e.abrupt("return");case 16:m(r.message),b(!1),e.next=25;break;case 20:e.prev=20,e.t0=e.catch(5),console.log(e.t0),m("Nie\u010do sa pokazilo"),b(!1);case 25:case"end":return e.stop()}}),e,null,[[5,20]])})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(r.a)(c.a.mark((function e(){var t,n,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Get coupons"),b(!0),x(!0),t={method:"GET",headers:k,redirect:"follow"},e.prev=4,e.next=7,fetch("".concat("http://195.110.58.166:8080","/api/admin/coupons"),t);case 7:return n=e.sent,e.next=10,n.json();case 10:o=e.sent,console.log(o),o.coupons&&S(o.coupons),b(!1),a(),e.next=22;break;case 17:e.prev=17,e.t0=e.catch(4),console.log(e.t0),m("Nie\u010do sa pokazilo"),b(!1);case 22:case"end":return e.stop()}}),e,null,[[4,17]])})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(r.a)(c.a.mark((function e(t){var n,o,a,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Create coupon"),b(!0),x(!0),n=JSON.stringify({code:t.code,type:t.type,value:""===t.value||"0"===t.value?void 0:Number(t.value),maxUses:""===t.maxUses||"0"===t.maxUses?void 0:Number(t.maxUses),minValue:""===t.minValue||"0"===t.minValue?void 0:Number(t.minValue),maxUsesTotal:""===t.maxUsesTotal||"0"===t.maxUsesTotal?void 0:Number(t.maxUsesTotal)}),console.log(n),o={method:"POST",headers:k,body:n,redirect:"follow"},e.prev=6,e.next=9,fetch("".concat("http://195.110.58.166:8080","/api/admin/coupons/create"),o);case 9:return a=e.sent,e.next=12,a.json();case 12:r=e.sent,console.log(r),"format"===r.error&&m("K\xf3d kup\xf3nu je povinn\xfd"),"exists"===r.error&&m("Kup\xf3n u\u017e existuje"),a.ok&&(M(),g("/dashboard/kupony")),b(!1),e.next=25;break;case 20:e.prev=20,e.t0=e.catch(6),console.log(e.t0),m("Nie\u010do sa pokazilo"),b(!1);case 25:case"end":return e.stop()}}),e,null,[[6,20]])})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(r.a)(c.a.mark((function e(t){var n,o,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Delete coupon"),b(!0),x(!0),n={method:"DELETE",headers:k,redirect:"follow"},e.prev=4,e.next=7,fetch("".concat("http://195.110.58.166:8080","/api/admin/coupons/").concat(t),n);case 7:return o=e.sent,e.next=10,o.json();case 10:a=e.sent,console.log(a),o.ok&&(M(),g("/dashboard/kupony")),b(!1),e.next=21;break;case 16:e.prev=16,e.t0=e.catch(4),console.log(e.t0),m("Nie\u010do sa pokazilo"),b(!1);case 21:case"end":return e.stop()}}),e,null,[[4,16]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(r.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:G(!1),y(v);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(o.jsx)(h.Provider,{value:{coupon:w,coupons:N,handleChange:function(e){var t=e.target,n=t.name,o=t.value;y(Object(u.a)(Object(u.a)({},w),{},Object(s.a)({},n,o)))},getCoupon:J,getCoupons:M,createCoupon:D,deleteCoupon:K,isUpdating:z,resetCoupons:L},children:t})}}}]);
//# sourceMappingURL=27.45f7681f.chunk.js.map