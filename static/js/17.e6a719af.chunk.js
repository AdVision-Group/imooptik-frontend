(this.webpackJsonpimooptik=this.webpackJsonpimooptik||[]).push([[17,30],{226:function(n,e,r){"use strict";r.r(e);var t=r(2),o=r(31),c=r(21),i=r(10),a=r(1),d=r.n(a),l=r(18),s=r(66),u=r(3),b=r(54),j=r(32),v=r(96),m=r(52),p=r(5),O=r(6),h=r(28);function f(){var n=Object(p.a)(["\n    max-width: 40rem;\n    padding: 2rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n    margin: 0 auto;\n    border-radius: .5rem;\n\n    h3 {\n        text-align: center;\n        font-size: 3rem;\n    }\n\n    div {\n\n        &:not(:last-child) {\n            margin-bottom: 3rem;\n\n        }\n    }\n"]);return f=function(){return n},n}function x(){var n=Object(p.a)(["\n    padding: 2rem;\n    text-align: center;\n\n    img {\n        width: 5rem;\n    }\n"]);return x=function(){return n},n}function g(){var n=Object(p.a)(["\n    margin: 5rem 0;\n"]);return g=function(){return n},n}function y(){var n=Object(p.a)(["\n    display: block;\n    margin: 0 auto;\n"]);return y=function(){return n},n}function k(){var n=Object(p.a)(["\n    cursor: pointer;\n    display: grid;\n    align-content: center;\n    grid-template-columns: 1fr 2fr 25rem;\n    margin-bottom: 1rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n\n    transition: all .3s ease-out;\n\n    &:hover {\n        background-color: var(--primary-color); \n        font-weight: bolder;\n        color: var(--button-font-color);\n    }\n"]);return k=function(){return n},n}function w(){var n=Object(p.a)(["\n    display: grid;\n    align-content: center;\n    grid-template-columns: 1fr 2fr 25rem;\n    border-bottom: 1px solid var(--secondary-text-color);\n    font-weight: bolder;\n"]);return w=function(){return n},n}var C=O.c.div(w()),P=O.c.div(k()),S=Object(O.c)(h.a)(y()),D=O.c.div(g()),z=O.c.div(x()),A=O.c.div(f()),E=function(n){var e=n.next,r=n.addToOrder,o=Object(a.useState)(""),c=Object(i.a)(o,2),d=c[0],l=c[1],s=Object(a.useState)([]),u=Object(i.a)(s,2),b=u[0],j=u[1],p=Object(a.useContext)(v.UserContext),O=p.users,h=p.getFilteredUsers,f=p.getUserByQuery;return Object(a.useEffect)((function(){O||h({limit:5}),O&&j(O)}),[O]),Object(a.useEffect)((function(){O&&""===d&&(h({limit:5}),j(O))}),[d]),Object(a.useEffect)((function(){return function(){l(""),j([])}}),[]),Object(t.jsxs)("div",{children:[Object(t.jsxs)(A,{children:[Object(t.jsx)("h3",{children:"Vyh\u013eada\u0165 z\xe1kaznika"}),Object(t.jsx)("div",{children:Object(t.jsx)(m.a,{label:"Meno, priezvisko, email alebo tel. \u010d\xedslo",value:d,onChange:function(n){return l(n.target.value)},onKeyPress:function(n){""!==d&&"Enter"===n.key&&f({query:d})}})}),Object(t.jsx)(S,{onClick:function(){""!==d&&f({query:d})},children:"H\u013eada\u0165"})]}),Object(t.jsxs)(D,{children:[Object(t.jsxs)(C,{children:[Object(t.jsx)(z,{children:"Meno a priezvisko"}),Object(t.jsx)(z,{children:"Email"}),Object(t.jsx)(z,{children:"Mo\u017enosti"})]}),b.map((function(n,o){return Object(t.jsxs)(P,{onClick:function(){return function(n){r({name:"user",value:n}),e()}(n)},children:[Object(t.jsx)(z,{children:n.name}),Object(t.jsx)(z,{children:n.email}),Object(t.jsx)(z,{children:n.phone})]},o)}))]})]})},L=r(60),N=r(56);function M(){var n=Object(p.a)(["\n    padding: 0 2rem;\n    opacity: .6;\n"]);return M=function(){return n},n}function F(){var n=Object(p.a)(["\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    grid-gap: 2rem;\n    margin: 0 1rem 2rem;\n    padding: 0 1rem;\n"]);return F=function(){return n},n}function R(){var n=Object(p.a)(["\n    margin-top: 1.5rem;\n    min-width: 16.5rem;\n    width: 100%;\n    background-color: var(--input-background-color);\n    color: var(--input-color);\n    border: none;\n    padding: .5rem .5rem .5rem 1rem;\n    font-size: inherit;\n    font-family: inherit;\n    display: block;\n    outline: none;\n\n    &:focus {\n        outline: none;\n    }\n"]);return R=function(){return n},n}function H(){var n=Object(p.a)(["\n    grid-column: 1/6;\n\n"]);return H=function(){return n},n}function T(){var n=Object(p.a)(["\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    color: var(--primary-color);\n    font-size: 2rem;\n"]);return T=function(){return n},n}function B(){var n=Object(p.a)(["\n    display:grid; \n    align-items: center;\n    grid-template-columns: 5rem 2fr 2fr 2fr 1fr;\n    background-color: var(--background-primary-color);\n    /* border: .05rem solid var(--secondary-text-color); */\n\n    &:hover  ",'{\n        position: relative;\n        :nth-of-type(1) {\n            cursor: pointer;\n            ::after {\n                content: "X";\n                position: absolute;\n                padding: .5rem 1rem;\n                border-radius: 50%;\n                left: 50%;\n                top: 50%;\n                transform: translate(-50%, -50%);\n                background-color: var(--color-red);\n                font-size: 1.2rem;\n            }\n        }\n    }\n']);return B=function(){return n},n}function I(){var n=Object(p.a)(["\n    padding: 2rem;\n    text-align: center;\n\n    input {\n        text-align: end;\n        background-color: var(--input-background-color);\n        color: var(--input-color);\n        font-size: 1.5rem;\n        padding: 1rem 1rem 1rem 2rem;\n        display: block;\n        width: 100%;\n        border: none;\n        border-radius: .5rem;\n        /* border-bottom: 1px solid #000; */\n        font-family: inherit;\n    }\n\n"]);return I=function(){return n},n}var K=O.c.div(I()),V=O.c.div(B(),K),U=O.c.div(T()),J=O.c.div(H()),_=O.c.select(R()),Z=O.c.div(F()),G=O.c.h4(M()),q=function(n){var e,r,d,l,u,b=n.item,j=n.idx,v=Object(a.useContext)(s.OrderContext),p=v.deleteProduct,O=v.addProductDiscount,h=v.addLensesParameters,f=Object(a.useState)(!1),x=Object(i.a)(f,2),g=x[0],y=x[1],k=Object(a.useState)({}),w=Object(i.a)(k,2),C=w[0],P=w[1],S=function(n,e,r){var t=n.target,i=t.name,a=t.value,d=r;d[e]=""===a?1001:Number(a),P(Object(c.a)(Object(c.a)({},C),{},Object(o.a)({},i,d)))};return Object(a.useEffect)((function(){h(j,C)}),[C]),Object(a.useEffect)((function(){b.product.type&&3===b.product.type&&P({curve:[b.product.contactLenses.allowedCurves[0],b.product.contactLenses.allowedCurves[0]],diameter:[b.product.contactLenses.allowedDiameters[0],b.product.contactLenses.allowedDiameters[0]],diopters:[0,0]})}),[b.product]),Object(t.jsxs)(V,{children:[Object(t.jsx)(K,{onClick:function(){return p(b)},children:j+1}),Object(t.jsx)(K,{children:(null===b||void 0===b||null===(e=b.product)||void 0===e?void 0:e.name)?null===b||void 0===b||null===(r=b.product)||void 0===r?void 0:r.name:"\u0160o\u0161ovky"}),Object(t.jsx)(K,{children:(null===b||void 0===b||null===(d=b.product)||void 0===d?void 0:d.price)?"".concat(((null===b||void 0===b||null===(l=b.product)||void 0===l?void 0:l.price)/100).toFixed(2),"\u20ac"):""}),Object(t.jsx)(K,{children:Object(t.jsx)("div",{children:Object(t.jsx)("input",{value:(null===b||void 0===b||null===(u=b.discount)||void 0===u?void 0:u.product)?null===b||void 0===b?void 0:b.discount.product.percent:"",onChange:function(n){return O(j,n.target.value)}})})}),Object(t.jsx)(K,{children:Object(t.jsx)(U,{onClick:function(){y((function(n){return!n}))},children:Object(t.jsx)(L.a,{})})}),g&&Object(t.jsxs)(J,{children:[3!==b.product.type&&Object(t.jsx)("div",{children:Object(t.jsx)(G,{children:"\u017diadne mo\u017enosti"})}),3===b.product.type&&Object(t.jsxs)(Z,{children:[Object(t.jsxs)("div",{children:[Object(t.jsx)("h4",{children:"\u013dave oko"}),Object(t.jsx)(_,{name:"curve",value:C.curve[0],onChange:function(n){return S(n,0,C.curve)},children:b.product.contactLenses.allowedCurves.map((function(n,e){return Object(t.jsx)("option",{value:n,children:n},e)}))}),Object(t.jsx)(_,{name:"diameter",value:C.diameter[0],onChange:function(n){return S(n,0,C.diameter)},children:b.product.contactLenses.allowedDiameters.map((function(n,e){return Object(t.jsx)("option",{value:n,children:n},e)}))}),Object(t.jsx)(m.a,{name:"diopters",type:"number",value:C.diopters[0],min:b.product.contactLenses.dioptersRange[0],max:b.product.contactLenses.dioptersRange[1],step:.25,onChange:function(n){return S(n,0,C.diopters)}})]}),Object(t.jsxs)("div",{children:[Object(t.jsx)("h4",{children:"Prav\xe9 oko"}),Object(t.jsx)(_,{name:"curve",value:C.curve[1],onChange:function(n){return S(n,1,C.curve)},children:b.product.contactLenses.allowedCurves.map((function(n,e){return Object(t.jsx)("option",{value:n,children:n},e)}))}),Object(t.jsx)(_,{name:"diameter",value:C.diameter[1],onChange:function(n){return S(n,1,C.diameter)},children:b.product.contactLenses.allowedDiameters.map((function(n,e){return Object(t.jsx)("option",{value:n,children:n},e)}))}),Object(t.jsx)(m.a,{type:"number",value:C.diopters[1],min:b.product.contactLenses.dioptersRange[0],max:b.product.contactLenses.dioptersRange[1],step:.25,name:"diopters",onChange:function(n){return S(n,1,C.diopters)}})]})]})]})]})},Q=r(224);function X(){var n=Object(p.a)(["\n    cursor: pointer;\n    border: 4px solid var(--backbutton-color);\n    color: var(--backbutton-color);\n    border-radius: 50%;\n    padding: 1.2rem 1.2rem;\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    margin-bottom: 3rem;\n"]);return X=function(){return n},n}var W=O.c.div(X()),Y=function(n){var e=Object.assign({},n);return Object(t.jsx)(W,Object(c.a)(Object(c.a)({},e),{},{children:Object(t.jsx)(Q.a,{})}))},$=r(53);function nn(){var n=Object(p.a)(["\n    cursor: pointer;\n    display: grid;\n    align-content: center;\n    grid-template-columns: 10rem 15rem 1fr 1fr 10rem 1fr;\n    margin-bottom: 1rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n\n    transition: all .3s ease-out;\n\n    &:hover {\n        background-color: var(--primary-color); \n        font-weight: bolder;\n        color: var(--button-font-color);\n    }\n"]);return nn=function(){return n},n}function en(){var n=Object(p.a)(["\n    display: grid;\n    align-content: center;\n    grid-template-columns: 10rem 15rem 1fr 1fr 10rem 1fr;\n    border-bottom: 1px solid var(--secondary-text-color);\n    font-weight: bolder;\n\n\n"]);return en=function(){return n},n}function rn(){var n=Object(p.a)(["\n    padding: 2rem;\n    text-align: center;\n\n    img {\n        width: 5rem;\n    }\n"]);return rn=function(){return n},n}function tn(){var n=Object(p.a)(["\n    margin: 5rem 0;\n\n"]);return tn=function(){return n},n}function on(){var n=Object(p.a)(["\n    display: block;\n    margin-left: auto;\n"]);return on=function(){return n},n}function cn(){var n=Object(p.a)(["\n    /* max-width: 40rem; */\n    padding: 2rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n    /* margin: 0 auto; */\n    border-radius: .5rem;\n\n    h3 {\n        /* text-align: center; */\n        font-size: 2.5rem;\n    }\n\n    div {\n\n        &:not(:last-child) {\n            margin-bottom: 3rem;\n\n        }\n    }\n"]);return cn=function(){return n},n}function an(){var n=Object(p.a)(["\n    font-size: 1.4rem;\n    background-color: var(--primary-color);\n    font-weight: bolder;\n    display: block;\n    margin-left: 1rem;\n    /* margin: 2rem 2rem 2rem auto; */\n"]);return an=function(){return n},n}function dn(){var n=Object(p.a)(["\n    font-size: 1.4rem;\n    display: block;\n\n"]);return dn=function(){return n},n}function ln(){var n=Object(p.a)(["\n    margin: 2rem 2rem;\n    display: flex;\n    justify-content: flex-end;\n"]);return ln=function(){return n},n}function sn(){var n=Object(p.a)(["\n    padding-top: 2rem;\n    padding-left: 2rem;\n    opacity: .6;\n"]);return sn=function(){return n},n}function un(){var n=Object(p.a)(["\n    display:grid; \n    grid-template-columns: 5rem 2fr 2fr 2fr 1fr;\n    background-color: var(--background-primary-color);\n    border-bottom: 1px solid var(--secondary-text-color);\n    margin: 2rem;\n    margin-right: calc(2rem + 10px);\n    margin-bottom: 0;\n"]);return un=function(){return n},n}function bn(){var n=Object(p.a)(["\n    max-height: 30rem;\n    overflow-y: scroll;\n    padding: 2rem 2rem 0 2rem;\n    padding-top: 0;\n\n    ::-webkit-scrollbar {\n        width: 10px;\n    }\n\n    /* Track */\n    ::-webkit-scrollbar-track {\n        background:  var(--background-primary-color);\n    }\n\n    /* Handle */\n    ::-webkit-scrollbar-thumb {\n        background: var(--primary-color);\n    }\n\n    /* Handle on hover */\n    ::-webkit-scrollbar-thumb:hover {\n        background: var(--primary-color);\n    }\n"]);return bn=function(){return n},n}function jn(){var n=Object(p.a)(["\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n\n    h3 {\n        padding: 2rem;\n        font-size: 2.5rem;\n\n    }\n"]);return jn=function(){return n},n}function vn(){var n=Object(p.a)(["\n    display: grid;\n    grid-template-columns: 1fr 2fr;\n    grid-gap: 3rem;\n    align-items: start;\n\n"]);return vn=function(){return n},n}var mn=O.c.div(vn()),pn=O.c.div(jn()),On=O.c.div(bn()),hn=O.c.div(un()),fn=O.c.p(sn()),xn=O.c.div(ln()),gn=Object(O.c)(h.a)(dn()),yn=Object(O.c)(h.a)(an()),kn=O.c.div(cn()),wn=Object(O.c)(h.a)(on()),Cn=O.c.div(tn()),Pn=O.c.div(rn()),Sn=O.c.div(en()),Dn=O.c.div(nn()),zn=function(n){var e=n.back,r=n.next,o=n.showErrorMessage,d=Object(a.useContext)(s.OrderContext),l=d.addProduct,u=d.cart,b=d.createCombinedProducts,j=Object(a.useState)(""),v=Object(i.a)(j,2),p=v[0],O=v[1],h=Object(a.useState)([]),f=Object(i.a)(h,2),x=f[0],g=f[1],y=Object(a.useState)({limit:10,skip:0}),k=Object(i.a)(y,2),w=k[0],C=k[1],P=Object($.c)("api/admin/products/filter",w),S=P.response,D=P.isLoading,z=P.refetch;return Object(a.useEffect)((function(){D||g(S.products)}),[D]),console.log(u),Object(t.jsxs)("div",{children:[Object(t.jsx)(Y,{onClick:e}),Object(t.jsxs)(mn,{children:[Object(t.jsxs)(kn,{children:[Object(t.jsx)("h3",{children:"Vyh\u013eada\u0165 produkt"}),Object(t.jsx)("div",{children:Object(t.jsx)(m.a,{label:"N\xe1zov produktu, eanCode alebo popis",value:p,handleChange:function(n){return O(n.target.value)},onKeyPress:function(n){""!==p&&"Enter"===n.key&&(C(Object(c.a)(Object(c.a)({},w),{},{query:p})),z())}})}),Object(t.jsx)(wn,{onClick:function(){""!==p&&(C(Object(c.a)(Object(c.a)({},w),{},{query:p})),z())},children:"H\u013eada\u0165"})]}),Object(t.jsxs)(pn,{children:[Object(t.jsx)("h3",{children:"Vybrat\xe9 polo\u017eky"}),Object(t.jsxs)(hn,{children:[Object(t.jsx)(Pn,{children:"#"}),Object(t.jsx)(Pn,{children:"Produkt"}),Object(t.jsx)(Pn,{children:"Cena"}),Object(t.jsx)(Pn,{children:"Zlava v %"}),Object(t.jsx)(Pn,{children:"Viac"})]}),Object(t.jsxs)(On,{children:[u.map((function(n,e){return Object(t.jsx)(q,{item:n,idx:e},e)})),0===u.length&&Object(t.jsx)(fn,{children:"Nie s\xfa vybran\xe9 \u017eiadn\xe9 produkty"})]}),Object(t.jsxs)(xn,{children:[Object(t.jsx)(gn,{onClick:function(){return r("select-lenses")},children:"Preis\u0165 na \u0161osovky"}),Object(t.jsx)(yn,{onClick:b,children:"Dokon\u010di\u0165 objedn\xe1vku"})]})]})]}),Object(t.jsxs)(Cn,{children:[Object(t.jsxs)(Sn,{children:[Object(t.jsx)(Pn,{children:"eanCode"}),Object(t.jsx)(Pn,{children:"Obr\xe1zok"}),Object(t.jsx)(Pn,{children:"N\xe1zov"}),Object(t.jsx)(Pn,{children:"Zna\u010dka"}),Object(t.jsx)(Pn,{children:"Cena"}),Object(t.jsx)(Pn,{children:"Dostupnos\u0165"})]}),x.map((function(n,e){return Object(t.jsxs)(Dn,{onClick:function(){return(e=n.available)&&("number"===typeof e?e>0:e.reduce((function(n,e){return n+e}))>0)?l(n):o("Produkt nieje na sklade.");var e},children:[Object(t.jsx)(Pn,{children:n.eanCode}),Object(t.jsx)(Pn,{children:(null===n||void 0===n?void 0:n.image)&&Object(t.jsx)("img",{src:"".concat("http://195.110.58.166:8080","/uploads/").concat(n.image.imagePath),alt:n.image.alt})}),Object(t.jsx)(Pn,{children:n.name}),Object(t.jsx)(Pn,{children:n.brand}),Object(t.jsxs)(Pn,{children:[(n.price/100).toFixed(2),"\u20ac"]}),Object(t.jsx)(Pn,{children:(r=n.available,r?"number"===typeof r?r>0?"Na sklade":"Nedostupn\xe9":r.reduce((function(n,e){return n+e}))>0?"Na sklade":"Nedostupn\xe9":"Nedostupn\xe9")})]},e);var r}))]})]})};function An(){var n=Object(p.a)(["\n    margin-top: 1rem;\n    margin-right: 2rem;\n\n\n"]);return An=function(){return n},n}function En(){var n=Object(p.a)(["\n    padding: 1rem 1rem;\n    margin: 0 1rem 1rem;\n    /* background-color: red; */\n    display: flex;\n    justify-content: space-between;\n    align-items: flex-end;\n    border-bottom: .05rem solid var(--secondary-text-color);\n\n\n"]);return En=function(){return n},n}function Ln(){var n=Object(p.a)(["\n    grid-column: 1/5;\n\n"]);return Ln=function(){return n},n}function Nn(){var n=Object(p.a)(["\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    color: var(--primary-color);\n    font-size: 2rem;\n"]);return Nn=function(){return n},n}function Mn(){var n=Object(p.a)(["\n    padding: 2rem;\n    text-align: center;\n\n    input {\n        text-align: end;\n        background-color: var(--input-background-color);\n        color: var(--input-color);\n        font-size: 1.5rem;\n        padding: 1rem 1rem 1rem 2rem;\n        display: block;\n        width: 100%;\n        border: none;\n        border-radius: .5rem;\n        /* border-bottom: 1px solid #000; */\n        font-family: inherit;\n    }\n"]);return Mn=function(){return n},n}function Fn(){var n=Object(p.a)(["\n    cursor: pointer;\n    display:grid; \n    align-items: center;\n    grid-template-columns: 5rem 2fr 2fr 2fr 2fr;\n    background-color: var(--background-primary-color);\n    /* border: .05rem solid var(--secondary-text-color); */\n\n    border: ",";\n"]);return Fn=function(){return n},n}var Rn=O.c.div(Fn(),(function(n){return n.isSelected?".05rem solid var(--primary-color)":".05rem solid transparent"})),Hn=O.c.div(Mn()),Tn=(O.c.div(Nn()),O.c.div(Ln()),O.c.div(En()),Object(O.c)(N.a)(An()),function(n){var e,r,o,c,d,l=n.idx,u=n.item,b=Object(a.useContext)(s.OrderContext),j=b.selectProduct,v=b.selectedProduct,m=b.addLensesDiscount,p=Object(a.useState)(null),O=Object(i.a)(p,2);O[0],O[1];return Object(t.jsxs)(Rn,{isSelected:v===l,onClick:function(){return n=l,void(3!==u.product.type&&4!==u.product.type&&5!==u.product.type&&j(n));var n},children:[Object(t.jsx)(Hn,{children:l+1}),Object(t.jsx)(Hn,{children:null===u||void 0===u||null===(e=u.product)||void 0===e?void 0:e.name}),Object(t.jsx)(Hn,{children:null===u||void 0===u||null===(r=u.lens)||void 0===r?void 0:r.name}),Object(t.jsx)(Hn,{children:(null===u||void 0===u||null===(o=u.lens)||void 0===o?void 0:o.price)?"".concat(((null===u||void 0===u||null===(c=u.lens)||void 0===c?void 0:c.price)/100).toFixed(2),"\u20ac"):""}),Object(t.jsx)(Hn,{children:Object(t.jsx)("input",{value:(null===u||void 0===u||null===(d=u.discount)||void 0===d?void 0:d.lenses)?null===u||void 0===u?void 0:u.discount.lenses.percent:"",onChange:function(n){return m(l,n.target.value)}})})]})});function Bn(){var n=Object(p.a)(["\n    font-size: 1.4rem;\n    background-color: var(--primary-color);\n    font-weight: bolder;\n    display: block;\n    margin-left: 1rem;\n    /* margin: 2rem 2rem 2rem auto; */\n"]);return Bn=function(){return n},n}function In(){var n=Object(p.a)(["\n    font-size: 1.4rem;\n    display: block;\n\n"]);return In=function(){return n},n}function Kn(){var n=Object(p.a)(["\n    background-color: var(--container-background-color);\n\n    margin: 2rem 2rem;\n    display: flex;\n    justify-content: flex-end;\n"]);return Kn=function(){return n},n}function Vn(){var n=Object(p.a)(["\n    padding-top: 2rem;\n    padding-left: 2rem;\n    opacity: .6;\n"]);return Vn=function(){return n},n}function Un(){var n=Object(p.a)(["\n    display:grid; \n    grid-template-columns: 5rem 2fr 2fr 2fr 2fr;\n    background-color: var(--background-primary-color);\n    border-bottom: 1px solid var(--secondary-text-color);\n    margin: 2rem;\n    margin-right: calc(2rem + 10px);\n    margin-bottom: 0;\n"]);return Un=function(){return n},n}function Jn(){var n=Object(p.a)(["\n    padding: 2rem;\n    text-align: center;\n\n"]);return Jn=function(){return n},n}function _n(){var n=Object(p.a)(["\n    max-height: 30rem;\n    overflow-y: scroll;\n    padding: 2rem 2rem 0 2rem;\n    padding-top: 0;\n\n    ::-webkit-scrollbar {\n        width: 10px;\n    }\n\n    /* Track */\n    ::-webkit-scrollbar-track {\n        background:  var(--background-primary-color);\n    }\n\n    /* Handle */\n    ::-webkit-scrollbar-thumb {\n        background: var(--primary-color);\n    }\n\n    /* Handle on hover */\n    ::-webkit-scrollbar-thumb:hover {\n        background: var(--primary-color);\n    }\n"]);return _n=function(){return n},n}function Zn(){var n=Object(p.a)(["\n    grid-column: 2/3;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n\n    h3 {\n        padding: 2rem;\n        font-size: 2.5rem;\n\n    }\n"]);return Zn=function(){return n},n}function Gn(){var n=Object(p.a)(["\n    background-color: var(--background-primary-color);\n    border-radius: 50%;\n    width: 10rem;\n    height: 10rem;\n    margin: 0 auto;\n    margin-bottom: 1.5rem;\n"]);return Gn=function(){return n},n}function qn(){var n=Object(p.a)(["\n    cursor: pointer;\n    width: 100%;\n    max-width: 32rem;\n    padding: 2rem;\n    border-radius: .5rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n    text-align: center;\n    transition: transform .3s ease-out,\n                box-shadow .3s ease-out;\n\n    &:last-child {\n        display:flex;\n        flex-direction: column;\n        justify-content: space-between;\n    }\n\n    h4 {\n        font-size: 2.5rem;\n        margin-bottom: 1.5rem\n    }\n\n    img {\n        /* background-color:#000; */\n        width: 15rem;\n        height: 15rem;\n        margin-bottom: 1rem; \n        object-fit: contain;\n        object-position: center;\n    }\n\n    p {\n        opacity: .65;\n        &:not(:last-child){\n            margin-bottom: .5rem;\n        }\n    }\n\n    h5 {\n        font-size: 2.5rem;\n    }\n\n    &:hover {\n        transform: scale(1.03);\n        box-shadow: var(--container-shadow);\n    }\n"]);return qn=function(){return n},n}function Qn(){var n=Object(p.a)(["\n    display: flex;\n    flex-wrap: wrap;\n    gap: 2rem;\n"]);return Qn=function(){return n},n}function Xn(){var n=Object(p.a)(["\n    margin: 5rem 0;\n\n    h3 {\n        font-size: 3rem;\n        margin-bottom: 3rem;\n    }\n"]);return Xn=function(){return n},n}function Wn(){var n=Object(p.a)(["\n    display: block;\n    margin-left: auto;\n"]);return Wn=function(){return n},n}function Yn(){var n=Object(p.a)(["\n    /* max-width: 40rem; */\n    padding: 2rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n    /* margin: 0 auto; */\n    border-radius: .5rem;\n\n    h3 {\n        /* text-align: center; */\n        font-size: 2.5rem;\n    }\n\n    div {\n\n        &:not(:last-child) {\n            margin-bottom: 3rem;\n\n        }\n    }\n"]);return Yn=function(){return n},n}function $n(){var n=Object(p.a)(["\n    display: grid;\n    grid-template-columns: 1fr 2fr;\n    grid-gap: 3rem;\n    align-items: start;\n"]);return $n=function(){return n},n}var ne=O.c.div($n()),ee=O.c.div(Yn()),re=Object(O.c)(h.a)(Wn()),te=O.c.div(Xn()),oe=O.c.div(Qn()),ce=O.c.div(qn()),ie=O.c.div(Gn()),ae=O.c.div(Zn()),de=O.c.div(_n()),le=O.c.div(Jn()),se=O.c.div(Un()),ue=O.c.p(Vn()),be=O.c.div(Kn()),je=(Object(O.c)(h.a)(In()),Object(O.c)(h.a)(Bn())),ve=function(n){var e=n.back,r=(n.next,Object(a.useContext)(s.OrderContext)),o=r.cart,d=r.addLenses,l=r.createCombinedProducts,u=Object(a.useState)(""),b=Object(i.a)(u,2),j=b[0],v=b[1],p=Object(a.useState)([]),O=Object(i.a)(p,2),h=O[0],f=O[1],x=Object(a.useState)({limit:10,skip:0}),g=Object(i.a)(x,2),y=g[0],k=g[1],w=Object($.c)("api/admin/lenses/filter",y),C=w.response,P=w.isLoading,S=w.refetch;return Object(a.useEffect)((function(){P||f(C.lenses)}),[P]),Object(t.jsxs)("div",{children:[Object(t.jsx)(Y,{onClick:e}),Object(t.jsxs)(ne,{children:[Object(t.jsxs)(ee,{children:[Object(t.jsx)("h3",{children:"Vyh\u013eada\u0165 produkt"}),Object(t.jsx)("div",{children:Object(t.jsx)(m.a,{label:"Vyhlada\u0165 \u0161o\u0161ovky",value:j,handleChange:function(n){return v(n.target.value)},onKeyPress:function(n){""!==j&&"Enter"===n.key&&(k(Object(c.a)({},y)),S())}})}),Object(t.jsx)(re,{onClick:function(){""!==j&&(k(Object(c.a)({},y)),S())},children:"H\u013eada\u0165"})]}),Object(t.jsxs)(ae,{children:[Object(t.jsx)("h3",{children:"Vybrat\xe9 polo\u017eky"}),Object(t.jsxs)(se,{children:[Object(t.jsx)(le,{children:"#"}),Object(t.jsx)(le,{children:"Produkt"}),Object(t.jsx)(le,{children:"\u0160osovky"}),Object(t.jsx)(le,{children:"Cena"}),Object(t.jsx)(le,{children:"Z\u013eava v %"})]}),Object(t.jsxs)(de,{children:[o.map((function(n,e){if(3!==n.product.type&&4!==n.product.type&&5!==n.product.type)return Object(t.jsx)(Tn,{idx:e,item:n},e)})),0===o.length&&Object(t.jsx)(ue,{children:"Nie s\xfa vybran\xe9 \u017eiadn\xe9 produkty"})]}),Object(t.jsx)(be,{children:Object(t.jsx)(je,{onClick:l,children:"Dokon\u010di\u0165 objedn\xe1vku"})})]})]}),Object(t.jsxs)(te,{children:[Object(t.jsx)("h3",{children:"V\xfdber \u0160o\u0161oviek"}),Object(t.jsxs)(oe,{children:[h.map((function(n,e){return Object(t.jsxs)(ce,{onClick:function(){return d(n)},children:[Object(t.jsx)("h4",{children:n.name}),Object(t.jsx)(ie,{}),Object(t.jsx)("p",{children:n.description}),n.dioptersRange&&Object(t.jsx)("p",{children:"Dioptrie od ".concat(n.dioptersRange[0]," do ").concat(n.dioptersRange[1])}),n.cylinderRange&&Object(t.jsx)("p",{children:"Cylinder  od ".concat(n.cylinderRange[0]," do ").concat(n.cylinderRange[1])}),Object(t.jsxs)("h5",{children:[(n.price/100).toFixed(2),"\u20ac"]})]},e)})),Object(t.jsxs)(ce,{onClick:function(){return d(null)},children:[Object(t.jsx)("h4",{children:"\u017diadn\xe9 skl\xe1"}),Object(t.jsx)(ie,{}),Object(t.jsx)("h5",{children:"0\u20ac"})]})]})]})]})},me=r(73),pe=r(97),Oe=r(57);function he(){var n=Object(p.a)(["\n    display: flex;\n    align-items: center;\n    margin-bottom: 2rem;\n\n\n    label {\n        display: block;\n        outline: none;\n        margin-left: 1rem;\n\n        &:focus {\n            outline: none;\n\n        }\n    }\n\n    input: {\n        display: block;\n    }\n"]);return he=function(){return n},n}function fe(){var n=Object(p.a)(["\n    display: flex;\n    align-items: center;\n    margin-bottom: 2rem;\n\n\n    label {\n        display: block;\n        outline: none;\n        margin-left: 1rem;\n\n        &:focus {\n            outline: none;\n\n        }\n    }\n\n    input: {\n        display: block;\n    }\n"]);return fe=function(){return n},n}function xe(){var n=Object(p.a)(["\n    margin-top: 2rem;\n    margin-right: 2rem;\n"]);return xe=function(){return n},n}function ge(){var n=Object(p.a)(["\n    margin-top: 1.5rem;\n    min-width: 16.5rem;\n    width: 100%;\n    background-color: var(--input-background-color);\n    color: var(--input-color);\n    border: none;\n    padding: .5rem .5rem .5rem 1rem;\n    font-size: inherit;\n    font-family: inherit;\n    display: block;\n    outline: none;\n    margin-bottom: 2rem;\n\n    &:focus {\n        outline: none;\n    }\n"]);return ge=function(){return n},n}function ye(){var n=Object(p.a)(["\n    margin: 2rem 0 0;\n    background-color: var(--primary-color);\n    font-weight: bolder;\n"]);return ye=function(){return n},n}function ke(){var n=Object(p.a)(["\n    position: relative;\n    z-index: 999999;\n\n    h4{ \n        margin-top: 2rem;\n    }\n"]);return ke=function(){return n},n}var we=O.c.div(ke()),Ce=Object(O.c)(h.a)(ye()),Pe=O.c.select(ge()),Se=Object(O.c)(N.a)(xe()),De=O.c.div(fe()),ze=O.c.div(he()),Ae=function(n){n.close;var e,r,d,l,s,u,b,j,v,p,O=n.order,h=n.combinedProducts,f=n.createOrder,x=n.setHasChanged,g=n.isUpdating,y=n.updateOrder,k=Object(a.useState)({paymentType:"cash"}),w=Object(i.a)(k,2),C=w[0],P=w[1],S=Object(a.useState)(!1),D=Object(i.a)(S,2),z=D[0],A=D[1],E=Object(a.useState)(!1),L=Object(i.a)(E,2),N=L[0],M=L[1],F=function(n){var e=n.target,r=e.name,t=e.value;if(""===t)return delete C[r],void P(Object(c.a)({},C));P(Object(c.a)(Object(c.a)({},C),{},Object(o.a)({},r,t)))},R=function(n){var e=n.target,r=e.name,t=e.value;if(""===t)return delete C.overwrite[r],void P(Object(c.a)({},C));P(Object(c.a)(Object(c.a)({},C),{},{overwrite:Object(c.a)(Object(c.a)({},C.overwrite),{},Object(o.a)({},r,t))}))},H=function(n){if(n.preventDefault(),g){var e=Object(c.a)({},C);delete e.paymentType,delete e.shouldDeliver,x(!1),y(e,O.order._id)}else{var r=Object(c.a)(Object(c.a)({},C),{},{user:O.user._id,combinedProducts:h.map((function(n){return n._id})),status:z?"half-paid":"paid"});C.paidAlready&&(r=Object(c.a)(Object(c.a)({},r),{},{paidAlready:Object(Oe.b)(C.paidAlready)})),console.log(r),x(!1),f(r)}};return Object(a.useEffect)((function(){var n,e;g&&((null===O||void 0===O?void 0:O.order)&&(F({target:{name:"shouldDeliver",value:null===O||void 0===O||null===(n=O.order)||void 0===n?void 0:n.shouldDeliver}}),F({target:{name:"buyingAsCompany",value:null===O||void 0===O||null===(e=O.order)||void 0===e?void 0:e.buyingAsCompany}})))}),[g,O]),Object(a.useEffect)((function(){return function(){P({paymentType:"cash"}),A(!1),M(!1)}}),[]),Object(t.jsxs)(we,{children:[Object(t.jsx)("h2",{children:g?"Upravi\u0165 objedn\xe1vku":"Dokon\u010deni\u0165 objedn\xe1vky"}),!g&&Object(t.jsxs)("div",{children:[Object(t.jsx)("h4",{children:"Sp\xf4sob platby"}),Object(t.jsxs)(Pe,{name:"paymentType",value:null!==(e=null===C||void 0===C?void 0:C.paymentType)&&void 0!==e?e:"cash",onChange:function(n){return F(n)},children:[Object(t.jsx)("option",{value:"cash",children:"Hotovos\u0165"}),Object(t.jsx)("option",{value:"card",children:"Karta"}),Object(t.jsx)("option",{value:"coupon",children:"Kup\xf3n"})]}),Object(t.jsxs)(ze,{children:[Object(t.jsx)("input",{id:"hasDeposit",name:"hasDeposit",type:"checkbox",value:z,onChange:function(){z?(A(!1),C.paidAlready&&(delete C.paidAlready,P(Object(c.a)({},C)))):A(!0)}}),Object(t.jsx)("label",{htmlFor:"hasDeposit",children:"Prida\u0165 z\xe1lohu"})]}),z&&Object(t.jsx)(m.a,{label:"Zaplaten\xe1 z\xe1loha",name:"paidAlready",type:"text",value:null!==(r=null===C||void 0===C?void 0:C.paidAlready)&&void 0!==r?r:"",onChange:function(n){return F(n)}})]}),Object(t.jsxs)("div",{children:[Object(t.jsx)("h4",{children:"Inform\xe1cie o doru\u010den\xed"}),Object(t.jsx)(Se,{label:"Doru\u010di\u0165 na adresu",isActive:null===C||void 0===C?void 0:C.shouldDeliver,handleClick:function(){return F({target:{name:"shouldDeliver",value:!(null===C||void 0===C?void 0:C.shouldDeliver)||!(null===C||void 0===C?void 0:C.shouldDeliver)}})}}),Object(t.jsx)(Se,{label:"N\xe1kup na firmu",isActive:null===C||void 0===C?void 0:C.buyingAsCompany,handleClick:function(){return F({target:{name:"buyingAsCompany",value:!(null===C||void 0===C?void 0:C.buyingAsCompany)||!(null===C||void 0===C?void 0:C.buyingAsCompany)}})}}),(null===C||void 0===C?void 0:C.shouldDeliver)&&Object(t.jsxs)("div",{children:[Object(t.jsx)("h4",{children:"Adresa"}),Object(t.jsx)("p",{children:O.user.psc}),Object(t.jsx)("p",{children:O.user.address}),Object(t.jsx)("p",{children:O.user.city}),Object(t.jsx)("p",{children:O.user.country}),Object(t.jsxs)("div",{children:[Object(t.jsxs)(De,{children:[Object(t.jsx)("input",{id:"overwrite",name:"overwrite",type:"checkbox",value:N,onChange:function(){N?(M(!1),C.overwrite&&(delete C.overwrite,P(Object(c.a)({},C)))):M(!0)}}),Object(t.jsx)("label",{htmlFor:"overwrite",children:"In\xe1 adresa"})]}),N&&Object(t.jsxs)("div",{children:[Object(t.jsx)(m.a,{label:"Adresa",name:"address",type:"text",value:null!==(d=null===C||void 0===C||null===(l=C.overwrite)||void 0===l?void 0:l.address)&&void 0!==d?d:"",onChange:function(n){return R(n)}}),Object(t.jsx)(m.a,{label:"PS\u010c",name:"psc",type:"text",value:null!==(s=null===C||void 0===C||null===(u=C.overwrite)||void 0===u?void 0:u.psc)&&void 0!==s?s:"",onChange:function(n){return R(n)}}),Object(t.jsx)(m.a,{label:"Mesto",name:"city",type:"text",value:null!==(b=null===C||void 0===C||null===(j=C.overwrite)||void 0===j?void 0:j.city)&&void 0!==b?b:"",onChange:function(n){return R(n)}}),Object(t.jsx)(m.a,{label:"\u0160t\xe1t",name:"country",type:"text",value:null!==(v=null===C||void 0===C||null===(p=C.overwrite)||void 0===p?void 0:p.country)&&void 0!==v?v:"",onChange:function(n){return R(n)}})]})]})]})]}),g&&Object(t.jsx)(Ce,{onClick:H,children:"Upravi\u0165 objedn\xe1vku"}),!g&&Object(t.jsx)(Ce,{onClick:H,children:"Vytvori\u0165 objedn\xe1vku"})]})},Ee=function(n){var e,r,o=n.productId,c=Object($.b)("api/store/products",o,!o),i=c.isLoading,a=c.response;return(null===a||void 0===a||null===(e=a.product)||void 0===e||null===(r=e.name)||void 0===r?void 0:r.includes("Pseudo"))?Object(t.jsxs)(d.a.Fragment,{children:[Object(t.jsx)("span",{style:{whiteSpace:"nowrap"},children:" "}),Object(t.jsx)("span",{style:{whiteSpace:"nowrap"},children:" "})]}):Object(t.jsxs)(d.a.Fragment,{children:[Object(t.jsx)("span",{style:{whiteSpace:"nowrap"},children:i?"H\u013eadam...":a.product.eanCode}),Object(t.jsx)("span",{style:{whiteSpace:"nowrap"},children:i?"H\u013eadam...":a.product.name.slice(0,6).concat("...")})]})},Le=function(n){var e,r=n.lensesId,o=Object($.b)("api/store/lenses",r,!r),c=o.isLoading,i=o.response;return Object(t.jsxs)(d.a.Fragment,{children:[Object(t.jsx)("span",{style:{whiteSpace:"nowrap"},children:c?"H\u013eadam...":(null===i||void 0===i||null===(e=i.lenses)||void 0===e?void 0:e.eanCode)||""}),Object(t.jsx)("span",{style:{whiteSpace:"nowrap"},children:c?"H\u013eadam...":i.lenses.name.slice(0,8).concat("...")})]})},Ne=r(61);function Me(){var n=Object(p.a)(["\n    &:not(:last-child) {\n        margin-right: .5rem;\n    }\n\n    &:last-child {\n        background-color: var(--primary-color);\n        font-weight: bolder;\n    }\n"]);return Me=function(){return n},n}function Fe(){var n=Object(p.a)(["\n    padding: 2rem;\n    border-radius: .5rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n    margin-bottom: 3rem;\n\n\n    h3 {\n        margin-bottom: 1rem;\n    }\n"]);return Fe=function(){return n},n}function Re(){var n=Object(p.a)(["\n    padding: 2rem;\n    border-radius: .5rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n    margin-bottom: 3rem;\n\n    h3 {\n        margin-bottom: 1rem;\n    }\n\n    h4 {\n        margin-top: 1rem;\n        margin-bottom: .5rem;\n    }\n\n    div {\n        p {\n            opacity: .83;\n        }\n\n        &:not(:last-child) {\n            margin-bottom: 1rem;\n        }\n\n        a {\n            background-color: var(--primary-color);\n            font-weight: bolder;\n            color: #fff;\n            display: inline-block;\n            padding: .5rem 2.5rem;\n            margin-top: 1rem;\n        }\n    }\n\n"]);return Re=function(){return n},n}function He(){var n=Object(p.a)(["\n    opacity: .83;\n    font-size: 1.4rem;\n    margin-left: 1.5rem;\n\n    &:not(:last-child) {\n        margin-bottom: .5rem;\n    }\n"]);return He=function(){return n},n}function Te(){var n=Object(p.a)(["\n    padding: 2rem;\n    border-radius: .5rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n\n\n    h3 {\n        margin-bottom: .5rem;\n    }\n\n    h4 {\n        margin-top: 1rem;\n        margin-bottom: .5rem;\n    }\n\n"]);return Te=function(){return n},n}function Be(){var n=Object(p.a)(["\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    grid-gap: 3rem;\n    align-items: start;\n"]);return Be=function(){return n},n}function Ie(){var n=Object(p.a)(["\n    margin-top: 2rem;\n    display:flex;\n    justify-content: flex-end;\n    align-items: center;\n\n    span {\n        display: block;\n        margin-right: .5rem;\n        \n    }\n\n    p {\n        font-weight: bolder;\n        font-size: 2rem;\n    }\n"]);return Ie=function(){return n},n}function Ke(){var n=Object(p.a)(["\n    display: grid;\n    align-content: center;\n    grid-template-columns: 5rem 2fr 8rem 8rem 2fr 8rem 8rem 10rem 10rem;\n    /* box-shadow: 0 0 1.5rem 0 rgba(0,0,0, 0.08); */\n    /* margin-bottom: 1rem; */\n    font-size: 1.2rem;\n    background-color: var(--background-primary-color);\n\n    &:nth-of-type(2n) {\n        background-color: var(--body-background-primary-color);\n    }\n"]);return Ke=function(){return n},n}function Ve(){var n=Object(p.a)(["\n    display: grid;\n    align-content: center;\n    grid-template-columns: 5rem 2fr 8rem 8rem 2fr 8rem 8rem 10rem 10rem;\n    font-weight: bolder;\n    border-bottom: 1px solid var(--secondary-text-color);\n    font-size: 1.2rem;\n\n\n    "," {\n                &:nth-of-type(2) {\n                    /* background-color: red; */\n                    display: grid;\n                    grid-template-columns: 1fr 1fr;\n                }\n    }\n"]);return Ve=function(){return n},n}function Ue(){var n=Object(p.a)(["\n    padding: .5rem;\n    text-align: center;\n\n    img {\n        width: 5rem;\n    }\n\n    &:nth-of-type(2), &:nth-of-type(5) {\n        /* background-color: red; */\n        display: grid;\n        grid-template-columns: 1fr 1fr;\n    }\n\n\n\n\n"]);return Ue=function(){return n},n}function Je(){var n=Object(p.a)(["\n    margin-bottom: 2rem;\n"]);return Je=function(){return n},n}function _e(){var n=Object(p.a)(["\n    padding: 2rem;\n    border-radius: .5rem;\n    box-shadow: var(--container-shadow);\n    margin-bottom: 3rem;\n    background-color: var(--container-background-color);\n\n"]);return _e=function(){return n},n}var Ze=O.c.div(_e()),Ge=O.c.h3(Je()),qe=O.c.div(Ue()),Qe=O.c.div(Ve(),qe),Xe=O.c.div(Ke()),We=O.c.div(Ie()),Ye=O.c.div(Be()),$e=O.c.div(Te()),nr=O.c.p(He()),er=O.c.div(Re()),rr=O.c.div(Fe()),tr=Object(O.c)(h.a)(Me()),or=function(n){n.addNextProduct;var e,r,o,c,d,l,u,b,j,v,m,p,O,h,f,x,g,y,k=n.setHasChanged,w=n.isUpdating,C=Object(a.useContext)(s.OrderContext),P=C.order,S=C.changeStep,D=Object(a.useContext)(me.OrdersContext),z=D.createOrder,A=D.updateOrder,E=Object(a.useState)(0),L=Object(i.a)(E,2),N=L[0],M=L[1],F=new Date(null===P||void 0===P||null===(e=P.order)||void 0===e?void 0:e.date);console.log(P),console.log(null===P||void 0===P?void 0:P.combinedProducts),Object(a.useEffect)((function(){P.combinedProducts&&M(P.combinedProducts.reduce((function(n,e){return n+e.discountedPrice}),0))}),[P.combinedProducts]);var R;return Object(t.jsxs)("div",{children:[Object(t.jsxs)(Ze,{children:[Object(t.jsx)(Ge,{children:"Preh\u013aad objedn\xe1vky"}),Object(t.jsxs)(Qe,{children:[Object(t.jsx)(qe,{children:"#"}),Object(t.jsxs)(qe,{children:[Object(t.jsx)("span",{children:"Eank\xf3d"}),Object(t.jsx)("span",{children:"ProduktID"})]}),Object(t.jsx)(qe,{children:"Cena"}),Object(t.jsx)(qe,{children:"Po zlave"}),Object(t.jsxs)(qe,{children:[Object(t.jsx)("span",{children:"Eank\xf3d"}),Object(t.jsx)("span",{children:"\u0160osovkyID"})]}),Object(t.jsx)(qe,{children:"Cena"}),Object(t.jsx)(qe,{children:"Po zlave"}),Object(t.jsx)(qe,{children:"Dohromady"}),Object(t.jsx)(qe,{children:"Po zlave"})]}),P.combinedProducts&&P.combinedProducts.map((function(n,e){var r,o,c,i;return Object(t.jsxs)(Xe,{children:[Object(t.jsx)(qe,{children:e+1}),Object(t.jsx)(qe,{children:(null===n||void 0===n?void 0:n.product)?Object(t.jsx)(Ee,{productId:null===n||void 0===n?void 0:n.product}):""}),Object(t.jsx)(qe,{children:(null===n||void 0===n?void 0:n.productPrice)?"".concat(((null===n||void 0===n||null===(r=n.productPrice)||void 0===r?void 0:r.full)/100).toFixed(2),"\u20ac"):""}),Object(t.jsx)(qe,{children:(null===n||void 0===n?void 0:n.productPrice)?"".concat(((null===n||void 0===n||null===(o=n.productPrice)||void 0===o?void 0:o.discounted)/100).toFixed(2),"\u20ac"):""}),Object(t.jsx)(qe,{children:(null===n||void 0===n?void 0:n.lens)?Object(t.jsx)(Le,{lensesId:null===n||void 0===n?void 0:n.lens}):""}),Object(t.jsx)(qe,{children:(null===n||void 0===n?void 0:n.lensPrice)?"".concat(((null===n||void 0===n||null===(c=n.lensPrice)||void 0===c?void 0:c.full)/100).toFixed(2),"\u20ac"):""}),Object(t.jsx)(qe,{children:(null===n||void 0===n?void 0:n.lensPrice)?"".concat(((null===n||void 0===n||null===(i=n.lensPrice)||void 0===i?void 0:i.discounted)/100).toFixed(2),"\u20ac"):""}),Object(t.jsx)(qe,{children:(null===n||void 0===n?void 0:n.price)?"".concat(((null===n||void 0===n?void 0:n.price)/100).toFixed(2),"\u20ac"):""}),Object(t.jsxs)(qe,{children:[((null===n||void 0===n?void 0:n.discountedPrice)/100).toFixed(2),"\u20ac"]})]},e)})),Object(t.jsx)(We,{children:Object(t.jsxs)("p",{children:["Spolu: ",(N/100).toFixed(2),"\u20ac"]})})]}),Object(t.jsxs)(Ye,{children:[Object(t.jsxs)($e,{children:[Object(t.jsx)("h3",{children:"Z\xe1kaznik"}),Object(t.jsxs)("div",{children:[Object(t.jsx)("h4",{children:"Meno a prizvisko"}),Object(t.jsx)(nr,{children:null===P||void 0===P||null===(r=P.user)||void 0===r?void 0:r.name})]}),Object(t.jsxs)("div",{children:[Object(t.jsx)("h4",{children:"Adresa"}),Object(t.jsx)(nr,{children:null===P||void 0===P||null===(o=P.user)||void 0===o?void 0:o.psc}),Object(t.jsx)(nr,{children:null===P||void 0===P||null===(c=P.user)||void 0===c?void 0:c.address}),Object(t.jsx)(nr,{children:null===P||void 0===P||null===(d=P.user)||void 0===d?void 0:d.city}),Object(t.jsx)(nr,{children:null===P||void 0===P||null===(l=P.user)||void 0===l?void 0:l.country})]}),Object(t.jsxs)("div",{children:[Object(t.jsx)("h4",{children:"Kontakt"}),Object(t.jsx)(nr,{children:null===P||void 0===P||null===(u=P.user)||void 0===u?void 0:u.email}),Object(t.jsx)(nr,{children:null===P||void 0===P||null===(b=P.user)||void 0===b?void 0:b.phone})]}),Object(t.jsxs)("div",{children:[Object(t.jsx)("h4",{children:"Parametre"}),P&&P.user&&Object(t.jsx)(pe.a,{parameters:null===P||void 0===P||null===(j=P.user)||void 0===j?void 0:j.lenses,disabledInputs:!0})]})]}),Object(t.jsxs)("div",{children:[!w&&Object(t.jsxs)(rr,{children:[Object(t.jsx)("h3",{children:"Mo\u017enosti"}),Object(t.jsx)(tr,{onClick:function(){return S("select-product")},children:"Prida\u0165 produkt"}),Object(t.jsx)(Ae,{order:P,combinedProducts:P.combinedProducts,createOrder:z,setHasChanged:k,isUpdating:w,updateOrder:A})]}),w&&Object(t.jsx)(rr,{children:Object(t.jsx)(Ae,{order:P,combinedProducts:P.combinedProducts,createOrder:z,setHasChanged:k,isUpdating:w,updateOrder:A})}),w&&(null===P||void 0===P||null===(v=P.order)||void 0===v?void 0:v.overwrite)&&Object(t.jsxs)(er,{children:[Object(t.jsx)("h3",{children:"Doru\u010dovacia adresa"}),Object(t.jsxs)("div",{children:[Object(t.jsx)("h4",{children:"Adresa"}),Object(t.jsx)(nr,{children:null===P||void 0===P||null===(m=P.order)||void 0===m||null===(p=m.overwrite)||void 0===p?void 0:p.psc}),Object(t.jsx)(nr,{children:null===P||void 0===P||null===(O=P.order)||void 0===O||null===(h=O.overwrite)||void 0===h?void 0:h.address}),Object(t.jsx)(nr,{children:null===P||void 0===P||null===(f=P.order)||void 0===f||null===(x=f.overwrite)||void 0===x?void 0:x.city}),Object(t.jsx)(nr,{children:null===P||void 0===P||null===(g=P.order)||void 0===g||null===(y=g.overwrite)||void 0===y?void 0:y.country})]})]}),P.order&&Object(t.jsxs)(er,{children:[Object(t.jsx)("h3",{children:"Detaily objedn\xe1vky"}),Object(t.jsxs)("div",{children:[Object(t.jsx)("h4",{children:"D\xe1tum objedn\xe1vky"}),Object(t.jsx)(nr,{children:F.toLocaleDateString("sk-SK",{weekday:"long",month:"long",day:"numeric"})})]}),Object(t.jsxs)("div",{children:[Object(t.jsx)("h4",{children:"Doru\u010di\u0165 na adresu"}),Object(t.jsx)(nr,{children:P.order.shouldDeliver?"\xc1no":"Nie"})]}),Object(t.jsxs)("div",{children:[Object(t.jsx)("h4",{children:"N\xe1kup na firmu"}),Object(t.jsx)(nr,{children:P.order.buyingAsCompany?"\xc1no":"Nie"})]}),Object(t.jsxs)("div",{children:[Object(t.jsx)("h4",{children:"Sp\xf4sob \xfahrady"}),Object(t.jsx)(nr,{children:(R=P.order.paymentType,"cash"===R?"Hotovos\u0165":"card"===R?"Karta":"coupon"===R?"Kup\xf3n":R)})]}),Object(t.jsxs)("div",{children:[Object(t.jsx)("h4",{children:"Stav objedn\xe1vky"}),Object(t.jsx)(nr,{children:"half-paid"===P.order.status?"Z\xe1loha: ".concat((P.order.paidAlready/100).toFixed(2),"\u20ac"):"Zaplaten\xe9"})]}),Object(t.jsxs)("div",{children:[Object(t.jsx)("h4",{children:"Vybavuje prev\xe1dzka"}),Object(t.jsx)(nr,{children:0===P.order.premises?"Neuveden\xe9":Ne.n[P.order.premises-1]})]}),Object(t.jsxs)("div",{children:[Object(t.jsx)("h4",{children:"PDF"}),Object(t.jsx)("a",{href:"".concat("http://195.110.58.166:8080","/uploads/pdf/").concat(P.order.pdfPath),target:"_blank",rel:"noreferrer noopener",children:"Zobraz PDF"})]})]})]})]})]})},cr=r(14);function ir(){var n=Object(p.a)(["\n    display: flex;\n    justify-content: space-between;\n\n    ","\n    padding-top: 3rem;\n    padding-bottom: 3rem;\n\n    h1 {\n        color: var(--primary-text-color);\n    }\n\n    @media all and (max-width: 800px) {\n        flex-wrap: wrap;\n\n        div:nth-child(2) {\n            margin-bottom: 2rem;\n        }\n    }\n"]);return ir=function(){return n},n}var ar=O.c.div(ir(),cr.e);e.default=function(){var n,e=Object(a.useContext)(s.OrderContext),r=e.step,d=e.order,v=e.setOrder,m=e.addUser,p=e.resetOrder,O=e.changeStep,h=Object(u.i)(),f=h.userId,x=h.orderId,g=Object(a.useState)(!1),y=Object(i.a)(g,2),k=y[0],w=y[1],C=Object(a.useState)(!1),P=Object(i.a)(C,2),S=(P[0],P[1]),D=Object(a.useState)(!1),z=Object(i.a)(D,2),A=z[0],L=z[1],N=Object(a.useState)([]),M=Object(i.a)(N,2),F=(M[0],M[1]),R=Object(a.useContext)(l.a),H=R.getMessage,T=R.setShowModal,B=R.closeModal,I=R.isLoading,K=R.showModal,V=R.message,U=Object($.b)("api/admin/users",f,!(f&&x)),J=Object($.b)("api/admin/orders",x,!x);return Object(a.useEffect)((function(){"nova-objednavka"!==f&&x?(L(!0),O("summary"),J.response&&(m(J.response.order.orderedBy),v(Object(c.a)(Object(c.a)({},d),{},{order:J.response.order,user:J.response.order.orderedBy,combinedProducts:J.response.order.combinedProducts})),F(J.response.order.combinedProducts))):"nova-objednavka"!==f&&void 0===x&&(O("findProduct"),U.response&&m(U.response.user))}),[f,x,U.response,J.response]),Object(a.useEffect)((function(){return function(){O("select-user"),p({}),w(!1),S(!1),F([]),L(!1)}}),[]),console.log("ORDER OBJECT"),console.log(d),Object(t.jsxs)("section",{children:[Object(t.jsx)(u.a,{when:k,message:"M\xe1te nedokon\u010den\xfa objedn\xe1vku, skuto\u010dne chcete od\xeds\u0165?"}),K&&Object(t.jsx)(j.a,{loading:I,title:V,close:B}),Object(t.jsx)(ar,{children:Object(t.jsx)("div",{children:Object(t.jsx)("h1",{children:A?"Objednavka \u010d\xedslo ".concat(null===d||void 0===d||null===(n=d.order)||void 0===n?void 0:n.customId):"Nov\xe1 objedn\xe1vka"})})}),Object(t.jsx)(b.a,{children:Object(t.jsxs)("div",{children:["select-user"===r&&Object(t.jsx)(E,{next:function(){return O("select-product")},addToOrder:function(n){w(!0);var e=n.name,r=n.value;v(Object(c.a)(Object(c.a)({},d),{},Object(o.a)({},e,r)))}}),"select-product"===r&&Object(t.jsx)(zn,{back:function(){return O("select-user")},next:O,showErrorMessage:function(n){H(n),T(!0)}}),"select-lenses"===r&&Object(t.jsx)(ve,{back:function(){return O("select-product")},next:function(){return O("summary")}}),"summary"===r&&Object(t.jsx)(or,{isUpdating:A,back:function(){return O("select-lenses")},addNextProduct:function(){O("findProduct"),(null===d||void 0===d?void 0:d.product)&&((null===d||void 0===d?void 0:d.lenses)?(delete d.lenses,delete d.product):delete d.product,v(Object(c.a)({},d)))},setHasChanged:w})]})})]})}},57:function(n,e,r){"use strict";r.d(e,"a",(function(){return t})),r.d(e,"c",(function(){return o})),r.d(e,"d",(function(){return c})),r.d(e,"e",(function(){return i})),r.d(e,"b",(function(){return a}));var t=["Adidas","Armani Exchange","Arnette","Blackfin","Blumarine","Burberry","Bvlgari","Calvin Klein","Carolina Herrera","Carrera","David Beckham","Dior","Dolce & Gabbana","Elle","Emporio Armani","Esprit","Etnia Barcelona","Fendi","Fossil","Furla","Giorgio Armani","Givenchy","Gucci","Guess","H.I.S","Hawkers","Hugo Boss","Jaguar","Jimmy Choo","Lacoste","Liu Jo","Marc Jacobs","Max Mara","Max&Co","Meller","Mexx","Michael Kors","Moschino","Oakley","Persol","Polaroid","Police","Polo Ralph Lauren","Prada","Prada Linea Rossa","Ralph","Ralph Lauren","Ray-Ban","Salvatore Ferragamo","Smith","Strellson","Tiffany&Co.","Tom Ford","Tommy Hilfiger","Versace","Vogue"],o=["Acuvue","Adore","Air Optix","Biofinity","Biomedics","Clariti","ColourVue","Comfilcon A","Dailies","Freshlook","Lenjoy","Proclear","Purevision","Soflens"],c=["Obchodn\xe1 57, Bratislava","Mileti\u010dova 38, Bratislava","Vajnory, Bratislava","Senica, OC Bran\u010d","Trnava, City Ar\xe9na"],i=[{id:0,name:"E-shop"},{id:1,name:"Obchodn\xe1 57, Bratislava"},{id:2,name:"Mileti\u010dova 38, Bratislava"},{id:3,name:"Vajnory, Bratislava"},{id:4,name:"Senica, OC Bran\u010d"}],a=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";n.toString();var e=0;return n.includes(",")?1===n.split(",")[1].length?(e=n.split(",")[0]+n.split(",")[1]+"0",Number(e)):(e=n.split(",")[0]+n.split(",")[1],Number(e)):Number(100*n)}},66:function(n,e,r){"use strict";r.r(e),r.d(e,"OrderContext",(function(){return j}));var t=r(2),o=r(7),c=r.n(o),i=r(12),a=r(55),d=r(21),l=r(10),s=r(1),u=r(18),b=r(19),j=Object(s.createContext)({step:"",order:{},cart:[],selectedProduct:null,setOrder:function(){},addUser:function(){},addProduct:function(){},addProductDiscount:function(){},addLensesParameters:function(){},deleteProduct:function(){},addLenses:function(){},addLensesDiscount:function(){},resetOrder:function(){},changeStep:function(){},selectProduct:function(){},createCombinedProducts:function(){}});e.default=function(n){var e=n.children,r=Object(s.useContext)(b.a).token,o=Object(s.useContext)(u.a),v=o.closeModal,m=o.getMessage,p=o.setIsLoading,O=o.setShowModal,h=Object(s.useState)("select-user"),f=Object(l.a)(h,2),x=f[0],g=f[1],y=Object(s.useState)({}),k=Object(l.a)(y,2),w=k[0],C=k[1],P=Object(s.useState)([]),S=Object(l.a)(P,2),D=S[0],z=S[1],A=Object(s.useState)(null),E=Object(l.a)(A,2),L=E[0],N=E[1],M=function(n){console.log("combinedProductsArr"),console.log(n),console.log("combinedProductsArr"),C(Object(d.a)(Object(d.a)({},w),{},{combinedProducts:Object(a.a)(n)}))},F=function(n){g(n)},R=function(){var n=Object(i.a)(c.a.mark((function n(){var e,t,o,i,a,l;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(0!==D.length){n.next=2;break}return n.abrupt("return");case 2:return p(!0),O(!0),console.log("ORIGINAL CART"),console.log(D),e=D.map((function(n){return Object(d.a)(Object(d.a)(Object(d.a)(Object(d.a)({product:n.product._id},n.discount&&{discount:Object(d.a)({},n.discount)}),n.lens&&{lens:n.lens._id}),n.lens&&{lensesQuant:1}),n.lenses&&{contactLenses:n.lenses})})),console.log("FORMATED CART"),console.log(e),(t=new Headers).append("auth-token",r),t.append("Content-Type","application/json"),o=JSON.stringify({combinedProducts:e}),i={method:"POST",headers:t,body:o,redirect:"follow"},n.prev=14,n.next=17,fetch("".concat("http://195.110.58.166:8080","/api/store/combinedProducts/createMany"),i);case 17:return a=n.sent,n.next=20,a.json();case 20:if(l=n.sent,console.log(l),!l.combinedProducts){n.next=27;break}return M(l.combinedProducts),v(),F("summary"),n.abrupt("return");case 27:p(!1),m(l.messageSK),n.next=36;break;case 31:n.prev=31,n.t0=n.catch(14),console.log(n.t0),m("Nieco sa pokazilo"),p(!1);case 36:case"end":return n.stop()}}),n,null,[[14,31]])})));return function(){return n.apply(this,arguments)}}();return Object(t.jsx)(j.Provider,{value:{step:x,order:w,cart:D,selectedProduct:L,setOrder:C,addUser:function(n){C(Object(d.a)(Object(d.a)({},w),{},{user:n}))},addProduct:function(n){z((function(e){return[].concat(Object(a.a)(e),[{product:n}])}))},addProductDiscount:function(n,e){if(""===e){var r=D.map((function(e,r){return n===r?Object.keys(e.discount).length>1?(delete e.discount.product,e):(delete e.discount,e):e}));z(r)}else{var t=D.map((function(r,t){return n===t?Object(d.a)(Object(d.a)({},r),{},{discount:{product:{percent:e}}}):r}));z(t)}},addLensesParameters:function(n,e){var r=D.map((function(r,t){return n===t&&Object.keys(e).length>0?Object(d.a)(Object(d.a)({},r),{},{lenses:Object(d.a)({},e)}):r}));z(r)},deleteProduct:function(n){console.log(n);var e=D.filter((function(e){return e.product._id!==n.product._id}));z(e)},addLenses:function(n){if(null!==L){var e=D.map((function(e,r){return r===L?Object(d.a)(Object(d.a)({},e),{},{lens:n}):e}));z(e)}else z((function(e){return[].concat(Object(a.a)(e),[{product:{_id:"pseudo"},lens:n}])}));N(null)},addLensesDiscount:function(n,e){if(""===e){var r=D.map((function(e,r){return n===r?Object.keys(e.discount).length>1?(delete e.discount.lenses,e):(delete e.discount,e):e}));z(r)}else{var t=D.map((function(r,t){return n===t?Object(d.a)(Object(d.a)({},r),{},{discount:Object(d.a)(Object(d.a)({},r.discount),{},{lenses:{percent:e}})}):r}));z(t)}},resetOrder:function(){C({})},changeStep:F,selectProduct:function(n){N(n)},createCombinedProducts:R},children:e})}},73:function(n,e,r){"use strict";r.r(e),r.d(e,"OrdersContext",(function(){return j}));var t=r(2),o=r(21),c=r(7),i=r.n(c),a=r(12),d=r(10),l=r(1),s=r(3),u=r(19),b=r(18),j=Object(l.createContext)({orders:null,getOrders:function(){},createOrder:function(){},updateOrder:function(){},finishOrder:function(){}});e.default=function(n){var e=n.children,r=Object(s.h)().push,c=Object(l.useContext)(b.a),v=c.setIsLoading,m=c.setShowModal,p=c.getMessage,O=c.closeModal,h=Object(l.useContext)(u.a).token,f=Object(l.useState)(null),x=Object(d.a)(f,2),g=x[0],y=x[1],k=new Headers;k.append("auth-token",h),k.append("Content-Type","application/json");var w=function(){var n=Object(a.a)(i.a.mark((function n(){var e,r,t;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return v(!0),m(!0),e={method:"GET",headers:k,redirect:"follow"},n.prev=3,n.next=6,fetch("".concat("http://195.110.58.166:8080","/api/admin/orders"),e);case 6:return r=n.sent,n.next=9,r.json();case 9:if(t=n.sent,console.log(t),!t.orders){n.next=15;break}return y(t.orders),O(),n.abrupt("return");case 15:p(t.messageSK),v(!1),n.next=24;break;case 19:n.prev=19,n.t0=n.catch(3),console.log(n.t0),p("Nieco sa pokazilo"),v(!1);case 24:case"end":return n.stop()}}),n,null,[[3,19]])})));return function(){return n.apply(this,arguments)}}(),C=function(){var n=Object(a.a)(i.a.mark((function n(e){var t,c,a,d,l;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return v(!0),m(!0),t=Object(o.a)({},e),console.log("ORDER BEFORE SEND"),console.log(t),c=JSON.stringify(t),a={method:"POST",headers:k,body:c,redirect:"follow"},n.prev=7,n.next=10,fetch("".concat("http://195.110.58.166:8080","/api/admin/orders"),a);case 10:return d=n.sent,n.next=13,d.json();case 13:l=n.sent,console.log(l),l.order&&(w(),O(),r("/dashboard/objednavky")),p(l.messageSK),v(!1),n.next=25;break;case 20:n.prev=20,n.t0=n.catch(7),console.log(n.t0),p("Nieco sa pokazilo"),v(!1);case 25:case"end":return n.stop()}}),n,null,[[7,20]])})));return function(e){return n.apply(this,arguments)}}(),P=function(){var n=Object(a.a)(i.a.mark((function n(e,t){var c,a,d,l,s;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return v(!0),m(!0),c=Object(o.a)({},e),console.log("ORDER BEFORE SEND"),console.log(c),a=JSON.stringify(c),d={method:"PATCH",headers:k,body:a,redirect:"follow"},n.prev=7,n.next=10,fetch("".concat("http://195.110.58.166:8080","/api/admin/orders/").concat(t),d);case 10:return l=n.sent,n.next=13,l.json();case 13:s=n.sent,console.log(s),s.order&&(w(),O(),r("/dashboard/objednavky")),p(s.messageSK),v(!1),n.next=25;break;case 20:n.prev=20,n.t0=n.catch(7),console.log(n.t0),p("Nieco sa pokazilo"),v(!1);case 25:case"end":return n.stop()}}),n,null,[[7,20]])})));return function(e,r){return n.apply(this,arguments)}}(),S=function(){var n=Object(a.a)(i.a.mark((function n(e){var r,t,o;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return v(!0),m(!0),r={method:"POST",headers:k,redirect:"follow"},n.prev=3,n.next=6,fetch("".concat("http://195.110.58.166:8080","/api/admin/orders/").concat(e,"/fulfill"),r);case 6:return t=n.sent,n.next=9,t.json();case 9:if(o=n.sent,console.log(o),!o.order){n.next=14;break}return O(),n.abrupt("return");case 14:p(o.messageSK),v(!1),n.next=23;break;case 18:n.prev=18,n.t0=n.catch(3),console.log(n.t0),p("Nieco sa pokazilo"),v(!1);case 23:case"end":return n.stop()}}),n,null,[[3,18]])})));return function(e){return n.apply(this,arguments)}}();return Object(t.jsx)(j.Provider,{value:{orders:g,getOrders:w,createOrder:C,updateOrder:P,finishOrder:S},children:e})}}}]);
//# sourceMappingURL=17.e6a719af.chunk.js.map