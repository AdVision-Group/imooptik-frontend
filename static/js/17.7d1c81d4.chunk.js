(this.webpackJsonpimooptik=this.webpackJsonpimooptik||[]).push([[17,29],{225:function(e,n,t){"use strict";t.r(n);var r=t(2),c=t(31),o=t(21),i=t(55),a=t(10),d=t(1),s=t(18),l=t(69),u=t(3),b=t(53),j=t(32),v=t(7),h=t.n(v),m=t(12),O=t(20),p=t.n(O),f=t(19),x=t(52),g=t(56),y=t(5),k=t(6),w=t(59),C=t(28);function P(){var e=Object(y.a)(["\n    background-color: var(--body-background-primary-color);\n    border-radius: 50%;\n    width: 10rem;\n    height: 10rem;\n    margin: 0 auto;\n    margin-bottom: 1.5rem;\n"]);return P=function(){return e},e}function S(){var e=Object(y.a)(["\n    cursor: pointer;\n    width: 100%;\n    max-width: 32rem;\n    padding: 2rem;\n    border-radius: .5rem;\n    box-shadow: var(--container-shadow);\n    text-align: center;\n    transition: transform .3s ease-out,\n                box-shadow .3s ease-out;\n    margin: 2rem auto;\n\n    &:last-child {\n        display:flex;\n        flex-direction: column;\n        justify-content: space-between;\n    }\n\n    h4 {\n        font-size: 2.5rem;\n        margin-bottom: 1.5rem\n    }\n\n    img {\n        /* background-color:#000; */\n        width: 15rem;\n        height: 15rem;\n        margin-bottom: 1rem; \n        object-fit: contain;\n        object-position: center;\n    }\n\n    p {\n        opacity: .65;\n        &:not(:last-child){\n            margin-bottom: .5rem;\n        }\n    }\n\n    h5 {\n        font-size: 2.5rem;\n    }\n"]);return S=function(){return e},e}function z(){var e=Object(y.a)(["\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    grid-gap: 2rem;\n    margin-bottom: 2rem;\n"]);return z=function(){return e},e}function D(){var e=Object(y.a)(["\n    margin-top: 1.5rem;\n    min-width: 16.5rem;\n    width: 100%;\n    background-color: var(--input-background-color);\n    color: var(--input-color);\n    border: none;\n    padding: .5rem .5rem .5rem 1rem;\n    font-size: inherit;\n    font-family: inherit;\n    display: block;\n    outline: none;\n\n    &:focus {\n        outline: none;\n    }\n"]);return D=function(){return e},e}function L(){var e=Object(y.a)(["\n    display: flex;\n    align-items: center;\n    margin-bottom: 2rem;\n\n\n    label {\n        display: block;\n        outline: none;\n        margin-left: 1rem;\n\n        &:focus {\n            outline: none;\n\n        }\n    }\n\n    input: {\n        display: block;\n    }\n"]);return L=function(){return e},e}function E(){var e=Object(y.a)(["\n    display: block;\n    margin: 2rem auto 0;\n"]);return E=function(){return e},e}function A(){var e=Object(y.a)(["\n    /* background-color: gray; */\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    margin-top: 4rem;\n    margin-bottom: 4rem;\n\n    img {\n        width: 20rem;\n        \n    }\n\n    span {\n        opacity: .6;\n        font-size: 1.2rem;\n        display: block;\n        text-align: center;\n    }\n\n    p {\n        font-weight: bolder;\n        font-size: 2rem;\n    }\n"]);return A=function(){return e},e}function M(){var e=Object(y.a)(["\n    margin-top: 1rem;\n    margin-right: 2rem;\n"]);return M=function(){return e},e}function N(){var e=Object(y.a)(["\n    width: 100%;\n    height: 100%;\n\n    position: fixed;\n    left: 0;\n    right: 0;\n    z-index: 99999;\n\n    border: none;\n    outline: none;\n    opacity: 0;\n\n    &:focus {\n        outline: none\n    }\n"]);return N=function(){return e},e}function F(){var e=Object(y.a)(["\n    width:100%;\n    max-width: 50rem;\n    max-height: 60rem;\n\n    overflow-y: scroll;\n\n    /* display: flex;\n    flex-direction: column;\n    align-items: center; */\n\n    padding: 2rem;\n    border-radius: .5rem;\n    background-color: var(--background-primary-color);\n    color: var(--primary-text-color);\n\n    position: relative;\n    z-index: 999999;\n\n    h2{ \n        margin-bottom: 2rem;\n        text-align: center;\n    }\n\n    ::-webkit-scrollbar {\n        width: 10px;\n    }\n\n    /* Track */\n    ::-webkit-scrollbar-track {\n        background:  var(--background-primary-color);\n    }\n\n    /* Handle */\n    ::-webkit-scrollbar-thumb {\n        background: var(--primary-color);\n    }\n\n    /* Handle on hover */\n    ::-webkit-scrollbar-thumb:hover {\n        background: var(--primary-color);\n    }\n"]);return F=function(){return e},e}function R(){var e=Object(y.a)(["\n    position: fixed;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    z-index: 99999;\n\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    background-color: rgba(0,0,0,0.3);\n"]);return R=function(){return e},e}var B=k.c.div(R()),T=k.c.div(F()),H=k.c.button(N()),I=Object(k.c)(w.a)(M()),U=k.c.div(A()),V=Object(k.c)(C.a)(E()),K=k.c.div(L()),J=k.c.select(D()),_=k.c.div(z()),Z=k.c.div(S()),G=k.c.div(P()),q=function(e){var n,t,i,l,b=e.close,j=e.order,v=e.addCombineProduct,O=e.next,y=Object(d.useContext)(s.a),k=y.setIsLoading,w=y.getMessage,C=y.setShowModal,P=y.closeModal,S=Object(d.useContext)(f.a),z=S.isAdmin,D=S.token,L=j.product,E=j.lenses,A=L.contactLenses,M=Object(d.useState)({}),N=Object(a.a)(M,2),F=N[0],R=N[1],q=Object(d.useState)({}),Q=Object(a.a)(q,2),W=Q[0],X=Q[1],Y=Object(d.useState)({}),$=Object(a.a)(Y,2),ee=$[0],ne=$[1],te=Object(d.useState)("flat"),re=Object(a.a)(te,2),ce=re[0],oe=re[1],ie=Object(d.useState)("flat"),ae=Object(a.a)(ie,2),de=ae[0],se=ae[1],le=Object(d.useState)(!1),ue=Object(a.a)(le,2),be=ue[0],je=ue[1],ve=Object(d.useState)(!1),he=Object(a.a)(ve,2),me=he[0],Oe=he[1],pe=Object(d.useState)(!1),fe=Object(a.a)(pe,2),xe=fe[0],ge=fe[1];console.log(j),console.log(W),console.log(E);var ye=function(e){X({}),oe(e)},ke=function(e){ne({}),se(e)},we=function(e,n,t){var r=e.target,i=r.name,a=r.value,d=t;d[n]=""===a?1001:Number(a),R(Object(o.a)(Object(o.a)({},F),{},{contactLenses:Object(o.a)(Object(o.a)({},F.contactLenses),{},Object(c.a)({},i,d))}))},Ce=function(){var e=Object(m.a)(h.a.mark((function e(n){var t,r,c,i,a,d;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),k(!0),C(!0),t={},L.type&&(5===L.type&&(t={product:j.product._id}),3===L.type?t={product:j.product._id,contactLenses:F.contactLenses}:(t={product:j.product._id},j.lenses&&(t={product:j.product._id,lens:j.lenses._id})),be?(t="flat"===ce?Object(o.a)(Object(o.a)({},t),{},{discount:{product:{flat:Object(g.b)(W.flat)}}}):Object(o.a)(Object(o.a)({},t),{},{discount:{product:Object(o.a)({},W)}}),me&&(t="flat"===de?Object(o.a)(Object(o.a)({},t),{},{discount:{product:{flat:Object(g.b)(W.flat)},lenses:{flat:Object(g.b)(ee.flat)}}}):Object(o.a)(Object(o.a)({},t),{},{discount:{product:Object(o.a)({},W),lenses:Object(o.a)({},ee)}}))):me&&(t="flat"===de?Object(o.a)(Object(o.a)({},t),{},{discount:{lenses:{flat:Object(g.b)(ee.flat)}}}):Object(o.a)(Object(o.a)({},t),{},{discount:{lenses:Object(o.a)({},ee)}}))),console.log("COMBINED PRODUCT BEFORE SEND"),console.log(t),r=JSON.stringify(t),(c=new Headers).append("auth-token",D),c.append("Content-Type","application/json"),i={method:"POST",headers:c,body:r,redirect:"follow"},e.prev=12,e.next=15,fetch("".concat("http://195.110.58.166:8080","/api/store/combinedProducts"),i);case 15:return a=e.sent,e.next=18,a.json();case 18:d=e.sent,console.log(d),d.combinedProduct&&(v(d.combinedProduct),P(),O()),k(!1),w(d.message),e.next=30;break;case 25:e.prev=25,e.t0=e.catch(12),console.log(e.t0),w("Nieco sa pokazilo"),k(!1);case 30:case"end":return e.stop()}}),e,null,[[12,25]])})));return function(n){return e.apply(this,arguments)}}();return Object(d.useEffect)((function(){L.type&&3===L.type&&R({contactLenses:{curve:[L.contactLenses.allowedCurves[0],L.contactLenses.allowedCurves[0]],diameter:[L.contactLenses.allowedDiameters[0],L.contactLenses.allowedDiameters[0]],diopters:[0,0]}})}),[L]),Object(d.useEffect)((function(){return function(){R({}),X({}),oe("flat"),je(!1),ge(!1)}}),[]),p.a.createPortal(Object(r.jsxs)(B,{children:[Object(r.jsx)(u.a,{when:xe,message:"Chcete opusti\u0165 t\xfato str\xe1nku?"}),Object(r.jsx)(H,{onClick:b}),Object(r.jsxs)(T,{children:[Object(r.jsx)("h2",{children:"Produkt ktory chcete prida\u0165"}),Object(r.jsxs)(U,{children:[Object(r.jsx)("div",{children:L.image&&Object(r.jsx)("img",{src:"".concat("http://195.110.58.166:8080","/uploads/").concat(L.image.imagePath),alt:L.image.alt})}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:L.name}),Object(r.jsx)("span",{children:L.eanCode})]}),Object(r.jsx)("div",{children:Object(r.jsxs)("p",{children:[(L.price/100).toFixed(2),"\u20ac"]})})]}),E&&Object(r.jsxs)(Z,{children:[Object(r.jsx)("h4",{children:E.name}),Object(r.jsx)(G,{}),Object(r.jsx)("p",{children:E.description}),E.dioptersRange&&Object(r.jsx)("p",{children:"Dioptrie od ".concat(E.dioptersRange[0]," do ").concat(E.dioptersRange[1])}),E.cylinderRange&&Object(r.jsx)("p",{children:"Cylinder  od ".concat(E.cylinderRange[0]," do ").concat(E.cylinderRange[1])}),Object(r.jsxs)("h5",{children:[(E.price/100).toFixed(2),"\u20ac"]})]}),F.contactLenses&&3===L.type&&Object(r.jsxs)(_,{children:[Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"\u013dave oko"}),Object(r.jsx)(J,{name:"curve",value:F.contactLenses.curve[0],onChange:function(e){return we(e,0,F.contactLenses.curve)},children:L.contactLenses.allowedCurves.map((function(e,n){return Object(r.jsx)("option",{value:e,children:e},n)}))}),Object(r.jsx)(J,{name:"diameter",value:F.contactLenses.diameter[0],onChange:function(e){return we(e,0,F.contactLenses.diameter)},children:L.contactLenses.allowedDiameters.map((function(e,n){return Object(r.jsx)("option",{value:e,children:e},n)}))}),Object(r.jsx)(x.a,{name:"diopters",type:"number",value:F.contactLenses.diopters[0],min:A.dioptersRange[0],max:A.dioptersRange[1],step:.25,onChange:function(e){return we(e,0,F.contactLenses.diopters)}})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Prav\xe9 oko"}),Object(r.jsx)(J,{name:"curve",value:F.contactLenses.curve[1],onChange:function(e){return we(e,1,F.contactLenses.curve)},children:L.contactLenses.allowedCurves.map((function(e,n){return Object(r.jsx)("option",{value:e,children:e},n)}))}),Object(r.jsx)(J,{name:"diameter",value:F.contactLenses.diameter[1],onChange:function(e){return we(e,1,F.contactLenses.diameter)},children:L.contactLenses.allowedDiameters.map((function(e,n){return Object(r.jsx)("option",{value:e,children:e},n)}))}),Object(r.jsx)(x.a,{type:"number",value:F.contactLenses.diopters[1],min:A.dioptersRange[0],max:A.dioptersRange[1],step:.25,name:"diopters",onChange:function(e){return we(e,1,F.contactLenses.diopters)}})]})]}),z&&Object(r.jsxs)("div",{children:[Object(r.jsxs)(K,{children:[Object(r.jsx)("input",{id:"discount",name:"discount",type:"checkbox",value:be,onChange:function(){return je(!be)}}),Object(r.jsx)("label",{htmlFor:"discount",children:"Prida\u0165 zlavu pre produkt"})]}),be&&Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Zlava pre produkt"}),Object(r.jsxs)("div",{children:[Object(r.jsx)(I,{label:"Fixn\xe1 suma",value:"flat",name:"flat",isActive:"flat"===ce,handleClick:function(){return ye("flat")}}),Object(r.jsx)(I,{label:"Percert\xe1",value:"percent",name:"percent",isActive:"percent"===ce,handleClick:function(){return ye("percent")}})]}),Object(r.jsx)("div",{children:Object(r.jsx)(x.a,{label:"Hodnota",value:"flat"===ce?null!==(n=W.flat)&&void 0!==n?n:"":null!==(t=W.percent)&&void 0!==t?t:"",onChange:function(e){!function(e){var n=e.target,t=n.name,r=n.value;if(""===r)return delete W[t],void X(Object(o.a)({},W));X(Object(o.a)(Object(o.a)({},W),{},Object(c.a)({},t,r)))}({target:{name:ce,value:e.target.value}},L.type)}})})]})]}),z&&(null===j||void 0===j?void 0:j.lenses)&&Object(r.jsxs)("div",{children:[Object(r.jsxs)(K,{children:[Object(r.jsx)("input",{id:"lensdiscount",name:"lensdiscount",type:"checkbox",value:me,onChange:function(){return Oe(!me)}}),Object(r.jsx)("label",{htmlFor:"lensdiscount",children:"Prida\u0165 zlavu pre \u0161o\u0161ovky"})]}),me&&Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Zlava pre \u0161o\u0161ovky"}),Object(r.jsxs)("div",{children:[Object(r.jsx)(I,{label:"Fixn\xe1 suma",value:"flat",name:"flat",isActive:"flat"===de,handleClick:function(){return ke("flat")}}),Object(r.jsx)(I,{label:"Percert\xe1",value:"percent",name:"percent",isActive:"percent"===de,handleClick:function(){return ke("percent")}})]}),Object(r.jsx)("div",{children:Object(r.jsx)(x.a,{label:"Hodnota",value:"flat"===de?null!==(i=ee.flat)&&void 0!==i?i:"":null!==(l=ee.percent)&&void 0!==l?l:"",onChange:function(e){!function(e){var n=e.target,t=n.name,r=n.value;if(""===r)return delete ee[t],void ne(Object(o.a)({},ee));ne(Object(o.a)(Object(o.a)({},ee),{},Object(c.a)({},t,r)))}({target:{name:de,value:e.target.value}})}})})]})]}),Object(r.jsx)(V,{onClick:Ce,children:"Prida\u0165 do objedn\xe1vky"})]})]}),document.getElementById("portal"))};function Q(){var e=Object(y.a)(["\n    max-width: 40rem;\n    padding: 2rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n    margin: 0 auto;\n    border-radius: .5rem;\n\n    h3 {\n        text-align: center;\n        font-size: 3rem;\n    }\n\n    div {\n\n        &:not(:last-child) {\n            margin-bottom: 3rem;\n\n        }\n    }\n"]);return Q=function(){return e},e}function W(){var e=Object(y.a)(["\n    padding: 2rem;\n    text-align: center;\n\n    img {\n        width: 5rem;\n    }\n"]);return W=function(){return e},e}function X(){var e=Object(y.a)(["\n    margin: 5rem 0;\n"]);return X=function(){return e},e}function Y(){var e=Object(y.a)(["\n    display: block;\n    margin: 0 auto;\n"]);return Y=function(){return e},e}function $(){var e=Object(y.a)(["\n    cursor: pointer;\n    display: grid;\n    align-content: center;\n    grid-template-columns: 1fr 2fr 25rem;\n    margin-bottom: 1rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n\n    transition: all .3s ease-out;\n\n    &:hover {\n        background-color: var(--primary-color); \n        font-weight: bolder;\n        color: var(--button-font-color);\n    }\n"]);return $=function(){return e},e}function ee(){var e=Object(y.a)(["\n    display: grid;\n    align-content: center;\n    grid-template-columns: 1fr 2fr 25rem;\n    border-bottom: 1px solid var(--secondary-text-color);\n    font-weight: bolder;\n"]);return ee=function(){return e},e}var ne=k.c.div(ee()),te=k.c.div($()),re=Object(k.c)(C.a)(Y()),ce=k.c.div(X()),oe=k.c.div(W()),ie=k.c.div(Q()),ae=function(e){var n=e.next,t=e.addToOrder,c=Object(d.useState)(""),o=Object(a.a)(c,2),i=o[0],s=o[1],u=Object(d.useState)([]),b=Object(a.a)(u,2),j=b[0],v=b[1],h=Object(d.useContext)(l.UserContext),m=h.users,O=h.getFilteredUsers,p=h.getUserByQuery;return Object(d.useEffect)((function(){m||O({limit:5}),m&&v(m)}),[m]),Object(d.useEffect)((function(){m&&""===i&&(O({limit:5}),v(m))}),[i]),Object(d.useEffect)((function(){return function(){s(""),v([])}}),[]),Object(r.jsxs)("div",{children:[Object(r.jsxs)(ie,{children:[Object(r.jsx)("h3",{children:"Vyh\u013eada\u0165 z\xe1kaznika"}),Object(r.jsx)("div",{children:Object(r.jsx)(x.a,{label:"Meno, priezvisko, email alebo tel. \u010d\xedslo",value:i,onChange:function(e){return s(e.target.value)},onKeyPress:function(e){""!==i&&"Enter"===e.key&&p({query:i})}})}),Object(r.jsx)(re,{onClick:function(){""!==i&&p({query:i})},children:"H\u013eada\u0165"})]}),Object(r.jsxs)(ce,{children:[Object(r.jsxs)(ne,{children:[Object(r.jsx)(oe,{children:"Meno a priezvisko"}),Object(r.jsx)(oe,{children:"Email"}),Object(r.jsx)(oe,{children:"Mo\u017enosti"})]}),j.map((function(e,c){return Object(r.jsxs)(te,{onClick:function(){return function(e){t({name:"user",value:e}),n()}(e)},children:[Object(r.jsx)(oe,{children:e.name}),Object(r.jsx)(oe,{children:e.email}),Object(r.jsx)(oe,{children:e.phone})]},c)}))]})]})},de=t(74),se=t(223);function le(){var e=Object(y.a)(["\n    cursor: pointer;\n    border: 4px solid var(--backbutton-color);\n    color: var(--backbutton-color);\n    border-radius: 50%;\n    padding: 1.2rem 1.2rem;\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    margin-bottom: 3rem;\n"]);return le=function(){return e},e}var ue=k.c.div(le()),be=function(e){var n=Object.assign({},e);return Object(r.jsx)(ue,Object(o.a)(Object(o.a)({},n),{},{children:Object(r.jsx)(se.a,{})}))};function je(){var e=Object(y.a)(["\n    cursor: pointer;\n    display: grid;\n    align-content: center;\n    grid-template-columns: 10rem 15rem 1fr 1fr 10rem 1fr;\n    margin-bottom: 1rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n\n    transition: all .3s ease-out;\n\n    &:hover {\n        background-color: var(--primary-color); \n        font-weight: bolder;\n        color: var(--button-font-color);\n    }\n"]);return je=function(){return e},e}function ve(){var e=Object(y.a)(["\n    display: grid;\n    align-content: center;\n    grid-template-columns: 10rem 15rem 1fr 1fr 10rem 1fr;\n    border-bottom: 1px solid var(--secondary-text-color);\n    font-weight: bolder;\n"]);return ve=function(){return e},e}function he(){var e=Object(y.a)(["\n    padding: 2rem;\n    text-align: center;\n\n    img {\n        width: 5rem;\n    }\n"]);return he=function(){return e},e}function me(){var e=Object(y.a)(["\n    margin: 5rem 0;\n"]);return me=function(){return e},e}function Oe(){var e=Object(y.a)(["\n    display: block;\n    margin: 0 auto;\n"]);return Oe=function(){return e},e}function pe(){var e=Object(y.a)(["\n    max-width: 40rem;\n    padding: 2rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n    margin: 0 auto;\n    border-radius: .5rem;\n\n    h3 {\n        text-align: center;\n        font-size: 3rem;\n    }\n\n    div {\n\n        &:not(:last-child) {\n            margin-bottom: 3rem;\n\n        }\n    }\n"]);return pe=function(){return e},e}var fe=k.c.div(pe()),xe=Object(k.c)(C.a)(Oe()),ge=k.c.div(me()),ye=k.c.div(he()),ke=k.c.div(ve()),we=k.c.div(je()),Ce=function(e){var n=e.back,t=e.next,c=e.addToOrder,o=e.showModal,i=e.showErrorMessage,s=Object(d.useState)(""),l=Object(a.a)(s,2),u=l[0],b=l[1],j=Object(d.useState)([]),v=Object(a.a)(j,2),h=v[0],m=v[1],O=Object(d.useContext)(de.WarehouseContext),p=O.products,f=O.getProductsByQuery;return Object(d.useEffect)((function(){(!p||h.length<1)&&f({limit:10}),p&&m(p)}),[p]),Object(d.useEffect)((function(){p&&""===u&&f({limit:10})}),[u]),Object(d.useEffect)((function(){return function(){m([])}}),[]),Object(r.jsxs)("div",{children:[Object(r.jsx)(be,{onClick:n}),Object(r.jsxs)(fe,{children:[Object(r.jsx)("h3",{children:"Vyh\u013eada\u0165 produkt"}),Object(r.jsx)("div",{children:Object(r.jsx)(x.a,{label:"N\xe1zov produktu, eanCode alebo popis",value:u,handleChange:function(e){return b(e.target.value)},onKeyPress:function(e){""!==u&&"Enter"===e.key&&f({query:u})}})}),Object(r.jsx)(xe,{onClick:function(){""!==u&&f({query:u})},children:"H\u013eada\u0165"})]}),Object(r.jsxs)(ge,{children:[Object(r.jsxs)(ke,{children:[Object(r.jsx)(ye,{children:"eanCode"}),Object(r.jsx)(ye,{children:"Obr\xe1zok"}),Object(r.jsx)(ye,{children:"N\xe1zov"}),Object(r.jsx)(ye,{children:"Zna\u010dka"}),Object(r.jsx)(ye,{children:"Cena"}),Object(r.jsx)(ye,{children:"Dostupnos\u0165"})]}),h.map((function(e,n){return Object(r.jsxs)(we,{onClick:function(){return(n=e.available)&&("number"===typeof n?n>0:n.reduce((function(e,n){return e+n}))>0)?function(e){c({name:"product",value:e}),1===e.type?t("selectLenses"):o()}(e):i("Produkt nieje na sklade.");var n},children:[Object(r.jsx)(ye,{children:e.eanCode}),Object(r.jsx)(ye,{children:(null===e||void 0===e?void 0:e.image)&&Object(r.jsx)("img",{src:"".concat("http://195.110.58.166:8080","/uploads/").concat(e.image.imagePath),alt:e.image.alt})}),Object(r.jsx)(ye,{children:e.name}),Object(r.jsx)(ye,{children:e.brand}),Object(r.jsxs)(ye,{children:[(e.price/100).toFixed(2),"\u20ac"]}),Object(r.jsx)(ye,{children:(a=e.available,a?"number"===typeof a?a>0?"Na sklade":"Nedostupn\xe9":a.reduce((function(e,n){return e+n}))>0?"Na sklade":"Nedostupn\xe9":"Nedostupn\xe9")})]},n);var a}))]})]})},Pe=t(88);function Se(){var e=Object(y.a)(["\n    background-color: var(--background-primary-color);\n    border-radius: 50%;\n    width: 10rem;\n    height: 10rem;\n    margin: 0 auto;\n    margin-bottom: 1.5rem;\n"]);return Se=function(){return e},e}function ze(){var e=Object(y.a)(["\n    cursor: pointer;\n    width: 100%;\n    max-width: 32rem;\n    padding: 2rem;\n    border-radius: .5rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n    text-align: center;\n    transition: transform .3s ease-out,\n                box-shadow .3s ease-out;\n\n    &:last-child {\n        display:flex;\n        flex-direction: column;\n        justify-content: space-between;\n    }\n\n    h4 {\n        font-size: 2.5rem;\n        margin-bottom: 1.5rem\n    }\n\n    img {\n        /* background-color:#000; */\n        width: 15rem;\n        height: 15rem;\n        margin-bottom: 1rem; \n        object-fit: contain;\n        object-position: center;\n    }\n\n    p {\n        opacity: .65;\n        &:not(:last-child){\n            margin-bottom: .5rem;\n        }\n    }\n\n    h5 {\n        font-size: 2.5rem;\n    }\n\n    &:hover {\n        transform: scale(1.03);\n        box-shadow: var(--container-shadow);\n    }\n"]);return ze=function(){return e},e}function De(){var e=Object(y.a)(["\n    display: flex;\n    flex-wrap: wrap;\n    gap: 2rem;\n"]);return De=function(){return e},e}function Le(){var e=Object(y.a)(["\n    margin: 5rem 0;\n\n    h3 {\n        font-size: 3rem;\n        margin-bottom: 3rem;\n    }\n"]);return Le=function(){return e},e}function Ee(){var e=Object(y.a)(["\n    h3 {\n        font-size: 3rem;\n        margin-bottom: 1rem;\n    }\n"]);return Ee=function(){return e},e}var Ae=k.c.div(Ee()),Me=k.c.div(Le()),Ne=k.c.div(De()),Fe=k.c.div(ze()),Re=k.c.div(Se()),Be=function(e){var n=e.back,t=(e.next,e.addToOrder),c=e.order,o=e.showModal,i=Object(d.useState)([]),s=Object(a.a)(i,2),l=s[0],u=s[1],b=Object(d.useContext)(de.WarehouseContext),j=b.lensesProducts,v=b.getLenses,h=function(e){t({name:"lenses",value:e}),o()};return Object(d.useEffect)((function(){j||v(),j&&u(j)}),[j]),Object(r.jsxs)("div",{children:[Object(r.jsx)(be,{onClick:n}),Object(r.jsx)("div",{children:Object(r.jsxs)(Ae,{children:[Object(r.jsx)("h3",{children:"Parametre z\xe1kaznika"}),Object(r.jsx)(Pe.a,{parameters:c.user.lenses,disabledInputs:!0})]})}),Object(r.jsxs)(Me,{children:[Object(r.jsx)("h3",{children:"V\xfdber \u0160o\u0161oviek"}),Object(r.jsxs)(Ne,{children:[l.map((function(e,n){return Object(r.jsxs)(Fe,{onClick:function(){return h(e)},children:[Object(r.jsx)("h4",{children:e.name}),Object(r.jsx)(Re,{}),Object(r.jsx)("p",{children:e.description}),e.dioptersRange&&Object(r.jsx)("p",{children:"Dioptrie od ".concat(e.dioptersRange[0]," do ").concat(e.dioptersRange[1])}),e.cylinderRange&&Object(r.jsx)("p",{children:"Cylinder  od ".concat(e.cylinderRange[0]," do ").concat(e.cylinderRange[1])}),Object(r.jsxs)("h5",{children:[(e.price/100).toFixed(2),"\u20ac"]})]},n)})),Object(r.jsxs)(Fe,{onClick:function(){return h(null)},children:[Object(r.jsx)("h4",{children:"\u017diadn\xe9 skl\xe1"}),Object(r.jsx)(Re,{}),Object(r.jsx)("h5",{children:"0\u20ac"})]})]})]})]})},Te=t(70);function He(){var e=Object(y.a)(["\n    display: flex;\n    align-items: center;\n    margin-bottom: 2rem;\n\n\n    label {\n        display: block;\n        outline: none;\n        margin-left: 1rem;\n\n        &:focus {\n            outline: none;\n\n        }\n    }\n\n    input: {\n        display: block;\n    }\n"]);return He=function(){return e},e}function Ie(){var e=Object(y.a)(["\n    display: flex;\n    align-items: center;\n    margin-bottom: 2rem;\n\n\n    label {\n        display: block;\n        outline: none;\n        margin-left: 1rem;\n\n        &:focus {\n            outline: none;\n\n        }\n    }\n\n    input: {\n        display: block;\n    }\n"]);return Ie=function(){return e},e}function Ue(){var e=Object(y.a)(["\n    margin-top: 2rem;\n    margin-right: 2rem;\n"]);return Ue=function(){return e},e}function Ve(){var e=Object(y.a)(["\n    margin-top: 1.5rem;\n    min-width: 16.5rem;\n    width: 100%;\n    background-color: var(--input-background-color);\n    color: var(--input-color);\n    border: none;\n    padding: .5rem .5rem .5rem 1rem;\n    font-size: inherit;\n    font-family: inherit;\n    display: block;\n    outline: none;\n    margin-bottom: 2rem;\n\n    &:focus {\n        outline: none;\n    }\n"]);return Ve=function(){return e},e}function Ke(){var e=Object(y.a)(["\n    display: block;\n    margin: 2rem auto 0;\n"]);return Ke=function(){return e},e}function Je(){var e=Object(y.a)(["\n    width: 100%;\n    height: 100%;\n\n    position: fixed;\n    left: 0;\n    right: 0;\n    z-index: 99999;\n\n    border: none;\n    outline: none;\n    opacity: 0;\n\n    &:focus {\n        outline: none\n    }\n"]);return Je=function(){return e},e}function _e(){var e=Object(y.a)(["\n    width:100%;\n    max-width: 50rem;\n    max-height: 60rem;\n\n    overflow-y: scroll;\n\n    /* display: flex;\n    flex-direction: column;\n    align-items: center; */\n\n    padding: 2rem;\n    border-radius: .5rem;\n    background-color: var(--background-primary-color);\n\n    position: relative;\n    z-index: 999999;\n\n    h2{ \n        margin-bottom: 2rem;\n        text-align: center;\n    }\n    h4{ \n        margin-top: 2rem;\n    }\n\n    ::-webkit-scrollbar {\n        width: 10px;\n    }\n\n    /* Track */\n    ::-webkit-scrollbar-track {\n        background:  var(--background-primary-color);\n    }\n\n    /* Handle */\n    ::-webkit-scrollbar-thumb {\n        background: var(--primary-color);\n    }\n\n    /* Handle on hover */\n    ::-webkit-scrollbar-thumb:hover {\n        background: var(--primary-color);\n    }\n"]);return _e=function(){return e},e}function Ze(){var e=Object(y.a)(["\n    position: fixed;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    z-index: 99999;\n\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    background-color: rgba(0,0,0,0.3);\n"]);return Ze=function(){return e},e}var Ge=k.c.div(Ze()),qe=k.c.div(_e()),Qe=k.c.button(Je()),We=Object(k.c)(C.a)(Ke()),Xe=k.c.select(Ve()),Ye=Object(k.c)(w.a)(Ue()),$e=k.c.div(Ie()),en=k.c.div(He()),nn=function(e){var n,t,i,s,l,u,b,j,v,h,m=e.close,O=e.order,p=e.combinedProducts,f=e.createOrder,y=e.setHasChanged,k=e.isUpdating,w=e.updateOrder,C=Object(d.useState)({paymentType:"cash"}),P=Object(a.a)(C,2),S=P[0],z=P[1],D=Object(d.useState)(!1),L=Object(a.a)(D,2),E=L[0],A=L[1],M=Object(d.useState)(!1),N=Object(a.a)(M,2),F=N[0],R=N[1],B=function(e){var n=e.target,t=n.name,r=n.value;if(""===r)return delete S[t],void z(Object(o.a)({},S));z(Object(o.a)(Object(o.a)({},S),{},Object(c.a)({},t,r)))},T=function(e){var n=e.target,t=n.name,r=n.value;if(""===r)return delete S.overwrite[t],void z(Object(o.a)({},S));z(Object(o.a)(Object(o.a)({},S),{},{overwrite:Object(o.a)(Object(o.a)({},S.overwrite),{},Object(c.a)({},t,r))}))};return Object(d.useEffect)((function(){var e,n;k&&((null===O||void 0===O?void 0:O.order)&&(B({target:{name:"shouldDeliver",value:null===O||void 0===O||null===(e=O.order)||void 0===e?void 0:e.shouldDeliver}}),B({target:{name:"buyingAsCompany",value:null===O||void 0===O||null===(n=O.order)||void 0===n?void 0:n.buyingAsCompany}})))}),[k,O]),Object(d.useEffect)((function(){return function(){z({paymentType:"cash"}),A(!1),R(!1)}}),[]),Object(r.jsxs)(Ge,{children:[Object(r.jsx)(Qe,{onClick:m}),Object(r.jsxs)(qe,{children:[Object(r.jsx)("h2",{children:k?"Upravi\u0165 objedn\xe1vku":"Dokon\u010deni\u0165 objedn\xe1vky"}),!k&&Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Sp\xf4sob platby"}),Object(r.jsxs)(Xe,{name:"paymentType",value:null!==(n=null===S||void 0===S?void 0:S.paymentType)&&void 0!==n?n:"cash",onChange:function(e){return B(e)},children:[Object(r.jsx)("option",{value:"cash",children:"Hotovos\u0165"}),Object(r.jsx)("option",{value:"card",children:"Karta"}),Object(r.jsx)("option",{value:"coupon",children:"Kup\xf3n"})]}),Object(r.jsxs)(en,{children:[Object(r.jsx)("input",{id:"hasDeposit",name:"hasDeposit",type:"checkbox",value:E,onChange:function(){E?(A(!1),S.paidAlready&&(delete S.paidAlready,z(Object(o.a)({},S)))):A(!0)}}),Object(r.jsx)("label",{htmlFor:"hasDeposit",children:"Prida\u0165 z\xe1lohu"})]}),E&&Object(r.jsx)(x.a,{label:"Zaplaten\xe1 z\xe1loha",name:"paidAlready",type:"text",value:null!==(t=null===S||void 0===S?void 0:S.paidAlready)&&void 0!==t?t:"",onChange:function(e){return B(e)}})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Inform\xe1cie o doru\u010den\xed"}),Object(r.jsx)(Ye,{label:"Doru\u010di\u0165 na adresu",isActive:null===S||void 0===S?void 0:S.shouldDeliver,handleClick:function(){return B({target:{name:"shouldDeliver",value:!(null===S||void 0===S?void 0:S.shouldDeliver)||!(null===S||void 0===S?void 0:S.shouldDeliver)}})}}),Object(r.jsx)(Ye,{label:"N\xe1kup na firmu",isActive:null===S||void 0===S?void 0:S.buyingAsCompany,handleClick:function(){return B({target:{name:"buyingAsCompany",value:!(null===S||void 0===S?void 0:S.buyingAsCompany)||!(null===S||void 0===S?void 0:S.buyingAsCompany)}})}}),(null===S||void 0===S?void 0:S.shouldDeliver)&&Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Adresa"}),Object(r.jsx)("p",{children:O.user.psc}),Object(r.jsx)("p",{children:O.user.address}),Object(r.jsx)("p",{children:O.user.city}),Object(r.jsx)("p",{children:O.user.country}),Object(r.jsxs)("div",{children:[Object(r.jsxs)($e,{children:[Object(r.jsx)("input",{id:"overwrite",name:"overwrite",type:"checkbox",value:F,onChange:function(){F?(R(!1),S.overwrite&&(delete S.overwrite,z(Object(o.a)({},S)))):R(!0)}}),Object(r.jsx)("label",{htmlFor:"overwrite",children:"In\xe1 adresa"})]}),F&&Object(r.jsxs)("div",{children:[Object(r.jsx)(x.a,{label:"Adresa",name:"address",type:"text",value:null!==(i=null===S||void 0===S||null===(s=S.overwrite)||void 0===s?void 0:s.address)&&void 0!==i?i:"",onChange:function(e){return T(e)}}),Object(r.jsx)(x.a,{label:"PS\u010c",name:"psc",type:"text",value:null!==(l=null===S||void 0===S||null===(u=S.overwrite)||void 0===u?void 0:u.psc)&&void 0!==l?l:"",onChange:function(e){return T(e)}}),Object(r.jsx)(x.a,{label:"Mesto",name:"city",type:"text",value:null!==(b=null===S||void 0===S||null===(j=S.overwrite)||void 0===j?void 0:j.city)&&void 0!==b?b:"",onChange:function(e){return T(e)}}),Object(r.jsx)(x.a,{label:"\u0160t\xe1t",name:"country",type:"text",value:null!==(v=null===S||void 0===S||null===(h=S.overwrite)||void 0===h?void 0:h.country)&&void 0!==v?v:"",onChange:function(e){return T(e)}})]})]})]})]}),Object(r.jsx)(We,{onClick:function(e){if(e.preventDefault(),k){var n=Object(o.a)({},S);delete n.paymentType,delete n.shouldDeliver,y(!1),w(n,O.order._id)}else{var t=Object(o.a)(Object(o.a)({},S),{},{user:O.user._id,combinedProducts:p.map((function(e){return e._id})),status:E?"half-paid":"paid"});S.paidAlready&&(t=Object(o.a)(Object(o.a)({},t),{},{paidAlready:Object(g.b)(S.paidAlready)})),console.log(t),y(!1),f(t)}},children:"Vytvori\u0165 objedn\xe1vku"})]})]})},tn=t(54),rn=function(e){var n=e.productId,t=Object(tn.b)("api/store/products",n,!n),c=t.isLoading,o=t.response;return Object(r.jsx)("span",{style:{whiteSpace:"nowrap"},children:c?"H\u013eadam...":o.product.name.slice(0,6).concat("...")})},cn=function(e){var n=e.lensesId,t=Object(tn.b)("api/store/lenses",n,!n),c=t.isLoading,o=t.response;return Object(r.jsx)("span",{style:{whiteSpace:"nowrap"},children:c?"H\u013eadam...":o.lenses.name.slice(0,8).concat("...")})},on=t(60);function an(){var e=Object(y.a)(["\n    &:not(:last-child) {\n        margin-right: .5rem;\n    }\n\n    &:last-child {\n        background-color: var(--primary-color);\n        font-weight: bolder;\n    }\n"]);return an=function(){return e},e}function dn(){var e=Object(y.a)(["\n    padding: 2rem;\n    border-radius: .5rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n    margin-bottom: 3rem;\n\n\n    h3 {\n        margin-bottom: 1rem;\n    }\n"]);return dn=function(){return e},e}function sn(){var e=Object(y.a)(["\n    padding: 2rem;\n    border-radius: .5rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n    margin-bottom: 3rem;\n\n    h3 {\n        margin-bottom: 1rem;\n    }\n\n    h4 {\n        margin-top: 1rem;\n        margin-bottom: .5rem;\n    }\n\n    div {\n        p {\n            opacity: .83;\n        }\n\n        &:not(:last-child) {\n            margin-bottom: 1rem;\n        }\n\n        a {\n            background-color: #000;\n            color: #fff;\n            display: inline-block;\n            padding: .5rem 2.5rem;\n            margin-top: 1rem;\n        }\n    }\n\n"]);return sn=function(){return e},e}function ln(){var e=Object(y.a)(["\n    opacity: .83;\n    font-size: 1.4rem;\n    margin-left: 1.5rem;\n\n    &:not(:last-child) {\n        margin-bottom: .5rem;\n    }\n"]);return ln=function(){return e},e}function un(){var e=Object(y.a)(["\n    padding: 2rem;\n    border-radius: .5rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n\n\n    h3 {\n        margin-bottom: .5rem;\n    }\n\n    h4 {\n        margin-top: 1rem;\n        margin-bottom: .5rem;\n    }\n\n"]);return un=function(){return e},e}function bn(){var e=Object(y.a)(["\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    grid-gap: 3rem;\n    align-items: start;\n"]);return bn=function(){return e},e}function jn(){var e=Object(y.a)(["\n    margin-top: 2rem;\n    display:flex;\n    justify-content: flex-end;\n    align-items: center;\n\n    span {\n        display: block;\n        margin-right: .5rem;\n        \n    }\n\n    p {\n        font-weight: bolder;\n        font-size: 2.5rem;\n    }\n"]);return jn=function(){return e},e}function vn(){var e=Object(y.a)(["\n    padding: 2rem;\n    text-align: center;\n\n    img {\n        width: 5rem;\n    }\n"]);return vn=function(){return e},e}function hn(){var e=Object(y.a)(["\n    display: grid;\n    align-content: center;\n    grid-template-columns: 5rem 1fr 10rem 10rem 1fr 10rem 10rem 10rem 10rem;\n    /* box-shadow: 0 0 1.5rem 0 rgba(0,0,0, 0.08); */\n    /* margin-bottom: 1rem; */\n"]);return hn=function(){return e},e}function mn(){var e=Object(y.a)(["\n    display: grid;\n    align-content: center;\n    grid-template-columns: 5rem 1fr 10rem 10rem 1fr 10rem 10rem 10rem 10rem;\n    font-weight: bolder;\n    border-bottom: 1px solid var(--secondary-text-color);\n"]);return mn=function(){return e},e}function On(){var e=Object(y.a)(["\n    margin-bottom: 3rem;\n"]);return On=function(){return e},e}function pn(){var e=Object(y.a)(["\n    padding: 2rem;\n    border-radius: .5rem;\n    box-shadow: var(--container-shadow);\n    margin-bottom: 3rem;\n    background-color: var(--container-background-color);\n\n"]);return pn=function(){return e},e}var fn=k.c.div(pn()),xn=k.c.h3(On()),gn=k.c.div(mn()),yn=k.c.div(hn()),kn=k.c.div(vn()),wn=k.c.div(jn()),Cn=k.c.div(bn()),Pn=k.c.div(un()),Sn=k.c.p(ln()),zn=k.c.div(sn()),Dn=k.c.div(dn()),Ln=Object(k.c)(C.a)(an()),En=function(e){var n,t,c,o,i,s,l,u,b,j,v,h,m,O,p,f,x,g,y=e.order,k=e.combinedProducts,w=e.addNextProduct,C=e.setHasChanged,P=e.isUpdating,S=Object(d.useContext)(Te.OrdersContext),z=S.createOrder,D=S.updateOrder,L=Object(d.useState)(!1),E=Object(a.a)(L,2),A=E[0],M=E[1],N=Object(d.useState)(0),F=Object(a.a)(N,2),R=F[0],B=F[1],T=new Date(null===y||void 0===y||null===(n=y.order)||void 0===n?void 0:n.date);console.log(y),console.log(k),Object(d.useEffect)((function(){k&&B(k.reduce((function(e,n){return e+n.discountedPrice}),0))}),[k]);var H;return Object(r.jsxs)("div",{children:[A&&Object(r.jsx)(nn,{close:function(){return M(!1)},order:y,combinedProducts:k,createOrder:z,setHasChanged:C,isUpdating:P,updateOrder:D}),Object(r.jsxs)(fn,{children:[Object(r.jsx)(xn,{children:"Preh\u013aad objedn\xe1vky"}),Object(r.jsxs)(gn,{children:[Object(r.jsx)(kn,{children:"#"}),Object(r.jsx)(kn,{children:"ProduktID"}),Object(r.jsx)(kn,{children:"Cena"}),Object(r.jsx)(kn,{children:"Po zlave"}),Object(r.jsx)(kn,{children:"\u0160osovkyID"}),Object(r.jsx)(kn,{children:"Cena"}),Object(r.jsx)(kn,{children:"Po zlave"}),Object(r.jsx)(kn,{children:"Dohromady"}),Object(r.jsx)(kn,{children:"Po zlave"})]}),k.map((function(e,n){var t,c,o,i;return Object(r.jsxs)(yn,{children:[Object(r.jsx)(kn,{children:n+1}),Object(r.jsx)(kn,{children:(null===e||void 0===e?void 0:e.product)?Object(r.jsx)(rn,{productId:null===e||void 0===e?void 0:e.product}):""}),Object(r.jsx)(kn,{children:(null===e||void 0===e?void 0:e.productPrice)?"".concat(((null===e||void 0===e||null===(t=e.productPrice)||void 0===t?void 0:t.full)/100).toFixed(2),"\u20ac"):""}),Object(r.jsx)(kn,{children:(null===e||void 0===e?void 0:e.productPrice)?"".concat(((null===e||void 0===e||null===(c=e.productPrice)||void 0===c?void 0:c.discounted)/100).toFixed(2),"\u20ac"):""}),Object(r.jsx)(kn,{children:(null===e||void 0===e?void 0:e.lens)?Object(r.jsx)(cn,{lensesId:null===e||void 0===e?void 0:e.lens}):""}),Object(r.jsx)(kn,{children:(null===e||void 0===e?void 0:e.lensPrice)?"".concat(((null===e||void 0===e||null===(o=e.lensPrice)||void 0===o?void 0:o.full)/100).toFixed(2),"\u20ac"):""}),Object(r.jsx)(kn,{children:(null===e||void 0===e?void 0:e.lensPrice)?"".concat(((null===e||void 0===e||null===(i=e.lensPrice)||void 0===i?void 0:i.discounted)/100).toFixed(2),"\u20ac"):""}),Object(r.jsx)(kn,{children:(null===e||void 0===e?void 0:e.price)?"".concat(((null===e||void 0===e?void 0:e.price)/100).toFixed(2),"\u20ac"):""}),Object(r.jsxs)(kn,{children:[((null===e||void 0===e?void 0:e.discountedPrice)/100).toFixed(2),"\u20ac"]})]},n)})),Object(r.jsx)(wn,{children:Object(r.jsxs)("p",{children:["Spolu: ",(R/100).toFixed(2),"\u20ac"]})})]}),Object(r.jsxs)(Cn,{children:[Object(r.jsxs)(Pn,{children:[Object(r.jsx)("h3",{children:"Z\xe1kaznik"}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Meno a prizvisko"}),Object(r.jsx)(Sn,{children:null===y||void 0===y||null===(t=y.user)||void 0===t?void 0:t.name})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Adresa"}),Object(r.jsx)(Sn,{children:null===y||void 0===y||null===(c=y.user)||void 0===c?void 0:c.psc}),Object(r.jsx)(Sn,{children:null===y||void 0===y||null===(o=y.user)||void 0===o?void 0:o.address}),Object(r.jsx)(Sn,{children:null===y||void 0===y||null===(i=y.user)||void 0===i?void 0:i.city}),Object(r.jsx)(Sn,{children:null===y||void 0===y||null===(s=y.user)||void 0===s?void 0:s.country})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Kontakt"}),Object(r.jsx)(Sn,{children:null===y||void 0===y||null===(l=y.user)||void 0===l?void 0:l.email}),Object(r.jsx)(Sn,{children:null===y||void 0===y||null===(u=y.user)||void 0===u?void 0:u.phone})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Parametre"}),y&&y.user&&Object(r.jsx)(Pe.a,{parameters:null===y||void 0===y||null===(b=y.user)||void 0===b?void 0:b.lenses,disabledInputs:!0})]})]}),Object(r.jsxs)("div",{children:[!P&&Object(r.jsxs)(Dn,{children:[Object(r.jsx)("h3",{children:"Mo\u017enosti"}),Object(r.jsx)(Ln,{onClick:w,children:"Prida\u0165 produkt"}),Object(r.jsx)(Ln,{onClick:function(){return M(!0)},children:"Vytvori\u0165 objednavku"})]}),P&&Object(r.jsxs)(Dn,{children:[Object(r.jsx)("h3",{children:"Mo\u017enosti"}),Object(r.jsx)(Ln,{onClick:function(){return M(!0)},children:"Upravi\u0165 objednavku"})]}),P&&(null===y||void 0===y||null===(j=y.order)||void 0===j?void 0:j.overwrite)&&Object(r.jsxs)(zn,{children:[Object(r.jsx)("h3",{children:"Doru\u010dovacia adresa"}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Adresa"}),Object(r.jsx)(Sn,{children:null===y||void 0===y||null===(v=y.order)||void 0===v||null===(h=v.overwrite)||void 0===h?void 0:h.psc}),Object(r.jsx)(Sn,{children:null===y||void 0===y||null===(m=y.order)||void 0===m||null===(O=m.overwrite)||void 0===O?void 0:O.address}),Object(r.jsx)(Sn,{children:null===y||void 0===y||null===(p=y.order)||void 0===p||null===(f=p.overwrite)||void 0===f?void 0:f.city}),Object(r.jsx)(Sn,{children:null===y||void 0===y||null===(x=y.order)||void 0===x||null===(g=x.overwrite)||void 0===g?void 0:g.country})]})]}),y.order&&Object(r.jsxs)(zn,{children:[Object(r.jsx)("h3",{children:"Detaily objedn\xe1vky"}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"D\xe1tum objedn\xe1vky"}),Object(r.jsx)(Sn,{children:T.toLocaleDateString("sk-SK",{weekday:"long",month:"long",day:"numeric"})})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Doru\u010di\u0165 na adresu"}),Object(r.jsx)(Sn,{children:y.order.shouldDeliver?"\xc1no":"Nie"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"N\xe1kup na firmu"}),Object(r.jsx)(Sn,{children:y.order.buyingAsCompany?"\xc1no":"Nie"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Sp\xf4sob \xfahrady"}),Object(r.jsx)(Sn,{children:(H=y.order.paymentType,"cash"===H?"Hotovos\u0165":"card"===H?"Karta":"coupon"===H?"Kup\xf3n":H)})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Stav objedn\xe1vky"}),Object(r.jsx)(Sn,{children:"half-paid"===y.order.status?"Z\xe1loha: ".concat((y.order.paidAlready/100).toFixed(2),"\u20ac"):"Zaplaten\xe9"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Vybavuje prev\xe1dzka"}),Object(r.jsx)(Sn,{children:0===y.order.premises?"Neuveden\xe9":on.n[y.order.premises-1]})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"PDF"}),Object(r.jsx)("a",{href:"".concat("http://195.110.58.166:8080","/uploads/pdf/").concat(y.order.pdfPath),target:"_blank",rel:"noreferrer noopener",children:"Zobraz PDF"})]})]})]})]})]})},An=t(14);function Mn(){var e=Object(y.a)(["\n    display: flex;\n    justify-content: space-between;\n\n    ","\n    padding-top: 3rem;\n    padding-bottom: 3rem;\n\n    h1 {\n        color: var(--primary-text-color);\n    }\n\n    @media all and (max-width: 800px) {\n        flex-wrap: wrap;\n\n        div:nth-child(2) {\n            margin-bottom: 2rem;\n        }\n    }\n"]);return Mn=function(){return e},e}var Nn=k.c.div(Mn(),An.e);n.default=function(){var e,n=Object(u.i)(),t=n.userId,v=n.orderId,h=Object(d.useState)("selectUser"),m=Object(a.a)(h,2),O=m[0],p=m[1],f=Object(d.useState)({}),x=Object(a.a)(f,2),g=x[0],y=x[1],k=Object(d.useState)(!1),w=Object(a.a)(k,2),C=w[0],P=w[1],S=Object(d.useState)(!1),z=Object(a.a)(S,2),D=z[0],L=z[1],E=Object(d.useState)(!1),A=Object(a.a)(E,2),M=A[0],N=A[1],F=Object(d.useState)([]),R=Object(a.a)(F,2),B=R[0],T=R[1],H=function(e){P(!0);var n=e.name,t=e.value;y(Object(o.a)(Object(o.a)({},g),{},Object(c.a)({},n,t)))},I=Object(d.useContext)(s.a),U=I.getMessage,V=I.setShowModal,K=I.closeModal,J=I.isLoading,_=I.showModal,Z=I.message,G=Object(d.useContext)(l.UserContext),Q=(G.getUser,G.user,Object(tn.b)("api/admin/users",t,!t)),W=Object(tn.b)("api/admin/orders",v,!v);return Object(d.useEffect)((function(){"nova-objednavka"!==t&&v&&(N(!0),p("summary"),W.response&&(y(Object(o.a)(Object(o.a)({},g),{},{order:W.response.order,user:W.response.order.orderedBy})),T(W.response.order.combinedProducts))),"nova-objednavka"!==t&&void 0===v&&(p("findProduct"),Q.response&&y((function(e){return Object(o.a)(Object(o.a)({},e),{},{user:Q.response.user})})))}),[t,v,Q.response]),Object(d.useEffect)((function(){"nova-objednavka"!==t||v||g.user&&p("findProduct")}),[g.user]),Object(d.useEffect)((function(){return function(){p("selectUser"),y({}),P(!1),L(!1),T([]),N(!1)}}),[]),console.log(g),console.log(v),Object(r.jsxs)("section",{children:[Object(r.jsx)(u.a,{when:C,message:"M\xe1te nedokon\u010den\xfa objedn\xe1vku, skuto\u010dne chcete od\xeds\u0165?"}),_&&Object(r.jsx)(j.a,{loading:J,title:Z,close:K}),D&&Object(r.jsx)(q,{order:g,close:function(){return L(!1)},addCombineProduct:function(e){T([].concat(Object(i.a)(B),[e]))},next:function(){p("summary"),L(!1)}}),Object(r.jsx)(Nn,{children:Object(r.jsx)("div",{children:Object(r.jsx)("h1",{children:M?"Objednavka \u010d\xedslo ".concat(null===g||void 0===g||null===(e=g.order)||void 0===e?void 0:e.customId):"Nov\xe1 objedn\xe1vka"})})}),Object(r.jsx)(b.a,{children:Object(r.jsxs)("div",{children:["selectUser"===O&&Object(r.jsx)(ae,{next:function(){return p("findProduct")},addToOrder:H}),"findProduct"===O&&Object(r.jsx)(Ce,{back:function(){return p("selectUser")},next:p,addToOrder:H,showErrorMessage:function(e){U(e),V(!0)},showModal:function(){return L(!0)}}),"selectLenses"===O&&Object(r.jsx)(Be,{back:function(){return p("findProduct")},next:function(){return p("summary")},addToOrder:H,order:g,showModal:function(){return L(!0)}}),"summary"===O&&Object(r.jsx)(En,{order:g,isUpdating:M,combinedProducts:B,back:function(){return p("selectLenses")},addNextProduct:function(){p("findProduct"),(null===g||void 0===g?void 0:g.product)&&((null===g||void 0===g?void 0:g.lenses)?(delete g.lenses,delete g.product):delete g.product,y(Object(o.a)({},g)))},setHasChanged:P})]})})]})}},56:function(e,n,t){"use strict";t.d(n,"a",(function(){return r})),t.d(n,"c",(function(){return c})),t.d(n,"d",(function(){return o})),t.d(n,"e",(function(){return i})),t.d(n,"b",(function(){return a}));var r=["Adidas","Armani Exchange","Arnette","Blackfin","Blumarine","Burberry","Bvlgari","Calvin Klein","Carolina Herrera","Carrera","David Beckham","Dior","Dolce & Gabbana","Elle","Emporio Armani","Esprit","Etnia Barcelona","Fendi","Fossil","Furla","Giorgio Armani","Givenchy","Gucci","Guess","H.I.S","Hawkers","Hugo Boss","Jaguar","Jimmy Choo","Lacoste","Liu Jo","Marc Jacobs","Max Mara","Max&Co","Meller","Mexx","Michael Kors","Moschino","Oakley","Persol","Polaroid","Police","Polo Ralph Lauren","Prada","Prada Linea Rossa","Ralph","Ralph Lauren","Ray-Ban","Salvatore Ferragamo","Smith","Strellson","Tiffany&Co.","Tom Ford","Tommy Hilfiger","Versace","Vogue"],c=["Acuvue","Adore","Air Optix","Biofinity","Biomedics","Clariti","ColourVue","Comfilcon A","Dailies","Freshlook","Lenjoy","Proclear","Purevision","Soflens"],o=["Obchodn\xe1 57, Bratislava","Mileti\u010dova 38, Bratislava","Vajnory, Bratislava","Senica, OC Bran\u010d","Trnava, City Ar\xe9na"],i=[{id:0,name:"E-shop"},{id:1,name:"Obchodn\xe1 57, Bratislava"},{id:2,name:"Mileti\u010dova 38, Bratislava"},{id:3,name:"Vajnory, Bratislava"},{id:4,name:"Senica, OC Bran\u010d"}],a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e.toString();var n=0;return e.includes(",")?1===e.split(",")[1].length?(n=e.split(",")[0]+e.split(",")[1]+"0",Number(n)):(n=e.split(",")[0]+e.split(",")[1],Number(n)):Number(100*e)}},70:function(e,n,t){"use strict";t.r(n),t.d(n,"OrdersContext",(function(){return j}));var r=t(2),c=t(21),o=t(7),i=t.n(o),a=t(12),d=t(10),s=t(1),l=t(3),u=t(19),b=t(18),j=Object(s.createContext)({orders:null,getOrders:function(){},createOrder:function(){},updateOrder:function(){},finishOrder:function(){}});n.default=function(e){var n=e.children,t=Object(l.h)().push,o=Object(s.useContext)(b.a),v=o.setIsLoading,h=o.setShowModal,m=o.getMessage,O=o.closeModal,p=Object(s.useContext)(u.a).token,f=Object(s.useState)(null),x=Object(d.a)(f,2),g=x[0],y=x[1],k=new Headers;k.append("auth-token",p),k.append("Content-Type","application/json");var w=function(){var e=Object(a.a)(i.a.mark((function e(){var n,t,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),h(!0),n={method:"GET",headers:k,redirect:"follow"},e.prev=3,e.next=6,fetch("".concat("http://195.110.58.166:8080","/api/admin/orders"),n);case 6:return t=e.sent,e.next=9,t.json();case 9:if(r=e.sent,console.log(r),!r.orders){e.next=15;break}return y(r.orders),O(),e.abrupt("return");case 15:m(r.message),v(!1),e.next=24;break;case 19:e.prev=19,e.t0=e.catch(3),console.log(e.t0),m("Nieco sa pokazilo"),v(!1);case 24:case"end":return e.stop()}}),e,null,[[3,19]])})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(a.a)(i.a.mark((function e(n){var r,o,a,d,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),h(!0),r=Object(c.a)({},n),console.log("ORDER BEFORE SEND"),console.log(r),o=JSON.stringify(r),a={method:"POST",headers:k,body:o,redirect:"follow"},e.prev=7,e.next=10,fetch("".concat("http://195.110.58.166:8080","/api/admin/orders"),a);case 10:return d=e.sent,e.next=13,d.json();case 13:s=e.sent,console.log(s),s.order&&(w(),O(),t("/dashboard/objednavky")),m(s.message),v(!1),e.next=25;break;case 20:e.prev=20,e.t0=e.catch(7),console.log(e.t0),m("Nieco sa pokazilo"),v(!1);case 25:case"end":return e.stop()}}),e,null,[[7,20]])})));return function(n){return e.apply(this,arguments)}}(),P=function(){var e=Object(a.a)(i.a.mark((function e(n,r){var o,a,d,s,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),h(!0),o=Object(c.a)({},n),console.log("ORDER BEFORE SEND"),console.log(o),a=JSON.stringify(o),d={method:"PATCH",headers:k,body:a,redirect:"follow"},e.prev=7,e.next=10,fetch("".concat("http://195.110.58.166:8080","/api/admin/orders/").concat(r),d);case 10:return s=e.sent,e.next=13,s.json();case 13:l=e.sent,console.log(l),l.order&&(w(),O(),t("/dashboard/objednavky")),m(l.message),v(!1),e.next=25;break;case 20:e.prev=20,e.t0=e.catch(7),console.log(e.t0),m("Nieco sa pokazilo"),v(!1);case 25:case"end":return e.stop()}}),e,null,[[7,20]])})));return function(n,t){return e.apply(this,arguments)}}(),S=function(){var e=Object(a.a)(i.a.mark((function e(n){var t,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),h(!0),t={method:"POST",headers:k,redirect:"follow"},e.prev=3,e.next=6,fetch("".concat("http://195.110.58.166:8080","/api/admin/orders/").concat(n,"/fulfill"),t);case 6:return r=e.sent,e.next=9,r.json();case 9:if(c=e.sent,console.log(c),"undelegated-order"!==c.error){e.next=15;break}return v(!1),m("Objedn\xe1vka nem\xf4\u017ee by\u0165 dokon\u010den\xe1 ak nieje priraden\xe1 k prev\xe1dzke"),e.abrupt("return");case 15:if(!c.order){e.next=18;break}return O(),e.abrupt("return");case 18:m(c.message),v(!1),e.next=27;break;case 22:e.prev=22,e.t0=e.catch(3),console.log(e.t0),m("Nieco sa pokazilo"),v(!1);case 27:case"end":return e.stop()}}),e,null,[[3,22]])})));return function(n){return e.apply(this,arguments)}}();return Object(r.jsx)(j.Provider,{value:{orders:g,getOrders:w,createOrder:C,updateOrder:P,finishOrder:S},children:n})}}}]);
//# sourceMappingURL=17.7d1c81d4.chunk.js.map