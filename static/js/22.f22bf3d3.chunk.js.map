{"version":3,"sources":["context/user/user.utils.jsx","context/user/user.queries.jsx","context/user/user.context.jsx"],"names":["initUserObj","address","admin","premises","boughtProducts","city","country","date","email","finishedRegistration","lenses","cylinder","cylinderAxes","diopters","distance","addition","basis","prism","name","orders","phone","psc","tempUser","totalSpent","watchList","fName","lName","password","confirmPassword","fetchUsers","token","myHeaders","Headers","append","requestOptions","method","headers","redirect","fetch","process","fetchUser","id","patchUser","user","_id","body","JSON","stringify","undefined","Number","postUser","postAdmin","console","log","UserContext","createContext","isUpdating","activeIndex","handleChangeFilterItem","filterItems","totalCount","users","getUsers","getUser","handleChange","updateUser","resetUser","formToShow","switchFormButtons","toggleUserForm","createUser","getFilteredUsers","getUserByQuery","UserProvider","children","push","useHistory","useContext","AuthContext","LoadingModalContext","closeModal","getMessage","setIsLoading","setShowModal","useState","setUser","setUsers","setTotalCount","setIsUpdating","setActiveIndex","setFormToShow","useEffect","a","response","json","data","count","message","length","split","error","includes","type","filter","raw","query","Provider","value","itemIndex","e","target","handleParameterChange","idx","arr","preventDefault"],"mappings":"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","file":"static/js/22.f22bf3d3.chunk.js","sourcesContent":["export const initUserObj = {\n    address: \"\",\n    admin: 0,\n    premises: 0,\n    boughtProducts: {},\n    city: \"\",\n    country: \"\",\n    date: \"\",\n    email: \"\",\n    finishedRegistration: false,\n    lenses: {\n        cylinder: [0, 0, 0, 0],\n        cylinderAxes: [0, 0, 0, 0],\n        diopters: [0, 0, 0, 0],\n        distance: [0, 0, 0, 0],\n        addition: [0, 0, 0, 0],\n        basis: [0, 0, 0, 0],\n        prism: [0, 0, 0, 0],\n    },\n    name: \"\",\n    orders: [],\n    phone: \"\",\n    psc: \"\",\n    tempUser: false,\n    totalSpent: 0,\n    watchList: [],\n    fName: \"\",\n    lName: \"\",\n    password: '',\n    confirmPassword: \"\"\n}","export const fetchUsers = (token) => {\n    const myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n\n\n    const requestOptions = {\n        method: 'GET',\n        headers: myHeaders,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/users`, requestOptions)\n\n}\n\nexport const fetchUser = (token, id) => {\n    const myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n    myHeaders.append(\"Content-Type\", \"application/json\");\n\n\n    const requestOptions = {\n        method: 'GET',\n        headers: myHeaders,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/users/${id}`, requestOptions)\n}\n\nexport const patchUser = (token, user) => {\n    const {\n        _id: id,\n        address,\n        admin,\n        city,\n        country,\n        email,\n        lenses: {\n            cylinder,\n            cylinderAxes,\n            diopters,\n            distance,\n            addition,\n            basis,\n            prism,\n        },\n        name,\n        phone,\n        psc,\n        premises\n    } = user\n\n    const myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n    myHeaders.append(\"Content-Type\", \"application/json\");\n\n\n    const raw = JSON.stringify({\n        address: address || undefined,\n        admin: admin,\n        premises: Number(premises) === 0 ? undefined : premises,\n        city: city || undefined,\n        country: country || undefined,\n        email: email || undefined,\n        lenses: {\n            cylinder: cylinder,\n            cylinderAxes: cylinderAxes,\n            diopters: diopters,\n            distance: distance,\n            addition: addition,\n            basis: basis,\n            prism: prism,\n        },\n        name: name,\n        phone: phone || undefined,\n        psc: psc || undefined,\n    })\n\n    const requestOptions = {\n        method: 'PATCH',\n        headers: myHeaders,\n        body: raw,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/users/${id}`, requestOptions)\n}\n\nexport const postUser = (token, user) => {\n    const {\n        name,\n        email,\n    } = user\n\n\n    const myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n    myHeaders.append(\"Content-Type\", \"application/json\");\n\n\n    const raw = JSON.stringify({\n        email: email,\n        name: name,\n    })\n\n    const requestOptions = {\n        method: 'POST',\n        headers: myHeaders,\n        body: raw,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/auth/register`, requestOptions)\n}\n\nexport const postAdmin = (token, user) => {\n    console.log(user)\n\n    const {\n        name,\n        email,\n        password,\n        premises,\n        admin\n    } = user\n\n    const myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n    myHeaders.append(\"Content-Type\", \"application/json\");\n\n\n    const raw = JSON.stringify({\n        admin: Number(admin),\n        email: email,\n        name: name,\n        premises: Number(premises),\n        password\n    })\n\n    const requestOptions = {\n        method: 'POST',\n        headers: myHeaders,\n        body: raw,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/auth/register`, requestOptions)\n}","import React, { createContext, useState, useContext, useEffect } from 'react'\nimport { useHistory } from 'react-router-dom'\nimport { AuthContext } from '../auth/auth.context'\nimport { LoadingModalContext } from '../loading-modal/loading-modal.contenxt'\n\nimport {\n    fetchUsers,\n    fetchUser,\n    patchUser,\n    postAdmin,\n    postUser,\n} from './user.queries'\n\nimport {\n    initUserObj\n} from './user.utils'\n\nexport const UserContext = createContext({\n    isUpdating: false,\n    activeIndex: 0,\n    handleChangeFilterItem: () => { },\n    filterItems: [],\n    totalCount: 0,\n    users: null,\n    user: null,\n    getUsers: () => { },\n    getUser: () => { },\n    handleChange: () => { },\n    updateUser: () => { },\n    resetUser: () => { },\n    formToShow: 0,\n    switchFormButtons: [],\n    toggleUserForm: () => { },\n    createUser: () => { },\n    getFilteredUsers: () => { },\n    getUserByQuery: () => { }\n})\n\nconst UserProvider = ({ children }) => {\n    const { push } = useHistory()\n    const { token } = useContext(AuthContext)\n    const {\n        closeModal,\n        getMessage,\n        setIsLoading,\n        setShowModal\n    } = useContext(LoadingModalContext)\n\n    // ------------------------\n\n    const [user, setUser] = useState(initUserObj)\n    const [users, setUsers] = useState(null)\n    const [totalCount, setTotalCount] = useState(0)\n\n    // ------------------------\n\n    const [isUpdating, setIsUpdating] = useState(false)\n    const [activeIndex, setActiveIndex] = useState(0)\n    const filterItems = [\n        {\n            id: 0,\n            name: \"Zákaznici\",\n            filter: 0,\n        },\n        {\n            id: 1,\n            name: \"Zamestnanci\",\n            filter: 1,\n        },\n        {\n            id: 2,\n            name: \"Vedúci\",\n            filter: 2,\n        },\n        // {\n        //     id: 3,\n        //     name: \"Velký brat\",\n        //     filter: 3,\n        // }\n    ]\n\n    // ------------------------\n\n    const [formToShow, setFormToShow] = useState(0)\n    const switchFormButtons = [\n        {\n            name: \"Zákazník\"\n        },\n        {\n            name: \"Admin\"\n        }\n    ]\n\n    const toggleUserForm = (e, idx) => {\n        e.preventDefault()\n        setFormToShow(idx)\n    }\n\n    // ------------------------\n\n\n    const handleChangeFilterItem = (itemIndex) => {\n        setActiveIndex(itemIndex)\n    }\n\n    const handleChange = (e) => {\n        const { name, value } = e.target\n        setUser({\n            ...user,\n            [name]: value\n        })\n    }\n\n    const handleParameterChange = (e, idx) => {\n        const { name, value } = e.target\n        let arr = user.lenses[name]\n        arr[idx] = Number(value)\n        setUser({\n            ...user,\n            lenses: {\n                ...user.lenses,\n                [name]: arr\n            }\n        })\n    }\n\n    useEffect(() => {\n        setUser({\n            ...user,\n            name: user.fName + \" \" + user.lName\n        })\n    }, [user.fName, user.lName])\n\n    const resetUser = () => {\n        setUser({\n            ...initUserObj\n        })\n        setIsUpdating(false)\n        setFormToShow(0)\n    }\n\n    // ------------------------\n    // USER ACTIONS\n    // ------------------------\n\n    // Get all users\n    const getUsers = async () => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        try {\n            const response = await fetchUsers(token)\n            const data = await response.json()\n\n            console.log(data)\n            if (data.users) {\n                setUsers(data.users)\n                setTotalCount(data.count)\n                setIsLoading(false)\n                closeModal()\n\n            } else {\n                getMessage(data.message)\n                setIsLoading(false)\n            }\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    // Get single user\n    const getUser = async (id) => {\n        setIsLoading(true)\n        setShowModal(true)\n        setIsUpdating(true)\n\n        try {\n            const response = await fetchUser(token, id)\n            const data = await response.json()\n\n            if (data.user) {\n                setUser({\n                    ...user,\n                    ...data.user,\n                    lenses: {\n                        // cylinder: [0, 0, 0, 0],\n                        // cylinderAxes: [0, 0, 0, 0],\n                        // diopters: [0, 0, 0, 0],\n                        // distance: [0, 0, 0, 0],\n                        // addition: [0, 0, 0, 0],\n                        // basis: [0, 0, 0, 0],\n                        // prism: [0, 0, 0, 0],\n                        cylinder: data.user.lenses.cylinder.length ? data.user.lenses.cylinder : [0, 0, 0, 0],\n                        cylinderAxes: data.user.lenses.cylinderAxes.length ? data.user.lenses.cylinderAxes : [0, 0, 0, 0],\n                        diopters: data.user.lenses.diopters.length ? data.user.lenses.diopters : [0, 0, 0, 0],\n                        distance: data.user.lenses.distance.length ? data.user.lenses.distance : [0, 0, 0, 0],\n                        addition: data.user.lenses.addition.length ? data.user.lenses.addition : [0, 0, 0, 0],\n                        basis: data.user.lenses.basis.length ? data.user.lenses.basis : [0, 0, 0, 0],\n                        prism: data.user.lenses.prism.length ? data.user.lenses.prism : [0, 0, 0, 0],\n                    },\n                    fName: data.user.name ? data.user.name.split(\" \")[0] : \"\",\n                    lName: data.user.name ? data.user.name.split(\" \")[1] : \"\"\n                })\n                setIsLoading(false)\n                closeModal()\n\n            } else {\n                getMessage(data.message)\n                setIsLoading(false)\n            }\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    // Update user\n    const updateUser = async (user) => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        console.log(user)\n\n        try {\n            const response = await patchUser(token, user)\n            const data = await response.json()\n\n            console.log(data)\n\n            if (data.error) {\n                getMessage(data.message)\n                if (data.error === 'format' && data.message.includes('lenses.cylinderAxes')) {\n                    getMessage(\"Osa musí byt väčšia alebo rovná 0\")\n                }\n                if (data.error === 'phone-exists') {\n                    getMessage(\"Telefónne číslo už v databázy existuje\")\n                }\n                setIsLoading(false)\n                return\n            }\n\n\n            setIsLoading(false)\n            closeModal()\n            push('/dashboard/zakaznici')\n            getUsers()\n            // http://localhost:1000/#/dashboard/zakaznici\n\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    const createUser = async (user) => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        try {\n            if (formToShow === 0) {\n                let data = {}\n                if (!user._id) {\n                    console.log('creating new user')\n                    const response = await postUser(token, user)\n\n                    data = await response.json()\n\n                    console.log(data)\n\n                    if (data.error) {\n                        getMessage(data.message)\n\n                        if (data.type === 'email') {\n                            getMessage(\"Email existuje\")\n                        }\n                        if (data.error === 'format' && data.message.includes('email')) {\n                            getMessage(\"Email musi byt platny email\")\n                        }\n                        setIsLoading(false)\n                        return\n                    }\n\n                    setUser({\n                        ...user,\n                        _id: data.user._id\n                    })\n                }\n\n                updateUser({\n                    _id: data.user ? data.user._id : user._id,\n                    lenses: {\n                        ...user.lenses\n                    },\n                    address: user.city,\n                    city: user.city,\n                    country: user.country,\n                    phone: user.phone,\n                    psc: user.phone,\n                })\n                // setIsLoading(false)\n                // getUsers()\n                // push('/dashboard/zakaznici')\n                // closeModal()\n\n            } else {\n                const response = await postAdmin(token, user)\n                const data = await response.json()\n\n                console.log(data)\n\n                if (data.error) {\n                    getMessage(data.message)\n                    setIsLoading(false)\n                    return\n                }\n\n                setIsLoading(false)\n                getUsers()\n                push('/dashboard/zakaznici')\n                closeModal()\n            }\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    // ----------------------------------------------\n    // ----------------------------------------------\n    // ----------------------------------------------\n\n    const myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n    myHeaders.append(\"Content-Type\", \"application/json\");\n\n    const getFilteredUsers = async (filter) => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        console.log(filter)\n        const raw = JSON.stringify(filter)\n\n        const requestOptions = {\n            method: 'POST',\n            headers: myHeaders,\n            body: raw,\n            redirect: 'follow'\n        };\n\n        try {\n            const response = await fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/users/filter`, requestOptions)\n            const data = await response.json()\n\n            console.log(data)\n            if (data.users) {\n                setUsers(data.users)\n                closeModal()\n                return\n            }\n\n            getMessage(data.message)\n            setIsLoading(false)\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    const getUserByQuery = async (query) => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        console.log(query)\n        const raw = JSON.stringify(query)\n\n        const requestOptions = {\n            method: 'POST',\n            headers: myHeaders,\n            body: raw,\n            redirect: 'follow'\n        };\n\n        try {\n            const response = await fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/users/filter`, requestOptions)\n            const data = await response.json()\n\n            console.log(data)\n            if (data.users) {\n                setUsers(data.users)\n                closeModal()\n                return\n            }\n\n            getMessage(data.message)\n            setIsLoading(false)\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    return (\n        <UserContext.Provider\n            value={{\n                isUpdating,\n                activeIndex,\n                handleChangeFilterItem,\n                filterItems,\n                users,\n                user,\n                totalCount,\n                getUsers,\n                getUser,\n                handleChange,\n                handleParameterChange,\n                updateUser,\n                resetUser,\n                formToShow,\n                switchFormButtons,\n                toggleUserForm,\n                createUser,\n                getFilteredUsers,\n                getUserByQuery\n            }}\n        >\n            {children}\n        </UserContext.Provider>\n    )\n}\n\nexport default UserProvider"],"sourceRoot":""}