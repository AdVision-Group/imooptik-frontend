(this.webpackJsonpimooptik=this.webpackJsonpimooptik||[]).push([[20,29],{222:function(n,e,t){"use strict";t.r(e);var r=t(2),c=t(32),o=t(21),i=t(54),a=t(10),d=t(1),s=t(18),l=t(3),u=t(52),b=t(31),j=t(7),v=t.n(j),h=t(12),m=t(19),O=t(51),p=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";n.toString();var e=0;return n.includes(",")?1===n.split(",")[1].length?(e=n.split(",")[0]+n.split(",")[1]+"0",Number(e)):(e=n.split(",")[0]+n.split(",")[1],Number(e)):Number(100*n)},f=t(5),x=t(6),g=t(62),y=t(28);function k(){var n=Object(f.a)(["\n    background-color: var(--body-background-primary-color);\n    border-radius: 50%;\n    width: 10rem;\n    height: 10rem;\n    margin: 0 auto;\n    margin-bottom: 1.5rem;\n"]);return k=function(){return n},n}function w(){var n=Object(f.a)(["\n    cursor: pointer;\n    width: 100%;\n    max-width: 32rem;\n    padding: 2rem;\n    border-radius: .5rem;\n    box-shadow: var(--container-shadow);\n    text-align: center;\n    transition: transform .3s ease-out,\n                box-shadow .3s ease-out;\n    margin: 2rem auto;\n\n    &:last-child {\n        display:flex;\n        flex-direction: column;\n        justify-content: space-between;\n    }\n\n    h4 {\n        font-size: 2.5rem;\n        margin-bottom: 1.5rem\n    }\n\n    img {\n        /* background-color:#000; */\n        width: 15rem;\n        height: 15rem;\n        margin-bottom: 1rem; \n        object-fit: contain;\n        object-position: center;\n    }\n\n    p {\n        opacity: .65;\n        &:not(:last-child){\n            margin-bottom: .5rem;\n        }\n    }\n\n    h5 {\n        font-size: 2.5rem;\n    }\n"]);return w=function(){return n},n}function C(){var n=Object(f.a)(["\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    grid-gap: 2rem;\n    margin-bottom: 2rem;\n"]);return C=function(){return n},n}function P(){var n=Object(f.a)(["\n    margin-top: 1.5rem;\n    min-width: 16.5rem;\n    width: 100%;\n    background-color: var(--input-background-color);\n    color: var(--input-color);\n    border: none;\n    padding: .5rem .5rem .5rem 1rem;\n    font-size: inherit;\n    font-family: inherit;\n    display: block;\n    outline: none;\n\n    &:focus {\n        outline: none;\n    }\n"]);return P=function(){return n},n}function S(){var n=Object(f.a)(["\n    display: flex;\n    align-items: center;\n    margin-bottom: 2rem;\n\n\n    label {\n        display: block;\n        outline: none;\n        margin-left: 1rem;\n\n        &:focus {\n            outline: none;\n\n        }\n    }\n\n    input: {\n        display: block;\n    }\n"]);return S=function(){return n},n}function z(){var n=Object(f.a)(["\n    display: block;\n    margin: 2rem auto 0;\n"]);return z=function(){return n},n}function D(){var n=Object(f.a)(["\n    /* background-color: gray; */\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    margin-top: 4rem;\n    margin-bottom: 4rem;\n\n    img {\n        width: 20rem;\n        \n    }\n\n    span {\n        opacity: .6;\n        font-size: 1.2rem;\n        display: block;\n        text-align: center;\n    }\n\n    p {\n        font-weight: bolder;\n        font-size: 2rem;\n    }\n"]);return D=function(){return n},n}function L(){var n=Object(f.a)(["\n    margin-top: 1rem;\n    margin-right: 2rem;\n"]);return L=function(){return n},n}function E(){var n=Object(f.a)(["\n    width: 100%;\n    height: 100%;\n\n    position: fixed;\n    left: 0;\n    right: 0;\n    z-index: 99999;\n\n    border: none;\n    outline: none;\n    opacity: 0;\n\n    &:focus {\n        outline: none\n    }\n"]);return E=function(){return n},n}function N(){var n=Object(f.a)(["\n    width:100%;\n    max-width: 50rem;\n    max-height: 60rem;\n\n    overflow-y: scroll;\n\n    /* display: flex;\n    flex-direction: column;\n    align-items: center; */\n\n    padding: 2rem;\n    border-radius: .5rem;\n    background-color: var(--background-primary-color);\n    color: var(--primary-text-color);\n\n    position: relative;\n    z-index: 999999;\n\n    h2{ \n        margin-bottom: 2rem;\n        text-align: center;\n    }\n\n    ::-webkit-scrollbar {\n        width: 10px;\n    }\n\n    /* Track */\n    ::-webkit-scrollbar-track {\n        background:  var(--background-primary-color);\n    }\n\n    /* Handle */\n    ::-webkit-scrollbar-thumb {\n        background: var(--primary-color);\n    }\n\n    /* Handle on hover */\n    ::-webkit-scrollbar-thumb:hover {\n        background: var(--primary-color);\n    }\n"]);return N=function(){return n},n}function A(){var n=Object(f.a)(["\n    position: fixed;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    z-index: 99999;\n\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    background-color: rgba(0,0,0,0.3);\n"]);return A=function(){return n},n}var M=x.c.div(A()),F=x.c.div(N()),R=x.c.button(E()),T=Object(x.c)(g.a)(L()),H=x.c.div(D()),I=Object(x.c)(y.a)(z()),U=x.c.div(S()),_=x.c.select(P()),K=x.c.div(C()),Z=x.c.div(w()),B=x.c.div(k()),V=function(n){var e,t,i,u,b=n.close,j=n.order,f=n.addCombineProduct,x=n.next,g=Object(d.useContext)(s.a),y=g.setIsLoading,k=g.getMessage,w=g.setShowModal,C=g.closeModal,P=Object(d.useContext)(m.a),S=P.isAdmin,z=P.token,D=j.product,L=j.lenses,E=D.contactLenses,N=Object(d.useState)({}),A=Object(a.a)(N,2),V=A[0],J=A[1],q=Object(d.useState)({}),Q=Object(a.a)(q,2),W=Q[0],G=Q[1],X=Object(d.useState)({}),Y=Object(a.a)(X,2),$=Y[0],nn=Y[1],en=Object(d.useState)("flat"),tn=Object(a.a)(en,2),rn=tn[0],cn=tn[1],on=Object(d.useState)("flat"),an=Object(a.a)(on,2),dn=an[0],sn=an[1],ln=Object(d.useState)(!1),un=Object(a.a)(ln,2),bn=un[0],jn=un[1],vn=Object(d.useState)(!1),hn=Object(a.a)(vn,2),mn=hn[0],On=hn[1],pn=Object(d.useState)(!1),fn=Object(a.a)(pn,2),xn=fn[0],gn=fn[1];console.log(j),console.log(W),console.log(L);var yn=function(n){G({}),cn(n)},kn=function(n){nn({}),sn(n)},wn=function(n,e,t){var r=n.target,i=r.name,a=r.value,d=t;d[e]=""===a?1001:Number(a),J(Object(o.a)(Object(o.a)({},V),{},{contactLenses:Object(o.a)(Object(o.a)({},V.contactLenses),{},Object(c.a)({},i,d))}))},Cn=function(){var n=Object(h.a)(v.a.mark((function n(e){var t,r,c,i,a,d;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.preventDefault(),y(!0),w(!0),t={},D.type&&(5===D.type&&(t={product:j.product._id}),3===D.type?t={product:j.product._id,contactLenses:V.contactLenses}:(t={product:j.product._id},j.lenses&&(t={product:j.product._id,lens:j.lenses._id})),bn?(t="flat"===rn?Object(o.a)(Object(o.a)({},t),{},{discount:{product:{flat:p(W.flat)}}}):Object(o.a)(Object(o.a)({},t),{},{discount:{product:Object(o.a)({},W)}}),mn&&(t="flat"===dn?Object(o.a)(Object(o.a)({},t),{},{discount:{product:{flat:p(W.flat)},lenses:{flat:p($.flat)}}}):Object(o.a)(Object(o.a)({},t),{},{discount:{product:Object(o.a)({},W),lenses:Object(o.a)({},$)}}))):mn&&(t="flat"===dn?Object(o.a)(Object(o.a)({},t),{},{discount:{lenses:{flat:p($.flat)}}}):Object(o.a)(Object(o.a)({},t),{},{discount:{lenses:Object(o.a)({},$)}}))),console.log("COMBINED PRODUCT BEFORE SEND"),console.log(t),r=JSON.stringify(t),(c=new Headers).append("auth-token",z),c.append("Content-Type","application/json"),i={method:"POST",headers:c,body:r,redirect:"follow"},n.prev=12,n.next=15,fetch("".concat("http://195.110.58.166:8080","/api/store/combinedProducts"),i);case 15:return a=n.sent,n.next=18,a.json();case 18:d=n.sent,console.log(d),d.combinedProduct&&(f(d.combinedProduct),C(),x()),y(!1),k(d.message),n.next=30;break;case 25:n.prev=25,n.t0=n.catch(12),console.log(n.t0),k("Nieco sa pokazilo"),y(!1);case 30:case"end":return n.stop()}}),n,null,[[12,25]])})));return function(e){return n.apply(this,arguments)}}();return Object(d.useEffect)((function(){D.type&&3===D.type&&J({contactLenses:{curve:[D.contactLenses.allowedCurves[0],D.contactLenses.allowedCurves[0]],diameter:[D.contactLenses.allowedDiameters[0],D.contactLenses.allowedDiameters[0]],diopters:[0,0]}})}),[D]),Object(d.useEffect)((function(){return function(){J({}),G({}),cn("flat"),jn(!1),gn(!1)}}),[]),Object(r.jsxs)(M,{children:[Object(r.jsx)(l.a,{when:xn,message:"Chcete opusti\u0165 t\xfato str\xe1nku?"}),Object(r.jsx)(R,{onClick:b}),Object(r.jsxs)(F,{children:[Object(r.jsx)("h2",{children:"Produkt ktory chcete prida\u0165"}),Object(r.jsxs)(H,{children:[Object(r.jsx)("div",{children:D.image&&Object(r.jsx)("img",{src:"".concat("http://195.110.58.166:8080","/uploads/").concat(D.image.imagePath),alt:D.image.alt})}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:D.name}),Object(r.jsx)("span",{children:D.eanCode})]}),Object(r.jsx)("div",{children:Object(r.jsxs)("p",{children:[(D.price/100).toFixed(2),"\u20ac"]})})]}),L&&Object(r.jsxs)(Z,{children:[Object(r.jsx)("h4",{children:L.name}),Object(r.jsx)(B,{}),Object(r.jsx)("p",{children:L.description}),L.dioptersRange&&Object(r.jsx)("p",{children:"Dioptrie od ".concat(L.dioptersRange[0]," do ").concat(L.dioptersRange[1])}),L.cylinderRange&&Object(r.jsx)("p",{children:"Cylinder  od ".concat(L.cylinderRange[0]," do ").concat(L.cylinderRange[1])}),Object(r.jsxs)("h5",{children:[(L.price/100).toFixed(2),"\u20ac"]})]}),V.contactLenses&&3===D.type&&Object(r.jsxs)(K,{children:[Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"\u013dave oko"}),Object(r.jsx)(_,{name:"curve",value:V.contactLenses.curve[0],onChange:function(n){return wn(n,0,V.contactLenses.curve)},children:D.contactLenses.allowedCurves.map((function(n,e){return Object(r.jsx)("option",{value:n,children:n},e)}))}),Object(r.jsx)(_,{name:"diameter",value:V.contactLenses.diameter[0],onChange:function(n){return wn(n,0,V.contactLenses.diameter)},children:D.contactLenses.allowedDiameters.map((function(n,e){return Object(r.jsx)("option",{value:n,children:n},e)}))}),Object(r.jsx)(O.a,{name:"diopters",type:"number",value:V.contactLenses.diopters[0],min:E.dioptersRange[0],max:E.dioptersRange[1],step:.25,onChange:function(n){return wn(n,0,V.contactLenses.diopters)}})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Prav\xe9 oko"}),Object(r.jsx)(_,{name:"curve",value:V.contactLenses.curve[1],onChange:function(n){return wn(n,1,V.contactLenses.curve)},children:D.contactLenses.allowedCurves.map((function(n,e){return Object(r.jsx)("option",{value:n,children:n},e)}))}),Object(r.jsx)(_,{name:"diameter",value:V.contactLenses.diameter[1],onChange:function(n){return wn(n,1,V.contactLenses.diameter)},children:D.contactLenses.allowedDiameters.map((function(n,e){return Object(r.jsx)("option",{value:n,children:n},e)}))}),Object(r.jsx)(O.a,{type:"number",value:V.contactLenses.diopters[1],min:E.dioptersRange[0],max:E.dioptersRange[1],step:.25,name:"diopters",onChange:function(n){return wn(n,1,V.contactLenses.diopters)}})]})]}),S&&Object(r.jsxs)("div",{children:[Object(r.jsxs)(U,{children:[Object(r.jsx)("input",{id:"discount",name:"discount",type:"checkbox",value:bn,onChange:function(){return jn(!bn)}}),Object(r.jsx)("label",{htmlFor:"discount",children:"Prida\u0165 zlavu pre produkt"})]}),bn&&Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Zlava pre produkt"}),Object(r.jsxs)("div",{children:[Object(r.jsx)(T,{label:"Fixn\xe1 suma",value:"flat",name:"flat",isActive:"flat"===rn,handleClick:function(){return yn("flat")}}),Object(r.jsx)(T,{label:"Percert\xe1",value:"percent",name:"percent",isActive:"percent"===rn,handleClick:function(){return yn("percent")}})]}),Object(r.jsx)("div",{children:Object(r.jsx)(O.a,{label:"Hodnota",value:"flat"===rn?null!==(e=W.flat)&&void 0!==e?e:"":null!==(t=W.percent)&&void 0!==t?t:"",onChange:function(n){!function(n){var e=n.target,t=e.name,r=e.value;if(""===r)return delete W[t],void G(Object(o.a)({},W));G(Object(o.a)(Object(o.a)({},W),{},Object(c.a)({},t,r)))}({target:{name:rn,value:n.target.value}},D.type)}})})]})]}),S&&(null===j||void 0===j?void 0:j.lenses)&&Object(r.jsxs)("div",{children:[Object(r.jsxs)(U,{children:[Object(r.jsx)("input",{id:"lensdiscount",name:"lensdiscount",type:"checkbox",value:mn,onChange:function(){return On(!mn)}}),Object(r.jsx)("label",{htmlFor:"lensdiscount",children:"Prida\u0165 zlavu pre \u0161o\u0161ovky"})]}),mn&&Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Zlava pre \u0161o\u0161ovky"}),Object(r.jsxs)("div",{children:[Object(r.jsx)(T,{label:"Fixn\xe1 suma",value:"flat",name:"flat",isActive:"flat"===dn,handleClick:function(){return kn("flat")}}),Object(r.jsx)(T,{label:"Percert\xe1",value:"percent",name:"percent",isActive:"percent"===dn,handleClick:function(){return kn("percent")}})]}),Object(r.jsx)("div",{children:Object(r.jsx)(O.a,{label:"Hodnota",value:"flat"===dn?null!==(i=$.flat)&&void 0!==i?i:"":null!==(u=$.percent)&&void 0!==u?u:"",onChange:function(n){!function(n){var e=n.target,t=e.name,r=e.value;if(""===r)return delete $[t],void nn(Object(o.a)({},$));nn(Object(o.a)(Object(o.a)({},$),{},Object(c.a)({},t,r)))}({target:{name:dn,value:n.target.value}})}})})]})]}),Object(r.jsx)(I,{onClick:Cn,children:"Prida\u0165 do objedn\xe1vky"})]})]})},J=t(70);function q(){var n=Object(f.a)(["\n    max-width: 40rem;\n    padding: 2rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n    margin: 0 auto;\n    border-radius: .5rem;\n\n    h3 {\n        text-align: center;\n        font-size: 3rem;\n    }\n\n    div {\n\n        &:not(:last-child) {\n            margin-bottom: 3rem;\n\n        }\n    }\n"]);return q=function(){return n},n}function Q(){var n=Object(f.a)(["\n    padding: 2rem;\n    text-align: center;\n\n    img {\n        width: 5rem;\n    }\n"]);return Q=function(){return n},n}function W(){var n=Object(f.a)(["\n    margin: 5rem 0;\n"]);return W=function(){return n},n}function G(){var n=Object(f.a)(["\n    display: block;\n    margin: 0 auto;\n"]);return G=function(){return n},n}function X(){var n=Object(f.a)(["\n    cursor: pointer;\n    display: grid;\n    align-content: center;\n    grid-template-columns: 1fr 2fr 25rem;\n    margin-bottom: 1rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n\n    transition: all .3s ease-out;\n\n    &:hover {\n        background-color: var(--primary-color); \n        font-weight: bolder;\n        color: var(--button-font-color);\n    }\n"]);return X=function(){return n},n}function Y(){var n=Object(f.a)(["\n    display: grid;\n    align-content: center;\n    grid-template-columns: 1fr 2fr 25rem;\n    border-bottom: 1px solid var(--secondary-text-color);\n    font-weight: bolder;\n"]);return Y=function(){return n},n}var $=x.c.div(Y()),nn=x.c.div(X()),en=Object(x.c)(y.a)(G()),tn=x.c.div(W()),rn=x.c.div(Q()),cn=x.c.div(q()),on=function(n){var e=n.next,t=n.addToOrder,c=Object(d.useState)(""),o=Object(a.a)(c,2),i=o[0],s=o[1],l=Object(d.useState)([]),u=Object(a.a)(l,2),b=u[0],j=u[1],v=Object(d.useContext)(J.UserContext),h=v.users,m=v.getFilteredUsers,p=v.getUserByQuery;return Object(d.useEffect)((function(){h||m({limit:5}),h&&j(h)}),[h]),Object(d.useEffect)((function(){h&&""===i&&(m({limit:5}),j(h))}),[i]),Object(d.useEffect)((function(){return function(){s(""),j([])}}),[]),Object(r.jsxs)("div",{children:[Object(r.jsxs)(cn,{children:[Object(r.jsx)("h3",{children:"Vyh\u013eada\u0165 z\xe1kaznika"}),Object(r.jsx)("div",{children:Object(r.jsx)(O.a,{label:"Meno, priezvisko, email alebo tel. \u010d\xedslo",value:i,onChange:function(n){return s(n.target.value)},onKeyPress:function(n){""!==i&&"Enter"===n.key&&p({query:i})}})}),Object(r.jsx)(en,{onClick:function(){""!==i&&p({query:i})},children:"H\u013eada\u0165"})]}),Object(r.jsxs)(tn,{children:[Object(r.jsxs)($,{children:[Object(r.jsx)(rn,{children:"Meno a priezvisko"}),Object(r.jsx)(rn,{children:"Email"}),Object(r.jsx)(rn,{children:"Mo\u017enosti"})]}),b.map((function(n,c){return Object(r.jsxs)(nn,{onClick:function(){return function(n){t({name:"user",value:n}),e()}(n)},children:[Object(r.jsx)(rn,{children:n.name}),Object(r.jsx)(rn,{children:n.email}),Object(r.jsx)(rn,{children:n.phone})]},c)}))]})]})},an=t(71),dn=t(220);function sn(){var n=Object(f.a)(["\n    cursor: pointer;\n    border: 4px solid var(--backbutton-color);\n    color: var(--backbutton-color);\n    border-radius: 50%;\n    padding: 1.2rem 1.2rem;\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    margin-bottom: 3rem;\n"]);return sn=function(){return n},n}var ln=x.c.div(sn()),un=function(n){var e=Object.assign({},n);return Object(r.jsx)(ln,Object(o.a)(Object(o.a)({},e),{},{children:Object(r.jsx)(dn.a,{})}))};function bn(){var n=Object(f.a)(["\n    cursor: pointer;\n    display: grid;\n    align-content: center;\n    grid-template-columns: 10rem 15rem 1fr 1fr 10rem 1fr;\n    margin-bottom: 1rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n\n    transition: all .3s ease-out;\n\n    &:hover {\n        background-color: var(--primary-color); \n        font-weight: bolder;\n        color: var(--button-font-color);\n    }\n"]);return bn=function(){return n},n}function jn(){var n=Object(f.a)(["\n    display: grid;\n    align-content: center;\n    grid-template-columns: 10rem 15rem 1fr 1fr 10rem 1fr;\n    border-bottom: 1px solid var(--secondary-text-color);\n    font-weight: bolder;\n"]);return jn=function(){return n},n}function vn(){var n=Object(f.a)(["\n    padding: 2rem;\n    text-align: center;\n\n    img {\n        width: 5rem;\n    }\n"]);return vn=function(){return n},n}function hn(){var n=Object(f.a)(["\n    margin: 5rem 0;\n"]);return hn=function(){return n},n}function mn(){var n=Object(f.a)(["\n    display: block;\n    margin: 0 auto;\n"]);return mn=function(){return n},n}function On(){var n=Object(f.a)(["\n    max-width: 40rem;\n    padding: 2rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n    margin: 0 auto;\n    border-radius: .5rem;\n\n    h3 {\n        text-align: center;\n        font-size: 3rem;\n    }\n\n    div {\n\n        &:not(:last-child) {\n            margin-bottom: 3rem;\n\n        }\n    }\n"]);return On=function(){return n},n}var pn=x.c.div(On()),fn=Object(x.c)(y.a)(mn()),xn=x.c.div(hn()),gn=x.c.div(vn()),yn=x.c.div(jn()),kn=x.c.div(bn()),wn=function(n){var e=n.back,t=n.next,c=n.addToOrder,o=n.showModal,i=n.showErrorMessage,s=Object(d.useState)(""),l=Object(a.a)(s,2),u=l[0],b=l[1],j=Object(d.useState)([]),v=Object(a.a)(j,2),h=v[0],m=v[1],p=Object(d.useContext)(an.WarehouseContext),f=p.products,x=p.getProductsByQuery;return Object(d.useEffect)((function(){(!f||h.length<1)&&x({limit:10}),f&&m(f)}),[f]),Object(d.useEffect)((function(){f&&""===u&&x({limit:10})}),[u]),Object(d.useEffect)((function(){return function(){m([])}}),[]),Object(r.jsxs)("div",{children:[Object(r.jsx)(un,{onClick:e}),Object(r.jsxs)(pn,{children:[Object(r.jsx)("h3",{children:"Vyh\u013eada\u0165 produkt"}),Object(r.jsx)("div",{children:Object(r.jsx)(O.a,{label:"N\xe1zov produktu, eanCode alebo popis",value:u,handleChange:function(n){return b(n.target.value)},onKeyPress:function(n){""!==u&&"Enter"===n.key&&x({query:u})}})}),Object(r.jsx)(fn,{onClick:function(){""!==u&&x({query:u})},children:"H\u013eada\u0165"})]}),Object(r.jsxs)(xn,{children:[Object(r.jsxs)(yn,{children:[Object(r.jsx)(gn,{children:"eanCode"}),Object(r.jsx)(gn,{children:"Obr\xe1zok"}),Object(r.jsx)(gn,{children:"N\xe1zov"}),Object(r.jsx)(gn,{children:"Zna\u010dka"}),Object(r.jsx)(gn,{children:"Cena"}),Object(r.jsx)(gn,{children:"Dostupnos\u0165"})]}),h.map((function(n,e){return Object(r.jsxs)(kn,{onClick:function(){return(e=n.available)&&("number"===typeof e?e>0:e.reduce((function(n,e){return n+e}))>0)?function(n){c({name:"product",value:n}),1===n.type?t("selectLenses"):o()}(n):i("Produkt nieje na sklade.");var e},children:[Object(r.jsx)(gn,{children:n.eanCode}),Object(r.jsx)(gn,{children:(null===n||void 0===n?void 0:n.image)&&Object(r.jsx)("img",{src:"".concat("http://195.110.58.166:8080","/uploads/").concat(n.image.imagePath),alt:n.image.alt})}),Object(r.jsx)(gn,{children:n.name}),Object(r.jsx)(gn,{children:n.brand}),Object(r.jsxs)(gn,{children:[(n.price/100).toFixed(2),"\u20ac"]}),Object(r.jsx)(gn,{children:(a=n.available,a?"number"===typeof a?a>0?"Na sklade":"Nedostupn\xe9":a.reduce((function(n,e){return n+e}))>0?"Na sklade":"Nedostupn\xe9":"Nedostupn\xe9")})]},e);var a}))]})]})},Cn=t(84);function Pn(){var n=Object(f.a)(["\n    background-color: var(--background-primary-color);\n    border-radius: 50%;\n    width: 10rem;\n    height: 10rem;\n    margin: 0 auto;\n    margin-bottom: 1.5rem;\n"]);return Pn=function(){return n},n}function Sn(){var n=Object(f.a)(["\n    cursor: pointer;\n    width: 100%;\n    max-width: 32rem;\n    padding: 2rem;\n    border-radius: .5rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n    text-align: center;\n    transition: transform .3s ease-out,\n                box-shadow .3s ease-out;\n\n    &:last-child {\n        display:flex;\n        flex-direction: column;\n        justify-content: space-between;\n    }\n\n    h4 {\n        font-size: 2.5rem;\n        margin-bottom: 1.5rem\n    }\n\n    img {\n        /* background-color:#000; */\n        width: 15rem;\n        height: 15rem;\n        margin-bottom: 1rem; \n        object-fit: contain;\n        object-position: center;\n    }\n\n    p {\n        opacity: .65;\n        &:not(:last-child){\n            margin-bottom: .5rem;\n        }\n    }\n\n    h5 {\n        font-size: 2.5rem;\n    }\n\n    &:hover {\n        transform: scale(1.03);\n        box-shadow: var(--container-shadow);\n    }\n"]);return Sn=function(){return n},n}function zn(){var n=Object(f.a)(["\n    display: flex;\n    flex-wrap: wrap;\n    gap: 2rem;\n"]);return zn=function(){return n},n}function Dn(){var n=Object(f.a)(["\n    margin: 5rem 0;\n\n    h3 {\n        font-size: 3rem;\n        margin-bottom: 3rem;\n    }\n"]);return Dn=function(){return n},n}function Ln(){var n=Object(f.a)(["\n    h3 {\n        font-size: 3rem;\n        margin-bottom: 1rem;\n    }\n"]);return Ln=function(){return n},n}var En=x.c.div(Ln()),Nn=x.c.div(Dn()),An=x.c.div(zn()),Mn=x.c.div(Sn()),Fn=x.c.div(Pn()),Rn=function(n){var e=n.back,t=(n.next,n.addToOrder),c=n.order,o=n.showModal,i=Object(d.useState)([]),s=Object(a.a)(i,2),l=s[0],u=s[1],b=Object(d.useContext)(an.WarehouseContext),j=b.lensesProducts,v=b.getLenses,h=function(n){t({name:"lenses",value:n}),o()};return Object(d.useEffect)((function(){j||v(),j&&u(j)}),[j]),Object(r.jsxs)("div",{children:[Object(r.jsx)(un,{onClick:e}),Object(r.jsx)("div",{children:Object(r.jsxs)(En,{children:[Object(r.jsx)("h3",{children:"Parametre z\xe1kaznika"}),Object(r.jsx)(Cn.a,{parameters:c.user.lenses,disabledInputs:!0})]})}),Object(r.jsxs)(Nn,{children:[Object(r.jsx)("h3",{children:"V\xfdber \u0160o\u0161oviek"}),Object(r.jsxs)(An,{children:[l.map((function(n,e){return Object(r.jsxs)(Mn,{onClick:function(){return h(n)},children:[Object(r.jsx)("h4",{children:n.name}),Object(r.jsx)(Fn,{}),Object(r.jsx)("p",{children:n.description}),n.dioptersRange&&Object(r.jsx)("p",{children:"Dioptrie od ".concat(n.dioptersRange[0]," do ").concat(n.dioptersRange[1])}),n.cylinderRange&&Object(r.jsx)("p",{children:"Cylinder  od ".concat(n.cylinderRange[0]," do ").concat(n.cylinderRange[1])}),Object(r.jsxs)("h5",{children:[(n.price/100).toFixed(2),"\u20ac"]})]},e)})),Object(r.jsxs)(Mn,{onClick:function(){return h(null)},children:[Object(r.jsx)("h4",{children:"\u017diadn\xe9 skl\xe1"}),Object(r.jsx)(Fn,{}),Object(r.jsx)("h5",{children:"0\u20ac"})]})]})]})]})},Tn=t(66);function Hn(){var n=Object(f.a)(["\n    display: flex;\n    align-items: center;\n    margin-bottom: 2rem;\n\n\n    label {\n        display: block;\n        outline: none;\n        margin-left: 1rem;\n\n        &:focus {\n            outline: none;\n\n        }\n    }\n\n    input: {\n        display: block;\n    }\n"]);return Hn=function(){return n},n}function In(){var n=Object(f.a)(["\n    display: flex;\n    align-items: center;\n    margin-bottom: 2rem;\n\n\n    label {\n        display: block;\n        outline: none;\n        margin-left: 1rem;\n\n        &:focus {\n            outline: none;\n\n        }\n    }\n\n    input: {\n        display: block;\n    }\n"]);return In=function(){return n},n}function Un(){var n=Object(f.a)(["\n    margin-top: 2rem;\n    margin-right: 2rem;\n"]);return Un=function(){return n},n}function _n(){var n=Object(f.a)(["\n    margin-top: 1.5rem;\n    min-width: 16.5rem;\n    width: 100%;\n    background-color: var(--input-background-color);\n    color: var(--input-color);\n    border: none;\n    padding: .5rem .5rem .5rem 1rem;\n    font-size: inherit;\n    font-family: inherit;\n    display: block;\n    outline: none;\n    margin-bottom: 2rem;\n\n    &:focus {\n        outline: none;\n    }\n"]);return _n=function(){return n},n}function Kn(){var n=Object(f.a)(["\n    display: block;\n    margin: 2rem auto 0;\n"]);return Kn=function(){return n},n}function Zn(){var n=Object(f.a)(["\n    width: 100%;\n    height: 100%;\n\n    position: fixed;\n    left: 0;\n    right: 0;\n    z-index: 99999;\n\n    border: none;\n    outline: none;\n    opacity: 0;\n\n    &:focus {\n        outline: none\n    }\n"]);return Zn=function(){return n},n}function Bn(){var n=Object(f.a)(["\n    width:100%;\n    max-width: 50rem;\n    max-height: 60rem;\n\n    overflow-y: scroll;\n\n    /* display: flex;\n    flex-direction: column;\n    align-items: center; */\n\n    padding: 2rem;\n    border-radius: .5rem;\n    background-color: var(--background-primary-color);\n\n    position: relative;\n    z-index: 999999;\n\n    h2{ \n        margin-bottom: 2rem;\n        text-align: center;\n    }\n    h4{ \n        margin-top: 2rem;\n    }\n\n    ::-webkit-scrollbar {\n        width: 10px;\n    }\n\n    /* Track */\n    ::-webkit-scrollbar-track {\n        background:  var(--background-primary-color);\n    }\n\n    /* Handle */\n    ::-webkit-scrollbar-thumb {\n        background: var(--primary-color);\n    }\n\n    /* Handle on hover */\n    ::-webkit-scrollbar-thumb:hover {\n        background: var(--primary-color);\n    }\n"]);return Bn=function(){return n},n}function Vn(){var n=Object(f.a)(["\n    position: fixed;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    z-index: 99999;\n\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    background-color: rgba(0,0,0,0.3);\n"]);return Vn=function(){return n},n}var Jn=x.c.div(Vn()),qn=x.c.div(Bn()),Qn=x.c.button(Zn()),Wn=Object(x.c)(y.a)(Kn()),Gn=x.c.select(_n()),Xn=Object(x.c)(g.a)(Un()),Yn=x.c.div(In()),$n=x.c.div(Hn()),ne=function(n){var e,t,i,s,l,u,b,j,v,h,m=n.close,f=n.order,x=n.combinedProducts,g=n.createOrder,y=n.setHasChanged,k=n.isUpdating,w=n.updateOrder,C=Object(d.useState)({paymentType:"cash"}),P=Object(a.a)(C,2),S=P[0],z=P[1],D=Object(d.useState)(!1),L=Object(a.a)(D,2),E=L[0],N=L[1],A=Object(d.useState)(!1),M=Object(a.a)(A,2),F=M[0],R=M[1],T=function(n){var e=n.target,t=e.name,r=e.value;if(""===r)return delete S[t],void z(Object(o.a)({},S));z(Object(o.a)(Object(o.a)({},S),{},Object(c.a)({},t,r)))},H=function(n){var e=n.target,t=e.name,r=e.value;if(""===r)return delete S.overwrite[t],void z(Object(o.a)({},S));z(Object(o.a)(Object(o.a)({},S),{},{overwrite:Object(o.a)(Object(o.a)({},S.overwrite),{},Object(c.a)({},t,r))}))};return Object(d.useEffect)((function(){var n,e;k&&((null===f||void 0===f?void 0:f.order)&&(T({target:{name:"shouldDeliver",value:null===f||void 0===f||null===(n=f.order)||void 0===n?void 0:n.shouldDeliver}}),T({target:{name:"buyingAsCompany",value:null===f||void 0===f||null===(e=f.order)||void 0===e?void 0:e.buyingAsCompany}})))}),[k,f]),Object(d.useEffect)((function(){return function(){z({paymentType:"cash"}),N(!1),R(!1)}}),[]),Object(r.jsxs)(Jn,{children:[Object(r.jsx)(Qn,{onClick:m}),Object(r.jsxs)(qn,{children:[Object(r.jsx)("h2",{children:k?"Upravi\u0165 objedn\xe1vku":"Dokon\u010deni\u0165 objedn\xe1vky"}),!k&&Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Sp\xf4sob platby"}),Object(r.jsxs)(Gn,{name:"paymentType",value:null!==(e=null===S||void 0===S?void 0:S.paymentType)&&void 0!==e?e:"cash",onChange:function(n){return T(n)},children:[Object(r.jsx)("option",{value:"cash",children:"Hotovos\u0165"}),Object(r.jsx)("option",{value:"card",children:"Karta"}),Object(r.jsx)("option",{value:"coupon",children:"Kup\xf3n"})]}),Object(r.jsxs)($n,{children:[Object(r.jsx)("input",{id:"hasDeposit",name:"hasDeposit",type:"checkbox",value:E,onChange:function(){E?(N(!1),S.paidAlready&&(delete S.paidAlready,z(Object(o.a)({},S)))):N(!0)}}),Object(r.jsx)("label",{htmlFor:"hasDeposit",children:"Prida\u0165 z\xe1lohu"})]}),E&&Object(r.jsx)(O.a,{label:"Zaplaten\xe1 z\xe1loha",name:"paidAlready",type:"text",value:null!==(t=null===S||void 0===S?void 0:S.paidAlready)&&void 0!==t?t:"",onChange:function(n){return T(n)}})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Inform\xe1cie o doru\u010den\xed"}),Object(r.jsx)(Xn,{label:"Doru\u010di\u0165 na adresu",isActive:null===S||void 0===S?void 0:S.shouldDeliver,handleClick:function(){return T({target:{name:"shouldDeliver",value:!(null===S||void 0===S?void 0:S.shouldDeliver)||!(null===S||void 0===S?void 0:S.shouldDeliver)}})}}),Object(r.jsx)(Xn,{label:"N\xe1kup na firmu",isActive:null===S||void 0===S?void 0:S.buyingAsCompany,handleClick:function(){return T({target:{name:"buyingAsCompany",value:!(null===S||void 0===S?void 0:S.buyingAsCompany)||!(null===S||void 0===S?void 0:S.buyingAsCompany)}})}}),(null===S||void 0===S?void 0:S.shouldDeliver)&&Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Adresa"}),Object(r.jsx)("p",{children:f.user.psc}),Object(r.jsx)("p",{children:f.user.address}),Object(r.jsx)("p",{children:f.user.city}),Object(r.jsx)("p",{children:f.user.country}),Object(r.jsxs)("div",{children:[Object(r.jsxs)(Yn,{children:[Object(r.jsx)("input",{id:"overwrite",name:"overwrite",type:"checkbox",value:F,onChange:function(){F?(R(!1),S.overwrite&&(delete S.overwrite,z(Object(o.a)({},S)))):R(!0)}}),Object(r.jsx)("label",{htmlFor:"overwrite",children:"In\xe1 adresa"})]}),F&&Object(r.jsxs)("div",{children:[Object(r.jsx)(O.a,{label:"Adresa",name:"address",type:"text",value:null!==(i=null===S||void 0===S||null===(s=S.overwrite)||void 0===s?void 0:s.address)&&void 0!==i?i:"",onChange:function(n){return H(n)}}),Object(r.jsx)(O.a,{label:"PS\u010c",name:"psc",type:"text",value:null!==(l=null===S||void 0===S||null===(u=S.overwrite)||void 0===u?void 0:u.psc)&&void 0!==l?l:"",onChange:function(n){return H(n)}}),Object(r.jsx)(O.a,{label:"Mesto",name:"city",type:"text",value:null!==(b=null===S||void 0===S||null===(j=S.overwrite)||void 0===j?void 0:j.city)&&void 0!==b?b:"",onChange:function(n){return H(n)}}),Object(r.jsx)(O.a,{label:"\u0160t\xe1t",name:"country",type:"text",value:null!==(v=null===S||void 0===S||null===(h=S.overwrite)||void 0===h?void 0:h.country)&&void 0!==v?v:"",onChange:function(n){return H(n)}})]})]})]})]}),Object(r.jsx)(Wn,{onClick:function(n){if(n.preventDefault(),k){var e=Object(o.a)({},S);delete e.paymentType,delete e.shouldDeliver,y(!1),w(e,f.order._id)}else{var t=Object(o.a)(Object(o.a)({},S),{},{user:f.user._id,combinedProducts:x.map((function(n){return n._id})),status:E?"half-paid":"paid"});S.paidAlready&&(t=Object(o.a)(Object(o.a)({},t),{},{paidAlready:p(S.paidAlready)})),console.log(t),y(!1),g(t)}},children:"Vytvori\u0165 objedn\xe1vku"})]})]})},ee=t(53),te=function(n){var e=n.productId,t=Object(ee.b)("api/store/products",e,!e),c=t.isLoading,o=t.response;return Object(r.jsx)("span",{style:{whiteSpace:"nowrap"},children:c?"H\u013eadam...":o.product.name.slice(0,6).concat("...")})},re=function(n){var e=n.lensesId,t=Object(ee.b)("api/store/lenses",e,!e),c=t.isLoading,o=t.response;return Object(r.jsx)("span",{style:{whiteSpace:"nowrap"},children:c?"H\u013eadam...":o.lenses.name.slice(0,8).concat("...")})},ce=t(56);function oe(){var n=Object(f.a)(["\n    &:not(:last-child) {\n        margin-right: .5rem;\n    }\n\n    &:last-child {\n        background-color: var(--primary-color);\n        font-weight: bolder;\n    }\n"]);return oe=function(){return n},n}function ie(){var n=Object(f.a)(["\n    padding: 2rem;\n    border-radius: .5rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n    margin-bottom: 3rem;\n\n\n    h3 {\n        margin-bottom: 1rem;\n    }\n"]);return ie=function(){return n},n}function ae(){var n=Object(f.a)(["\n    padding: 2rem;\n    border-radius: .5rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n    margin-bottom: 3rem;\n\n    h3 {\n        margin-bottom: 1rem;\n    }\n\n    h4 {\n        margin-top: 1rem;\n        margin-bottom: .5rem;\n    }\n\n    div {\n        p {\n            opacity: .83;\n        }\n\n        &:not(:last-child) {\n            margin-bottom: 1rem;\n        }\n\n        a {\n            background-color: #000;\n            color: #fff;\n            display: inline-block;\n            padding: .5rem 2.5rem;\n            margin-top: 1rem;\n        }\n    }\n\n"]);return ae=function(){return n},n}function de(){var n=Object(f.a)(["\n    opacity: .83;\n    font-size: 1.4rem;\n    margin-left: 1.5rem;\n\n    &:not(:last-child) {\n        margin-bottom: .5rem;\n    }\n"]);return de=function(){return n},n}function se(){var n=Object(f.a)(["\n    padding: 2rem;\n    border-radius: .5rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n\n\n    h3 {\n        margin-bottom: .5rem;\n    }\n\n    h4 {\n        margin-top: 1rem;\n        margin-bottom: .5rem;\n    }\n\n"]);return se=function(){return n},n}function le(){var n=Object(f.a)(["\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    grid-gap: 3rem;\n    align-items: start;\n"]);return le=function(){return n},n}function ue(){var n=Object(f.a)(["\n    margin-top: 2rem;\n    display:flex;\n    justify-content: flex-end;\n    align-items: center;\n\n    span {\n        display: block;\n        margin-right: .5rem;\n        \n    }\n\n    p {\n        font-weight: bolder;\n        font-size: 2.5rem;\n    }\n"]);return ue=function(){return n},n}function be(){var n=Object(f.a)(["\n    padding: 2rem;\n    text-align: center;\n\n    img {\n        width: 5rem;\n    }\n"]);return be=function(){return n},n}function je(){var n=Object(f.a)(["\n    display: grid;\n    align-content: center;\n    grid-template-columns: 5rem 1fr 10rem 10rem 1fr 10rem 10rem 10rem 10rem;\n    /* box-shadow: 0 0 1.5rem 0 rgba(0,0,0, 0.08); */\n    /* margin-bottom: 1rem; */\n"]);return je=function(){return n},n}function ve(){var n=Object(f.a)(["\n    display: grid;\n    align-content: center;\n    grid-template-columns: 5rem 1fr 10rem 10rem 1fr 10rem 10rem 10rem 10rem;\n    font-weight: bolder;\n    border-bottom: 1px solid var(--secondary-text-color);\n"]);return ve=function(){return n},n}function he(){var n=Object(f.a)(["\n    margin-bottom: 3rem;\n"]);return he=function(){return n},n}function me(){var n=Object(f.a)(["\n    padding: 2rem;\n    border-radius: .5rem;\n    box-shadow: var(--container-shadow);\n    margin-bottom: 3rem;\n    background-color: var(--container-background-color);\n\n"]);return me=function(){return n},n}var Oe=x.c.div(me()),pe=x.c.h3(he()),fe=x.c.div(ve()),xe=x.c.div(je()),ge=x.c.div(be()),ye=x.c.div(ue()),ke=x.c.div(le()),we=x.c.div(se()),Ce=x.c.p(de()),Pe=x.c.div(ae()),Se=x.c.div(ie()),ze=Object(x.c)(y.a)(oe()),De=function(n){var e,t,c,o,i,s,l,u,b,j,v,h,m,O,p,f,x,g,y=n.order,k=n.combinedProducts,w=n.addNextProduct,C=n.setHasChanged,P=n.isUpdating,S=Object(d.useContext)(Tn.OrdersContext),z=S.createOrder,D=S.updateOrder,L=Object(d.useState)(!1),E=Object(a.a)(L,2),N=E[0],A=E[1],M=Object(d.useState)(0),F=Object(a.a)(M,2),R=F[0],T=F[1],H=new Date(null===y||void 0===y||null===(e=y.order)||void 0===e?void 0:e.date);console.log(y),console.log(k),Object(d.useEffect)((function(){k&&T(k.reduce((function(n,e){return n+e.discountedPrice}),0))}),[k]);var I;return Object(r.jsxs)("div",{children:[N&&Object(r.jsx)(ne,{close:function(){return A(!1)},order:y,combinedProducts:k,createOrder:z,setHasChanged:C,isUpdating:P,updateOrder:D}),Object(r.jsxs)(Oe,{children:[Object(r.jsx)(pe,{children:"Preh\u013aad objedn\xe1vky"}),Object(r.jsxs)(fe,{children:[Object(r.jsx)(ge,{children:"#"}),Object(r.jsx)(ge,{children:"ProduktID"}),Object(r.jsx)(ge,{children:"Cena"}),Object(r.jsx)(ge,{children:"Po zlave"}),Object(r.jsx)(ge,{children:"\u0160osovkyID"}),Object(r.jsx)(ge,{children:"Cena"}),Object(r.jsx)(ge,{children:"Po zlave"}),Object(r.jsx)(ge,{children:"Dohromady"}),Object(r.jsx)(ge,{children:"Po zlave"})]}),k.map((function(n,e){var t,c,o,i;return Object(r.jsxs)(xe,{children:[Object(r.jsx)(ge,{children:e+1}),Object(r.jsx)(ge,{children:(null===n||void 0===n?void 0:n.product)?Object(r.jsx)(te,{productId:null===n||void 0===n?void 0:n.product}):""}),Object(r.jsx)(ge,{children:(null===n||void 0===n?void 0:n.productPrice)?"".concat(((null===n||void 0===n||null===(t=n.productPrice)||void 0===t?void 0:t.full)/100).toFixed(2),"\u20ac"):""}),Object(r.jsx)(ge,{children:(null===n||void 0===n?void 0:n.productPrice)?"".concat(((null===n||void 0===n||null===(c=n.productPrice)||void 0===c?void 0:c.discounted)/100).toFixed(2),"\u20ac"):""}),Object(r.jsx)(ge,{children:(null===n||void 0===n?void 0:n.lens)?Object(r.jsx)(re,{lensesId:null===n||void 0===n?void 0:n.lens}):""}),Object(r.jsx)(ge,{children:(null===n||void 0===n?void 0:n.lensPrice)?"".concat(((null===n||void 0===n||null===(o=n.lensPrice)||void 0===o?void 0:o.full)/100).toFixed(2),"\u20ac"):""}),Object(r.jsx)(ge,{children:(null===n||void 0===n?void 0:n.lensPrice)?"".concat(((null===n||void 0===n||null===(i=n.lensPrice)||void 0===i?void 0:i.discounted)/100).toFixed(2),"\u20ac"):""}),Object(r.jsx)(ge,{children:(null===n||void 0===n?void 0:n.price)?"".concat(((null===n||void 0===n?void 0:n.price)/100).toFixed(2),"\u20ac"):""}),Object(r.jsxs)(ge,{children:[((null===n||void 0===n?void 0:n.discountedPrice)/100).toFixed(2),"\u20ac"]})]},e)})),Object(r.jsx)(ye,{children:Object(r.jsxs)("p",{children:["Spolu: ",(R/100).toFixed(2),"\u20ac"]})})]}),Object(r.jsxs)(ke,{children:[Object(r.jsxs)(we,{children:[Object(r.jsx)("h3",{children:"Z\xe1kaznik"}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Meno a prizvisko"}),Object(r.jsx)(Ce,{children:null===y||void 0===y||null===(t=y.user)||void 0===t?void 0:t.name})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Adresa"}),Object(r.jsx)(Ce,{children:null===y||void 0===y||null===(c=y.user)||void 0===c?void 0:c.psc}),Object(r.jsx)(Ce,{children:null===y||void 0===y||null===(o=y.user)||void 0===o?void 0:o.address}),Object(r.jsx)(Ce,{children:null===y||void 0===y||null===(i=y.user)||void 0===i?void 0:i.city}),Object(r.jsx)(Ce,{children:null===y||void 0===y||null===(s=y.user)||void 0===s?void 0:s.country})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Kontakt"}),Object(r.jsx)(Ce,{children:null===y||void 0===y||null===(l=y.user)||void 0===l?void 0:l.email}),Object(r.jsx)(Ce,{children:null===y||void 0===y||null===(u=y.user)||void 0===u?void 0:u.phone})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Parametre"}),y&&y.user&&Object(r.jsx)(Cn.a,{parameters:null===y||void 0===y||null===(b=y.user)||void 0===b?void 0:b.lenses,disabledInputs:!0})]})]}),Object(r.jsxs)("div",{children:[!P&&Object(r.jsxs)(Se,{children:[Object(r.jsx)("h3",{children:"Mo\u017enosti"}),Object(r.jsx)(ze,{onClick:w,children:"Prida\u0165 produkt"}),Object(r.jsx)(ze,{onClick:function(){return A(!0)},children:"Vytvori\u0165 objednavku"})]}),P&&Object(r.jsxs)(Se,{children:[Object(r.jsx)("h3",{children:"Mo\u017enosti"}),Object(r.jsx)(ze,{onClick:function(){return A(!0)},children:"Upravi\u0165 objednavku"})]}),P&&(null===y||void 0===y||null===(j=y.order)||void 0===j?void 0:j.overwrite)&&Object(r.jsxs)(Pe,{children:[Object(r.jsx)("h3",{children:"Doru\u010dovacia adresa"}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Adresa"}),Object(r.jsx)(Ce,{children:null===y||void 0===y||null===(v=y.order)||void 0===v||null===(h=v.overwrite)||void 0===h?void 0:h.psc}),Object(r.jsx)(Ce,{children:null===y||void 0===y||null===(m=y.order)||void 0===m||null===(O=m.overwrite)||void 0===O?void 0:O.address}),Object(r.jsx)(Ce,{children:null===y||void 0===y||null===(p=y.order)||void 0===p||null===(f=p.overwrite)||void 0===f?void 0:f.city}),Object(r.jsx)(Ce,{children:null===y||void 0===y||null===(x=y.order)||void 0===x||null===(g=x.overwrite)||void 0===g?void 0:g.country})]})]}),y.order&&Object(r.jsxs)(Pe,{children:[Object(r.jsx)("h3",{children:"Detaily objedn\xe1vky"}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"D\xe1tum objedn\xe1vky"}),Object(r.jsx)(Ce,{children:H.toLocaleDateString("sk-SK",{weekday:"long",month:"long",day:"numeric"})})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Doru\u010di\u0165 na adresu"}),Object(r.jsx)(Ce,{children:y.order.shouldDeliver?"\xc1no":"Nie"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"N\xe1kup na firmu"}),Object(r.jsx)(Ce,{children:y.order.buyingAsCompany?"\xc1no":"Nie"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Sp\xf4sob \xfahrady"}),Object(r.jsx)(Ce,{children:(I=y.order.paymentType,"cash"===I?"Hotovos\u0165":"card"===I?"Karta":"coupon"===I?"Kup\xf3n":I)})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Stav objedn\xe1vky"}),Object(r.jsx)(Ce,{children:"half-paid"===y.order.status?"Z\xe1loha: ".concat((y.order.paidAlready/100).toFixed(2),"\u20ac"):"Zaplaten\xe9"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Vybavuje prev\xe1dzka"}),Object(r.jsx)(Ce,{children:0===y.order.premises?"Neuveden\xe9":ce.n[y.order.premises-1]})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"PDF"}),Object(r.jsx)("a",{href:"".concat("http://195.110.58.166:8080","/uploads/pdf/").concat(y.order.pdfPath),target:"_blank",rel:"noreferrer noopener",children:"Zobraz PDF"})]})]})]})]})]})},Le=t(14);function Ee(){var n=Object(f.a)(["\n    display: flex;\n    justify-content: space-between;\n\n    ","\n    padding-top: 3rem;\n    padding-bottom: 3rem;\n\n    h1 {\n        color: var(--primary-text-color);\n    }\n\n    @media all and (max-width: 800px) {\n        flex-wrap: wrap;\n\n        div:nth-child(2) {\n            margin-bottom: 2rem;\n        }\n    }\n"]);return Ee=function(){return n},n}var Ne=x.c.div(Ee(),Le.e);e.default=function(){var n,e=Object(l.i)(),t=e.userId,j=e.orderId,v=Object(d.useState)("selectUser"),h=Object(a.a)(v,2),m=h[0],O=h[1],p=Object(d.useState)({}),f=Object(a.a)(p,2),x=f[0],g=f[1],y=Object(d.useState)(!1),k=Object(a.a)(y,2),w=k[0],C=k[1],P=Object(d.useState)(!1),S=Object(a.a)(P,2),z=S[0],D=S[1],L=Object(d.useState)(!1),E=Object(a.a)(L,2),N=E[0],A=E[1],M=Object(d.useState)([]),F=Object(a.a)(M,2),R=F[0],T=F[1],H=function(n){C(!0);var e=n.name,t=n.value;g(Object(o.a)(Object(o.a)({},x),{},Object(c.a)({},e,t)))},I=Object(d.useContext)(s.a),U=I.getMessage,_=I.setShowModal,K=I.closeModal,Z=I.isLoading,B=I.showModal,J=I.message,q=Object(ee.b)("api/admin/orders",j);return Object(d.useEffect)((function(){"nova-objednavka"!==t&&j&&(A(!0),O("summary"),q.response&&(g(Object(o.a)(Object(o.a)({},x),{},{order:q.response.order,user:q.response.order.orderedBy})),T(q.response.order.combinedProducts)))}),[t,j,q.response]),Object(d.useEffect)((function(){"nova-objednavka"!==t||j||x.user&&O("findProduct")}),[x.user]),Object(d.useEffect)((function(){return function(){O("selectUser"),g({}),C(!1),D(!1),T([]),A(!1)}}),[]),Object(r.jsxs)("section",{children:[Object(r.jsx)(l.a,{when:w,message:"M\xe1te nedokon\u010den\xfa objedn\xe1vku, skuto\u010dne chcete od\xeds\u0165?"}),B&&Object(r.jsx)(b.a,{loading:Z,title:J,close:K}),z&&Object(r.jsx)(V,{order:x,close:function(){return D(!1)},addCombineProduct:function(n){T([].concat(Object(i.a)(R),[n]))},next:function(){O("summary"),D(!1)}}),Object(r.jsx)(Ne,{children:Object(r.jsx)("div",{children:Object(r.jsx)("h1",{children:N?"Objednavka \u010d\xedslo ".concat(null===x||void 0===x||null===(n=x.order)||void 0===n?void 0:n.customId):"Nov\xe1 objedn\xe1vka"})})}),Object(r.jsx)(u.a,{children:Object(r.jsxs)("div",{children:["selectUser"===m&&Object(r.jsx)(on,{next:function(){return O("findProduct")},addToOrder:H}),"findProduct"===m&&Object(r.jsx)(wn,{back:function(){return O("selectUser")},next:O,addToOrder:H,showErrorMessage:function(n){U(n),_(!0)},showModal:function(){return D(!0)}}),"selectLenses"===m&&Object(r.jsx)(Rn,{back:function(){return O("findProduct")},next:function(){return O("summary")},addToOrder:H,order:x,showModal:function(){return D(!0)}}),"summary"===m&&Object(r.jsx)(De,{order:x,isUpdating:N,combinedProducts:R,back:function(){return O("selectLenses")},addNextProduct:function(){O("findProduct"),(null===x||void 0===x?void 0:x.product)&&((null===x||void 0===x?void 0:x.lenses)?(delete x.lenses,delete x.product):delete x.product,g(Object(o.a)({},x)))},setHasChanged:C})]})})]})}},66:function(n,e,t){"use strict";t.r(e),t.d(e,"OrdersContext",(function(){return j}));var r=t(2),c=t(21),o=t(7),i=t.n(o),a=t(12),d=t(10),s=t(1),l=t(3),u=t(19),b=t(18),j=Object(s.createContext)({orders:null,getOrders:function(){},createOrder:function(){},updateOrder:function(){},finishOrder:function(){}});e.default=function(n){var e=n.children,t=Object(l.h)().push,o=Object(s.useContext)(b.a),v=o.setIsLoading,h=o.setShowModal,m=o.getMessage,O=o.closeModal,p=Object(s.useContext)(u.a).token,f=Object(s.useState)(null),x=Object(d.a)(f,2),g=x[0],y=x[1],k=new Headers;k.append("auth-token",p),k.append("Content-Type","application/json");var w=function(){var n=Object(a.a)(i.a.mark((function n(){var e,t,r;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return v(!0),h(!0),e={method:"GET",headers:k,redirect:"follow"},n.prev=3,n.next=6,fetch("".concat("http://195.110.58.166:8080","/api/admin/orders"),e);case 6:return t=n.sent,n.next=9,t.json();case 9:if(r=n.sent,console.log(r),!r.orders){n.next=15;break}return y(r.orders),O(),n.abrupt("return");case 15:m(r.message),v(!1),n.next=24;break;case 19:n.prev=19,n.t0=n.catch(3),console.log(n.t0),m("Nieco sa pokazilo"),v(!1);case 24:case"end":return n.stop()}}),n,null,[[3,19]])})));return function(){return n.apply(this,arguments)}}(),C=function(){var n=Object(a.a)(i.a.mark((function n(e){var r,o,a,d,s;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return v(!0),h(!0),r=Object(c.a)({},e),console.log("ORDER BEFORE SEND"),console.log(r),o=JSON.stringify(r),a={method:"POST",headers:k,body:o,redirect:"follow"},n.prev=7,n.next=10,fetch("".concat("http://195.110.58.166:8080","/api/admin/orders"),a);case 10:return d=n.sent,n.next=13,d.json();case 13:s=n.sent,console.log(s),s.order&&(w(),O(),t("/dashboard/objednavky")),m(s.message),v(!1),n.next=25;break;case 20:n.prev=20,n.t0=n.catch(7),console.log(n.t0),m("Nieco sa pokazilo"),v(!1);case 25:case"end":return n.stop()}}),n,null,[[7,20]])})));return function(e){return n.apply(this,arguments)}}(),P=function(){var n=Object(a.a)(i.a.mark((function n(e,r){var o,a,d,s,l;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return v(!0),h(!0),o=Object(c.a)({},e),console.log("ORDER BEFORE SEND"),console.log(o),a=JSON.stringify(o),d={method:"PATCH",headers:k,body:a,redirect:"follow"},n.prev=7,n.next=10,fetch("".concat("http://195.110.58.166:8080","/api/admin/orders/").concat(r),d);case 10:return s=n.sent,n.next=13,s.json();case 13:l=n.sent,console.log(l),l.order&&(w(),O(),t("/dashboard/objednavky")),m(l.message),v(!1),n.next=25;break;case 20:n.prev=20,n.t0=n.catch(7),console.log(n.t0),m("Nieco sa pokazilo"),v(!1);case 25:case"end":return n.stop()}}),n,null,[[7,20]])})));return function(e,t){return n.apply(this,arguments)}}(),S=function(){var n=Object(a.a)(i.a.mark((function n(e){var t,r,c;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return v(!0),h(!0),t={method:"POST",headers:k,redirect:"follow"},n.prev=3,n.next=6,fetch("".concat("http://195.110.58.166:8080","/api/admin/orders/").concat(e,"/fulfill"),t);case 6:return r=n.sent,n.next=9,r.json();case 9:if(c=n.sent,console.log(c),"undelegated-order"!==c.error){n.next=15;break}return v(!1),m("Objedn\xe1vka nem\xf4\u017ee by\u0165 dokon\u010den\xe1 ak nieje priraden\xe1 k prev\xe1dzke"),n.abrupt("return");case 15:if(!c.order){n.next=18;break}return O(),n.abrupt("return");case 18:m(c.message),v(!1),n.next=27;break;case 22:n.prev=22,n.t0=n.catch(3),console.log(n.t0),m("Nieco sa pokazilo"),v(!1);case 27:case"end":return n.stop()}}),n,null,[[3,22]])})));return function(e){return n.apply(this,arguments)}}();return Object(r.jsx)(j.Provider,{value:{orders:g,getOrders:w,createOrder:C,updateOrder:P,finishOrder:S},children:e})}}}]);
//# sourceMappingURL=20.b8bdf301.chunk.js.map