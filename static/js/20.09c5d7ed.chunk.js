(this.webpackJsonpimooptik=this.webpackJsonpimooptik||[]).push([[20],{55:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"g",(function(){return r})),n.d(t,"h",(function(){return o})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return u})),n.d(t,"f",(function(){return i})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return d}));var a=["Adidas","Armani Exchange","Arnette","Blackfin","Blumarine","Burberry","Bvlgari","Calvin Klein","Carolina Herrera","Carrera","David Beckham","Dior","Dolce & Gabbana","Elle","Emporio Armani","Esprit","Etnia Barcelona","Fendi","Fossil","Furla","Giorgio Armani","Givenchy","Gucci","Guess","H.I.S","Hawkers","Hugo Boss","Jaguar","Jimmy Choo","Lacoste","Liu Jo","Marc Jacobs","Max Mara","Max&Co","Meller","Mexx","Michael Kors","Moschino","Oakley","Persol","Polaroid","Police","Polo Ralph Lauren","Prada","Prada Linea Rossa","Ralph","Ralph Lauren","Ray-Ban","Salvatore Ferragamo","Smith","Strellson","Tiffany&Co.","Tom Ford","Tommy Hilfiger","Versace","Vogue"],r=["eshop","Centr\xe1lny sklad","Obchodn\xe1, Bratislava","Mileti\u010dova, Bratislava","Vajnory, Bratislava","Vajnorsk\xe1 53, Bratislava","OC Bran\u010d, Senica"],o=[{id:0,name:"V\u0161etky"},{id:1,name:"Centr\xe1lny sklad"},{id:2,name:"Obchodn\xe1, Bratislava"},{id:3,name:"Mileti\u010dova, Bratislava"},{id:4,name:"Vajnory, Bratislava"},{id:5,name:"Vajnorsk\xe1 53, Bratislava"},{id:6,name:"OC Bran\u010d, Senica"}],c=["\u010ciern\xe1","Modr\xe1","\u010cerven\xe1","Siv\xe1","Zlat\xe1","Strieborn\xe1","Hned\xe1","Fialov\xe1","Zelen\xe1","Sed\xe1","Bordov\xe1"],u=["Acet\xe1t","Kov","Tit\xe1n","TR90","Patent","Optyl"],i=["Pilot","Squared","Browline","Cat eye","Tiny","Oversize","Okr\xfahle","Ov\xe1lne","Obd\u013a\u017enikov\xe9","Flat top","\u0160peci\xe1lne"],s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e.toString();var t=0;return e.includes(",")?1===e.split(",")[1].length?(t=e.split(",")[0]+e.split(",")[1]+"0",Number(t)):(t=e.split(",")[0]+e.split(",")[1],Number(t)):Number(100*e)},d=function(e){return e.includes(",")?e.split(",")[0]+"."+e.split(",")[1]:e}},57:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(22);var r=n(33);function o(e){return function(e){if(Array.isArray(e))return Object(a.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(r.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},69:function(e,t,n){"use strict";n.r(t),n.d(t,"OrderContext",(function(){return O}));var a=n(2),r=n(8),o=n.n(r),c=n(12),u=n(31),i=n(57),s=n(13),d=n(5),l=n(1),f=n(19),b=n(20),p=n(55),O=Object(l.createContext)({step:"",order:{},cart:[],selectedProduct:null,setOrder:function(){},addUser:function(){},addProduct:function(){},addProductDiscount:function(){},addLensesParameters:function(){},deleteProduct:function(){},addLenses:function(){},addLensesDiscount:function(){},resetOrder:function(){},changeStep:function(){},selectProduct:function(){},createCombinedProducts:function(){},incrementQuantity:function(){},decrementQuantity:function(){},incrementProductQuantity:function(){},decrementProductQuantity:function(){}});t.default=function(e){var t=e.children,n=Object(l.useContext)(b.a).token,r=Object(l.useContext)(f.a),j=r.closeModal,m=r.getMessage,v=r.setIsLoading,h=r.setShowModal,y=Object(l.useState)("select-user"),P=Object(d.a)(y,2),g=P[0],k=P[1],S=Object(l.useState)({}),B=Object(d.a)(S,2),Q=B[0],C=B[1],M=Object(l.useState)([]),x=Object(d.a)(M,2),L=x[0],w=x[1],A=Object(l.useState)(null),T=Object(d.a)(A,2),E=T[0],D=T[1],F=function(e){C(Object(s.a)(Object(s.a)({},Q),{},{combinedProducts:Object(i.a)(e)}))};console.log(L);var H=function(e){k(e)},J=function(){var e=Object(c.a)(o.a.mark((function e(){var t,a,r,c,u,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==L.length){e.next=2;break}return e.abrupt("return");case 2:return v(!0),h(!0),t=[],L.forEach((function(e){Object(i.a)(Array(e.productQuant)).forEach((function(){t.push(Object(s.a)(Object(s.a)(Object(s.a)(Object(s.a)({product:e.product.isPseudo?"pseudo":e.product._id},e.discount&&{discount:Object(s.a)(Object(s.a)({},e.discount.product&&{product:e.discount.product.flat?{flat:Object(p.b)(e.discount.product.flat)}:Object(s.a)({},e.discount.product)}),e.discount.lenses&&{lenses:e.discount.lenses.flat?{flat:Object(p.b)(e.discount.lenses.flat)}:Object(s.a)({},e.discount.lenses)})}),e.lens&&{lens:e.lens._id}),e.lensesQuant&&{lensesQuant:e.lensesQuant}),e.lenses&&{contactLenses:e.lenses}))}))})),console.log(t),(a=new Headers).append("auth-token",n),a.append("Content-Type","application/json"),r=JSON.stringify({combinedProducts:t}),c={method:"POST",headers:a,body:r,redirect:"follow"},e.prev=12,e.next=15,fetch("".concat("https://imooptik-backend-jbuievsjdq-ew.a.run.app","/api/store/combinedProducts/createMany"),c);case 15:return u=e.sent,e.next=18,u.json();case 18:if(d=e.sent,console.log(d),!d.combinedProducts){e.next=25;break}return F(d.combinedProducts),j(),H("summary"),e.abrupt("return");case 25:v(!1),m(d.messageSK),e.next=34;break;case 29:e.prev=29,e.t0=e.catch(12),console.log(e.t0),m("Nieco sa pokazilo"),v(!1);case 34:case"end":return e.stop()}}),e,null,[[12,29]])})));return function(){return e.apply(this,arguments)}}();return Object(a.jsx)(O.Provider,{value:{step:g,order:Q,cart:L,selectedProduct:E,setOrder:C,addUser:function(e){C(Object(s.a)(Object(s.a)({},Q),{},{user:e}))},addProduct:function(e){w((function(t){return[].concat(Object(i.a)(t),[{product:e,productQuant:1}])}))},addProductDiscount:function(e,t,n){if(""===n){var a=L.map((function(t,n){return e===n?Object.keys(t.discount).length>1?(delete t.discount.product,t):(delete t.discount,t):t}));w(a)}else{var r=L.map((function(a,r){return e===r?Object(s.a)(Object(s.a)({},a),{},{discount:Object(s.a)(Object(s.a)({},a.discount),{},{product:Object(u.a)({},t,n)})}):a}));w(r)}},addLensesParameters:function(e,t){var n=L.map((function(n,a){return e===a&&Object.keys(t).length>0?Object(s.a)(Object(s.a)({},n),{},{lenses:Object(s.a)({},t)}):n}));w(n)},deleteProduct:function(e,t){var n=L.filter((function(t,n){return n!==e}));w(n),t&&setTimeout((function(){t(null)}),100)},addLenses:function(e){if(null!==e||null!==E){if(null!==E){var t=L.map((function(t,n){return n===E?null===e?(delete t.lensesQuant,delete t.lens,t):Object(s.a)(Object(s.a)({},t),{},{lens:e,lensesQuant:2}):t}));w(t)}else w((function(t){return[].concat(Object(i.a)(t),[{product:{_id:Math.floor(10*Math.random()),isPseudo:!0},lens:e,lensesQuant:1}])}));D(null)}},addLensesDiscount:function(e,t,n){if(""===n){var a=L.map((function(t,n){return e===n?Object.keys(t.discount).length>1?(delete t.discount.product,t):(delete t.discount,t):t}));w(a)}else{var r=L.map((function(a,r){return e===r?Object(s.a)(Object(s.a)({},a),{},{discount:Object(s.a)(Object(s.a)({},a.discount),{},{lenses:Object(u.a)({},t,n)})}):a}));w(r)}},resetOrder:function(){C({})},changeStep:H,selectProduct:function(e,t){D(E===e?null:e)},createCombinedProducts:J,incrementQuantity:function(e,t,n){n.stopPropagation();var a=L.map((function(n,a){return t===a?Object(s.a)(Object(s.a)({},n),{},{lensesQuant:e+1}):n}));w(a)},decrementQuantity:function(e,t,n){if(n.stopPropagation(),1!==e){var a=L.map((function(n,a){return t===a?Object(s.a)(Object(s.a)({},n),{},{lensesQuant:e-1}):n}));w(a)}},incrementProductQuantity:function(e,t,n){n.stopPropagation();var a=L.map((function(n,a){return t===a?Object(s.a)(Object(s.a)({},n),{},{productQuant:e+1}):n}));w(a)},decrementProductQuantity:function(e,t,n){if(n.stopPropagation(),1!==e){var a=L.map((function(n,a){return t===a?Object(s.a)(Object(s.a)({},n),{},{productQuant:e-1}):n}));w(a)}}},children:t})}}}]);
//# sourceMappingURL=20.09c5d7ed.chunk.js.map