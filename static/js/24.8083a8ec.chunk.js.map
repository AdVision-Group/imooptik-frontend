{"version":3,"sources":["utils/warehouse.utils.jsx","context/coupons/coupons.context.jsx"],"names":["brands","retailNames","retailNamesTabs","id","name","glassesColors","glassesMaterials","glassesShapes","formatPrice","price","toString","value","includes","split","length","Number","formatfloatNumber","number","CouponsContext","createContext","coupon","coupons","handleChange","getCoupon","getCoupons","createCoupon","deleteCoupon","isUpdating","resetCoupons","initCouponObj","code","type","maxUses","minValue","maxUsesTotal","CouponsProvider","children","useContext","LoadingModalContext","closeModal","getMessage","setIsLoading","setShowModal","token","AuthContext","push","useHistory","myHeaders","Headers","append","useState","setCoupon","setCoupons","setIsupdating","a","requestOptions","method","headers","redirect","fetch","process","response","json","data","message","console","log","couponToCreate","raw","JSON","stringify","undefined","body","error","ok","Provider","e","target"],"mappings":"sGAAA,gRAAO,IAAMA,EAAS,CAClB,SACA,kBACA,UACA,WACA,YACA,WACA,UACA,eACA,mBACA,UACA,gBACA,OACA,kBACA,OACA,iBACA,SACA,kBACA,QACA,SACA,QACA,iBACA,WACA,QACA,QACA,QACA,UACA,YACA,SACA,aACA,UACA,SACA,cACA,WACA,SACA,SACA,OACA,eACA,WACA,SACA,SACA,WACA,SACA,oBACA,QACA,oBACA,QACA,eACA,UACA,sBACA,QACA,YACA,cACA,WACA,iBACA,UACA,SAoBSC,EAAc,CACvB,QACA,qBACA,0BACA,8BACA,sBACA,8BACA,yBAGSC,EAAkB,CAC3B,CACIC,GAAI,EACJC,KAAM,eAEV,CACID,GAAI,EACJC,KAAM,sBAEV,CACID,GAAI,EACJC,KAAM,2BAEV,CACID,GAAI,EACJC,KAAM,+BAEV,CACID,GAAI,EACJC,KAAM,uBAEV,CACID,GAAI,EACJC,KAAM,+BAEV,CACID,GAAI,EACJC,KAAM,0BAIDC,EAAgB,CACzB,iBACA,WACA,kBACA,UACA,WACA,gBACA,WACA,aACA,YACA,UACA,cAGSC,EAAmB,CAC5B,YACA,MACA,WACA,OACA,SACA,SAGSC,EAAgB,CACzB,QACA,UACA,WACA,UACA,OACA,WACA,aACA,YACA,2BACA,WACA,qBAGSC,EAAc,WAAiB,IAAhBC,EAAe,uDAAP,GAChCA,EAAMC,WACN,IAAIC,EAAQ,EACZ,OAAIF,EAAMG,SAAS,KACoB,IAA/BH,EAAMI,MAAM,KAAK,GAAGC,QACpBH,EAAQF,EAAMI,MAAM,KAAK,GAAKJ,EAAMI,MAAM,KAAK,GAAK,IAC7CE,OAAOJ,KAEdA,EAAQF,EAAMI,MAAM,KAAK,GAAKJ,EAAMI,MAAM,KAAK,GACxCE,OAAOJ,IAGXI,OAAe,IAARN,IAITO,EAAoB,SAAAC,GAG7B,OAAIA,EAAOL,SAAS,KACRK,EAAOJ,MAAM,KAAK,GAAK,IAAMI,EAAOJ,MAAM,KAAK,GAGhDI,I,sLC3KFC,EAAiBC,wBAAc,CACxCC,OAAQ,KACRC,QAAS,KACTC,aAAc,aACdC,UAAW,aACXC,WAAY,aACZC,aAAc,aAEdC,aAAc,aACdC,YAAY,EACZC,aAAc,eAGZC,EAAgB,CAClBC,KAAM,GACNC,KAAM,aACNpB,MAAO,EACPqB,QAAS,EACTC,SAAU,EACVC,aAAc,GA2NHC,UAvNS,SAAC,GAAkB,IAAhBC,EAAe,EAAfA,SAAe,EAMlCC,qBAAWC,KAJXC,EAFkC,EAElCA,WACAC,EAHkC,EAGlCA,WACAC,EAJkC,EAIlCA,aACAC,EALkC,EAKlCA,aAEIC,EAAUN,qBAAWO,KAArBD,MACAE,EAASC,cAATD,KAEFE,EAAY,IAAIC,QACtBD,EAAUE,OAAO,aAAcN,GAC/BI,EAAUE,OAAO,eAAgB,oBAZK,MAcVC,mBAASrB,GAdC,mBAc/BT,EAd+B,KAcvB+B,EAduB,OAeRD,mBAAS,MAfD,mBAe/B7B,EAf+B,KAetB+B,EAfsB,OAiBFF,oBAAS,GAjBP,mBAiB/BvB,EAjB+B,KAiBnB0B,EAjBmB,KA4BhC9B,EAAS,uCAAG,WAAOpB,GAAP,mBAAAmD,EAAA,6DACdD,GAAc,GACdZ,GAAa,GACbC,GAAa,GAEPa,EAAiB,CACnBC,OAAQ,MACRC,QAASV,EACTW,SAAU,UARA,kBAYaC,MAAM,GAAD,OAAIC,mDAAJ,8BAAgEzD,GAAMoD,GAZxF,cAYJM,EAZI,iBAaSA,EAASC,OAblB,aAaJC,EAbI,QAeD3C,OAfC,wBAgBN+B,EAAU,2BACH/B,GACA2C,EAAK3C,SAEZmB,IApBM,2BAwBVC,EAAWuB,EAAKC,SAChBvB,GAAa,GAzBH,kDA2BVwB,QAAQC,IAAR,MACA1B,EAAW,0BACXC,GAAa,GA7BH,0DAAH,sDAkCTjB,EAAU,uCAAG,gCAAA8B,EAAA,6DACfb,GAAa,GACbC,GAAa,GAEPa,EAAiB,CACnBC,OAAQ,MACRC,QAASV,EACTW,SAAU,UAPC,kBAWYC,MAAM,GAAD,OAAIC,mDAAJ,sBAAgEL,GAXjF,cAWLM,EAXK,gBAYQA,EAASC,OAZjB,QAYLC,EAZK,QAcF1C,SACL+B,EAAWW,EAAK1C,SAEpBoB,GAAa,GACbF,IAlBW,kDAoBX0B,QAAQC,IAAR,MACA1B,EAAW,0BACXC,GAAa,GAtBF,0DAAH,qDA0BVhB,EAAY,uCAAG,WAAO0C,GAAP,qBAAAb,EAAA,6DACjBb,GAAa,GACbC,GAAa,GAEbuB,QAAQC,IAAIC,EAAexD,OAErByD,EAAMC,KAAKC,UAAL,qCACRxC,KAAMqC,EAAerC,KACrBC,KAAMoC,EAAepC,MACjBoC,EAAexD,OAAU,CAAEA,MAA+B,SAAxBwD,EAAepC,KAAkBvB,YAAY2D,EAAexD,OAASI,OAAOoD,EAAexD,SAHzH,IAKRqB,QAAoC,KAA3BmC,EAAenC,SAA6C,MAA3BmC,EAAenC,aAAkBuC,EAAYxD,OAAOoD,EAAenC,UACzGmC,EAAelC,UAAa,CAAEA,SAAUzB,YAAY2D,EAAelC,YAN/D,IAORC,aAA8C,KAAhCiC,EAAejC,cAAuD,MAAhCiC,EAAejC,kBAAuBqC,EAAYxD,OAAOoD,EAAejC,iBAG1HqB,EAAiB,CACnBC,OAAQ,OACRC,QAASV,EACTyB,KAAMJ,EACNV,SAAU,UApBG,kBAwBUC,MAAM,GAAD,OAAIC,mDAAJ,6BAAuEL,GAxBtF,cAwBPM,EAxBO,iBAyBMA,EAASC,OAzBf,QA2BM,YAFbC,EAzBO,QA2BJU,OACLjC,EAAW,kCAEI,WAAfuB,EAAKU,OACLjC,EAAW,6BAGXqB,EAASa,KACTlD,IACAqB,EAAK,sBAITJ,GAAa,GAxCA,kDA0CbwB,QAAQC,IAAR,MACA1B,EAAW,0BACXC,GAAa,GA5CA,0DAAH,sDA2EZf,EAAY,uCAAG,WAAOvB,GAAP,iBAAAmD,EAAA,6DACjBb,GAAa,GACbC,GAAa,GAEPa,EAAiB,CACnBC,OAAQ,SACRC,QAASV,EACTW,SAAU,UAPG,kBAWUC,MAAM,GAAD,OAAIC,mDAAJ,8BAAgEzD,GAAMoD,GAXrF,cAWPM,EAXO,gBAYMA,EAASC,OAZf,cAcTD,EAASa,KACTlD,IACAqB,EAAK,sBAGTJ,GAAa,GAnBA,kDAqBbwB,QAAQC,IAAR,MACA1B,EAAW,0BACXC,GAAa,GAvBA,0DAAH,sDA2BZb,EAAY,uCAAG,sBAAA0B,EAAA,sDACjBD,GAAc,GACdF,EAAUtB,GAFO,2CAAH,qDAKlB,OACI,cAACX,EAAeyD,SAAhB,CACIhE,MAAO,CACHS,SACAC,UACAC,aArLS,SAACsD,GAAO,IAAD,EACAA,EAAEC,OAAlBzE,EADgB,EAChBA,KAAMO,EADU,EACVA,MAEdwC,EAAU,2BACH/B,GADE,kBAEJhB,EAAOO,MAiLJY,YACAC,aACAC,eAEAC,eACAC,aACAC,gBAXR,SAcKQ","file":"static/js/24.8083a8ec.chunk.js","sourcesContent":["export const brands = [\n    \"Adidas\",\n    \"Armani Exchange\",\n    \"Arnette\",\n    \"Blackfin\",\n    \"Blumarine\",\n    \"Burberry\",\n    \"Bvlgari\",\n    \"Calvin Klein\",\n    \"Carolina Herrera\",\n    \"Carrera\",\n    \"David Beckham\",\n    \"Dior\",\n    \"Dolce & Gabbana\",\n    \"Elle\",\n    \"Emporio Armani\",\n    \"Esprit\",\n    \"Etnia Barcelona\",\n    \"Fendi\",\n    \"Fossil\",\n    \"Furla\",\n    \"Giorgio Armani\",\n    \"Givenchy\",\n    \"Gucci\",\n    \"Guess\",\n    \"H.I.S\",\n    \"Hawkers\",\n    \"Hugo Boss\",\n    \"Jaguar\",\n    \"Jimmy Choo\",\n    \"Lacoste\",\n    \"Liu Jo\",\n    \"Marc Jacobs\",\n    \"Max Mara\",\n    \"Max&Co\",\n    \"Meller\",\n    \"Mexx\",\n    \"Michael Kors\",\n    \"Moschino\",\n    \"Oakley\",\n    \"Persol\",\n    \"Polaroid\",\n    \"Police\",\n    \"Polo Ralph Lauren\",\n    \"Prada\",\n    \"Prada Linea Rossa\",\n    \"Ralph\",\n    \"Ralph Lauren\",\n    \"Ray-Ban\",\n    \"Salvatore Ferragamo\",\n    \"Smith\",\n    \"Strellson\",\n    \"Tiffany&Co.\",\n    \"Tom Ford\",\n    \"Tommy Hilfiger\",\n    \"Versace\",\n    \"Vogue\"\n]\n\nexport const lensesBrands = [\n    \"Acuvue\",\n    \"Adore\",\n    \"Air Optix\",\n    \"Biofinity\",\n    \"Biomedics\",\n    \"Clariti\",\n    \"ColourVue\",\n    \"Comfilcon A\",\n    \"Dailies\",\n    \"Freshlook\",\n    \"Lenjoy\",\n    \"Proclear\",\n    \"Purevision\",\n    \"Soflens\",\n]\n\nexport const retailNames = [\n    \"eshop\",\n    \"Centrálny sklad\",\n    \"Obchodná, Bratislava\",\n    \"Miletičova, Bratislava\",\n    \"Vajnory, Bratislava\",\n    \"Vajnorská 53, Bratislava\",\n    \"OC Branč, Senica\"\n]\n\nexport const retailNamesTabs = [\n    {\n        id: 0,\n        name: \"Všetky\",\n    },\n    {\n        id: 1,\n        name: \"Centrálny sklad\",\n    },\n    {\n        id: 2,\n        name: \"Obchodná, Bratislava\",\n    },\n    {\n        id: 3,\n        name: \"Miletičova, Bratislava\",\n    },\n    {\n        id: 4,\n        name: \"Vajnory, Bratislava\",\n    },\n    {\n        id: 5,\n        name: \"Vajnorská 53, Bratislava\",\n    },\n    {\n        id: 6,\n        name: \"OC Branč, Senica\",\n    },\n]\n\nexport const glassesColors = [\n    \"Čierná\",\n    \"Modrá\",\n    \"Červená\",\n    \"Sivá\",\n    \"Zlatá\",\n    \"Strieborná\",\n    \"Hnedá\",\n    \"Fialová\",\n    \"Zelená\",\n    \"Sedá\",\n    \"Bordová\",\n]\n\nexport const glassesMaterials = [\n    \"Acetát\",\n    \"Kov\",\n    \"Titán\",\n    \"TR90\",\n    \"Patent\",\n    \"Optyl\",\n]\n\nexport const glassesShapes = [\n    \"Pilot\",\n    \"Squared\",\n    \"Browline\",\n    \"Cat eye\",\n    \"Tiny\",\n    \"Oversize\",\n    \"Okrúhle\",\n    \"Oválne\",\n    \"Obdĺžnikové\",\n    \"Flat top\",\n    \"Špeciálne\"\n]\n\nexport const formatPrice = (price = \"\") => {\n    price.toString()\n    let value = 0\n    if (price.includes(',')) {\n        if (price.split(',')[1].length === 1) {\n            value = price.split(',')[0] + price.split(',')[1] + \"0\"\n            return Number(value)\n        } else {\n            value = price.split(',')[0] + price.split(',')[1]\n            return Number(value)\n        }\n    } else {\n        return Number(price * 100)\n    }\n}\n\nexport const formatfloatNumber = number => {\n    let value = 0\n\n    if (number.includes(',')) {\n        value = number.split(',')[0] + '.' + number.split(',')[1]\n        return value\n    } else {\n        return number\n    }\n}","import React, { createContext, useContext, useState } from 'react'\nimport { LoadingModalContext } from '../loading-modal/loading-modal.contenxt'\nimport { AuthContext } from '../auth/auth.context'\nimport { useHistory } from 'react-router-dom'\nimport { formatPrice } from '../../utils/warehouse.utils'\n\nexport const CouponsContext = createContext({\n    coupon: null,\n    coupons: null,\n    handleChange: () => { },\n    getCoupon: () => { },\n    getCoupons: () => { },\n    createCoupon: () => { },\n    // updateCoupon: () => { },\n    deleteCoupon: () => { },\n    isUpdating: false,\n    resetCoupons: () => { }\n})\n\nconst initCouponObj = {\n    code: '',\n    type: 'percentage', // flat\n    value: 0,\n    maxUses: 0,\n    minValue: 0,\n    maxUsesTotal: 0\n}\n\n\nconst CouponsProvider = ({ children }) => {\n    const {\n        closeModal,\n        getMessage,\n        setIsLoading,\n        setShowModal\n    } = useContext(LoadingModalContext)\n    const { token } = useContext(AuthContext)\n    const { push } = useHistory()\n\n    const myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n    myHeaders.append(\"Content-Type\", \"application/json\");\n\n    const [coupon, setCoupon] = useState(initCouponObj)\n    const [coupons, setCoupons] = useState(null)\n\n    const [isUpdating, setIsupdating] = useState(false)\n\n    const handleChange = (e) => {\n        const { name, value } = e.target\n\n        setCoupon({\n            ...coupon,\n            [name]: value\n        })\n    }\n\n    const getCoupon = async (id) => {\n        setIsupdating(true)\n        setIsLoading(true)\n        setShowModal(true)\n\n        const requestOptions = {\n            method: 'GET',\n            headers: myHeaders,\n            redirect: 'follow'\n        };\n\n        try {\n            const response = await fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/coupons/${id}`, requestOptions)\n            const data = await response.json()\n\n            if (data.coupon) {\n                setCoupon({\n                    ...coupon,\n                    ...data.coupon\n                })\n                closeModal()\n                return\n            }\n\n            getMessage(data.message)\n            setIsLoading(false)\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Niečo sa pokazilo\")\n            setIsLoading(false)\n        }\n\n    }\n\n    const getCoupons = async () => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        const requestOptions = {\n            method: 'GET',\n            headers: myHeaders,\n            redirect: 'follow'\n        };\n\n        try {\n            const response = await fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/coupons`, requestOptions)\n            const data = await response.json()\n\n            if (data.coupons) {\n                setCoupons(data.coupons)\n            }\n            setIsLoading(false)\n            closeModal()\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Niečo sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    const createCoupon = async (couponToCreate) => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        console.log(couponToCreate.value)\n\n        const raw = JSON.stringify({\n            code: couponToCreate.code,\n            type: couponToCreate.type, // flat\n            ...(couponToCreate.value) && { value: couponToCreate.type === \"flat\" ? formatPrice(couponToCreate.value) : Number(couponToCreate.value) },\n            // value: couponToCreate.value === '' || couponToCreate.value === '0' ? undefined : Number(couponToCreate.value),\n            maxUses: couponToCreate.maxUses === '' || couponToCreate.maxUses === '0' ? undefined : Number(couponToCreate.maxUses),\n            ...(couponToCreate.minValue) && { minValue: formatPrice(couponToCreate.minValue) },\n            maxUsesTotal: couponToCreate.maxUsesTotal === '' || couponToCreate.maxUsesTotal === '0' ? undefined : Number(couponToCreate.maxUsesTotal)\n        })\n\n        const requestOptions = {\n            method: 'POST',\n            headers: myHeaders,\n            body: raw,\n            redirect: 'follow'\n        };\n\n        try {\n            const response = await fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/coupons/create`, requestOptions)\n            const data = await response.json()\n\n            if (data.error === \"format\") {\n                getMessage(\"Kód kupónu je povinný\")\n            }\n            if (data.error === 'exists') {\n                getMessage(\"Kupón už existuje\")\n            }\n\n            if (response.ok) {\n                getCoupons()\n                push('/dashboard/kupony')\n            }\n\n            // getMessage(data.message)\n            setIsLoading(false)\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Niečo sa pokazilo\")\n            setIsLoading(false)\n        }\n\n    }\n\n    // const updateCoupon = async () => {\n    //     console.log(\"Update coupon\")\n\n    //     setIsLoading(true)\n    //     setShowModal(true)\n\n    //     const requestOptions = {\n    //         method: 'GET',\n    //         headers: myHeaders,\n    //         redirect: 'follow'\n    //     };\n\n    //     try {\n    //         const response = await fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/coupons/${id}`, requestOptions)\n    //         const data = await response.json()\n\n    //         getMessage(data.message)\n    //         setIsLoading(false)\n    //     } catch (err) {\n    //         console.log(err)\n    //         getMessage(\"Niečo sa pokazilo\")\n    //         setIsLoading(false)\n    //     }\n\n    // }\n\n    const deleteCoupon = async (id) => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        const requestOptions = {\n            method: 'DELETE',\n            headers: myHeaders,\n            redirect: 'follow'\n        };\n\n        try {\n            const response = await fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/coupons/${id}`, requestOptions)\n            const data = await response.json()\n\n            if (response.ok) {\n                getCoupons()\n                push('/dashboard/kupony')\n            }\n            // getMessage(data.message)\n            setIsLoading(false)\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Niečo sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    const resetCoupons = async () => {\n        setIsupdating(false)\n        setCoupon(initCouponObj)\n    }\n\n    return (\n        <CouponsContext.Provider\n            value={{\n                coupon,\n                coupons,\n                handleChange,\n                getCoupon,\n                getCoupons,\n                createCoupon,\n                // updateCoupon,\n                deleteCoupon,\n                isUpdating,\n                resetCoupons\n            }}\n        >\n            {children}\n        </CouponsContext.Provider>\n    )\n}\n\nexport default CouponsProvider"],"sourceRoot":""}