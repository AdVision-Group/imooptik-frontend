{"version":3,"sources":["context/warehouse/warehouse.queries.jsx","context/warehouse/warehouse.context.jsx","context/image/image.queries.jsx","context/image/image.context.jsx","context/warehouse/warehouse.utils.jsx"],"names":["fetchProducts","token","myHeaders","Headers","append","requestOptions","method","headers","redirect","fetch","process","fetchSingleProduct","id","fetchLenses","fetchSingleLenses","delLense","postLenses","newProduct","brand","cylinderRange","description","dioptersRange","name","price","imagePath","eshop","body","JSON","stringify","map","val","Number","patchLenses","_id","postProduct","available","colorCode","eanCode","specs","frameColor","frameMaterial","frameStyle","lensColor","sex","type","console","log","raw","image","patchProduct","product","deleteProduct","WarehouseContext","createContext","formToShow","toggleProductForms","showUpdateForm","isUpdating","activeCategoryIndex","categories","toggleDraft","handleCategoryChange","handleAvailableChange","handleSizeChange","selectImage","products","handleChange","handleSpecsChange","resetProduct","lenses","lensesArr","handleLensesChange","handleLensesDioptersRangeChange","handleLensesCylinderRangeChange","totalCount","getProducts","getSingleProduct","createNewProduct","handleProductDelete","updateProduct","createNewLenses","getLenses","getSigleLenses","updateLenses","deleteLenses","WarehouseProvider","children","useContext","AuthContext","LoadingModalContext","setIsLoading","setShowModal","getMessage","closeModal","setSelectedImage","ImageContext","push","useHistory","useState","setTotalCount","setIsUpdating","setActiveCategoryIndex","setFormToShow","productCategories","initProductObj","setProduct","setProducts","initLensesObj","setLenses","setLensesArr","a","response","json","data","count","message","error","productToAdd","success","productToUpdate","Provider","value","switchFormButtons","e","idx","preventDefault","formName","arr","target","size","imgId","uploadImage","img","imgName","imgAlt","fetchFilteredImages","limit","skip","sortBy","dateCreated","deleteImage","isDisabled","images","selectedImage","getImages","handleImage","handleDeleteImage","getNextImages","getPrevImage","ImageProvider","setIsDisabled","setImages","setSkip","setImage","close","addToSkip","length","respone","soldAmount","colorName","brands"],"mappings":"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","file":"static/js/0.004855d6.chunk.js","sourcesContent":["export const fetchProducts = (token) => {\n    const myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n\n    const requestOptions = {\n        method: 'GET',\n        headers: myHeaders,\n        redirect: 'follow'\n    };\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/products`, requestOptions)\n}\n\nexport const fetchSingleProduct = (id) => {\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/store/products/${id}`)\n}\n\nexport const fetchLenses = (token) => {\n    var myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n\n\n    var requestOptions = {\n        method: 'GET',\n        headers: myHeaders,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/lenses`, requestOptions)\n}\n\nexport const fetchSingleLenses = (id) => {\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/store/lenses/${id}`)\n}\n\n\nexport const delLense = (token, id) => {\n    var myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n\n\n    var requestOptions = {\n        method: 'DELETE',\n        headers: myHeaders,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/lenses/${id}`, requestOptions)\n\n}\n\n\nexport const postLenses = (token, newProduct) => {\n\n    const {\n        brand,\n        cylinderRange,\n        description,\n        dioptersRange,\n        name,\n        price,\n        imagePath,\n        eshop\n    } = newProduct\n\n\n    const myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n    myHeaders.append(\"Content-Type\", \"application/json\");\n\n    const raw = JSON.stringify({\n        \"brand\": brand || \" \",\n        \"cylinderRange\": cylinderRange.map(val => Number(val)),\n        \"name\": name,\n        \"price\": Number(price),\n        \"description\": description,\n        \"image\": imagePath,\n        \"dioptersRange\": dioptersRange.map(val => Number(val)),\n        \"eshop\": eshop\n    });\n\n    const requestOptions = {\n        method: 'POST',\n        headers: myHeaders,\n        body: raw,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/lenses`, requestOptions)\n}\nexport const patchLenses = (token, newProduct) => {\n\n    const {\n        _id,\n        brand,\n        cylinderRange,\n        description,\n        dioptersRange,\n        name,\n        price,\n        imagePath,\n        eshop\n    } = newProduct\n\n    const myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n    myHeaders.append(\"Content-Type\", \"application/json\");\n\n    const raw = JSON.stringify({\n        \"brand\": brand || ' ',\n        \"cylinderRange\": cylinderRange.map(val => Number(val)),\n        \"name\": name,\n        \"price\": Number(price),\n        \"description\": description,\n        \"image\": imagePath,\n        \"dioptersRange\": dioptersRange.map(val => Number(val)),\n        \"eshop\": eshop\n    });\n\n    const requestOptions = {\n        method: 'PATCH',\n        headers: myHeaders,\n        body: raw,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/lenses/${_id}`, requestOptions)\n}\n\n\nexport const postProduct = (token, newProduct) => {\n    const {\n        available,\n        brand,\n        colorCode,\n        // colorName,\n        description,\n        eanCode,\n        eshop,\n        name,\n        price,\n        specs: {\n            frameColor,\n            frameMaterial,\n            frameStyle,\n            lensColor,\n            sex,\n        },\n        type,\n        imagePath\n    } = newProduct\n\n\n    console.log(imagePath)\n\n    // let newArr = []\n\n    // if (Array.isArray(available)) {\n    //     newArr = available.map(num => Number(num))\n    // }\n\n    const myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n    myHeaders.append(\"Content-Type\", \"application/json\");\n\n    let raw = {}\n\n    if (type === 4 || type === 5) {\n        raw = JSON.stringify({\n            available,\n            brand: brand || \" \",\n            colorCode: colorCode || \" \",\n            // colorName,\n            description: description || \" \",\n            eanCode,\n            eshop,\n            name,\n            price,\n            // specs: {\n            // frameColor: frameColor || \" \",\n            // frameMaterial: frameMaterial || \" \",\n            // frameStyle: frameStyle || \" \",\n            // lensColor: lensColor || \" \",\n            // sex,\n            // },\n            type,\n            image: imagePath\n        })\n    } else {\n        raw = JSON.stringify({\n            available,\n            brand: brand || \" \",\n            colorCode: colorCode || \" \",\n            // colorName,\n            description: description || \" \",\n            eanCode,\n            eshop,\n            name,\n            price,\n            specs: {\n                frameColor: frameColor || \" \",\n                frameMaterial: frameMaterial || \" \",\n                frameStyle: frameStyle || \" \",\n                lensColor: lensColor || \" \",\n                sex,\n            },\n            type,\n            image: imagePath\n        })\n    }\n\n    console.log(raw)\n\n    const requestOptions = {\n        method: 'POST',\n        headers: myHeaders,\n        body: raw,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/products`, requestOptions)\n}\n\nexport const patchProduct = (token, product) => {\n    const {\n        available,\n        brand,\n        colorCode,\n        // colorName,\n        description,\n        eanCode,\n        eshop,\n        name,\n        price,\n        specs: {\n            frameColor,\n            frameMaterial,\n            frameStyle,\n            lensColor,\n            sex,\n        },\n        type,\n        imagePath,\n        _id\n    } = product\n\n    const myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n    myHeaders.append(\"Content-Type\", \"application/json\");\n\n    let raw = {}\n\n\n    if (type === 4 || type === 5) {\n        raw = JSON.stringify({\n            available,\n            brand: brand || \" \",\n            colorCode: colorCode || \" \",\n            // colorName,\n            description: description || \" \",\n            eanCode,\n            eshop,\n            name,\n            price,\n            // specs: {\n            // frameColor: frameColor || \" \",\n            // frameMaterial: frameMaterial || \" \",\n            // frameStyle: frameStyle || \" \",\n            // lensColor: lensColor || \" \",\n            // sex,\n            // },\n            type,\n            image: imagePath\n        })\n    } else {\n        raw = JSON.stringify({\n            available,\n            brand: brand || \" \",\n            colorCode: colorCode || \" \",\n            // colorName,\n            description: description || \" \",\n            eanCode,\n            eshop,\n            name,\n            price,\n            specs: {\n                frameColor: frameColor || \" \",\n                frameMaterial: frameMaterial || \" \",\n                frameStyle: frameStyle || \" \",\n                lensColor: lensColor || \" \",\n                sex,\n            },\n            type,\n            image: imagePath\n        })\n    }\n\n    console.log(raw)\n\n    const requestOptions = {\n        method: 'PATCH',\n        headers: myHeaders,\n        body: raw,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/products/${_id}`, requestOptions)\n}\n\nexport const deleteProduct = (token, id) => {\n    const myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n    myHeaders.append(\"Content-Type\", \"application/json\");\n\n    const requestOptions = {\n        method: 'DELETE',\n        headers: myHeaders,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/products/${id}`, requestOptions)\n\n}","import React, { createContext, useState, useContext } from 'react'\nimport { useHistory } from 'react-router-dom'\nimport { LoadingModalContext } from '../loading-modal/loading-modal.contenxt'\nimport { AuthContext } from '../auth/auth.context'\nimport { ImageContext } from '../image/image.context'\nimport {\n    fetchProducts,\n    postProduct,\n    deleteProduct,\n    patchProduct,\n    postLenses,\n    fetchLenses,\n    patchLenses,\n    delLense,\n    fetchSingleProduct,\n    fetchSingleLenses\n    // fetchFilteredProducts\n} from './warehouse.queries'\n\nimport {\n    initProductObj,\n    initLensesObj,\n    productCategories\n} from './warehouse.utils'\n\n\nexport const WarehouseContext = createContext({\n    formToShow: 0,\n    toggleProductForms: () => { },\n    showUpdateForm: () => { },\n    isUpdating: false,\n    activeCategoryIndex: 0,\n    categories: [],\n    toggleDraft: () => { },\n    handleCategoryChange: () => { },\n    handleAvailableChange: () => { },\n    handleSizeChange: () => { },\n    selectImage: () => { },\n    product: null,\n    products: null,\n    handleChange: () => { },\n    handleSpecsChange: () => { },\n    resetProduct: () => { },\n    lenses: null,\n    lensesArr: null,\n    handleLensesChange: () => { },\n    handleLensesDioptersRangeChange: () => { },\n    handleLensesCylinderRangeChange: () => { },\n    totalCount: 0,\n    getProducts: () => { },\n    getSingleProduct: () => { },\n    createNewProduct: () => { },\n    handleProductDelete: () => { },\n    updateProduct: () => { },\n    createNewLenses: () => { },\n    getLenses: () => { },\n    getSigleLenses: () => { },\n    updateLenses: () => { },\n    deleteLenses: () => { }\n})\n\n\nconst WarehouseProvider = ({ children }) => {\n    const { token } = useContext(AuthContext)\n    const { setIsLoading, setShowModal, getMessage, closeModal } = useContext(LoadingModalContext)\n    const { setSelectedImage } = useContext(ImageContext)\n    const { push } = useHistory()\n\n    // ------------------------\n\n    const [totalCount, setTotalCount] = useState(0)\n    const [isUpdating, setIsUpdating] = useState(false)\n    const [activeCategoryIndex, setActiveCategoryIndex] = useState(0)\n\n    // ------------------------\n\n    const switchFormButtons = [\n        {\n            name: \"Okuliare a i.\"\n        },\n        {\n            name: \"Sklá\"\n        }\n    ]\n    const [formToShow, setFormToShow] = useState(0)\n\n    // ------------------------\n\n    const [categories] = useState(productCategories)\n    const [product, setProduct] = useState(initProductObj)\n    const [products, setProducts] = useState(null)\n\n    // ------------------------\n\n    const [lenses, setLenses] = useState(initLensesObj)\n    const [lensesArr, setLensesArr] = useState(null)\n\n    // ------------------------\n    // PRODUCT ACTIONS\n    // ------------------------\n\n    const toggleProductForms = (e, idx) => {\n        e.preventDefault()\n        setFormToShow(idx)\n    }\n\n    const toggleDraft = () => {\n        setProduct({\n            ...product,\n            eshop: !product.eshop\n        })\n        setLenses({\n            ...lenses,\n            eshop: !product.eshop\n        })\n    }\n\n    const handleChange = (e) => {\n        const { name, value } = e.target\n        setProduct({\n            ...product,\n            [name]: value\n        })\n    }\n    const handleSpecsChange = (e) => {\n        const { name, value } = e.target\n        setProduct({\n            ...product,\n            specs: {\n                ...product.specs,\n                [name]: value\n            }\n        })\n    }\n\n    const handleCategoryChange = (value) => {\n        setActiveCategoryIndex(value)\n        setProduct({\n            ...product,\n            type: value\n        })\n    }\n\n    const handleAvailableChange = (e, idx) => {\n        let arr = product.available\n        arr[idx] = Number(e.target.value)\n        setProduct({\n            ...product,\n            available: arr\n        })\n    }\n\n    const handleSizeChange = (e, idx) => {\n        let arr = product.specs.size\n        arr[idx] = Number(e.target.value)\n        setProduct({\n            ...product,\n            specs: {\n                ...product.specs,\n                size: arr\n            }\n        })\n    }\n\n    const selectImage = (imgId) => {\n        setProduct({\n            ...product,\n            imagePath: imgId\n        })\n        setLenses({\n            ...lenses,\n            imagePath: imgId\n        })\n    }\n\n    const resetProduct = () => {\n        setProduct(initProductObj)\n        setLenses(initLensesObj)\n        setSelectedImage(null)\n        setIsUpdating(false)\n        setActiveCategoryIndex(0)\n        setFormToShow(0)\n    }\n\n    const handleLensesChange = (e) => {\n        const { name, value } = e.target\n        setLenses({\n            ...lenses,\n            [name]: value\n        })\n    }\n\n    const handleLensesCylinderRangeChange = (e, idx) => {\n        let arr = lenses.cylinderRange\n        arr[idx] = Number(e.target.value)\n        setLenses({\n            ...lenses,\n            cylinderRange: arr\n        })\n    }\n\n    const handleLensesDioptersRangeChange = (e, idx) => {\n        let arr = lenses.dioptersRange\n        arr[idx] = Number(e.target.value)\n        setLenses({\n            ...lenses,\n            dioptersRange: arr\n        })\n    }\n\n    const showUpdateForm = (formName) => {\n        setFormToShow(formName)\n        setIsUpdating(true)\n\n    }\n\n    // ------------------------\n    // START GLASSES ACTIONS\n    // ------------------------\n\n    // Get all products\n    const getProducts = async () => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        try {\n            const response = await fetchProducts(token)\n            const data = await response.json()\n\n            if (data.products) {\n                setTotalCount(totalCount + data.count)\n                setProducts(data.products)\n                setIsLoading(false)\n                return\n            }\n\n            getMessage(data.message)\n            setIsLoading(false)\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    // Get single product\n\n    const getSingleProduct = async (id) => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        try {\n            const response = await fetchSingleProduct(id)\n            const data = await response.json()\n\n            if (data.error) {\n                getMessage(data.message)\n                setIsLoading(false)\n                return\n            }\n\n            if (data.product) {\n                setProduct({\n                    ...product,\n                    ...data.product,\n                    specs: {\n                        ...product.specs,\n                        ...data.product.specs\n                    },\n                    imagePath: data.product.image._id\n                })\n                setActiveCategoryIndex(data.product.type)\n                setSelectedImage(data.product.image)\n                setIsUpdating(true)\n            }\n\n            closeModal()\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n\n    }\n\n    // Create Glasses\n    const createNewProduct = async (productToAdd) => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        try {\n            const response = await postProduct(token, productToAdd)\n            const data = await response.json()\n\n            console.log(data)\n\n            if (data.error) {\n                getMessage(data.message)\n                setIsLoading(false)\n                return\n            }\n\n            setIsLoading(false)\n            getMessage(data.success)\n            resetProduct()\n            push('/dashboard/obchod')\n            getProducts()\n            closeModal()\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    // Update Glasses\n    const updateProduct = async (productToUpdate) => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        try {\n            const response = await patchProduct(token, productToUpdate)\n            const data = await response.json()\n            console.log(data)\n\n            if (data.error) {\n                getMessage(data.message)\n                setIsLoading(false)\n                return\n            }\n\n            getMessage(data.message)\n            setIsLoading(false)\n            push('/dashboard/obchod')\n            getProducts()\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    // Delete glasses\n    const handleProductDelete = async (id) => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        try {\n            const response = await deleteProduct(token, id)\n            const data = await response.json()\n\n            setIsLoading(false)\n            getMessage(data.message)\n            getProducts()\n            push('/dashboard/obchod')\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    // ------------------------\n    // END GLASSES ACTIONS\n    // ------------------------\n\n\n    // ------------------------\n    // START LENSES ACTIONS\n    // ------------------------\n\n    // Get all lenses\n    const getLenses = async () => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        try {\n            const response = await fetchLenses(token)\n            const data = await response.json()\n\n            if (data.lenses) {\n                setTotalCount(totalCount + data.count)\n                setLensesArr(data.lenses)\n                setIsLoading(false)\n                return\n            }\n\n            setIsLoading(false)\n            getMessage(data.message)\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    // Get single lenses\n    const getSigleLenses = async (id) => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        try {\n            const response = await fetchSingleLenses(id)\n            const data = await response.json()\n\n            console.log(data)\n\n\n            if (data.error) {\n                getMessage(data.message)\n                setIsLoading(false)\n                return\n            }\n\n            if (data.lenses) {\n                setLenses({\n                    ...lenses,\n                    ...data.lenses,\n                    imagePath: data.lenses.image._id\n                })\n                setSelectedImage(data.lenses.image)\n                setIsUpdating(true)\n            }\n\n            closeModal()\n\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    // Create Lense\n    const createNewLenses = async (productToAdd) => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        try {\n            const response = await postLenses(token, productToAdd)\n            const data = await response.json()\n\n            if (data) {\n                setIsLoading(false)\n                getMessage(data.message)\n                push('/dashboard/obchod')\n                getLenses()\n                closeModal()\n            }\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    // Update Lense\n    const updateLenses = async (productToAdd) => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        try {\n            const response = await patchLenses(token, productToAdd)\n            const data = await response.json()\n\n            console.log(data)\n\n            if (data) {\n                setIsLoading(false)\n                getMessage(data.message)\n                push('/dashboard/obchod')\n                getLenses()\n            }\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    // Delete Lense\n    const deleteLenses = async (id) => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        try {\n            const response = await delLense(token, id)\n            const data = await response.json()\n\n            if (data.error) {\n                setIsLoading(false)\n                getMessage(data.message)\n            }\n\n\n            getLenses()\n            setIsLoading(false)\n            getMessage(data.message)\n            push('/dashboard/obchod')\n            closeModal()\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    // ------------------------\n    // END LENSES ACTIONS\n    // ------------------------\n\n    return (\n        <WarehouseContext.Provider\n            value={{\n                switchFormButtons,\n                formToShow,\n                toggleProductForms,\n                showUpdateForm,\n                isUpdating,\n                activeCategoryIndex,\n                categories,\n                toggleDraft,\n                handleCategoryChange,\n                handleAvailableChange,\n                handleSizeChange,\n                selectImage,\n                product,\n                products,\n                handleChange,\n                handleSpecsChange,\n                resetProduct,\n                lenses,\n                lensesArr,\n                handleLensesChange,\n                handleLensesDioptersRangeChange,\n                handleLensesCylinderRangeChange,\n                totalCount,\n                getProducts,\n                getSingleProduct,\n                createNewProduct,\n                handleProductDelete,\n                updateProduct,\n                createNewLenses,\n                getLenses,\n                getSigleLenses,\n                updateLenses,\n                deleteLenses\n            }}\n        >\n            {children}\n        </WarehouseContext.Provider>\n    )\n}\n\nexport default WarehouseProvider","export const uploadImage = (token, img, imgName, imgAlt) => {\n    const myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n    myHeaders.append(\"Content-Type\", \"application/json\");\n\n\n    const raw = JSON.stringify({ \"name\": imgName || \" \", \"alt\": imgAlt || \" \", 'image': img });\n\n    const requestOptions = {\n        method: 'POST',\n        headers: myHeaders,\n        body: raw,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/images/upload`, requestOptions)\n}\n\nexport const fetchImages = () => {\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/images`)\n}\n\nexport const fetchFilteredImages = (token, limit, skip) => {\n    const myHeaders = new Headers();\n    // myHeaders.append(\"auth-token\", token);\n    myHeaders.append(\"Content-Type\", \"application/json\");\n\n\n    const raw = JSON.stringify({\n        sortBy: {\n            dateCreated: -1\n        },\n        limit,\n        skip\n    });\n\n    const requestOptions = {\n        method: 'POST',\n        headers: myHeaders,\n        body: raw,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/images/filter`, requestOptions)\n}\n\nexport const deleteImage = (token, id) => {\n    const myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n\n    const requestOptions = {\n        method: 'DELETE',\n        headers: myHeaders,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/images/${id}`, requestOptions)\n}","import React, { createContext, useState, useContext } from 'react'\nimport { LoadingModalContext } from '../loading-modal/loading-modal.contenxt'\nimport { AuthContext } from '../auth/auth.context'\nimport { deleteImage, fetchImages, uploadImage, fetchFilteredImages } from './image.queries'\n\nexport const ImageContext = createContext({\n    isDisabled: false,\n    images: null,\n    selectedImage: null,\n    getImages: () => { },\n    handleImage: () => { },\n    handleDeleteImage: () => { },\n    setSelectedImage: () => { },\n    getNextImages: () => { },\n    getPrevImage: () => { }\n})\n\nconst ImageProvider = ({ children }) => {\n    const {\n        getMessage,\n        setIsLoading,\n        setShowModal,\n        closeModal\n    } = useContext(LoadingModalContext)\n\n    const { token } = useContext(AuthContext)\n\n    const [isDisabled, setIsDisabled] = useState(false)\n    const [images, setImages] = useState(null)\n    const [selectedImage, setSelectedImage] = useState(null)\n    const [limit, setLimit] = useState(4)\n    const [skip, setSkip] = useState(0)\n\n    const handleImage = async (img, imgName, imgAlt, setImage, close) => {\n        setShowModal(true)\n        setIsLoading(true)\n        setIsDisabled(true)\n\n        try {\n            const response = await uploadImage(token, img, imgName, imgAlt)\n            const data = await response.json()\n            console.log(data)\n\n            if (data.image) {\n                setSelectedImage(data.image)\n                setImage(data.image._id)\n                getImages()\n                close()\n            }\n\n            setShowModal(false)\n            setIsLoading(false)\n            setIsDisabled(false)\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n            setIsDisabled(false)\n        }\n    }\n\n    const getNextImages = async (addToSkip) => {\n        try {\n            if (images.length !== limit) return\n\n            const response = await fetchFilteredImages(token, limit, skip + addToSkip)\n            const data = await response.json()\n\n            if (data.images) {\n                setImages(data.images)\n\n                setSkip(skip + addToSkip)\n            }\n\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    const getPrevImage = async (addToSkip) => {\n        if (skip === 0) return\n        try {\n            const response = await fetchFilteredImages(token, limit, skip - addToSkip)\n            const data = await response.json()\n\n            if (data.images) {\n                setImages(data.images)\n\n                setSkip(skip - addToSkip)\n\n            }\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    const getImages = async () => {\n        setShowModal(true)\n        setIsLoading(true)\n\n        try {\n            // const response = await fetchImages()\n            const response = await fetchFilteredImages(token, limit, skip)\n\n            const data = await response.json()\n\n            if (data.images) {\n                setImages(data.images)\n            }\n\n            getMessage(data.message)\n            setIsLoading(false)\n            closeModal()\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    const handleDeleteImage = async (id, e) => {\n        e.preventDefault()\n        setShowModal(true)\n        setIsLoading(true)\n\n        try {\n            const respone = await deleteImage(token, id)\n            const data = await respone.json()\n\n            getMessage(data.message)\n            setIsLoading(false)\n            getImages()\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    return (\n        <ImageContext.Provider\n            value={{\n                isDisabled,\n                images,\n                selectedImage,\n                getImages,\n                handleImage,\n                handleDeleteImage,\n                setSelectedImage,\n                getNextImages,\n                getPrevImage\n            }}\n        >\n            {children}\n        </ImageContext.Provider>\n    )\n}\n\nexport default ImageProvider","export const initProductObj = {\n    // Product id\n    // Product name: Ultra glasses\n    name: \"\",\n    // Product description: Awesome product\n    description: \"\",\n    // price in cents: 1050 => 10.50\n    price: '0',\n    // product type: glesses, lenses, ...\n    type: 1,\n    // brand name: Adidas\n    brand: \"\",\n    //kolko sa ich zatial predalo\n    soldAmount: 0,\n    //kolko je kusov na ktorej prevádzke [arr] \n    available: [0, 0, 0, 0, 0],\n    //ean kod = unikatny kod ktory ma kazdy produkt\n    eanCode: \"\",\n    //farebny kod, ktory spolu s ean kodom tvori \"identitu\" produktu. Moze existovat viacero\n    //produktov s rovnakym ean kodom ale rozlicnym color kodom. Je to takto urobené kvôli skladovému\n    //systému napr. mam na sklade iny pocet zltych ramov isteho druhu ako ciernych\n    colorCode: \"\",\n    //meno farby\n    colorName: \"\",\n    //path k obrazku na serveri (toto bude mozno array este sa uvidi)\n    imagePath: \"\",\n    image: null,\n    eshop: false,\n\n    specs: {\n        frameColor: \"\",\n        frameMaterial: \"\",\n        frameStyle: \"\",\n        lensColor: \"\",\n        sex: \"M\",\n        size: [0, 0, 0],\n    }\n}\n\nexport const initLensesObj = {\n    // id [5fd4cae9f9432022689dd223]\n    id: \"\",\n    // Lense name\n    name: \"\",\n    // Paradne sosovky\n    description: \"\",\n    //vsetky skla su dostupne len pre isty interval dioptrií a cylindrov, ak si zvolím ze mam dioptrie\n    //mimo tohto intervalu tak si tieto skla k mojim okuliarom vybrat nemozem\n    dioptersRange: [\"0\", \"0\"],\n    cylinderRange: [\"0\", \"0\"],\n    //cena v centoch\n    price: \"0\",\n    brand: \"\",\n    imagePath: ''\n}\n\n// Category variables\nexport const productCategories = [\n    {\n        name: \"Dioptrické\",\n        value: 1\n    },\n    {\n        name: \"Slnečné\",\n        value: 2\n    },\n    {\n        name: \"Športové\",\n        value: 3\n    },\n    {\n        name: \"Šošovky\",\n        value: 4\n    },\n    {\n        name: \"Doplnky\",\n        value: 5\n    },\n]\n\n\n\nexport const resetProductObj = () => {\n    return initProductObj\n}\n\nexport const resetLensesObj = () => {\n    return initLensesObj\n}\n\nexport const brands = [\n    \"Adidas\",\n    \"Armani Exchange\",\n    \"Arnette\",\n    \"Blackfin\",\n    \"Blumarine\",\n    \"Burberry\",\n    \"Bvlgari\",\n    \"Calvin Klein\",\n    \"Carolina Herrera\",\n    \"Carrera\",\n    \"David Beckham\",\n    \"Dior\",\n    \"Dolce & Gabbana\",\n    \"Elle\",\n    \"Emporio Armani\",\n    \"Esprit\",\n    \"Etnia Barcelona\",\n    \"Fendi\",\n    \"Fossil\",\n    \"Furla\",\n    \"Giorgio Armani\",\n    \"Givenchy\",\n    \"Gucci\",\n    \"Guess\",\n    \"H.I.S\",\n    \"Hawkers\",\n    \"Hugo Boss\",\n    \"Jaguar\",\n    \"Jimmy Choo\",\n    \"Lacoste\",\n    \"Liu Jo\",\n    \"Marc Jacobs\",\n    \"Max Mara\",\n    \"Max&Co\",\n    \"Meller\",\n    \"Mexx\",\n    \"Michael Kors\",\n    \"Moschino\",\n    \"Oakley\",\n    \"Persol\",\n    \"Polaroid\",\n    \"Police\",\n    \"Polo Ralph Lauren\",\n    \"Prada\",\n    \"Prada Linea Rossa\",\n    \"Ralph\",\n    \"Ralph Lauren\",\n    \"Ray-Ban\",\n    \"Salvatore Ferragamo\",\n    \"Smith\",\n    \"Strellson\",\n    \"Tiffany&Co.\",\n    \"Tom Ford\",\n    \"Tommy Hilfiger\",\n    \"Versace\",\n    \"Vogue\"\n]"],"sourceRoot":""}