{"version":3,"sources":["components/booking-calendar-overview/booking-calendar-overview.styles.jsx","components/booking-calendar-overview/booking-calendar-overview.component.jsx","components/calendar/calendar.styles.jsx","components/calendar/calendar.component.jsx","components/modal-user-bookings/modal-user-booking.styles.jsx","components/modal-user-bookings/modal-user-booking.component.jsx","components/calendar-weekdays/calendar-weekdays.styles.jsx","components/calendar-weekdays/calendar-weekdays.component.jsx","components/booking-appoinment/booking-appoinment.component.jsx","components/booking-appoinments/booking-appoinment.styles.jsx","components/booking-appoinments/booking-appoinment.component.jsx","components/modal-booking/modal-booking.styles.jsx","components/modal-booking/modal-booking.component.jsx","components/booking-calendar-bookings/booking-calendar-bookings.styles.jsx","components/booking-calendar-bookings/booking-calendar-bookings.component.jsx","sections/booking/booking.styles.jsx","sections/booking/booking.section.jsx","components/custom-input/custom-input.styles.jsx","components/custom-input/custom-input.component.jsx","hooks/useFetch.jsx","components/scroll-container/scroll-container.styles.jsx","components/scroll-container/scroll-container.component.jsx","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","components/custom-checkbox/custom-checkbox.styles.jsx","components/custom-checkbox/custom-checkbox.component.jsx","components/section-header/section-header.styles.jsx","components/section-header/section-header.component.jsx","components/section-navbar/section-navbar.styles.jsx","components/section-navbar/section-navbar.component.jsx","components/custom-textarea/custom-textarea.styles.jsx","components/custom-textarea/custom-textarea.component.jsx","utils/calendar.utils.jsx","context/booking/booking.context.jsx"],"names":["ContainerOverview","styled","div","Options","ShowButton","CustomButton","isActive","UpdateButton","BookingCalendarOverview","calendar","selectedCalendar","handleShowUpClick","handleUpdateClick","name","interval","allowMinutesBefore","daysIntoFuture","_id","onClick","Container","HeaderBlock","Dayblock","faded","Calendar","month","year","handleCalendarBlockClick","Date","setDate","lastDay","getDate","prevLastDay","firstDayIndex","getDay","nextDays","useFetchById","response","isLoading","refetch","useState","prevDays","setPrevDays","currentMonthDays","setCurrentMonthDays","nextMonthDays","setMonthNextDays","useEffect","prevDaysArr","getPreviousMonthDays","arr","getCurrentMonthDays","nextDaysArr","getNextMonthDays","checkedArr","getBooking","dayNames","map","idx","value","data","dayNumber","bookings","length","ModalContainer","Modal","CloseButton","button","SubmitButton","Navbar","SectionNavbar","SearchTab","UserTable","TableHead","Tablebody","TableCol","CustomSelect","select","DateContainer","UserBookingModal","close","day","refetchCalendar","createUserBooking","query","setQuery","activeTab","setActiveTab","userBooking","setUserBooking","date","hour","min","bookingDate","setBookingDate","startTime","formatCalendarStartTime","endTime","formatCalendarEndTime","useFetchByQuery","handleUserBookingChange","e","target","prevValue","handleChangeDate","time","console","log","Number","split","ReactDOM","createPortal","items","optionTabs","activeIndex","setActiveIndex","label","handleChange","limit","onKeyPress","key","users","email","phone","userObj","Fragment","type","toString","max","step","onChange","rows","note","booking","active","bookingToAdd","dueTime","formatDate","values","document","getElementById","id","HourGrid","isDisabled","HourBlock","HourBlockContainer","EmptyContainer","AppointmentContainer","WeekDays","weekIndex","useContext","BookingContext","lastDayIndex","calendarDays","setCalendarDays","selectedDay","setSelectedDay","showUserBooking","setShowUserBooking","handleOpenUserBookingModal","dayData","prevMonthDays","monthDays","monthDaysWithBookings","slice","isDisable","isPrevDay","isNextDay","Array","index","startTimes","endTimes","checkIfHasAppoinment","find","replace","BookingAppoinment","bookingId","TableRow","BookingAppoinments","filters","dueDate","userBookings","ModalHeader","InputContainer","BookingModal","calendarId","selectedBooking","createBooking","updateBooking","setBooking","isUpdating","setIsUpdating","handleBookingChange","handleSubmit","bookingToUpdate","formatBookingObj","handleClick","price","description","GridContainer","Header","AddButton","ContainerHeader","ActiveSpan","span","ContainerBody","ContainerOptions","DeleteButton","InfoParagraph","BookingCalendarBookings","isAdmin","AuthContext","deleteBooking","showBookingModal","setShowBookingModal","setSelectedBooking","paddingStyles","Title","h2","GridRow","CalendarGridContainer","CalendarHeading","IconContainer","CalendarHeader","CalendarMonthContainer","CalendarFormat","li","BookingSection","currentUser","isOptometrist","LoadingModalContext","showModal","setShowModal","message","closeModal","push","useHistory","showPremisesSection","setShowPremisesSection","activeCalendarFormat","setActiveCalendarFormat","searchQuery","setSearchQuery","calendars","setCalendars","setSelectedCalendar","getMonth","selectedMonth","setSelectedMonth","getFullYear","selectedYear","setSelectedYear","calendarWeekIndex","setCalendarWeekIndex","useFetch","handleShowCalendarClick","resetCalendarToDefault","Math","ceil","filter","premises","userCalendar","loading","title","handleAddButton","months","calendarFormat","shrinkLabel","css","InputGroup","CustomInput","otherProps","className","htmlFor","path","skip","setResponse","error","setError","setMessage","setIsLoading","refetchIndex","setRefetchIndex","prevRefetchIndex","a","fetch","process","res","json","fetchData","queryObj","myHeaders","Headers","append","localStorage","getItem","raw","JSON","stringify","requestOptions","method","headers","body","redirect","FixedContainer","ScrollContainer","children","_toConsumableArray","isArray","arrayLikeToArray","iter","Symbol","iterator","Object","from","unsupportedIterableToArray","TypeError","CheckboxContainer","CustomCheckbox","otherprops","HeaderContainer","Left","Right","SearchButton","SectionHeader","handleSearch","count","NavbarContainer","NavButton","item","CustomTextarea","calendarTimes","x","days","booked","bookingDates","keys","spliteBookingString","isBelongHere","forEach","dayObj","splitedDate","bookDate","hourIndex","bookingsArr","result","formatBookingTime","formatCalendarObj","calendarObj","obj","undefined","__v","dateCreated","exceptDays","formatExceptDaysToObj","formatExceptDays","exceptDaysObj","reverse","join","exceptDaysArr","bookingObj","timesBooked","formatedDate","formatedHour","dayIndex","createContext","createCalendar","updateCalendar","deleteCalendar","BookingProvider","token","getMessage","calendarToAdd","messageSK","calendarToUpdate","userBookingToAdd","Provider"],"mappings":"mmCAGO,IAAMA,EAAoBC,IAAOC,IAAV,KAuBjBC,EAAUF,IAAOC,IAAV,KAIPE,EAAaH,YAAOI,IAAPJ,CAAH,KAIC,qBAAGK,SAA0B,uBAAyB,0CAEjE,qBAAGA,SAA0B,2BAA6B,0BAE1DC,EAAeN,YAAOI,IAAPJ,CAAH,KCTVO,EApBiB,SAAC,GAK1B,IAAD,IAJFC,gBAIE,MAJS,GAIT,MAHFC,wBAGE,MAHiB,KAGjB,MAFFC,yBAEE,MAFkB,aAElB,MADFC,yBACE,MADkB,aAClB,EACF,OACI,eAACZ,EAAD,WACI,oCAAKS,QAAL,IAAKA,OAAL,EAAKA,EAAUI,OACf,mEAAgC,wCAAOJ,QAAP,IAAOA,OAAP,EAAOA,EAAUK,SAAjB,YAChC,0EAAiC,wCAAOL,QAAP,IAAOA,OAAP,EAAOA,EAAUM,mBAAjB,YACjC,gFAAqC,sCAAON,QAAP,IAAOA,OAAP,EAAOA,EAAUO,oBACtD,eAACb,EAAD,WACI,cAACC,EAAD,CAAYE,SAAUI,KAAgB,OAAKD,QAAL,IAAKA,OAAL,EAAKA,EAAUQ,KAAKC,QAASP,EAAnE,2BACA,cAACJ,EAAD,CAAcW,QAASN,EAAvB,iC,+rCCrBT,IAAMO,EAAYlB,IAAOC,IAAV,KAQTkB,EAAcnB,IAAOC,IAAV,KAWXmB,EAAWpB,IAAOC,IAAV,KAyBf,qBAAGoB,MAAoB,cAAH,yICmEXC,EA9FE,SAAC,GAKX,IAJHd,EAIE,EAJFA,SACAe,EAGE,EAHFA,MACAC,EAEE,EAFFA,KACAC,EACE,EADFA,0BAEa,IAAIC,MAEZC,QAAQ,GACb,IAAMC,EAAU,IAAIF,KAAKF,EAAMD,EAAQ,EAAG,GAAGM,UACvCC,EAAc,IAAIJ,KAAKF,EAAMD,EAAO,GAAGM,UAEvCE,EAAgB,IAAIL,KAAKF,EAAMD,EAAO,GAAGS,SAGzCC,EAAW,EAFI,IAAIP,KAAKF,EAAMD,EAAQ,EAAG,GAAGS,SARhD,EAYuCE,YAAa,wBAAyB1B,GAAWA,GAAlF2B,EAZN,EAYMA,SAAUC,EAZhB,EAYgBA,UAAWC,EAZ3B,EAY2BA,QAZ3B,EAa8BC,mBAAS,IAbvC,mBAaKC,EAbL,KAaeC,EAbf,OAc8CF,mBAAS,IAdvD,mBAcKG,EAdL,KAcuBC,EAdvB,OAewCJ,mBAAS,IAfjD,mBAeKK,EAfL,KAeoBC,EAfpB,KA0CF,OAzBAC,qBAAU,WACNR,MACD,CAACd,IAEJsB,qBAAU,WACFrC,GACA6B,MAEL,CAAC7B,IAEJqC,qBAAU,WACN,IAAKT,IACD,OAAID,QAAJ,IAAIA,OAAJ,EAAIA,EAAU3B,UAAU,CACpB,IAAMsC,EAAcC,YAAqBhB,GACnCiB,EAAMC,YAAoBrB,GAC1BsB,EAAcC,YAAiBlB,GAC/BmB,EAAaC,YAAWL,EAAKb,EAAS3B,SAAUe,EAAOC,GAE7DgB,EAAYM,GACZJ,EAAoBU,GACpBR,EAAiBM,MAG1B,CAACd,IAGA,eAAClB,EAAD,WAEKoC,IAASC,KAAI,SAAC3C,EAAM4C,GAAP,OACV,cAACrC,EAAD,UACKP,GADa4C,MAKrBjB,EAASgB,KAAI,SAACE,EAAOD,GAAR,OACV,eAACpC,EAAD,CAAUC,OAAO,EAAjB,UACI,sBAEA,4BACKS,EAAc0B,MAJKA,MAS/Bf,EAAiBc,KAAI,SAACG,EAAMF,GAAS,IAC1BG,EAAwBD,EAAxBC,UAAWC,EAAaF,EAAbE,SACnB,OACI,eAACxC,EAAD,CAAoBH,QAAS,kBAAMQ,EAAyBiC,IAA5D,UACI,4BACKE,GAAY,+BACRA,EAASC,WAGlB,4BACKF,MAPMH,MAYtBb,EAAcY,KAAI,SAACE,EAAOD,GAAR,OACf,eAACpC,EAAD,CAAUC,OAAO,EAAjB,UACI,sBAEA,4BACKmC,EAAM,MAJaA,U,k1GChGrC,IAAMM,GAAiB9D,IAAOC,IAAV,MAed8D,GAAQ/D,IAAOC,IAAV,KAwCL+D,GAAchE,IAAOiE,OAAV,KAkBXC,GAAelE,YAAOI,IAAPJ,CAAH,KAOZmE,GAASnE,YAAOoE,IAAPpE,CAAH,KAMNqE,GAAYrE,IAAOC,IAAV,KAMTqE,GAAYtE,IAAOC,IAAV,KAQTsE,GAAYvE,IAAOC,IAAV,KAKTuE,GAAYxE,IAAOC,IAAV,KAoBTwE,GAAWzE,IAAOC,IAAV,KAKRyE,GAAe1E,IAAO2E,OAAV,KAeZC,GAAgB5E,IAAOC,IAAV,KCkIX4E,GA3PU,SAAC,GAAkE,IAAD,MAA/DC,EAA+D,EAA/DA,MAAOC,EAAwD,EAAxDA,IAAKvE,EAAmD,EAAnDA,SAAUwE,EAAyC,EAAzCA,gBAAiBC,EAAwB,EAAxBA,kBAAwB,EAE7D3C,mBAAS,MAFoD,mBAEhF4C,EAFgF,KAEzEC,EAFyE,OAGrD7C,mBAAS,GAH4C,mBAGhF8C,EAHgF,KAGrEC,EAHqE,OAIjD/C,mBAAS,IAJwC,mBAIhFgD,EAJgF,KAInEC,EAJmE,OAKjDjD,mBAAS,CAC3CkD,KAAM,GACNC,KAAM,GACNC,IAAK,IAR8E,mBAKhFC,EALgF,KAKnEC,EALmE,KAWjFC,EAAYC,YAAwBtF,EAAUuE,GAC9CgB,EAAUC,YAAsBxF,EAAUuE,GAZuC,EAczDkB,YAAgB,yBAA0Bf,GAAQA,GAAxE7C,EAd+E,EAc/EA,QAASF,EAdsE,EActEA,SAeX+D,EAA0B,SAAAC,GAAM,IAAD,EACTA,EAAEC,OAAlBxF,EADyB,EACzBA,KAAM6C,EADmB,EACnBA,MAEd,GAAc,KAAVA,EAGA,cAFO6B,EAAY1E,QACnB2E,EAAe,eAAKD,IAIxBC,GAAe,SAAAc,GAAS,kCACjBA,GADiB,kBAEnBzF,EAAO6C,QAaV6C,EAAmB,SAAAH,GAAM,IAAD,EACFA,EAAEC,OAAlBxF,EADkB,EAClBA,KAAM6C,EADY,EACZA,MAEdmC,GAAe,SAAAS,GAAS,kCACjBA,GADiB,kBAEnBzF,EAAO6C,QAgDhB,OAvBAZ,qBAAU,WACN,GAAIkC,EAAK,CAAC,IACEwB,EAAiCxB,EAAjCwB,KAAM5C,EAA2BoB,EAA3BpB,UAAWpC,EAAgBwD,EAAhBxD,MAAOC,EAASuD,EAATvD,KAChCgF,QAAQC,IAAI,YACZD,QAAQC,IAAI1B,GAGZa,EAAe,CACXJ,KAAK,GAAD,OAAKhE,EAAL,YAAaD,EAAQ,EAAR,WAAgBA,EAAQ,GAAOA,EAAQ,EAApD,YAA0DoC,EAAY,GAAZ,WAAqBA,GAAcA,GACjG8B,KAAMiB,OAAM,OAACH,QAAD,IAACA,OAAD,EAACA,EAAMI,MAAM,KAAK,IAC9BjB,IAAKgB,OAAM,OAACH,QAAD,IAACA,OAAD,EAACA,EAAMI,MAAM,KAAK,SAGtC,CAAC5B,IAEJlC,qBAAU,WACN,OAAO,WACH0C,EAAe,IACfJ,EAAS,MACTE,EAAa,MAElB,IAEIuB,IAASC,aACZ,eAAC/C,GAAD,WACI,cAACE,GAAD,CAAa/C,QAAS6D,IACtB,eAACf,GAAD,WACI,+DAEA,cAACI,GAAD,CACI2C,MAAOC,GACPC,YAAa5B,EACb6B,eAAgB5B,IAGL,IAAdD,EACG,eAACf,GAAD,WACI,cAAC,IAAD,CACI6C,MAAM,oDACNtG,KAAK,QACL6C,MAAOyB,EAAK,OAAGA,QAAH,IAAGA,OAAH,EAAGA,EAAOA,MAAQ,GAC9BiC,aAAc,SAAAhB,GAAC,OAAIhB,EAAS,CACxBiC,MAAO,GACPlC,MAAOiB,EAAEC,OAAO3C,SAEpB4D,WA3GI,SAAClB,GACX,OAAVjB,GACc,UAAViB,EAAEmB,KACFjF,OA2GQ,cAAC6B,GAAD,CAAcjD,QAnHb,WACZiE,GACL7C,KAiHgB,8BAGA,eAACiC,GAAD,WACI,eAACC,GAAD,WACI,cAACE,GAAD,mBACA,cAACA,GAAD,qBACA,cAACA,GAAD,qCAEK,OAARtC,QAAQ,IAARA,OAAA,EAAAA,EAAUoF,OAAV,OAAkBpF,QAAlB,IAAkBA,GAAlB,UAAkBA,EAAUoF,aAA5B,aAAkB,EAAiBhE,KAAI,WAAyBC,GAAzB,IAAG5C,EAAH,EAAGA,KAAM4G,EAAT,EAASA,MAAOC,EAAhB,EAAgBA,MAAhB,OACpC,eAACjD,GAAD,CAAqBvD,QAAS,kBAjGtCyG,EAiGuD,CAAE9G,OAAM4G,QAAOC,SAhGtFlC,GAAe,SAAAc,GAAS,kCACjBA,GACAqB,MAEPrC,EAAa,QACbF,EAAS,MANM,IAACuC,GAiGQ,UACI,cAACjD,GAAD,UAAW7D,IACX,cAAC6D,GAAD,UAAW+C,IACX,cAAC/C,GAAD,UAAWgD,MAHCjE,MAMZ,8BACI,gEAMhB,eAAC,IAAMmE,SAAP,WACI,gCACI,0DACA,eAAC/C,GAAD,WACI,cAAC,IAAD,CACIsC,MAAM,GACNU,KAAK,OACLhH,KAAK,OACLuG,aAAcb,EACd7C,MAAK,OAAEkC,QAAF,IAAEA,OAAF,EAAEA,EAAaH,OAGxB,8BACI,cAAC,IAAD,CACI0B,MAAM,WACNU,KAAK,SACLhH,KAAK,OACL6C,MAAK,OAAEkC,QAAF,IAAEA,GAAF,UAAEA,EAAaF,YAAf,aAAE,EAAmBoC,WAC1BnC,IAAG,OAAEG,QAAF,IAAEA,OAAF,EAAEA,EAAWc,MAAM,KAAK,GAC3BmB,IAAG,OAAE/B,QAAF,IAAEA,OAAF,EAAEA,EAASY,MAAM,KAAK,GACzBQ,aAAcb,EACdyB,KAAK,QAGb,kCACA,8BACI,eAACrD,GAAD,CACI9D,KAAK,MACL6C,MAAK,OAAEkC,QAAF,IAAEA,GAAF,UAAEA,EAAaD,WAAf,aAAE,EAAkBmC,WACzBG,SAAU1B,EAHd,UAKI,wBAAQ7C,MAAO,EAAf,gBACwB,MAAf,OAARjD,QAAQ,IAARA,OAAA,EAAAA,EAAUK,WAAmB,wBAAQ4C,MAAO,GAAf,2BAK9C,8BACI,cAAC,IAAD,CACIyD,MAAM,QACNtG,KAAK,OACL6C,OAAkB,OAAX6B,QAAW,IAAXA,OAAA,EAAAA,EAAa1E,OAAQ,GAC5BuG,aAAcjB,MAGtB,8BACI,cAAC,IAAD,CACIgB,MAAM,UACNtG,KAAK,QACL6C,OAAkB,OAAX6B,QAAW,IAAXA,OAAA,EAAAA,EAAakC,QAAS,GAC7BL,aAAcjB,MAGtB,8BACI,cAAC,IAAD,CACIgB,MAAM,sBACNtG,KAAK,QACL6C,OAAkB,OAAX6B,QAAW,IAAXA,OAAA,EAAAA,EAAamC,QAAS,GAC7BN,aAAcjB,MAItB,8BACI,cAAC,IAAD,CACIgB,MAAM,cACNtG,KAAK,OACLqH,KAAK,IACLxE,OAAkB,OAAX6B,QAAW,IAAXA,OAAA,EAAAA,EAAa4C,OAAQ,GAC5Bf,aAAcjB,MAItB,gCACI,iDACA,eAACxB,GAAD,CACI9D,KAAK,UACL6C,OAAkB,OAAX6B,QAAW,IAAXA,OAAA,EAAAA,EAAa6C,UAAW,GAC/BH,SAAU9B,EAHd,UAKI,wBAAQzC,MAAO,GAAf,0BALJ,OAMKjD,QANL,IAMKA,OANL,EAMKA,EAAUoD,SAASL,KAAI,SAAC4E,EAAS3E,GAC9B,IAAuB,IAAnB2E,EAAQC,OACZ,OACI,wBAAkB3E,MAAO0E,EAAQnH,IAAjC,SAAuCmH,EAAQvH,MAAlC4C,eAQ1B,IAAd4B,GAAmB,cAAClB,GAAD,CAAcjD,QAvLzB,WAMjB,IAAIoH,EAAY,2BACT/C,GADS,IAEZgD,QAASC,YAAW5C,GACpB6C,OAAQ,KAGZhC,QAAQC,IAAI,4BACZD,QAAQC,IAAI4B,GAGZpD,EAAkBoD,EAAcrD,EAAiBF,IAuKrB,iCAG7B2D,SAASC,eAAe,YAKzB3B,GAAa,CACf,CACI4B,GAAI,EACJ/H,KAAM,0BAEV,CACI+H,GAAI,EACJ/H,KAAM,kC,+iGC/RP,IAAMM,GAAYlB,IAAOC,IAAV,MAIT2I,GAAW5I,IAAOC,IAAV,MA+BRsE,GAAYvE,IAAOC,IAAV,MAYTkB,GAAcnB,IAAOC,IAAV,MAgBlB,qBAAG4I,WAA2B,+BAE3B,MAGIC,GAAY9I,IAAOC,IAAV,MAyBT8I,GAAqB/I,IAAOC,IAAV,MAalB+I,GAAiBhJ,IAAOC,IAAV,MAadgJ,GAAuBjJ,IAAOC,IAAV,MCelBiJ,GA9GE,SAAC,GAMX,IALH1I,EAKE,EALFA,SACAgB,EAIE,EAJFA,KACAD,EAGE,EAHFA,MACA4H,EAEE,EAFFA,UAGQlE,GADN,EADFxD,yBAE8B2H,qBAAWC,kBAAjCpE,mBADN,EAEuC/C,YAAa,wBAAyB1B,GAAWA,GAAlF2B,EAFN,EAEMA,SAAUC,EAFhB,EAEgBA,UAAWC,EAF3B,EAE2BA,QACvBT,EAAU,IAAIF,KAAKF,EAAMD,EAAQ,EAAG,GAAGM,UACvCE,EAAgB,IAAIL,KAAKF,EAAMD,EAAO,GAAGS,SACzCsH,EAAe,IAAI5H,KAAKF,EAAMD,EAAQ,EAAG,GAAGS,SAC5CF,EAAc,IAAIJ,KAAKF,EAAMD,EAAO,GAAGM,UAEvCI,EAAW,EAAIqH,EARnB,EAUsChH,mBAAS,IAV/C,mBAUKiH,EAVL,KAUmBC,EAVnB,OAWoClH,mBAAS,MAX7C,mBAWKmH,EAXL,KAWkBC,EAXlB,OAY4CpH,oBAAS,GAZrD,mBAYKqH,EAZL,KAYsBC,EAZtB,KAcIC,EAA6B,SAACC,GAChCJ,EAAe,2BACRI,GADO,IAEVtI,OACAD,WAEJqI,GAAmB,IAoBvB,OAjBA/G,qBAAU,WACN,IAAIT,GAEAD,EAAS3B,SAAU,CACnB,IAAMuJ,EAAgBhH,YAAqBhB,GACrCiI,EAAY/G,YAAoBrB,GAChCe,EAAgBQ,YAAiBlB,GACjCgI,EAAwB5G,YAAW2G,EAAW7H,EAAS3B,SAAUe,EAAOC,GAE9EgI,EAAgB,GAAD,mBACRO,GADQ,YAERE,GAFQ,YAGRtH,QAGZ,CAACP,IAGA,gCACKuH,GAAmB,cAAC,GAAD,CAAkB1E,kBAAmBA,EAAmBD,gBAAiB3C,EAAS7B,SAAQ,OAAE2B,QAAF,IAAEA,OAAF,EAAEA,EAAU3B,SAAUuE,IAAK0E,EAAa3E,MAAO,kBAAM8E,GAAmB,MACtL,eAAC,GAAD,WACI,cAAC,GAAD,UACKL,EAAaW,MAAkB,EAAZf,EAA4B,EAAZA,EAAiB,GAAG5F,KAAI,WAAiDC,GAAjD,IAAGG,EAAH,EAAGA,UAAWwG,EAAd,EAAcA,UAAWC,EAAzB,EAAyBA,UAAWC,EAApC,EAAoCA,UAApC,OACxD,cAAC,GAAD,CAAaxB,WAAYsB,EAAzB,SACKC,EACG,eAAC,IAAMzC,SAAP,WACI,4BAAIrE,IAAS,IAAI5B,KAAKF,EAAMD,EAAQ,EAAGO,EAAe6B,GAAY3B,YAClE,4BAAIF,GAAe6B,EAAY,QAEnC0G,EACA,eAAC,IAAM1C,SAAP,WACI,4BAAIrE,IAAS,IAAI5B,KAAKF,EAAMD,EAAQ,EAAGoC,EAAY,GAAG3B,YACtD,8BAAI2B,EAAJ,UAGI,eAAC,IAAMgE,SAAP,WACI,4BAAIrE,IAAS,IAAI5B,KAAKF,EAAMD,EAAOoC,EAAY,GAAG3B,YAClD,8BAAI2B,EAAJ,WAdqBH,QAqBjD,cAACoF,GAAD,UACKW,EAAaW,MAAkB,EAAZf,EAA4B,EAAZA,EAAiB,GAAG5F,KAAI,SAACuG,EAAStG,GAElE,OAAO,cAACsF,GAAD,UACF,YAAIwB,MAAM,KAAK/G,KAAI,SAACE,EAAO8G,GAAW,IAAD,UAClC,KAAI7D,OAAM,OAACvE,QAAD,IAACA,GAAD,UAACA,EAAU3B,gBAAX,aAAC,EAAoBgK,WAAWhH,GAAKmD,MAAM,KAAK,IAAM4D,MAC5D7D,OAAM,OAACvE,QAAD,IAACA,GAAD,UAACA,EAAU3B,gBAAX,aAAC,EAAoBiK,SAASjH,GAAKmD,MAAM,KAAK,IAAM4D,IACpB,OAA9B,OAARpI,QAAQ,IAARA,GAAA,UAAAA,EAAU3B,gBAAV,eAAoBiK,SAASjH,IACjC,OACI,eAACuF,GAAD,WACKe,EAAQlG,UAAY8G,YAAqBH,EAAD,OAAQT,QAAR,IAAQA,OAAR,EAAQA,EAASlG,UACtD,eAAC,IAAM+D,SAAP,YACY,OAAPmC,QAAO,IAAPA,OAAA,EAAAA,EAASlG,SAAS+G,MAAK,SAAAxC,GAAO,OAAuC,IAAnCzB,OAAM,OAACyB,QAAD,IAACA,OAAD,EAACA,EAASxB,MAAM,KAAK,KAAaD,OAAM,OAACyB,QAAD,IAACA,OAAD,EAACA,EAASxB,MAAM,KAAK,MAAQ4D,OAAU,cAACtB,GAAD,CAAsBhI,QAAS,kBAAMuF,QAAQC,IAAI,UAAjD,SACpH,mCAAIqD,QAAJ,IAAIA,GAAJ,UAAIA,EAASlG,SAAS+G,MAAK,SAAAxC,GAAO,OAAuC,IAAnCzB,OAAM,OAACyB,QAAD,IAACA,OAAD,EAACA,EAASxB,MAAM,KAAK,KAAaD,OAAM,OAACyB,QAAD,IAACA,OAAD,EAACA,EAASxB,MAAM,KAAK,MAAQ4D,YAAjH,aAAI,EAAqHK,QAAQ,IAAK,UAElI,OAAPd,QAAO,IAAPA,OAAA,EAAAA,EAASlG,SAAS+G,MAAK,SAAAxC,GAAO,OAAuC,KAAnCzB,OAAM,OAACyB,QAAD,IAACA,OAAD,EAACA,EAASxB,MAAM,KAAK,KAAcD,OAAM,OAACyB,QAAD,IAACA,OAAD,EAACA,EAASxB,MAAM,KAAK,MAAQ4D,OAAU,cAACtB,GAAD,CAAsBhI,QAAS,kBAAMuF,QAAQC,IAAI,UAAjD,SACrH,mCAAIqD,QAAJ,IAAIA,GAAJ,UAAIA,EAASlG,SAAS+G,MAAK,SAAAxC,GAAO,OAAuC,KAAnCzB,OAAM,OAACyB,QAAD,IAACA,OAAD,EAACA,EAASxB,MAAM,KAAK,KAAcD,OAAM,OAACyB,QAAD,IAACA,OAAD,EAACA,EAASxB,MAAM,KAAK,MAAQ4D,YAAlH,aAAI,EAAsHK,QAAQ,IAAK,SAE3I,cAAC5B,GAAD,CAAgB/H,QAAS,kBAAM4I,EAA2B,2BAAKC,GAAN,IAAevD,KAAK,GAAD,OAAKgE,EAAL,gBAG5E,cAACvB,GAAD,CAAgB/H,QAAS,kBAAM4I,EAA2B,2BAAKC,GAAN,IAAevD,KAAK,GAAD,OAAKgE,EAAL,aAEpF,iCAAOA,EAAP,WAdqBA,OANd/G,e,SCvFhCqH,GAZW,SAAC,GAAmB,IAAD,EAAhBC,EAAgB,EAAhBA,UAAgB,EACT5I,YAAa,uBAAwB4I,GAAYA,GAAzE1I,EADiC,EACjCA,UAAWD,EADsB,EACtBA,SAEnB,OAAIC,EAAkB,oBAGlB,cAAC,IAAMuF,SAAP,iBACKxF,QADL,IACKA,GADL,UACKA,EAAUgG,eADf,aACK,EAAmBvH,Q,irBCRzB,IAAM2D,GAAYvE,IAAOC,IAAV,MAUTwE,GAAWzE,IAAOC,IAAV,MAKR8K,GAAW/K,IAAOC,IAAV,MCmCN+K,GAxCY,SAAC,GAAa,IAAD,EAAVjG,EAAU,EAAVA,IAC1ByB,QAAQC,IAAI1B,GADwB,MAGKkB,YAAgB,wCAAyC,CAC9FgF,QAAS,CACLC,QAASnG,EAAIY,eAFbxD,EAH4B,EAG5BA,SAAUC,EAHkB,EAGlBA,UAAWC,EAHO,EAGPA,QAU7B,OAJAQ,qBAAU,WACNR,MACD,CAAC0C,IAEA3C,EAAkB,cAAC,KAAD,IAGlB,gCACI,eAAC,GAAD,WACI,cAAC,GAAD,gBACA,cAAC,GAAD,8BACA,cAAC,GAAD,mBACA,cAAC,GAAD,uBACA,cAAC,GAAD,0BACA,cAAC,GAAD,+BAPR,OAUKD,QAVL,IAUKA,GAVL,UAUKA,EAAUgJ,oBAVf,aAUK,EAAwB5H,KAAI,WAAmCC,GAAnC,IAAG2E,EAAH,EAAGA,QAASvH,EAAZ,EAAYA,KAAMsK,EAAlB,EAAkBA,QAAShD,EAA3B,EAA2BA,KAA3B,OACzB,eAAC6C,GAAD,WACI,cAAC,GAAD,UAAWvH,EAAM,IACjB,cAAC,GAAD,UAAU,cAAC,GAAD,CAAmBsH,UAAW3C,MACxC,cAAC,GAAD,UAAWvH,IACX,cAAC,GAAD,UAAWsK,IACX,cAAC,GAAD,UAAWhD,IACX,cAAC,GAAD,8BANW1E,U,40DCpCxB,IAAMM,GAAiB9D,IAAOC,IAAV,MAed8D,GAAQ/D,IAAOC,IAAV,MAuCL+D,GAAchE,IAAOiE,OAAV,MAkBXmH,GAAcpL,IAAOC,IAAV,MAOXoL,GAAiBrL,IAAOC,IAAV,MAIdiE,GAAelE,YAAOI,IAAPJ,CAAH,MCgEVsL,GA/HM,SAAC,GAAqD,IAAnDxG,EAAkD,EAAlDA,MAAOyG,EAA2C,EAA3CA,WAAYlJ,EAA+B,EAA/BA,QAASmJ,EAAsB,EAAtBA,gBAAsB,EAC7BpC,qBAAWC,kBAA5CoC,EAD8D,EAC9DA,cAAeC,EAD+C,EAC/CA,cAD+C,EAEtCxJ,YAAa,uBAAwBsJ,GAAkBA,GAA/ErJ,EAF8D,EAE9DA,SAAUC,EAFoD,EAEpDA,UAFoD,EAIxCE,mBAAS,IAJ+B,mBAI/D6F,EAJ+D,KAItDwD,EAJsD,OAKlCrJ,oBAAS,GALyB,mBAK/DsJ,EAL+D,KAKnDC,EALmD,KAOhEC,EAAsB,SAAA3F,GAAM,IAAD,EACLA,EAAEC,OAAlBxF,EADqB,EACrBA,KAAM6C,EADe,EACfA,MAEd,GAAc,KAAVA,EAKA,cAJO0E,EAAQvH,QACf+K,EAAW,eACJxD,IAKXwD,GAAW,SAAAtF,GAAS,kCACbA,GADa,kBAEfzF,EAAO6C,QAIVsI,EAAe,WACjB,GAAI,OAAC5D,QAAD,IAACA,OAAD,EAACA,EAASvH,KAAd,CAEA,GAAIgL,EAAY,CACZ,IAAII,EAAkBC,YAAiB9D,GAEvC3B,QAAQC,IAAI,yBACZD,QAAQC,IAAIuF,GAEZN,EAAcM,EAAiB7D,EAAQnH,SACpC,CACH,IAAIqH,EAAY,2BACTF,GADS,IAEZ3H,SAAU+K,IAGd/E,QAAQC,IAAI,yBACZD,QAAQC,IAAI4B,GACZoD,EAAcpD,GAGlBhG,IACAyC,MAoBJ,OAjBAjC,qBAAU,WACFT,IACJ,OAAID,QAAJ,IAAIA,OAAJ,EAAIA,EAAUgG,WACV0D,GAAc,GACdF,EAAU,OAACxJ,QAAD,IAACA,OAAD,EAACA,EAAUgG,YAE1B,CAACqD,EAAiBpJ,IAErBS,qBAAU,WACN,OAAO,WACHgJ,GAAc,GACdF,EAAW,OAEhB,IAEHnF,QAAQC,IAAI0B,GAELvB,IAASC,aACZ,eAAC,GAAD,WACI,cAAC,GAAD,CAAa5F,QAAS6D,IACtB,eAAC,GAAD,WACI,eAACsG,GAAD,YACMQ,GAAc,yDACfA,GAAc,8DACf,8BACI,cAAC,KAAD,CACI1E,MAAM,aACN7G,UAAiB,OAAP8H,QAAO,IAAPA,OAAA,EAAAA,EAASC,UAAU,EAC7BxH,KAAK,SACLsL,YAAa,kBAAMJ,EAAoB,CACnC1F,OAAQ,CACJxF,KAAM,SACN6C,QAAc,OAAP0E,QAAO,IAAPA,OAAA,EAAAA,EAASC,WAAS,OAACD,QAAD,IAACA,OAAD,EAACA,EAASC,mBAMvD,cAACiD,GAAD,UACI,cAAC,IAAD,CACInE,MAAM,4BACNtG,KAAK,OACL6C,OAAc,OAAP0E,QAAO,IAAPA,OAAA,EAAAA,EAASvH,OAAQ,GACxBuG,aAAc2E,MAGtB,cAACT,GAAD,UACI,cAAC,IAAD,CACInE,MAAM,OACNtG,KAAK,QACL6C,OAAc,OAAP0E,QAAO,IAAPA,OAAA,EAAAA,EAASgE,QAAS,GACzBhF,aAAc2E,MAGtB,cAACT,GAAD,UACI,cAAC,IAAD,CACInE,MAAM,WACNtG,KAAK,OACL6C,OAAc,OAAP0E,QAAO,IAAPA,OAAA,EAAAA,EAAS5B,OAAQ,GACxBY,aAAc2E,MAGtB,cAACT,GAAD,UACI,cAAC,IAAD,CACInE,MAAM,QACNe,KAAK,IACLrH,KAAK,cACL6C,OAAc,OAAP0E,QAAO,IAAPA,OAAA,EAAAA,EAASiE,cAAe,GAC/BjF,aAAc2E,OAGpBF,GAAc,cAAC,GAAD,CAAc3K,QAAS8K,EAAvB,yBACfH,GAAc,cAAC,GAAD,CAAc3K,QAAS8K,EAAvB,oCAGxBtD,SAASC,eAAe,Y,s/DChJxB,IAAM2D,GAAgBrM,IAAOC,IAAV,MAkBbqM,GAAStM,IAAOC,IAAV,MAONsM,GAAYvM,YAAOI,IAAPJ,CAAH,MAKTkB,GAAYlB,IAAOC,IAAV,MAQTuM,GAAkBxM,IAAOC,IAAV,MAOfwM,GAAazM,IAAO0M,KAAV,MAEV,qBAAGrM,SAA0B,qBAAuB,sBAGpDsM,GAAgB3M,IAAOC,IAAV,MAKb2M,GAAmB5M,IAAOC,IAAV,MAKhB4M,GAAe7M,YAAOI,IAAPJ,CAAH,MAMZM,GAAeN,YAAOI,IAAPJ,CAAH,MAMZ8M,GAAgB9M,IAAOC,IAAV,MCoBX8M,GAzEiB,SAAC,GAE1B,IAAD,QADFxB,EACE,EADFA,WAEQyB,EAAY5D,qBAAW6D,KAAvBD,QACAE,EAAkB9D,qBAAWC,kBAA7B6D,cAFN,EAGuChL,YAAa,wBAAyBqJ,GAAaA,GAApFpJ,EAHN,EAGMA,SAAUC,EAHhB,EAGgBA,UAAWC,EAH3B,EAG2BA,QAH3B,EAI8CC,oBAAS,GAJvD,mBAIK6K,EAJL,KAIuBC,EAJvB,OAK4C9K,mBAAS,MALrD,mBAKKkJ,EALL,KAKsB6B,EALtB,KAsBF,OAAIjL,EAAkB,cAAC,KAAD,IAGlB,eAACiK,GAAD,WACKc,GACG,cAAC,GAAD,CACI3B,gBAAiBA,EACjBD,WAAYA,EACZzG,MAbS,WACrBsI,GAAoB,GACpBC,EAAmB,OAYPhL,QAASA,IAGjB,gCACI,eAACiK,GAAD,WACI,iDACCU,GAAW,cAACT,GAAD,CAAWtL,QAAS,kBAAMmM,GAAoB,IAA9C,4BAGhB,uCACKjL,QADL,IACKA,GADL,UACKA,EAAU3B,gBADf,iBACK,EAAoBoD,gBADzB,aACK,EAA8BL,KAAI,SAAC4E,EAAS3E,GAAV,OAC/B,eAAC,GAAD,WACI,eAACgJ,GAAD,WACI,gCACI,6BAAKrE,EAAQvH,OACb,cAAC6L,GAAD,CAAYpM,SAAQ,OAAE8H,QAAF,IAAEA,OAAF,EAAEA,EAASC,OAA/B,UAA+C,OAAPD,QAAO,IAAPA,OAAA,EAAAA,EAASC,QAAS,aAAY,oBAE1E,8BACI,8BAAID,EAAQgE,MAAZ,iBAIR,cAACQ,GAAD,UACI,4BAAIxE,EAAQiE,gBAEfY,GAAW,eAACJ,GAAD,WACR,cAAC,GAAD,CAAc3L,QAAS,kBA7CxB6J,EA6CgD3C,EAAQnH,IA5C/EqM,EAAmBvC,QACnBsC,GAAoB,GAFE,IAACtC,GA6CC,0BACA,cAAC+B,GAAD,CAAc5L,QAAS,kBAnDxB6J,EAmDgD3C,EAAQnH,IAlD/EkM,EAAcpC,QACdzI,IAFsB,IAACyI,GAmDC,+BAhBQtH,QAoBnB,OAACrB,QAAD,IAACA,GAAD,UAACA,EAAU3B,gBAAX,iBAAC,EAAoBoD,gBAArB,aAAC,EAA8BC,SAC5B,cAACiJ,GAAD,uD,olECnFjB,IAAMR,GAAStM,IAAOC,IAAV,KACbqN,MAQOC,GAAQvN,IAAOwN,GAAV,MAILC,GAAUzN,IAAOC,IAAV,MAOPyN,GAAwB1N,IAAOC,IAAV,MAKrB0N,GAAkB3N,IAAOC,IAAV,MAaf2N,GAAgB5N,IAAOC,IAAV,MASb4N,GAAiB7N,IAAOC,IAAV,MAad6N,GAAyB9N,IAAOC,IAAV,MA0BtB8N,GAAiB/N,IAAOgO,GAAV,MACH,qBAAG3N,SAA0B,uBAAyB,UACjE,qBAAGA,SAA0B,2BAA6B,0BCoKxD4N,UA3NQ,WAAO,IAAD,IACuB7E,qBAAW6D,KAAnDD,EADiB,EACjBA,QAASkB,EADQ,EACRA,YAAaC,EADL,EACKA,cADL,EAEgC/E,qBAAWgF,KAA5DC,EAFiB,EAEjBA,UAAWC,EAFM,EAENA,aAAcC,EAFR,EAEQA,QAASC,EAFjB,EAEiBA,WAClCC,EAASC,cAATD,KAHiB,EAK6BnM,oBAAS,GALtC,mBAKlBqM,EALkB,KAKGC,EALH,OAM+BtM,mBAAS,GANxC,mBAMlBuM,EANkB,KAMIC,EANJ,OAOaxM,mBAAS,IAPtB,mBAOlByM,EAPkB,KAOLC,EAPK,OAQS1M,mBAAS,IARlB,mBAQlB2M,EARkB,KAQPC,EARO,OASuB5M,mBAAS,MAThC,mBASlB7B,EATkB,KASA0O,EATA,OAUiB7M,oBAAS,IAAIZ,MAAO0N,YAVrC,mBAUlBC,EAVkB,KAUHC,EAVG,OAWehN,oBAAS,IAAIZ,MAAO6N,eAXnC,mBAWlBC,EAXkB,KAWJC,EAXI,OAYyBnN,mBAAS,GAZlC,oBAYlBoN,GAZkB,MAYCC,GAZD,SAaarN,mBAAS,MAbtB,qBAalBmH,GAbkB,MAaLC,GAbK,SAeOkG,YAAS,yBAAjCxN,GAfiB,GAejBA,UAAWD,GAfM,GAeNA,SAEb0N,GAA0B,SAACtE,GAC7B4D,EAAoB5D,GACpBqD,GAAuB,GACvBkB,MA0CEA,GAAyB,WAC3BR,GAAiB,IAAI5N,MAAO0N,YAC5BK,GAAgB,IAAI/N,MAAO6N,eAC3BI,GAAqBI,KAAKC,MAAK,IAAItO,MAAOG,UAAY,GAAK,GAC3D6H,GAAe,OAGbjI,GAA2B,SAACqI,GAM9BtD,QAAQC,IAAIqD,GACZ6F,GAAqBI,KAAKC,KAAKlG,EAAQnG,UAAY,GAAK,GACxDmL,EAAwB,IAsC5B,OAnCAjM,qBAAU,WACN,IAAKT,IACGD,GAAU,CACV,GAAI6K,EACAkC,EAAa/M,GAAS8M,WACtBX,GAAa,OACV,CACHY,EAAa/M,GAAS8M,UAAUgB,QAAO,SAAAzP,GAAQ,OAAIA,EAAS0P,WAAahC,EAAYgC,aACrF,IAAMC,EAAehO,GAAS8M,UAAUtE,MAAK,SAAAnK,GAAQ,OAAIA,EAAS0P,WAAahC,EAAYgC,YAC3FL,GAAwBM,EAAanP,KACrCsN,GAAa,GAEjBE,OAGT,CAACpM,KAEJS,qBAAU,WAEN,OADA2D,QAAQC,IAAI,WACL,WACH6H,GAAa,GACbM,GAAuB,GACvBE,EAAwB,GACxBE,EAAe,IACfE,EAAa,IACbC,EAAoB,MACpBG,GAAiB,IAAI5N,MAAO0N,YAC5BK,GAAgB,IAAI/N,MAAO6N,eAC3BI,GAAqB,GACrBjG,GAAe,SAEpB,IAEHlD,QAAQC,IAAIwI,GAGR,oCACKZ,GAAa,cAAC,IAAD,CAAO+B,QAAShO,GAAWiO,MAAO9B,EAASzJ,MAAO,kBAAMwJ,GAAa,MAClFtB,GAAW,cAAC,IAAD,CACR+B,YAAaA,EACb5H,aAAc,SAAAhB,GAAC,OAAI6I,EAAe7I,EAAEC,OAAO3C,QAC3C6M,gBAAiB,kBAAM7B,EAAK,6BAC5B4B,MAAM,kBAGRlC,IAAkBnB,GAChB,cAAC,GAAD,UACI,iDAIR,eAAC,IAAD,WACKA,GAAW,eAACW,GAAD,WACR,cAACJ,GAAD,2BACA,sBAAKtM,QAAS,kBAAM2N,GAAuB,SAAAvI,GAAS,OAAKA,MAAzD,UACI,sCACK4I,EAAUtE,MAAK,SAAAnK,GAAQ,OAAIA,EAASQ,MAAQP,YADjD,aACK,EAA+DG,OAEpE,cAACgN,GAAD,UACKe,EAAsB,cAAC,KAAD,IAAwB,cAAC,KAAD,YAK1DA,GAAuB,cAAClB,GAAD,UACnBwB,GAAaA,EAAU1L,KAAI,SAAC/C,EAAUgD,GAAX,OACxB,cAAC,EAAD,CAEIhD,SAAUA,EACVC,iBAAkBA,EAClBC,kBAAmB,kBAAMmP,GAAwBrP,EAASQ,MAC1DL,kBAAmB,kBAAM8N,EAAK,cAAD,OAAejO,EAASQ,QAJhDwC,QAShB/C,GACG,eAAC,IAAMkH,SAAP,WAEI,eAACkG,GAAD,WACI,cAACN,GAAD,0BAE0B,IAAzBsB,EACG,eAACf,GAAD,WACI,wBAAQ7M,QAzHnB,WACK,IAAlBoO,GACAI,GAAgB,SAAApJ,GAAS,OAAIA,EAAY,KACzCiJ,EAAiB,KAEjBA,GAAiB,SAAAjJ,GAAS,OAAIA,EAAY,MAoHlB,SAA+B,cAAC,KAAD,MAC/B,4BAAIkK,IAAOlB,KACX,wBAAQpO,QAlHnB,WACK,KAAlBoO,GACAI,GAAgB,SAAApJ,GAAS,OAAIA,EAAY,KACzCiJ,EAAiB,IAEjBA,GAAiB,SAAAjJ,GAAS,OAAIA,EAAY,MA6GlB,SAA+B,cAAC,KAAD,SAG/B,eAACyH,GAAD,WACI,wBAAQ7M,QAnJxB,WAEZ0O,GADAD,GAAoB,EAAI,EACH,EAGA,SAAArJ,GAAS,OAAIA,EAAY,KA8IlB,SAA8B,cAAC,KAAD,MAC9B,gCACI,4BAAIqJ,GAAoB,IACxB,4BAAIa,IAAOlB,QAEf,wBAAQpO,QA/IxB,WAChB,IAAMqI,EAAe,IAAI5H,KAAK8N,EAAcH,EAAe,GAAGxN,UAC9D2E,QAAQC,IAAwB,EAApBiJ,IACZlJ,QAAQC,IAAI6C,GAERqG,GAD2B,GAAzBD,GAAoB,IAAWpG,EACZ,EAEA,SAAAjD,GAAS,OAAIA,EAAY,KAwIlB,SAA8B,cAAC,KAAD,SAI1C,6BACKmK,IAAejN,KAAI,SAAC3C,EAAM4C,GAAP,OAChB,cAACuK,GAAD,CAA0B1N,SAAUwO,IAAyBrL,EAAKvC,QAAS,kBAAM6N,EAAwBtL,IAAzG,SAAgH5C,GAA3F4C,WAIjC,cAACkK,GAAD,UAC8B,IAAzBmB,EACG,cAAC,EAAD,CACIrO,SAAUC,EACVc,MAAO8N,EACP7N,KAAMgO,EACN/N,yBAA0BA,KAG1B,cAAC,GAAD,CACIjB,SAAUC,EACVc,MAAO8N,EACP7N,KAAMgO,EACNrG,UAAWuG,GACXjO,yBAA0BA,OAM1C,cAAC,GAAD,CAAyB8J,WAAY9K,OAI5CgJ,IACG,cAAC,GAAD,CACI1E,IAAK0E,a,+7CCtP7B,IAAMgH,EAAcC,YAAH,KAMJC,EAAa3Q,IAAOC,IAAV,IAwBTwQ,EAmBAA,GC5BCG,IAnBK,SAAC,GAAkD,IAAhDzJ,EAA+C,EAA/CA,aAAcD,EAAiC,EAAjCA,MAAOtG,EAA0B,EAA1BA,KAASiQ,EAAiB,+CAClE,OACI,eAACF,EAAD,WACI,mCACIG,UAAU,aACVlQ,KAAMA,EACNoH,SAAUb,GACN0J,IAEP3J,EACG,uBAAO6J,QAASnQ,EAAMkQ,UAAS,UAAKD,EAAWpN,MAAMI,OAAS,SAAW,GAA1C,qBAA/B,SACKqD,IAEL,U,iLCfH0I,EAAW,SAACoB,GAAwB,IAAlBC,EAAiB,0DACZ3O,mBAAS,MADG,mBACrCH,EADqC,KAC3B+O,EAD2B,OAElB5O,mBAAS,MAFS,mBAErC6O,EAFqC,KAE9BC,EAF8B,OAGd9O,mBAAS,MAHK,mBAGrCiM,EAHqC,KAG5B8C,EAH4B,OAIV/O,oBAAS,GAJC,mBAIrCF,EAJqC,KAI1BkP,EAJ0B,OAKJhP,mBAAS,GALL,mBAKrCiP,EALqC,KAKvBC,EALuB,KAOtCnP,EAAU,kBAAMmP,GAAgB,SAAAC,GAAgB,OAAIA,EAAmB,MAqB7E,OAnBA5O,qBAAU,YACS,uCAAG,8BAAA6O,EAAA,0DACVT,EADU,0EAGQU,MAAM,GAAD,OAAIC,6BAAJ,YAA8CZ,IAH3D,cAGJa,EAHI,gBAISA,EAAIC,OAJb,OAIJpO,EAJI,OAMV2N,EAAW3N,EAAK6K,SAChB2C,EAAYxN,GACZ4N,GAAa,GARH,kDAUVF,EAAS,EAAD,IACRE,GAAa,GACbD,EAAW,0BAZD,0DAAH,qDAefU,KACD,CAACR,IAEG,CAAEpP,WAAUC,YAAW+O,QAAO5C,UAASlM,YAGrC4D,EAAkB,SAAC+K,EAAMgB,GAA4B,IAAlBf,EAAiB,0DAC7B3O,mBAAS,MADoB,mBACtDH,EADsD,KAC5C+O,EAD4C,OAEnC5O,mBAAS,MAF0B,mBAEtD6O,EAFsD,KAE/CC,EAF+C,OAG3B9O,oBAAS,GAHkB,mBAGtDF,EAHsD,KAG3CkP,EAH2C,OAIrBhP,mBAAS,GAJY,mBAItDiP,EAJsD,KAIxCC,EAJwC,KAMvDnP,EAAU,kBAAMmP,GAAgB,SAAAC,GAAgB,OAAIA,EAAmB,MAEvEQ,EAAY,IAAIC,QACtBD,EAAUE,OAAO,aAAcC,aAAaC,QAAQT,cACpDK,EAAUE,OAAO,eAAgB,oBAEjC,IAAMG,EAAMC,KAAKC,UAAUR,GAErBS,EAAiB,CACnBC,OAAQ,OACRC,QAASV,EACTW,KAAMN,EACNO,SAAU,UAqBd,OAlBAhQ,qBAAU,YACS,uCAAG,8BAAA6O,EAAA,0DACVT,EADU,wDAEdK,GAAa,GAFC,kBAIQK,MAAM,GAAD,OAAIC,6BAAJ,YAA8CZ,GAAQyB,GAJnE,cAIJZ,EAJI,gBAKSA,EAAIC,OALb,OAKJpO,EALI,OAOVwN,EAAYxN,GACZ4N,GAAa,GARH,kDAUVF,EAAS,EAAD,IACRE,GAAa,GAXH,0DAAH,qDAcfS,KACD,CAACR,EAAcP,IAEX,CAAE7O,WAAUC,YAAW+O,QAAO9O,YAG5BH,EAAe,SAAC8O,EAAMrI,GAAsB,IAAlBsI,EAAiB,0DACpB3O,mBAAS,MADW,mBAC7CH,EAD6C,KACnC+O,EADmC,OAE1B5O,mBAAS,MAFiB,mBAE7C6O,EAF6C,KAEtCC,EAFsC,OAGlB9O,oBAAS,GAHS,mBAG7CF,EAH6C,KAGlCkP,EAHkC,OAIZhP,mBAAS,GAJG,mBAI7CiP,EAJ6C,KAI/BC,EAJ+B,KAM9CnP,EAAU,kBAAMmP,GAAgB,SAAAC,GAAgB,OAAIA,EAAmB,MAEvEQ,EAAY,IAAIC,QACtBD,EAAUE,OAAO,aAAcC,aAAaC,QAAQT,cACpDK,EAAUE,OAAO,eAAgB,oBAEjC,IAAMM,EAAiB,CACnBC,OAAQ,MACRC,QAASV,EACTY,SAAU,UAqBd,OAlBAhQ,qBAAU,YACS,uCAAG,8BAAA6O,EAAA,0DACVT,EADU,wDAEdK,GAAa,GAFC,kBAIQK,MAAM,GAAD,OAAIC,6BAAJ,YAA8CZ,EAA9C,YAAsDrI,GAAM8J,GAJzE,cAIJZ,EAJI,gBAKSA,EAAIC,OALb,OAKJpO,EALI,OAOVwN,EAAYxN,GACZ4N,GAAa,GARH,kDAUVF,EAAS,EAAD,IACRE,GAAa,GAXH,0DAAH,qDAcfS,KACD,CAACR,EAAcP,EAAMrI,IAEjB,CAAExG,WAAUC,YAAW+O,QAAO9O,a,28BC5GlC,IAAMnB,EAAYlB,IAAOC,IAAV,IAOhBqN,KAgCOwF,EAAiB9S,IAAOC,IAAV,KC7BZ8S,IAVS,SAAC,GAAkB,IAAhBC,EAAe,EAAfA,SACvB,OACI,cAAC9R,EAAD,UACI,cAAC4R,EAAD,UACKE,Q,0FCHF,SAASC,EAAmBjQ,GACzC,OCJa,SAA4BA,GACzC,GAAIsH,MAAM4I,QAAQlQ,GAAM,OAAO,OAAAmQ,EAAA,GAAiBnQ,GDGzC,CAAkBA,IELZ,SAA0BoQ,GACvC,GAAsB,qBAAXC,QAA0BA,OAAOC,YAAYC,OAAOH,GAAO,OAAO9I,MAAMkJ,KAAKJ,GFIvD,CAAgBpQ,IAAQ,OAAAyQ,EAAA,GAA2BzQ,IGLvE,WACb,MAAM,IAAI0Q,UAAU,wIHIwE,K,iiBIHvF,IAAMC,E,KAAoB3T,EAAOC,IAAV,KAMN,qBAAGI,SAA0B,uBAAyB,0CACjE,qBAAGA,SAA0B,2BAA6B,iCACjD,qBAAGA,SAA0B,SAAW,YCE/CuT,IARQ,SAAC,GAAqD,IAAnD1M,EAAkD,EAAlDA,MAAO7G,EAA2C,EAA3CA,SAAU6L,EAAiC,EAAjCA,YAAgB2H,EAAiB,kDACxE,OACI,cAACF,EAAD,yBAAmBtT,SAAUA,EAAUY,QAASiL,GAAiB2H,GAAjE,aACK3M,O,4qCCHN,IAAM4M,EAAkB9T,IAAOC,IAAV,IAKtBqN,KAOOyG,EAAO/T,IAAOC,IAAV,KAQJ+T,EAAQhU,IAAOC,IAAV,KAeLgU,GAVejU,IAAOC,IAAV,KAUGD,YAAOI,IAAPJ,CAAH,MAMZuM,EAAYvM,YAAOI,IAAPJ,CAAH,KCCPkU,IAjCO,SAAC,GAAkG,IAAhGnF,EAA+F,EAA/FA,YAAaoF,EAAkF,EAAlFA,aAAchN,EAAoE,EAApEA,aAAckJ,EAAsD,EAAtDA,MAAsD,KAA/C+D,MAA+C,EAAlC9D,wBAAkC,MAAhB,aAAgB,EASpH,OACI,eAACwD,EAAD,WACI,cAACC,EAAD,UACI,6BAAK1D,MAGT,eAAC2D,EAAD,WACKG,GAAgB,8BACb,cAAC,IAAD,CACIvM,KAAK,SACLhH,KAAK,YACL6C,MAAOsL,EACP5H,aAAcA,EACdE,WArBQ,SAAClB,GACL,KAAhB4I,GACc,UAAV5I,EAAEmB,KACF6M,KAmBQjN,MAAM,yBAGbiN,GAAgB,cAACF,EAAD,CAAchT,QAASkT,EAAvB,gCACjB,cAAC5H,EAAD,CAAWtL,QAASqP,EAApB,iC,uiBCnCT,IAAM+D,EAAkBrU,IAAOC,IAAV,IAEtBqN,KAYOgH,EAAYtU,YAAOI,IAAPJ,CAAH,KAEE,qBAAGoI,OAAsB,uBAAyB,qCAC7D,qBAAGA,OAAsB,OAAS,+BAC5B,qBAAGA,OAAsB,IAAM,OACnC,qBAAGA,OAAsB,eAAiB,wBACtC,qBAAGA,OAAsB,SAAW,YCAxChE,IAlBO,SAAC,GAA2D,IAAzD0C,EAAwD,EAAxDA,MAAOE,EAAiD,EAAjDA,YAAaC,EAAoC,EAApCA,eAAmB4J,EAAiB,wDAE7E,OACI,cAACwD,EAAD,2BAAqBxD,GAArB,aACI,6BAEQ/J,EAAMvD,KAAI,SAAAgR,GAAI,OACV,6BACI,cAACD,EAAD,CAAWlM,OAAQmM,EAAK5L,KAAO3B,EAAa/F,QAAS,kBAAMgG,EAAesN,EAAK5L,KAA/E,SAAsF4L,EAAK3T,QADtF2T,EAAK5L,c,suCCZtC,IAAM8H,EAAcC,YAAH,KAMJC,EAAa3Q,IAAOC,IAAV,IAyBTwQ,EAeAA,GCzBC+D,IAnBQ,SAAC,GAAkD,IAAhDrN,EAA+C,EAA/CA,aAAcD,EAAiC,EAAjCA,MAAOtG,EAA0B,EAA1BA,KAASiQ,EAAiB,+CACrE,OACI,eAACF,EAAD,WACI,sCACIG,UAAU,aACVlQ,KAAMA,EACNoH,SAAUb,GACN0J,IAEP3J,EACG,uBAAO6J,QAASnQ,EAAMkQ,UAAS,UAAKD,EAAWpN,MAAMI,OAAS,SAAW,GAA1C,qBAA/B,SACKqD,IAEL,U,olBCjBHuN,EAAgB,CACzB,CACI7T,KAAM,QACN6C,MAAO,SAEX,CACI7C,KAAM,QACN6C,MAAO,SAEX,CACI7C,KAAM,QACN6C,MAAO,SAEX,CACI7C,KAAM,QACN6C,MAAO,SAEX,CACI7C,KAAM,QACN6C,MAAO,SAEX,CACI7C,KAAM,QACN6C,MAAO,SAEX,CACI7C,KAAM,QACN6C,MAAO,SAEX,CACI7C,KAAM,QACN6C,MAAO,SAEX,CACI7C,KAAM,QACN6C,MAAO,SAEX,CACI7C,KAAM,QACN6C,MAAO,SAEX,CACI7C,KAAM,QACN6C,MAAO,SAEX,CACI7C,KAAM,QACN6C,MAAO,SAEX,CACI7C,KAAM,QACN6C,MAAO,SAEX,CACI7C,KAAM,QACN6C,MAAO,SAEX,CACI7C,KAAM,QACN6C,MAAO,SAEX,CACI7C,KAAM,QACN6C,MAAO,SAEX,CACI7C,KAAM,QACN6C,MAAO,SAEX,CACI7C,KAAM,QACN6C,MAAO,SAEX,CACI7C,KAAM,QACN6C,MAAO,SAEX,CACI7C,KAAM,QACN6C,MAAO,SAEX,CACI7C,KAAM,QACN6C,MAAO,SAEX,CACI7C,KAAM,QACN6C,MAAO,SAEX,CACI7C,KAAM,QACN6C,MAAO,SAEX,CACI7C,KAAM,QACN6C,MAAO,SAEX,CACI7C,KAAM,QACN6C,MAAO,SAEX,CACI7C,KAAM,QACN6C,MAAO,SAEX,CACI7C,KAAM,QACN6C,MAAO,SAEX,CACI7C,KAAM,QACN6C,MAAO,SAEX,CACI7C,KAAM,QACN6C,MAAO,SAEX,CACI7C,KAAM,QACN6C,MAAO,SAEX,CACI7C,KAAM,QACN6C,MAAO,SAEX,CACI7C,KAAM,QACN6C,MAAO,SAEX,CACI7C,KAAM,QACN6C,MAAO,SAEX,CACI7C,KAAM,QACN6C,MAAO,SAEX,CACI7C,KAAM,QACN6C,MAAO,SAEX,CACI7C,KAAM,QACN6C,MAAO,SAEX,CACI7C,KAAM,QACN6C,MAAO,SAEX,CACI7C,KAAM,QACN6C,MAAO,SAEX,CACI7C,KAAM,QACN6C,MAAO,SAEX,CACI7C,KAAM,QACN6C,MAAO,SAEX,CACI7C,KAAM,QACN6C,MAAO,SAEX,CACI7C,KAAM,QACN6C,MAAO,SAEX,CACI7C,KAAM,QACN6C,MAAO,SAEX,CACI7C,KAAM,QACN6C,MAAO,SAEX,CACI7C,KAAM,QACN6C,MAAO,SAEX,CACI7C,KAAM,QACN6C,MAAO,UAIFH,EAAW,CACpB,WACA,SACA,SACA,eACA,SACA,SACA,eAGSiN,EAAS,CAClB,YACA,aACA,QACA,WACA,SACA,SACA,SACA,SACA,YACA,aACA,WACA,YAGSC,EAAiB,CAC1B,SACA,kBAUSzN,EAAuB,SAAChB,GAEjC,IADA,IAAIiB,EAAM,GACD0R,EAAI3S,EAAe2S,EAAI,EAAGA,IAC/B1R,EAAIyL,KAAK,CACL9K,UAAW+Q,EACXvK,WAAW,EACXC,WAAW,IAGnB,OAAOpH,GAGEG,EAAmB,SAAClB,GAE7B,IADA,IAAIe,EAAM,GACD0R,EAAI,EAAGA,GAAKzS,EAAUyS,IAC3B1R,EAAIyL,KAAK,CACL9K,UAAW+Q,EACXvK,WAAW,EACXE,WAAW,IAGnB,OAAOrH,GAGEC,EAAsB,SAACrB,GAEhC,IADA,IAAIoB,EAAM,GACD0R,EAAI,EAAGA,GAAK9S,EAAS8S,IAC1B1R,EAAIyL,KAAK,CACL9K,UAAW+Q,IAGnB,OAAO1R,GAGEK,EAAa,SAACsR,EAAMnU,EAAUe,EAAOC,GAC9C,IAAKhB,EAASoU,OAAQ,OAAOD,EAC7B,IAEME,EAFctB,OAAOuB,KAAP,OAAYtU,QAAZ,IAAYA,OAAZ,EAAYA,EAAUoU,QAET3E,QAAO,SAAC9H,GACrC,IAAM4M,EAAsB5M,EAAQxB,MAAM,KACtCqO,GAAe,EAQnB,GANAD,EAAoBE,SAAQ,SAAAxR,GACxB,GAAIlC,IAAUmF,OAAOqO,EAAoB,IAAM,GAAKvT,IAASkF,OAAOqO,EAAoB,IACpF,OAAOC,GAAe,KAI1BA,EACA,OAAO7M,KA8Bf,OA1B4BwM,EAAKpR,KAAI,SAAAwB,GACjC,IAAImQ,EAAS,GAkBb,OAhBAL,EAAaI,SAAQ,SAAAzP,GACjB,IAAM2P,EAAc3P,EAAKmB,MAAM,KAC/B,OAAID,OAAOyO,EAAY,MAAQpQ,EAAIpB,UACxBuR,EAAS,CACZvR,UAAWoB,EAAIpB,UACfC,SAAUpD,EAASoU,OAAOpP,GAC1BG,YAAakP,EAAalK,MAAK,SAAAyK,GAAQ,OAAIA,IAAa5P,MAGxD0P,EAAOtR,cAAX,EACOsR,EAAS,CACZvR,UAAWoB,EAAIpB,cAKvBuR,EAAOtR,SAAiBsR,EAErB,CACHvR,UAAWoB,EAAIpB,eAOd+G,EAAuB,SAAC2K,EAAWC,GAC5C,IAAIC,GAAS,EASb,OARID,GACAA,EAAYL,SAAQ,SAAA9M,GAChB,IAAMqN,EAAoBrN,EAAQxB,MAAM,KACxC,GAAID,OAAO8O,EAAkB,MAAQH,EACjC,OAAOE,GAAS,KAIrBA,GAGEE,EAAoB,SAAAC,GAC7B,IAAIC,EAAG,eAAQD,GAaf,OAZIC,EAAI/R,iBAAiB+R,EAAG,cACTC,IAAfD,EAAIf,eAA6Be,EAAG,YACxBC,IAAZD,EAAIE,YAA0BF,EAAG,IACjCA,EAAI3U,YAAY2U,EAAG,IACnBA,EAAIG,oBAAoBH,EAAG,YAC3BA,EAAII,aACJJ,EAAG,2BACIA,GADJ,IAECI,WAAYC,EAAsBL,EAAII,eAIvCJ,GAGEM,EAAmB,SAAAC,GAG5B,OAFY3C,OAAOuB,KAAKoB,GACA3S,KAAI,SAAAE,GAAK,OAAIA,EAAMkD,MAAM,KAAKwP,UAAUC,KAAK,SAI5DJ,EAAwB,SAAAK,GACjC,IAAIV,EAAM,GASV,OARoBU,EAAc9S,KAAI,SAAAE,GAAK,OAAIA,EAAMkD,MAAM,KAAKwP,UAAUC,KAAK,QAEnEnB,SAAQ,SAAAlQ,GAChB4Q,EAAG,2BACIA,GADJ,kBAEE5Q,EAAM,mBAGR4Q,GAGE1J,EAAmB,SAAAqK,GAC5B,IAAIX,EAAG,eAAQW,GASf,OARIX,EAAI1N,aAAa0N,EAAG,UACRC,IAAZD,EAAIE,YAA0BF,EAAG,IACjCA,EAAI3U,YAAY2U,EAAG,IACnBA,EAAIG,oBAAoBH,EAAG,iBACPC,IAApBD,EAAIY,oBAAkCZ,EAAG,YACzCA,EAAIzF,iBAAiByF,EAAG,SACxBA,EAAInV,iBAAiBmV,EAAG,SAErBA,GAGEpN,EAAa,SAAC5C,GACvB,IAAMwP,EAAW,OAAGxP,QAAH,IAAGA,OAAH,EAAGA,EAAaH,KAAKmB,MAAM,KACtC6P,EAAY,UAAMrB,EAAY,GAAlB,YAAwBA,EAAY,GAApC,YAA0CA,EAAY,IAClEsB,EAAY,WAAiB,OAAX9Q,QAAW,IAAXA,OAAA,EAAAA,EAAaF,MAAO,GAApB,kBAA6BE,QAA7B,IAA6BA,OAA7B,EAA6BA,EAAaF,MAA1C,OAAmDE,QAAnD,IAAmDA,OAAnD,EAAmDA,EAAaF,KAAtE,YAAmG,KAAV,OAAXE,QAAW,IAAXA,OAAA,EAAAA,EAAaD,KAAb,kBAA6BC,QAA7B,IAA6BA,OAA7B,EAA6BA,EAAaD,KAA1C,OAAkDC,QAAlD,IAAkDA,OAAlD,EAAkDA,EAAaD,KAE/J,MAAM,GAAN,OAAU+Q,EAAV,YAA0BD,IAGjB1Q,EAA0B,SAACtF,EAAUuE,GAC9C,IAAI2R,EAAW,IAAIhV,KAAKqD,EAAIvD,KAAMuD,EAAIxD,MAAOwD,EAAIpB,WAAW3B,SAE5D,GADiB,IAAb0U,IAAgBA,EAAW,GACW,MAAtClW,EAASgK,WAAWkM,EAAW,GACnC,OAAOlW,EAASgK,WAAWkM,EAAW,GAAG9L,QAAQ,IAAK,MAE7C5E,EAAwB,SAACxF,EAAUuE,GAC5C,IAAI2R,EAAW,IAAIhV,KAAKqD,EAAIvD,KAAMuD,EAAIxD,MAAOwD,EAAIpB,WAAW3B,SAE5D,GADiB,IAAb0U,IAAgBA,EAAW,GACS,MAApClW,EAASiK,SAASiM,EAAW,GACjC,OAAOlW,EAASiK,SAASiM,EAAW,GAAG9L,QAAQ,IAAK,O,uJC7X3CvB,EAAiBsN,wBAAc,CACxCC,eAAgB,aAChBC,eAAgB,aAChBC,eAAgB,aAChBrL,cAAe,aACfC,cAAe,aACfwB,cAAe,aACfjI,kBAAmB,eAoQR8R,UAjQS,SAAC,GAAkB,IAAhB/D,EAAe,EAAfA,SACfvE,EAASC,cAATD,KACAuI,EAAU5N,qBAAW6D,KAArB+J,MAF8B,EAQlC5N,qBAAWgF,KAJX6I,EAJkC,EAIlCA,WACA3F,EALkC,EAKlCA,aACAhD,EANkC,EAMlCA,aACAE,EAPkC,EAOlCA,WAGEyD,EAAY,IAAIC,QACtBD,EAAUE,OAAO,aAAc6E,GAC/B/E,EAAUE,OAAO,eAAgB,oBAEjC,IAAMyE,EAAc,uCAAG,WAAOM,GAAP,qBAAAxF,EAAA,6DACnBJ,GAAa,GACbhD,GAAa,GAEPgE,EAAMC,KAAKC,UAAU0E,GAErBzE,EAAiB,CACnBC,OAAQ,OACRC,QAASV,EACTW,KAAMN,EACNO,SAAU,UAVK,kBAcQlB,MAAM,GAAD,OAAIC,6BAAJ,gCAA0Ea,GAdvF,cAcTtQ,EAdS,iBAeIA,EAAS2P,OAfb,aAeTpO,EAfS,QAiBNlD,SAjBM,wBAkBX8Q,GAAa,GACb9C,IACAC,EAAK,yBApBM,2BAwBf6C,GAAa,GACb2F,EAAWvT,EAAKyT,WAzBD,kDA4Bf3Q,QAAQC,IAAR,MACAwQ,EAAW,0BACX3F,GAAa,GA9BE,0DAAH,sDAkCduF,EAAc,uCAAG,WAAOO,EAAkB7L,GAAzB,qBAAAmG,EAAA,6DACnBJ,GAAa,GACbhD,GAAa,GAEPgE,EAAMC,KAAKC,UAAU4E,GAErB3E,EAAiB,CACnBC,OAAQ,QACRC,QAASV,EACTW,KAAMN,EACNO,SAAU,UAVK,kBAeQlB,MAAM,GAAD,OAAIC,6BAAJ,wCAA0ErG,GAAckH,GAfrG,cAeTtQ,EAfS,iBAgBIA,EAAS2P,OAhBb,WAgBTpO,EAhBS,OAkBf8C,QAAQC,IAAI/C,IAGRA,EAAKlD,SArBM,wBAsBX8Q,GAAa,GACb9C,IACAC,EAAK,yBAxBM,2BA6Bf6C,GAAa,GACb2F,EAAWvT,EAAKyT,WA9BD,kDAgCf3Q,QAAQC,IAAR,MACAwQ,EAAW,0BACX3F,GAAa,GAlCE,0DAAH,wDAsCdwF,EAAc,uCAAG,WAAOvL,GAAP,mBAAAmG,EAAA,6DACnBJ,GAAa,GACbhD,GAAa,GAEPmE,EAAiB,CACnBC,OAAQ,SACRC,QAASV,EAETY,SAAU,UARK,kBAaQlB,MAAM,GAAD,OAAIC,6BAAJ,wCAA0ErG,GAAckH,GAbrG,cAaTtQ,EAbS,gBAcIA,EAAS2P,OAdb,OAcTpO,EAdS,OAgBf8C,QAAQC,IAAI/C,GAEZ4N,GAAa,GACb2F,EAAWvT,EAAKyT,WAnBD,kDAqBf3Q,QAAQC,IAAR,MACAwQ,EAAW,0BACX3F,GAAa,GAvBE,0DAAH,sDA2Bd7F,EAAa,uCAAG,WAAOpD,GAAP,qBAAAqJ,EAAA,6DAClBJ,GAAa,GACbhD,GAAa,GAEPgE,EAAMC,KAAKC,UAAUnK,GAErBoK,EAAiB,CACnBC,OAAQ,OACRC,QAASV,EACTW,KAAMN,EACNO,SAAU,UAVI,kBAeSlB,MAAM,GAAD,OAAIC,6BAAJ,+BAAyEa,GAfvF,cAeRtQ,EAfQ,iBAgBKA,EAAS2P,OAhBd,WAgBRpO,EAhBQ,OAkBd8C,QAAQC,IAAI/C,IACRA,EAAKyE,QAnBK,wBAoBVmJ,GAAa,GACb9C,IArBU,2BAyBd8C,GAAa,GACb2F,EAAWvT,EAAKyT,WA1BF,kDA4Bd3Q,QAAQC,IAAR,MACAwQ,EAAW,0BACX3F,GAAa,GA9BC,0DAAH,sDAkCb5F,EAAa,uCAAG,WAAOM,EAAiBlB,GAAxB,qBAAA4G,EAAA,6DAClBJ,GAAa,GACbhD,GAAa,GAEPgE,EAAMC,KAAKC,UAAUxG,GAErByG,EAAiB,CACnBC,OAAQ,QACRC,QAASV,EACTW,KAAMN,EACNO,SAAU,UAVI,kBAeSlB,MAAM,GAAD,OAAIC,6BAAJ,uCAAyE9G,GAAa2H,GAfpG,cAeRtQ,EAfQ,iBAgBKA,EAAS2P,OAhBd,QAgBRpO,EAhBQ,OAkBd8C,QAAQC,IAAI/C,GAEZ4N,GAAa,GACb2F,EAAWvT,EAAK6K,SArBF,kDAuBd/H,QAAQC,IAAR,MACAwQ,EAAW,0BACX3F,GAAa,GAzBC,0DAAH,wDA6BbpE,EAAa,uCAAG,WAAOpC,GAAP,mBAAA4G,EAAA,6DAClBJ,GAAa,GACbhD,GAAa,GAEPmE,EAAiB,CACnBC,OAAQ,SACRC,QAASV,EACTY,SAAU,UAPI,kBAWSlB,MAAM,GAAD,OAAIC,6BAAJ,uCAAyE9G,GAAa2H,GAXpG,cAWRtQ,EAXQ,gBAYKA,EAAS2P,OAZd,OAYRpO,EAZQ,OAcd8C,QAAQC,IAAI/C,GAEZ4N,GAAa,GACb2F,EAAWvT,EAAK6K,SAjBF,kDAmBd/H,QAAQC,IAAR,MACAwQ,EAAW,0BACX3F,GAAa,GArBC,0DAAH,sDAyBbrM,EAAiB,uCAAG,WAAOoS,EAAkBrS,EAAiBF,GAA1C,qBAAA4M,EAAA,6DACtBJ,GAAa,GACbhD,GAAa,GAEPgE,EAAMC,KAAKC,UAAU6E,GAErB5E,EAAiB,CACnBC,OAAQ,OACRC,QAASV,EACTW,KAAMN,EACNO,SAAU,UAVQ,kBAcKlB,MAAM,GAAD,OAAIC,6BAAJ,6BAAuEa,GAdjF,cAcZtQ,EAdY,iBAeCA,EAAS2P,OAfV,QAeZpO,EAfY,OAiBlB8C,QAAQC,IAAI,wBACZD,QAAQC,IAAI/C,GAERA,EAAK4B,cACLgM,GAAa,GAEbtM,IACAwJ,IACA1J,KAIJwM,GAAa,GACb2F,EAAWvT,EAAKyT,WA9BE,kDAgClB3Q,QAAQC,IAAR,MACAwQ,EAAW,0BACX3F,GAAa,GAlCK,0DAAH,0DAuCvB,OACI,cAACjI,EAAeiO,SAAhB,CACI7T,MAAO,CACHmT,iBACAC,iBACAC,iBACArL,gBACAC,gBACAwB,gBACAjI,qBARR,SAWK+N","file":"static/js/7.6df4d5e7.chunk.js","sourcesContent":["import styled from \"styled-components\"\nimport CustomButton from '../custom-button/custom-button.component'\n\nexport const ContainerOverview = styled.div`\n    padding: 2rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n\n    &:not(:last-child) {\n        /* margin-right: 2rem; */\n    }\n\n    h3  { \n        font-size: 1.8rem;\n    }\n\n    p {\n        font-size: 1.4rem;\n        opacity: .83;\n\n        span {\n            font-weight: bolder;\n        }\n    }\n`\n\nexport const Options = styled.div`\n    display: flex;\n`\n\nexport const ShowButton = styled(CustomButton)`\n    margin-top: 2rem;\n    font-size: 1.4rem;\n    display: block;\n    background-color: ${({ isActive }) => isActive ? \"var(--primary-color)\" : \"var(--body-background-primary-color)\"};\n    font-weight: bolder;\n    color: ${({ isActive }) => isActive ? \"var(--button-font-color)\" : \"var(--primary-color)\"};\n`\nexport const UpdateButton = styled(CustomButton)`\n    margin-top: 2rem;\n    font-size: 1.4rem;\n    display: block;\n    margin-left: 2rem;;\n`\n","import React from 'react'\n\nimport {\n    ContainerOverview,\n    UpdateButton,\n    Options,\n    ShowButton\n} from './booking-calendar-overview.styles'\n\nconst BookingCalendarOverview = ({\n    calendar = {},\n    selectedCalendar = null,\n    handleShowUpClick = () => { },\n    handleUpdateClick = () => { }\n}) => {\n    return (\n        <ContainerOverview>\n            <h3>{calendar?.name}</h3>\n            <p>Interval medzi vyšetreniami: <span>{calendar?.interval}min</span></p>\n            <p>Počet minút pred rezerváciou: <span>{calendar?.allowMinutesBefore}min</span></p>\n            <p>Koľko dní dopredu sa da objednať: <span>{calendar?.daysIntoFuture}</span></p>\n            <Options>\n                <ShowButton isActive={selectedCalendar === calendar?._id} onClick={handleShowUpClick}>Zobraziť</ShowButton>\n                <UpdateButton onClick={handleUpdateClick}>Upraviť</UpdateButton>\n            </Options>\n        </ContainerOverview>\n    )\n}\n\nexport default BookingCalendarOverview\n","import styled from 'styled-components'\n\nexport const Container = styled.div`\n    width: 100%;\n    display: grid;\n    grid-template-columns: repeat(7, 1fr);\n    border: 1px solid rgba(0,0,0,.1);\n    min-width: 55rem;\n`\n\nexport const HeaderBlock = styled.div`\n    cursor: default;\n    height: 8rem;\n    background-color: var(--color-black);\n    color: var(--table-head-color);\n    display: flex;\n    align-items:center;\n    justify-content:center;\n    font-weight: 700;\n`\n\nexport const Dayblock = styled.div`\n    height: 8rem;\n    display: flex;\n    justify-content: space-between;\n    align-items: flex-end;\n    border: 1px solid rgba(0,0,0,.1);\n    padding: .6rem 1rem;\n\n    transition: all .15s;\n\n    p {\n        span {\n            width: 3rem;\n            height: 3rem;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            border-radius: 50%;\n            background-color: var(--body-background-primary-color);\n            color: var(--primary-color);\n            font-weight: bolder;\n            font-size: 1.5rem;\n        }\n    }\n\n    ${({ faded }) => faded ? \"opacity: .6\" : (`    \n        cursor: pointer;\n        &:hover {\n        background-color: var(--body-background-primary-color);\n        }\n    `)};\n\n\n\n`\n","import React, { useState, useEffect } from 'react'\n\nimport {\n    dayNames,\n    getPreviousMonthDays,\n    getNextMonthDays,\n    getCurrentMonthDays,\n    getBooking\n} from '../../utils/calendar.utils'\n\nimport { useFetchById } from '../../hooks/useFetch'\n\nimport {\n    Container,\n    HeaderBlock,\n    Dayblock,\n\n} from './calendar.styles'\n\nconst Calendar = ({\n    calendar,\n    month,\n    year,\n    handleCalendarBlockClick\n}) => {\n    const date = new Date()\n\n    date.setDate(1)\n    const lastDay = new Date(year, month + 1, 0).getDate()\n    const prevLastDay = new Date(year, month, 0).getDate()\n\n    const firstDayIndex = new Date(year, month, 0).getDay();\n    const lastDayIndex = new Date(year, month + 1, 0).getDay()\n\n    const nextDays = 7 - lastDayIndex\n\n    const { response, isLoading, refetch } = useFetchById('api/booking/calendars', calendar, !calendar)\n    const [prevDays, setPrevDays] = useState([])\n    const [currentMonthDays, setCurrentMonthDays] = useState([])\n    const [nextMonthDays, setMonthNextDays] = useState([])\n\n    useEffect(() => {\n        refetch()\n    }, [month])\n\n    useEffect(() => {\n        if (calendar) {\n            refetch()\n        }\n    }, [calendar])\n\n    useEffect(() => {\n        if (!isLoading) {\n            if (response?.calendar) {\n                const prevDaysArr = getPreviousMonthDays(firstDayIndex)\n                const arr = getCurrentMonthDays(lastDay)\n                const nextDaysArr = getNextMonthDays(nextDays)\n                const checkedArr = getBooking(arr, response.calendar, month, year)\n\n                setPrevDays(prevDaysArr)\n                setCurrentMonthDays(checkedArr)\n                setMonthNextDays(nextDaysArr)\n            }\n        }\n    }, [isLoading])\n\n    return (\n        <Container>\n\n            {dayNames.map((name, idx) => (\n                <HeaderBlock key={idx}>\n                    {name}\n                </HeaderBlock>\n            ))}\n\n            {prevDays.map((value, idx) => (\n                <Dayblock faded={true} key={idx}>\n                    <p>\n                    </p>\n                    <p>\n                        {prevLastDay - idx}\n                    </p>\n                </Dayblock>\n            ))}\n\n            {currentMonthDays.map((data, idx) => {\n                const { dayNumber, bookings } = data\n                return (\n                    <Dayblock key={idx} onClick={() => handleCalendarBlockClick(data)}>\n                        <p>\n                            {bookings && <span>\n                                {bookings.length}\n                            </span>}\n                        </p>\n                        <p>\n                            {dayNumber}\n                        </p>\n                    </Dayblock>\n                )\n            })}\n            {nextMonthDays.map((value, idx) => (\n                <Dayblock faded={true} key={idx}>\n                    <p>\n                    </p>\n                    <p>\n                        {idx + 1}\n                    </p>\n                </Dayblock>\n            ))}\n        </Container>\n    )\n}\n\nexport default Calendar\n","import styled from 'styled-components'\nimport CustomButton from \"../custom-button/custom-button.component\"\nimport SectionNavbar from \"../section-navbar/section-navbar.component\"\n\n\nexport const ModalContainer = styled.div`\n    position: fixed;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    z-index: 99999;\n\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    background-color: rgba(0,0,0,0.3);\n`\n\nexport const Modal = styled.div`\n    width:100%;\n    max-width: 65rem;\n    max-height: 60rem;\n\n    overflow-y: scroll;\n\n    padding: 2rem;\n    border-radius: .5rem;\n    background-color: var(--background-primary-color);\n    color: var(--primary-text-color);\n\n    position: relative;\n    z-index: 999999;\n\n    h2{ \n        margin-bottom: 2rem;\n        text-align: center;\n    }\n\n    ::-webkit-scrollbar {\n        width: 10px;\n    }\n\n    /* Track */\n    ::-webkit-scrollbar-track {\n        background:  var(--background-primary-color);\n    }\n\n    /* Handle */\n    ::-webkit-scrollbar-thumb {\n        background: var(--primary-color);\n    }\n\n    /* Handle on hover */\n    ::-webkit-scrollbar-thumb:hover {\n        background: var(--primary-color);\n    }\n`\n\nexport const CloseButton = styled.button`\n    width: 100%;\n    height: 100%;\n\n    position: fixed;\n    left: 0;\n    right: 0;\n    z-index: 99999;\n\n    border: none;\n    outline: none;\n    opacity: 0;\n\n    &:focus {\n        outline: none\n    }\n`\n\nexport const SubmitButton = styled(CustomButton)`\n    display: block;\n    margin: 0 auto;\n    background-color: var(--primary-color);\n    font-weight: bolder;\n`\n\nexport const Navbar = styled(SectionNavbar)`\n    ul {\n        justify-content: center;\n    }\n`\n\nexport const SearchTab = styled.div`\n    button {\n        margin-top: 2rem;\n    }\n`\n\nexport const UserTable = styled.div`\n    p {\n        text-align: center;\n        opacity: .6;\n    }\n        margin-bottom: 3rem;\n`\n\nexport const TableHead = styled.div`\n    display: grid;\n    grid-template-columns: 1fr 1fr 1fr;\n`\n\nexport const Tablebody = styled.div`\n    display: grid;\n    grid-template-columns: 1fr 1fr 1fr;\n\n    cursor: pointer;\n    align-content: center;\n    margin-bottom: 1rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n\n    transition: all .3s ease-out;\n\n    &:hover {\n        background-color: var(--primary-color); \n        font-weight: bolder;\n        color: var(--button-font-color);\n    }\n\n`\n\nexport const TableCol = styled.div`\n    padding: 2rem;\n    text-align: center;\n`\n\nexport const CustomSelect = styled.select`\n    margin-top: 2rem;\n    /* min-width: 16.5rem; */\n    width: 100%;\n    background-color: var(--input-background-color);\n    color: var(--input-color);\n    border: none;\n    padding: .8rem .5rem .8rem .5rem;\n    font-size: inherit;\n    font-family: inherit;\n    display: block;\n\n    margin-bottom: 2rem;\n`\n\nexport const DateContainer = styled.div`\n    display: grid;\n    grid-template-columns: 2fr 1fr .4rem 1fr;\n    grid-gap: 1rem;\n\n    p {\n        align-self: center;\n    }\n`","import React, { useState, useEffect } from 'react'\nimport ReactDOM from 'react-dom'\n\nimport CustomInput from '../custom-input/custom-input.component'\nimport CustomTextarea from '../custom-textarea/custom-textarea.component'\n\nimport { useFetchByQuery } from '../../hooks/useFetch'\n\nimport {\n    formatDate,\n    formatCalendarStartTime,\n    formatCalendarEndTime\n} from '../../utils/calendar.utils'\n\nimport {\n    ModalContainer,\n    Modal,\n    CloseButton,\n    SubmitButton,\n    Navbar,\n    UserTable,\n    TableHead,\n    Tablebody,\n    TableCol,\n    SearchTab,\n    CustomSelect,\n    DateContainer\n} from './modal-user-booking.styles'\n\nconst UserBookingModal = ({ close, day, calendar, refetchCalendar, createUserBooking }) => {\n\n    const [query, setQuery] = useState(null)\n    const [activeTab, setActiveTab] = useState(0)\n    const [userBooking, setUserBooking] = useState({})\n    const [bookingDate, setBookingDate] = useState({\n        date: \"\",\n        hour: \"\",\n        min: 0\n    })\n\n    const startTime = formatCalendarStartTime(calendar, day)\n    const endTime = formatCalendarEndTime(calendar, day)\n\n    const { refetch, response } = useFetchByQuery('api/admin/users/filter', query, !query)\n\n    const handleSearch = () => {\n        if (!query) return\n        refetch()\n    }\n\n    const handleSearchOnEnter = (e) => {\n        if (query !== null) {\n            if (e.key === 'Enter') {\n                refetch()\n            }\n        }\n    }\n\n    const handleUserBookingChange = e => {\n        const { name, value } = e.target\n\n        if (value === '') {\n            delete userBooking[name]\n            setUserBooking({ ...userBooking })\n            return\n        }\n\n        setUserBooking(prevValue => ({\n            ...prevValue,\n            [name]: value\n        }))\n    }\n\n    const selectUser = (userObj) => {\n        setUserBooking(prevValue => ({\n            ...prevValue,\n            ...userObj\n        }))\n        setActiveTab(0)\n        setQuery(null)\n    }\n\n    const handleChangeDate = e => {\n        const { name, value } = e.target\n\n        setBookingDate(prevValue => ({\n            ...prevValue,\n            [name]: value\n        }))\n    }\n\n    const handleSubmit = () => {\n        // if (!userBooking?.name) return\n        // if (!userBooking?.email) return\n        // if (!userBooking?.phone) return\n        // if (!userBooking?.booking) return\n\n        let bookingToAdd = {\n            ...userBooking,\n            dueTime: formatDate(bookingDate),\n            values: {}\n        }\n\n        console.log(\"USER BOOKING BEFORE SEND\")\n        console.log(bookingToAdd)\n\n\n        createUserBooking(bookingToAdd, refetchCalendar, close)\n        // refetchCalendar()\n        // close()\n    }\n\n    useEffect(() => {\n        if (day) {\n            const { time, dayNumber, month, year } = day\n            console.log(\"DAY DATA\")\n            console.log(day)\n\n            // const formatedDate = formatDate(`${dayNumber}-${month}-${year}`, time)\n            setBookingDate({\n                date: `${year}-${month < 9 ? `0${month + 1}` : (month + 1)}-${dayNumber < 10 ? `0${dayNumber}` : dayNumber}`,\n                hour: Number(time?.split(\":\")[0]),\n                min: Number(time?.split(\":\")[1])\n            })\n        }\n    }, [day])\n\n    useEffect(() => {\n        return () => {\n            setUserBooking({})\n            setQuery(null)\n            setActiveTab(0)\n        }\n    }, [])\n\n    return ReactDOM.createPortal((\n        <ModalContainer>\n            <CloseButton onClick={close} />\n            <Modal>\n                <h2>Objednať zákazníka</h2>\n\n                <Navbar\n                    items={optionTabs}\n                    activeIndex={activeTab}\n                    setActiveIndex={setActiveTab}\n                />\n\n                {activeTab === 1 ? (\n                    <SearchTab>\n                        <CustomInput\n                            label='Meno, priezvisko, e-mail alebo tel. číslo'\n                            name='query'\n                            value={query ? query?.query : \"\"}\n                            handleChange={e => setQuery({\n                                limit: 10,\n                                query: e.target.value\n                            })}\n                            onKeyPress={handleSearchOnEnter}\n                        />\n\n                        <SubmitButton onClick={handleSearch}>Hľadať</SubmitButton>\n\n\n                        <UserTable>\n                            <TableHead>\n                                <TableCol>Meno</TableCol>\n                                <TableCol>E-mail</TableCol>\n                                <TableCol>Tel. číslo</TableCol>\n                            </TableHead>\n                            {response?.users ? response?.users?.map(({ name, email, phone }, idx) => (\n                                <Tablebody key={idx} onClick={() => selectUser({ name, email, phone })}>\n                                    <TableCol>{name}</TableCol>\n                                    <TableCol>{email}</TableCol>\n                                    <TableCol>{phone}</TableCol>\n                                </Tablebody>\n                            )) : (\n                                    <div>\n                                        <p>Žiaden výsledok</p>\n                                    </div>\n                                )}\n                        </UserTable>\n                    </SearchTab>\n                ) : (\n                        <React.Fragment>\n                            <div>\n                                <h3>Dátum vyšetrenia</h3>\n                                <DateContainer>\n                                    <CustomInput\n                                        label=''\n                                        type='date'\n                                        name='date'\n                                        handleChange={handleChangeDate}\n                                        value={bookingDate?.date}\n\n                                    />\n                                    <div>\n                                        <CustomInput\n                                            label='Čas'\n                                            type='number'\n                                            name='hour'\n                                            value={bookingDate?.hour?.toString()}\n                                            min={startTime?.split(\":\")[0]}\n                                            max={endTime?.split(\":\")[0]}\n                                            handleChange={handleChangeDate}\n                                            step=\"1\"\n                                        />\n                                    </div>\n                                    <p>:</p>\n                                    <div>\n                                        <CustomSelect\n                                            name='min'\n                                            value={bookingDate?.min?.toString()}\n                                            onChange={handleChangeDate}\n                                        >\n                                            <option value={0}>00</option>\n                                            {calendar?.interval === 30 && <option value={30}>30</option>}\n                                        </CustomSelect>\n                                    </div>\n                                </DateContainer>\n                            </div>\n                            <div>\n                                <CustomInput\n                                    label='Meno*'\n                                    name='name'\n                                    value={userBooking?.name || \"\"}\n                                    handleChange={handleUserBookingChange}\n                                />\n                            </div>\n                            <div>\n                                <CustomInput\n                                    label='E-mail*'\n                                    name='email'\n                                    value={userBooking?.email || \"\"}\n                                    handleChange={handleUserBookingChange}\n                                />\n                            </div>\n                            <div>\n                                <CustomInput\n                                    label='Tel. číslo*'\n                                    name='phone'\n                                    value={userBooking?.phone || \"\"}\n                                    handleChange={handleUserBookingChange}\n                                />\n                            </div>\n\n                            <div>\n                                <CustomTextarea\n                                    label='Poznámka'\n                                    name='note'\n                                    rows=\"5\"\n                                    value={userBooking?.note || \"\"}\n                                    handleChange={handleUserBookingChange}\n                                />\n                            </div>\n\n                            <div>\n                                <h3>Vyšetrenie</h3>\n                                <CustomSelect\n                                    name='booking'\n                                    value={userBooking?.booking || \"\"}\n                                    onChange={handleUserBookingChange}\n                                >\n                                    <option value={''}>Nezvolené</option>\n                                    {calendar?.bookings.map((booking, idx) => {\n                                        if (booking.active === false) return\n                                        return (\n                                            <option key={idx} value={booking._id}>{booking.name}</option>\n                                        )\n                                    })}\n                                </CustomSelect>\n                            </div>\n                        </React.Fragment>\n                    )}\n\n                {activeTab === 0 && <SubmitButton onClick={handleSubmit}>Vytvoriť</SubmitButton>}\n            </Modal>\n        </ModalContainer >\n    ), document.getElementById('portal'))\n}\n\nexport default UserBookingModal\n\nconst optionTabs = [\n    {\n        id: 0,\n        name: \"Nový zákazník\",\n    },\n    {\n        id: 1,\n        name: \"Vyhladať zákazníka\",\n    },\n]","import styled from 'styled-components'\n\nexport const Container = styled.div`\n    width: 100%;\n`\n\nexport const HourGrid = styled.div`\n    overflow-y: scroll;\n    /* overflow-x: auto; */\n    height: 60rem;\n    display: grid;\n    grid-template-columns: repeat(7, 1fr);\n    /* border: var(--table-border); */\n    min-width: 55rem;\n    padding-left: 5rem;\n\n\n   ::-webkit-scrollbar {\n        width: 1rem;\n    }\n\n    /* Track */\n    ::-webkit-scrollbar-track {\n        background:  var(--background-primary-color);\n    }\n\n    /* Handle */\n    ::-webkit-scrollbar-thumb {\n        background: var(--primary-color);\n    }\n\n    /* Handle on hover */\n    ::-webkit-scrollbar-thumb:hover {\n        background: var(--primary-color);\n    }\n`\n\nexport const TableHead = styled.div`\n    display: grid;\n    grid-template-columns: repeat(7, 1fr);\n    background-color: var(--color-black);\n\n    /* border: var(--table-border); */\n    min-width: 55rem;\n    padding-left: 5rem;\n    padding-right: 1rem;\n\n`\n\nexport const HeaderBlock = styled.div`\n    cursor: default;\n    height: 8rem;\n    background-color: var(--color-black);\n    color: var(--table-head-color);\n    display: flex;\n    flex-direction: column;\n    align-items:center;\n    justify-content:center;\n    font-weight: 700;\n\n    p:first-child {\n        font-weight: lighter;\n    }\n\n    /* background-color: red; */\n    ${({ isDisabled }) => isDisabled ? (`\n        opacity: .6;\n    `) : ''}\n`\n\nexport const HourBlock = styled.div`\n    background-color: var(--body-background-primary-color);\n    border: var(--table-border);\n \n    \n\n    &:nth-child(1) {\n        div {\n            span {\n                width: 6rem;\n                display: block;\n                opacity: .6;\n                position: absolute;\n                top: 0rem;\n                left: -5.8rem;\n                font-size: 1.4rem;\n                padding: .5rem 1rem .5rem .2rem;\n                border-radius: 9999rem;\n                text-align: end;\n                letter-spacing: .05rem;\n            }\n        }\n    }\n`\n\nexport const HourBlockContainer = styled.div`\n    cursor: pointer;\n    position: relative;\n    height: 10rem;\n    border-bottom: var(--table-border);\n    background-color: var(--background-primary-color);\n\n\n    span {\n        display: none;\n    }\n`\n\nexport const EmptyContainer = styled.div`\n    content: \"\";\n    position: relative;\n    /* position: absolute; */\n    width: 100%;\n    height: 100%;\n    /* top: 0;\n    left: 0;\n    bottom: 0;\n    right: 0; */\n    /* background-color: red; */\n`\n\nexport const AppointmentContainer = styled.div`\n    cursor: pointer;\n    border: var(--appointment-container-border);\n    background-color: var(--appointment-container-background-color);\n    color: var(--appointment-container-text-color);\n    font-weight: bolder;\n    width: 100%;\n    height: 50%;\n    padding: .5rem;\n    /* position: absolute; */\n\n`","import React, { useState, useEffect, useContext } from 'react'\nimport { useFetchById } from '../../hooks/useFetch'\nimport { BookingContext } from '../../context/booking/booking.context'\n\nimport UserBookingModal from '../modal-user-bookings/modal-user-booking.component'\n\nimport {\n    dayNames,\n    getPreviousMonthDays,\n    getNextMonthDays,\n    getCurrentMonthDays,\n    getBooking,\n    checkIfHasAppoinment\n} from '../../utils/calendar.utils'\n\nimport {\n    Container,\n    HeaderBlock,\n    HourBlock,\n    AppointmentContainer,\n    HourGrid,\n    TableHead,\n    HourBlockContainer,\n    EmptyContainer\n} from './calendar-weekdays.styles'\n\nconst WeekDays = ({\n    calendar,\n    year,\n    month,\n    weekIndex,\n    handleCalendarBlockClick\n}) => {\n    const { createUserBooking } = useContext(BookingContext)\n    const { response, isLoading, refetch } = useFetchById('api/booking/calendars', calendar, !calendar)\n    const lastDay = new Date(year, month + 1, 0).getDate()\n    const firstDayIndex = new Date(year, month, 0).getDay();\n    const lastDayIndex = new Date(year, month + 1, 0).getDay()\n    const prevLastDay = new Date(year, month, 0).getDate()\n\n    const nextDays = 7 - lastDayIndex\n\n    const [calendarDays, setCalendarDays] = useState([])\n    const [selectedDay, setSelectedDay] = useState(null)\n    const [showUserBooking, setShowUserBooking] = useState(false)\n\n    const handleOpenUserBookingModal = (dayData) => {\n        setSelectedDay({\n            ...dayData,\n            year,\n            month,\n        })\n        setShowUserBooking(true)\n    }\n\n    useEffect(() => {\n        if (isLoading) return\n\n        if (response.calendar) {\n            const prevMonthDays = getPreviousMonthDays(firstDayIndex)\n            const monthDays = getCurrentMonthDays(lastDay)\n            const nextMonthDays = getNextMonthDays(nextDays)\n            const monthDaysWithBookings = getBooking(monthDays, response.calendar, month, year)\n\n            setCalendarDays([\n                ...prevMonthDays,\n                ...monthDaysWithBookings,\n                ...nextMonthDays\n            ])\n        }\n    }, [isLoading])\n\n    return (\n        <div>\n            {showUserBooking && <UserBookingModal createUserBooking={createUserBooking} refetchCalendar={refetch} calendar={response?.calendar} day={selectedDay} close={() => setShowUserBooking(false)} />}\n            <Container>\n                <TableHead>\n                    {calendarDays.slice(weekIndex * 7, (weekIndex * 7) + 7).map(({ dayNumber, isDisable, isPrevDay, isNextDay }, idx) => (\n                        <HeaderBlock isDisabled={isDisable} key={idx}>\n                            {isPrevDay ? (\n                                <React.Fragment>\n                                    <p>{dayNames[new Date(year, month - 1, prevLastDay - (dayNumber)).getDay()]}</p>\n                                    <p>{prevLastDay - (dayNumber - 1)}</p>\n                                </React.Fragment>\n                            ) : isNextDay ? (\n                                <React.Fragment>\n                                    <p>{dayNames[new Date(year, month + 1, dayNumber - 1).getDay()]}</p>\n                                    <p>{dayNumber} </p>\n                                </React.Fragment>\n                            ) : (\n                                        <React.Fragment>\n                                            <p>{dayNames[new Date(year, month, dayNumber - 1).getDay()]}</p>\n                                            <p>{dayNumber} </p>\n                                        </React.Fragment>\n                                    )}\n                        </HeaderBlock>\n                    ))}\n                </TableHead>\n\n                <HourGrid>\n                    {calendarDays.slice(weekIndex * 7, (weekIndex * 7) + 7).map((dayData, idx) => {\n\n                        return <HourBlock key={idx}>\n                            {[...Array(24)].map((value, index) => {\n                                if (Number(response?.calendar?.startTimes[idx].split('/')[0]) > index) return\n                                if (Number(response?.calendar?.endTimes[idx].split('/')[0]) < index) return\n                                if (response?.calendar?.endTimes[idx] === \"X\") return\n                                return (\n                                    <HourBlockContainer key={index}>\n                                        {dayData.bookings && checkIfHasAppoinment(index, dayData?.bookings) ? (\n                                            <React.Fragment>\n                                                {dayData?.bookings.find(booking => Number(booking?.split('/')[1]) === 0 && Number(booking?.split('/')[0]) === index) && <AppointmentContainer onClick={() => console.log(\"Click\")}>\n                                                    <p>{dayData?.bookings.find(booking => Number(booking?.split('/')[1]) === 0 && Number(booking?.split('/')[0]) === index)?.replace(\"/\", \":\")}</p>\n                                                </AppointmentContainer>}\n                                                {dayData?.bookings.find(booking => Number(booking?.split('/')[1]) === 30 && Number(booking?.split('/')[0]) === index) && <AppointmentContainer onClick={() => console.log(\"Click\")}>\n                                                    <p>{dayData?.bookings.find(booking => Number(booking?.split('/')[1]) === 30 && Number(booking?.split('/')[0]) === index)?.replace(\"/\", \":\")}</p>\n                                                </AppointmentContainer>}\n                                                <EmptyContainer onClick={() => handleOpenUserBookingModal({ ...dayData, time: `${index}:00` })} />\n                                            </React.Fragment>\n                                        ) : (\n                                                <EmptyContainer onClick={() => handleOpenUserBookingModal({ ...dayData, time: `${index}:00` })} />\n                                            )}\n                                        <span>{index}:00</span>\n\n                                    </HourBlockContainer>\n                                )\n                            })}\n                        </HourBlock>\n\n                    })}\n                </HourGrid>\n            </Container>\n        </div>\n    )\n}\n\nexport default WeekDays","import React from 'react'\nimport { useFetchById } from '../../hooks/useFetch'\n\nconst BookingAppoinment = ({ bookingId }) => {\n    const { isLoading, response } = useFetchById(\"api/booking/bookings\", bookingId, !bookingId)\n\n    if (isLoading) return \"Hľadám...\"\n\n    return (\n        <React.Fragment>\n            {response?.booking?.name}\n        </React.Fragment>\n    )\n}\n\nexport default BookingAppoinment\n","import styled from 'styled-components'\n\nexport const TableHead = styled.div`\n    display: grid;\n    align-content: center;\n    grid-template-columns: 10rem 1fr 1fr 20rem 1fr 10rem;\n\n    border-bottom: 1px solid var(--secondary-text-color);\n    font-weight: bolder;\n`\n\n\nexport const TableCol = styled.div`\n    padding: 2rem;\n    text-align: center;\n`\n\nexport const TableRow = styled.div`\n    display: grid;\n    grid-template-columns: 10rem 1fr 1fr 20rem 1fr 10rem;\n    align-items: center;\n    margin-bottom: 1rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n`","import React, { useEffect } from 'react'\n\nimport { useFetchByQuery } from '../../hooks/useFetch'\nimport Spinner from '../spinner/spinner.component'\nimport BookingAppoinment from '../booking-appoinment/booking-appoinment.component'\n\nimport {\n    TableHead,\n    TableRow,\n    TableCol\n} from './booking-appoinment.styles'\n\nconst BookingAppoinments = ({ day }) => {\n    console.log(day)\n\n    const { response, isLoading, refetch } = useFetchByQuery('api/admin/booking/userBookings/filter', {\n        filters: {\n            dueDate: day.bookingDate\n        }\n    })\n\n    useEffect(() => {\n        refetch()\n    }, [day])\n\n    if (isLoading) return <Spinner />\n\n    return (\n        <div>\n            <TableHead>\n                <TableCol>#</TableCol>\n                <TableCol>Vyšetrenie</TableCol>\n                <TableCol>Meno</TableCol>\n                <TableCol>Dátum</TableCol>\n                <TableCol>Poznámka</TableCol>\n                <TableCol>Možnosti</TableCol>\n            </TableHead>\n\n            {response?.userBookings?.map(({ booking, name, dueDate, note }, idx) => (\n                <TableRow key={idx}>\n                    <TableCol>{idx + 1}</TableCol>\n                    <TableCol><BookingAppoinment bookingId={booking} /></TableCol>\n                    <TableCol>{name}</TableCol>\n                    <TableCol>{dueDate}</TableCol>\n                    <TableCol>{note}</TableCol>\n                    <TableCol>Možnosti</TableCol>\n                </TableRow>\n            ))}\n        </div>\n    )\n}\n\nexport default BookingAppoinments\n","import styled from 'styled-components'\nimport CustomButton from '../custom-button/custom-button.component'\n\nexport const ModalContainer = styled.div`\n    position: fixed;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    z-index: 99999;\n\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    background-color: rgba(0,0,0,0.3);\n`\n\nexport const Modal = styled.div`\n    width:100%;\n    max-width: 50rem;\n    max-height: 60rem;\n\n    overflow-y: scroll;\n\n    /* display: flex;\n    flex-direction: column;\n    align-items: center; */\n\n    padding: 2rem;\n    border-radius: .5rem;\n    background-color: var(--background-primary-color);\n    color: var(--primary-text-color);\n\n    position: relative;\n    z-index: 999999;\n\n    ::-webkit-scrollbar {\n        width: 10px;\n    }\n\n    /* Track */\n    ::-webkit-scrollbar-track {\n        background:  var(--background-primary-color);\n    }\n\n    /* Handle */\n    ::-webkit-scrollbar-thumb {\n        background: var(--primary-color);\n    }\n\n    /* Handle on hover */\n    ::-webkit-scrollbar-thumb:hover {\n        background: var(--primary-color);\n    }\n`\n\nexport const CloseButton = styled.button`\n    width: 100%;\n    height: 100%;\n\n    position: fixed;\n    left: 0;\n    right: 0;\n    z-index: 99999;\n\n    border: none;\n    outline: none;\n    opacity: 0;\n\n    &:focus {\n        outline: none\n    }\n`\n\nexport const ModalHeader = styled.div`\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n\n`\n\nexport const InputContainer = styled.div`\n    margin-bottom: 2rem;\n`\n\nexport const SubmitButton = styled(CustomButton)`\n    display: block;\n    margin: 0 auto;\n    background-color: var(--primary-color);\n    font-weight: bolder;\n`","import React, { useState, useContext, useEffect } from 'react'\nimport ReactDOM from 'react-dom'\nimport { BookingContext } from '../../context/booking/booking.context'\n\n\nimport CustomInput from '../custom-input/custom-input.component'\nimport CustomTextarea from '../custom-textarea/custom-textarea.component'\nimport CustomCheckbox from '../custom-checkbox/custom-checkbox.component'\n\nimport { useFetchById } from '../../hooks/useFetch'\nimport {\n    formatBookingObj\n} from '../../utils/calendar.utils'\n\nimport {\n    ModalContainer,\n    Modal,\n    CloseButton,\n    SubmitButton,\n    InputContainer,\n    ModalHeader\n} from './modal-booking.styles'\n\nconst BookingModal = ({ close, calendarId, refetch, selectedBooking }) => {\n    const { createBooking, updateBooking } = useContext(BookingContext)\n    const { response, isLoading } = useFetchById(\"api/booking/bookings\", selectedBooking, !selectedBooking)\n\n    const [booking, setBooking] = useState({})\n    const [isUpdating, setIsUpdating] = useState(false)\n\n    const handleBookingChange = e => {\n        const { name, value } = e.target\n\n        if (value === '') {\n            delete booking[name]\n            setBooking({\n                ...booking\n            })\n            return\n        }\n\n        setBooking(prevValue => ({\n            ...prevValue,\n            [name]: value\n        }))\n    }\n\n    const handleSubmit = () => {\n        if (!booking?.name) return\n\n        if (isUpdating) {\n            let bookingToUpdate = formatBookingObj(booking)\n\n            console.log(\"BOOKING BEFORE UPDATE\")\n            console.log(bookingToUpdate)\n\n            updateBooking(bookingToUpdate, booking._id)\n        } else {\n            let bookingToAdd = {\n                ...booking,\n                calendar: calendarId\n            }\n\n            console.log(\"BOOKING BEFORE CREATE\")\n            console.log(bookingToAdd)\n            createBooking(bookingToAdd)\n        }\n\n        refetch()\n        close()\n    }\n\n    useEffect(() => {\n        if (isLoading) return\n        if (response?.booking) {\n            setIsUpdating(true)\n            setBooking(response?.booking)\n        }\n    }, [selectedBooking, isLoading])\n\n    useEffect(() => {\n        return () => {\n            setIsUpdating(false)\n            setBooking({})\n        }\n    }, [])\n\n    console.log(booking)\n\n    return ReactDOM.createPortal((\n        <ModalContainer>\n            <CloseButton onClick={close} />\n            <Modal>\n                <ModalHeader>\n                    {!isUpdating && <h2>Nové vyšetrenie</h2>}\n                    {isUpdating && <h2>Upraviť vyšetrenie</h2>}\n                    <div>\n                        <CustomCheckbox\n                            label=\"Aktivné\"\n                            isActive={booking?.active || false}\n                            name='active'\n                            handleClick={() => handleBookingChange({\n                                target: {\n                                    name: 'active',\n                                    value: booking?.active ? !booking?.active : true\n                                }\n                            })}\n                        />\n                    </div>\n                </ModalHeader>\n                <InputContainer>\n                    <CustomInput\n                        label=\"Názov vyšetrenia*\"\n                        name=\"name\"\n                        value={booking?.name || \"\"}\n                        handleChange={handleBookingChange}\n                    />\n                </InputContainer>\n                <InputContainer>\n                    <CustomInput\n                        label=\"Cena\"\n                        name=\"price\"\n                        value={booking?.price || \"\"}\n                        handleChange={handleBookingChange}\n                    />\n                </InputContainer>\n                <InputContainer>\n                    <CustomInput\n                        label=\"Čas\"\n                        name=\"time\"\n                        value={booking?.time || \"\"}\n                        handleChange={handleBookingChange}\n                    />\n                </InputContainer>\n                <InputContainer>\n                    <CustomTextarea\n                        label=\"Popis\"\n                        rows='5'\n                        name=\"description\"\n                        value={booking?.description || \"\"}\n                        handleChange={handleBookingChange}\n                    />\n                </InputContainer>\n                {!isUpdating && <SubmitButton onClick={handleSubmit}>Pridať</SubmitButton>}\n                {isUpdating && <SubmitButton onClick={handleSubmit}>Uložiť</SubmitButton>}\n            </Modal>\n        </ModalContainer>\n    ), document.getElementById(\"portal\"))\n}\n\nexport default BookingModal\n","import styled from 'styled-components'\nimport CustomButton from '../custom-button/custom-button.component'\n\nexport const GridContainer = styled.div`\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    grid-gap: 3rem;\n    margin-bottom: 10rem;\n\n    @media all and (max-width: 1150px) {\n        grid-template-columns: 2fr 1fr;\n        @media all and (max-width: 800px) {\n            grid-template-columns: 3fr 1fr;\n            @media all and (max-width: 500px) {\n                grid-template-columns: 1fr;\n            }\n        }\n\n    }\n`\n\nexport const Header = styled.div`\n    display: flex;\n    justify-content: space-between;\n    align-items: center; \n    margin-bottom: 3rem;\n`\n\nexport const AddButton = styled(CustomButton)`\n    background-color: var(--primary-color);\n    font-weight: bolder;\n`\n\nexport const Container = styled.div`\n    padding: 2rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n    border-radius: .5rem;\n    margin-bottom: 3rem;\n`\n\nexport const ContainerHeader = styled.div`\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 1rem;\n`\n\nexport const ActiveSpan = styled.span`\n    font-size: 1.2rem;\n    color: ${({ isActive }) => isActive ? \"var(--color-green)\" : \"var(--color-red)\"};\n`\n\nexport const ContainerBody = styled.div`\n    opacity: .8;\n    margin-bottom: 2rem;\n`\n\nexport const ContainerOptions = styled.div`\n    display: flex;\n    justify-content: flex-end;\n`\n\nexport const DeleteButton = styled(CustomButton)`\n    background-color: var(--color-red);\n    font-size: 1.2rem;\n    margin-left: 1rem;\n`\n\nexport const UpdateButton = styled(CustomButton)`\n    background-color: var(--primary-color);\n    font-weight: bolder;\n    font-size: 1.2rem;\n`\n\nexport const InfoParagraph = styled.div`\n    margin-left: 1rem;\n    opacity: .6;\n`","import React, { useState, useContext } from 'react'\nimport { BookingContext } from '../../context/booking/booking.context'\nimport { AuthContext } from '../../context/auth/auth.context'\n\nimport BookingModal from '../modal-booking/modal-booking.component'\nimport Spinner from '../../components/spinner/spinner.component'\nimport { useFetchById } from '../../hooks/useFetch'\n\nimport {\n    GridContainer,\n    Container,\n    Header,\n    AddButton,\n    ContainerHeader,\n    ContainerBody,\n    ContainerOptions,\n    UpdateButton,\n    DeleteButton,\n    InfoParagraph,\n    ActiveSpan\n} from './booking-calendar-bookings.styles'\n\nconst BookingCalendarBookings = ({\n    calendarId\n}) => {\n    const { isAdmin } = useContext(AuthContext)\n    const { deleteBooking } = useContext(BookingContext)\n    const { response, isLoading, refetch } = useFetchById('api/booking/calendars', calendarId, !calendarId)\n    const [showBookingModal, setShowBookingModal] = useState(false)\n    const [selectedBooking, setSelectedBooking] = useState(null)\n\n    const handleDeleteClick = (bookingId) => {\n        deleteBooking(bookingId)\n        refetch()\n    }\n\n    const handleUpdateClick = (bookingId) => {\n        setSelectedBooking(bookingId)\n        setShowBookingModal(true)\n    }\n\n    const handleCloseModal = () => {\n        setShowBookingModal(false)\n        setSelectedBooking(null)\n    }\n\n    if (isLoading) return <Spinner />\n\n    return (\n        <GridContainer>\n            {showBookingModal && (\n                <BookingModal\n                    selectedBooking={selectedBooking}\n                    calendarId={calendarId}\n                    close={handleCloseModal}\n                    refetch={refetch}\n                />\n            )}\n            <div>\n                <Header>\n                    <h3>Vyšetrenia</h3>\n                    {isAdmin && <AddButton onClick={() => setShowBookingModal(true)}>Pridať</AddButton>}\n                </Header>\n\n                <div>\n                    {response?.calendar?.bookings?.map((booking, idx) => (\n                        <Container key={idx}>\n                            <ContainerHeader>\n                                <div>\n                                    <h4>{booking.name}</h4>\n                                    <ActiveSpan isActive={booking?.active}>{booking?.active ? \"Aktivné\" : \"Neaktivné\"}</ActiveSpan>\n                                </div>\n                                <div>\n                                    <p>{booking.price}€</p>\n                                </div>\n\n                            </ContainerHeader>\n                            <ContainerBody>\n                                <p>{booking.description}</p>\n                            </ContainerBody>\n                            {isAdmin && <ContainerOptions>\n                                <UpdateButton onClick={() => handleUpdateClick(booking._id)}>Upraviť</UpdateButton>\n                                <DeleteButton onClick={() => handleDeleteClick(booking._id)}>Vymazať</DeleteButton>\n                            </ContainerOptions>}\n                        </Container>\n                    ))}\n                    {!response?.calendar?.bookings?.length && (\n                        <InfoParagraph>Žiadné vyšetrenia</InfoParagraph>\n                    )}\n                </div>\n            </div>\n        </GridContainer>\n    )\n}\n\nexport default BookingCalendarBookings\n","import styled from 'styled-components'\nimport { paddingStyles } from '../../global.styles'\n\n\nexport const Header = styled.div`\n    ${paddingStyles}\n    padding-top: 2rem;\n    padding-bottom: 3rem;\n    display: flex;\n    justify-content: space-between;\n    color: var(--primary-text-color);\n`\n\nexport const Title = styled.h2`\n    /* margin-bottom: 2rem; */\n`\n\nexport const GridRow = styled.div`\n    display: grid;\n    grid-template-columns: repeat( auto-fit, minmax(27rem, 1fr) );\n    margin-bottom: 3rem;\n    grid-gap: 2rem;\n`\n\nexport const CalendarGridContainer = styled.div`\n    margin-top: 3rem;\n    margin-bottom: 3rem;\n`\n\nexport const CalendarHeading = styled.div`\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 3rem;\n\n    div {\n        display: flex;\n        align-items: center;\n        cursor: pointer;\n    }\n`\n\nexport const IconContainer = styled.div`\n    display: flex;\n    justify-content:center;\n    align-items: center;\n    color: var(--primary-color);\n    font-size: 3rem;\n    margin-left: 1rem;\n`\n\nexport const CalendarHeader = styled.div`\n    display: flex; \n    justify-content: space-between;\n    align-items: center;\n\n    ul {\n        list-style: none;\n        display: flex;\n        /* gap: 2rem; */\n\n\n    }\n`\nexport const CalendarMonthContainer = styled.div`\n    display: flex;\n    align-items: center;\n\n    button {\n        cursor: pointer;\n        font-size: 2rem;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        color: var(--primary-color);\n\n    }\n\n    div {\n        text-align: center;\n        margin: 0 1rem;\n    }\n\n    p {\n        text-transform: capitalize;\n        margin: 0 1rem;\n    }\n`\n\n\nexport const CalendarFormat = styled.li`\n    background-color: ${({ isActive }) => isActive ? \"var(--primary-color)\" : \"none\"};\n    color: ${({ isActive }) => isActive ? \"var(--button-font-color)\" : \"var(--primary-color)\"};\n    cursor: pointer;\n    padding: 0.5rem 2rem;\n\n    transition: all .3s ease-in-out;\n`","import React, { useState, useEffect, useContext } from 'react'\nimport { useHistory } from 'react-router-dom'\nimport { LoadingModalContext } from '../../context/loading-modal/loading-modal.contenxt'\nimport { AuthContext } from '../../context/auth/auth.context'\n\nimport SectionHeader from '../../components/section-header/section-header.component'\nimport ScrollContainer from '../../components/scroll-container/scroll-container.component'\nimport Popup from '../../components/popup/pop-up.component'\nimport BookingCalendarOverview from \"../../components/booking-calendar-overview/booking-calendar-overview.component\"\n\nimport Calendar from '../../components/calendar/calendar.component'\nimport WeekDays from '../../components/calendar-weekdays/calendar-weekdays.component'\nimport BookingAppoinments from '../../components/booking-appoinments/booking-appoinment.component'\nimport BookingCalendarBookings from '../../components/booking-calendar-bookings/booking-calendar-bookings.component'\n\nimport { useFetch } from '../../hooks/useFetch'\nimport { calendarFormat, months } from '../../utils/calendar.utils'\n\nimport {\n    AiOutlineLeft,\n    AiOutlineRight,\n    AiOutlineDownCircle,\n    AiOutlineUpCircle\n} from 'react-icons/ai'\n\nimport {\n    Header,\n    Title,\n    GridRow,\n    CalendarGridContainer,\n    CalendarHeading,\n    CalendarHeader,\n    CalendarFormat,\n    CalendarMonthContainer,\n    IconContainer\n} from './booking.styles'\n\nconst BookingSection = () => {\n    const { isAdmin, currentUser, isOptometrist } = useContext(AuthContext)\n    const { showModal, setShowModal, message, closeModal } = useContext(LoadingModalContext)\n    const { push } = useHistory()\n    // const [showModal, setShowModal] = useState(true)\n    const [showPremisesSection, setShowPremisesSection] = useState(true)\n    const [activeCalendarFormat, setActiveCalendarFormat] = useState(0)\n    const [searchQuery, setSearchQuery] = useState('')\n    const [calendars, setCalendars] = useState([])\n    const [selectedCalendar, setSelectedCalendar] = useState(null)\n    const [selectedMonth, setSelectedMonth] = useState(new Date().getMonth())\n    const [selectedYear, setSelectedYear] = useState(new Date().getFullYear())\n    const [calendarWeekIndex, setCalendarWeekIndex] = useState(0)\n    const [selectedDay, setSelectedDay] = useState(null)\n\n    const { isLoading, response } = useFetch('api/booking/calendars')\n\n    const handleShowCalendarClick = (calendarId) => {\n        setSelectedCalendar(calendarId)\n        setShowPremisesSection(false)\n        resetCalendarToDefault()\n    }\n\n    const getPrevWeek = () => {\n        if (calendarWeekIndex - 1 < 0) {\n            setCalendarWeekIndex(0)\n\n        } else {\n            setCalendarWeekIndex(prevValue => prevValue - 1)\n        }\n    }\n\n    const getNextWeek = () => {\n        const lastDayIndex = new Date(selectedYear, selectedMonth, 0).getDate()\n        console.log(calendarWeekIndex * 7)\n        console.log(lastDayIndex)\n        if (((calendarWeekIndex + 1) * 7) >= lastDayIndex) {\n            setCalendarWeekIndex(0)\n        } else {\n            setCalendarWeekIndex(prevValue => prevValue + 1)\n        }\n    }\n\n    const getPrevMonth = () => {\n        if (selectedMonth === 0) {\n            setSelectedYear(prevValue => prevValue - 1)\n            setSelectedMonth(11)\n        } else {\n            setSelectedMonth(prevValue => prevValue - 1)\n        }\n    }\n\n    const getNextMonth = () => {\n        if (selectedMonth === 11) {\n            setSelectedYear(prevValue => prevValue + 1)\n            setSelectedMonth(0)\n        } else {\n            setSelectedMonth(prevValue => prevValue + 1)\n        }\n\n    }\n\n    const resetCalendarToDefault = () => {\n        setSelectedMonth(new Date().getMonth())\n        setSelectedYear(new Date().getFullYear())\n        setCalendarWeekIndex(Math.ceil(new Date().getDate() / 7) - 1)\n        setSelectedDay(null)\n    }\n\n    const handleCalendarBlockClick = (dayData) => {\n        // if (!dayData.bookings) return\n        // if (!dayData.bookingDate) return\n\n        // setSelectedCalendar(null)\n        // setSelectedDay(dayData)\n        console.log(dayData)\n        setCalendarWeekIndex(Math.ceil(dayData.dayNumber / 7) - 1)\n        setActiveCalendarFormat(1)\n    }\n\n    useEffect(() => {\n        if (!isLoading) {\n            if (response) {\n                if (isAdmin) {\n                    setCalendars(response.calendars)\n                    setShowModal(false)\n                } else {\n                    setCalendars(response.calendars.filter(calendar => calendar.premises === currentUser.premises))\n                    const userCalendar = response.calendars.find(calendar => calendar.premises === currentUser.premises)\n                    handleShowCalendarClick(userCalendar._id)\n                    setShowModal(false)\n                }\n                closeModal()\n            }\n        }\n    }, [isLoading])\n\n    useEffect(() => {\n        console.log(\"unmount\")\n        return () => {\n            setShowModal(true)\n            setShowPremisesSection(true)\n            setActiveCalendarFormat(0)\n            setSearchQuery('')\n            setCalendars([])\n            setSelectedCalendar(null)\n            setSelectedMonth(new Date().getMonth())\n            setSelectedYear(new Date().getFullYear())\n            setCalendarWeekIndex(0)\n            setSelectedDay(null)\n        }\n    }, [])\n\n    console.log(calendars)\n\n    return (\n        <section>\n            {showModal && <Popup loading={isLoading} title={message} close={() => setShowModal(false)} />}\n            {isAdmin && <SectionHeader\n                searchQuery={searchQuery}\n                handleChange={e => setSearchQuery(e.target.value)}\n                handleAddButton={() => push('rezervacie/novy-kalendar')}\n                title=\"Rezervácie\"\n            />}\n\n            {(isOptometrist && !isAdmin) && (\n                <Header>\n                    <h1>Rezervácie</h1>\n                </Header>\n            )}\n\n            <ScrollContainer>\n                {isAdmin && <CalendarHeading>\n                    <Title>Pobočky</Title>\n                    <div onClick={() => setShowPremisesSection(prevValue => !prevValue)}>\n                        <p>\n                            {calendars.find(calendar => calendar._id === selectedCalendar)?.name}\n                        </p>\n                        <IconContainer>\n                            {showPremisesSection ? <AiOutlineUpCircle /> : <AiOutlineDownCircle />}\n                        </IconContainer>\n                    </div>\n                </CalendarHeading>}\n\n                {showPremisesSection && <GridRow>\n                    {calendars && calendars.map((calendar, idx) => (\n                        <BookingCalendarOverview\n                            key={idx}\n                            calendar={calendar}\n                            selectedCalendar={selectedCalendar}\n                            handleShowUpClick={() => handleShowCalendarClick(calendar._id)}\n                            handleUpdateClick={() => push(`rezervacie/${calendar._id}`)}\n                        />\n                    ))}\n                </GridRow>}\n\n                {selectedCalendar && (\n                    <React.Fragment>\n\n                        <CalendarHeader>\n                            <Title>Kalendár</Title>\n\n                            {activeCalendarFormat === 0 ? (\n                                <CalendarMonthContainer>\n                                    <button onClick={getPrevMonth}><AiOutlineLeft /></button>\n                                    <p>{months[selectedMonth]}</p>\n                                    <button onClick={getNextMonth}><AiOutlineRight /></button>\n                                </CalendarMonthContainer>\n                            ) : (\n                                    <CalendarMonthContainer>\n                                        <button onClick={getPrevWeek}><AiOutlineLeft /></button>\n                                        <div>\n                                            <p>{calendarWeekIndex + 1}</p>\n                                            <p>{months[selectedMonth]}</p>\n                                        </div>\n                                        <button onClick={getNextWeek}><AiOutlineRight /></button>\n                                    </CalendarMonthContainer>\n                                )}\n\n                            <ul>\n                                {calendarFormat.map((name, idx) => (\n                                    <CalendarFormat key={idx} isActive={activeCalendarFormat === idx} onClick={() => setActiveCalendarFormat(idx)}>{name}</CalendarFormat>\n                                ))}\n                            </ul>\n                        </CalendarHeader>\n                        <CalendarGridContainer>\n                            {activeCalendarFormat === 0 ? (\n                                <Calendar\n                                    calendar={selectedCalendar}\n                                    month={selectedMonth}\n                                    year={selectedYear}\n                                    handleCalendarBlockClick={handleCalendarBlockClick}\n                                />\n                            ) : (\n                                    <WeekDays\n                                        calendar={selectedCalendar}\n                                        month={selectedMonth}\n                                        year={selectedYear}\n                                        weekIndex={calendarWeekIndex}\n                                        handleCalendarBlockClick={handleCalendarBlockClick}\n\n                                    />\n                                )}\n                        </CalendarGridContainer>\n\n                        <BookingCalendarBookings calendarId={selectedCalendar} />\n                    </React.Fragment>\n                )}\n\n                {selectedDay && (\n                    <BookingAppoinments\n                        day={selectedDay}\n                    />\n                )}\n            </ScrollContainer>\n        </section>\n    )\n}\n\nexport default BookingSection\n","import styled, { css } from \"styled-components\"\n\nconst shrinkLabel = css`\n    left: .5rem;\n    top: -14px;\n    font-size: 12px;\n    color: var(--input-color);\n`\nexport const InputGroup = styled.div`\n    position: relative;\n\n    /* margin: 45px 0; */\n\n    .form-input {\n        /* background: none; */\n        background-color: var(--input-background-color);\n        color: var(--input-color);\n        font-size: 1.5rem;\n        padding: 1rem .5rem 1rem 2rem;\n        display: block;\n        width: 100%;\n        border: none;\n        border-radius: .5rem;\n        /* border-bottom: 1px solid #000; */\n        margin: 2rem 0 0;\n        font-family: inherit;\n\n        &:focus {\n        outline: none;\n        }\n\n        &:focus ~ .form-input-label {\n            ${shrinkLabel}\n        }\n    }\n\n    input[type = 'password'] {\n        letter-spacing: 0.3em;\n    }\n\n    .form-input-label {\n        color: var(--input-color);\n        font-size: 1.4rem;\n        font-weight: normal;\n        position: absolute;\n        pointer-events: none;\n        left: 1.5rem;\n        top: 1rem;\n        transition: 300ms ease all;\n\n        &.shrink {\n            ${shrinkLabel}\n        }\n    }\n\n    @media all and (max-width: 500px) {\n        .form-input {\n            font-size: 1.4rem;\n        }\n        /* padding: 1rem .5rem 1rem 2rem; */\n    }\n`\n","import React from 'react'\n\nimport { InputGroup } from './custom-input.styles'\n\nconst CustomInput = ({ handleChange, label, name, ...otherProps }) => {\n    return (\n        <InputGroup>\n            <input\n                className='form-input'\n                name={name}\n                onChange={handleChange}\n                {...otherProps}\n            />\n            {label ? (\n                <label htmlFor={name} className={`${otherProps.value.length ? 'shrink' : ''} form-input-label`}>\n                    {label}\n                </label>\n            ) : null\n            }\n        </InputGroup>\n    )\n}\n\nexport default CustomInput","import { useEffect, useState } from 'react'\n\nexport const useFetch = (path, skip = false) => {\n    const [response, setResponse] = useState(null)\n    const [error, setError] = useState(null)\n    const [message, setMessage] = useState(null)\n    const [isLoading, setIsLoading] = useState(true)\n    const [refetchIndex, setRefetchIndex] = useState(0)\n\n    const refetch = () => setRefetchIndex(prevRefetchIndex => prevRefetchIndex + 1)\n\n    useEffect(() => {\n        const fetchData = async () => {\n            if (skip) return\n            try {\n                const res = await fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/${path}`)\n                const data = await res.json()\n\n                setMessage(data.message)\n                setResponse(data)\n                setIsLoading(false)\n            } catch (err) {\n                setError(err)\n                setIsLoading(false)\n                setMessage(\"Niečo sa pokazilo\")\n            }\n        }\n        fetchData()\n    }, [refetchIndex])\n\n    return { response, isLoading, error, message, refetch }\n}\n\nexport const useFetchByQuery = (path, queryObj, skip = false) => {\n    const [response, setResponse] = useState(null)\n    const [error, setError] = useState(null)\n    const [isLoading, setIsLoading] = useState(true)\n    const [refetchIndex, setRefetchIndex] = useState(0)\n\n    const refetch = () => setRefetchIndex(prevRefetchIndex => prevRefetchIndex + 1)\n\n    const myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", localStorage.getItem(process.env.REACT_APP_ADMIN_TOKEN));\n    myHeaders.append(\"Content-Type\", \"application/json\");\n\n    const raw = JSON.stringify(queryObj)\n\n    const requestOptions = {\n        method: 'POST',\n        headers: myHeaders,\n        body: raw,\n        redirect: 'follow'\n    };\n\n    useEffect(() => {\n        const fetchData = async () => {\n            if (skip) return\n            setIsLoading(true)\n            try {\n                const res = await fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/${path}`, requestOptions)\n                const data = await res.json()\n\n                setResponse(data)\n                setIsLoading(false)\n            } catch (err) {\n                setError(err)\n                setIsLoading(false)\n            }\n        }\n        fetchData()\n    }, [refetchIndex, path])\n\n    return { response, isLoading, error, refetch }\n}\n\nexport const useFetchById = (path, id, skip = false) => {\n    const [response, setResponse] = useState(null)\n    const [error, setError] = useState(null)\n    const [isLoading, setIsLoading] = useState(true)\n    const [refetchIndex, setRefetchIndex] = useState(0)\n\n    const refetch = () => setRefetchIndex(prevRefetchIndex => prevRefetchIndex + 1)\n\n    const myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", localStorage.getItem(process.env.REACT_APP_ADMIN_TOKEN));\n    myHeaders.append(\"Content-Type\", \"application/json\");\n\n    const requestOptions = {\n        method: 'GET',\n        headers: myHeaders,\n        redirect: 'follow'\n    };\n\n    useEffect(() => {\n        const fetchData = async () => {\n            if (skip) return\n            setIsLoading(true)\n            try {\n                const res = await fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/${path}/${id}`, requestOptions)\n                const data = await res.json()\n\n                setResponse(data)\n                setIsLoading(false)\n            } catch (err) {\n                setError(err)\n                setIsLoading(false)\n            }\n        }\n        fetchData()\n    }, [refetchIndex, path, id])\n\n    return { response, isLoading, error, refetch }\n}\n","import styled from 'styled-components'\nimport { paddingStyles } from '../../global.styles'\n\nexport const Container = styled.div`\n    width: 100%;\n    height: 100%;\n    /* height: 100%; */\n    overflow-y: scroll;\n    overflow-x: visible;\n    scroll-behavior: smooth;\n    ${paddingStyles};\n    padding-top: 1.5rem;\n    padding-bottom: 1.5rem;\n    color: var(--primary-text-color);\n\n\n\n\n    @media all and (max-width: 1150px) {\n        margin-bottom: 8rem;\n    }\n\n    ::-webkit-scrollbar {\n        width: 10px;\n    }\n\n    /* Track */\n    ::-webkit-scrollbar-track {\n        background:  var(--background-primary-color);\n    }\n\n    /* Handle */\n    ::-webkit-scrollbar-thumb {\n        background: var(--primary-color);\n    }\n\n    /* Handle on hover */\n    ::-webkit-scrollbar-thumb:hover {\n        background: var(--primary-color);\n    }\n`\n\nexport const FixedContainer = styled.div`\n    /* max-width: 115rem; */\n`","import React from 'react'\nimport { Container, FixedContainer } from './scroll-container.styles'\n\nconst ScrollContainer = ({ children }) => {\n    return (\n        <Container>\n            <FixedContainer>\n                {children}\n            </FixedContainer>\n        </Container>\n    )\n}\n\nexport default ScrollContainer","import arrayWithoutHoles from \"@babel/runtime/helpers/esm/arrayWithoutHoles\";\nimport iterableToArray from \"@babel/runtime/helpers/esm/iterableToArray\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableSpread from \"@babel/runtime/helpers/esm/nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import styled from 'styled-components'\n\nexport const CheckboxContainer = styled.div`\n    display: inline-block;\n    cursor: pointer;\n    font-size: 1.5rem;\n    font-weight: 700;\n    /* margin-right: 2rem; */\n    background-color: ${({ isActive }) => isActive ? \"var(--primary-color)\" : \"var(--body-background-primary-color)\"};\n    color: ${({ isActive }) => isActive ? \"var(--button-font-color)\" : \"var(--secondary-text-color)\"};\n    /* font-weight: ${({ isActive }) => isActive ? \"border\" : \"normal\"}; */\n    padding: .8rem 3rem;\n    border-radius: .2rem;\n    transition: all .2s ease-out;\n\n    @media all and (max-width: 500px) {\n        padding: 0.5rem 1.5rem;\n        font-size: 1.4rem;\n    }\n`","import React from 'react'\n\nimport { CheckboxContainer } from './custom-checkbox.styles'\n\nconst CustomCheckbox = ({ label, isActive, handleClick, ...otherprops }) => {\n    return (\n        <CheckboxContainer isActive={isActive} onClick={handleClick} {...otherprops}>\n            {label}\n        </CheckboxContainer>\n    )\n}\n\nexport default CustomCheckbox\n","import styled from 'styled-components'\nimport CustomButton from '../custom-button/custom-button.component'\nimport { paddingStyles } from '../../global.styles'\n\nexport const HeaderContainer = styled.div`\n    display: flex;\n    color: var(--primary-text-color);\n    justify-content: space-between;\n    margin-bottom: 3rem;\n    ${paddingStyles};    \n\n    @media all and (max-width: 600px) {\n        flex-wrap: wrap;\n    }\n`\n\nexport const Left = styled.div`\n    margin-top: 2rem;\n\n    display: flex;\n    align-items: center;\n\n`\n\nexport const Right = styled.div`\n    display: flex;\n    align-items: center;\n`\n\nexport const Notification = styled.div`\n    background-color: var(--color-red);\n    margin-left: 1.5rem;\n    color: var(--primary-text-color);\n    padding: .5rem 1rem;\n    border-radius: 1.5rem;\n    font-size: 1.4rem;\n`\n\n\nexport const SearchButton = styled(CustomButton)`\n    margin-top: 2rem;\n\n    margin-left: 2rem;\n`\n\nexport const AddButton = styled(CustomButton)`\n    margin-top: 2rem;\n    margin-left: 1rem;\n    background-color: var(--primary-color);\n    font-weight: bolder;\n`","import React from 'react'\n\nimport CustomInput from '../custom-input/custom-input.component'\n\nimport {\n    HeaderContainer,\n    Left,\n    Right,\n    SearchButton,\n    // Notification,\n    AddButton,\n} from './section-header.styles'\n\nconst SectionHeader = ({ searchQuery, handleSearch, handleChange, title, count = 999, handleAddButton = () => { } }) => {\n    const handleSearchOnEnter = (e) => {\n        if (searchQuery !== '') {\n            if (e.key === 'Enter') {\n                handleSearch()\n            }\n        }\n    }\n\n    return (\n        <HeaderContainer>\n            <Left>\n                <h1>{title}</h1>\n                {/* <Notification>{count}</Notification> */}\n            </Left>\n            <Right>\n                {handleSearch && <div>\n                    <CustomInput\n                        type='search'\n                        name='searchbox'\n                        value={searchQuery}\n                        handleChange={handleChange}\n                        onKeyPress={handleSearchOnEnter}\n                        label='Vyhľadať'\n                    />\n                </div>}\n                {handleSearch && <SearchButton onClick={handleSearch}>Vyhľadať</SearchButton>}\n                <AddButton onClick={handleAddButton}>Pridať</AddButton>\n            </Right>\n        </HeaderContainer>\n    )\n}\n\nexport default SectionHeader\n","import styled from 'styled-components'\nimport CustomButton from '../custom-button/custom-button.component'\nimport { paddingStyles } from '../../global.styles'\n\n\nexport const NavbarContainer = styled.div`\n    margin-bottom: 3rem;\n    ${paddingStyles}\n\n    ul {\n        display: flex;\n        list-style: none;\n\n        li {\n            margin-right: 1.5rem;\n        }\n    }\n`\n\nexport const NavButton = styled(CustomButton)`\n    transition: all 0.3s ease-out;\n    background-color: ${({ active }) => active ? 'var(--primary-color)' : 'var(--background-primary-color)'};\n    color: ${({ active }) => active ? '#fff' : 'var(--primary-text-color)'};\n    font-weight: ${({ active }) => active ? 400 : 700};\n    padding: ${({ active }) => active ? \".5rem 2.5rem\" : \".5rem 1rem .5rem 0\"};\n    font-weight: ${({ active }) => active ? \"bolder\" : \"normal\"};\n`","import React from 'react'\n\nimport {\n    NavbarContainer,\n    NavButton\n} from './section-navbar.styles'\n\nconst SectionNavbar = ({ items, activeIndex, setActiveIndex, ...otherProps }) => {\n\n    return (\n        <NavbarContainer {...otherProps}>\n            <ul>\n                {\n                    items.map(item => (\n                        <li key={item.id}>\n                            <NavButton active={item.id === activeIndex} onClick={() => setActiveIndex(item.id)} >{item.name}</NavButton>\n                        </li>\n                    ))\n                }\n\n            </ul>\n        </NavbarContainer >\n    )\n}\n\nexport default SectionNavbar\n","import styled, { css } from \"styled-components\"\n\nconst shrinkLabel = css`\n    left: .5rem;\n    top: -14px;\n    font-size: 12px;\n    color: var(--input-color);\n`\nexport const InputGroup = styled.div`\n    position: relative;\n    /* margin: 45px 0; */\n\n    .form-input {\n        background: none;\n        background-color: var(--input-background-color);\n        color: var(--input-color);\n\n        font-size: 1.5rem;\n        padding: .5rem .5rem .5rem 2rem;\n        display: block;\n        width: 100%;\n        border: none;\n        border-radius: .5rem;\n        /* border-bottom: 1px solid #000; */\n        margin: 25px 0;\n        font-family: inherit;\n        resize: none;\n\n        &:focus {\n        outline: none;\n        }\n\n        &:focus ~ .form-input-label {\n            ${shrinkLabel}\n        }\n    }\n\n    .form-input-label {\n        color: var(--input-color);\n        font-size: 1.4rem;\n        font-weight: normal;\n        position: absolute;\n        pointer-events: none;\n        left: 1.5rem;\n        top: .6rem;\n        transition: 300ms ease all;\n\n        &.shrink {\n            ${shrinkLabel}\n        }\n    }\n`\n","import React from 'react'\n\nimport { InputGroup } from './custom-textarea.styles'\n\nconst CustomTextarea = ({ handleChange, label, name, ...otherProps }) => {\n    return (\n        <InputGroup>\n            <textarea\n                className='form-input'\n                name={name}\n                onChange={handleChange}\n                {...otherProps}\n            />\n            {label ? (\n                <label htmlFor={name} className={`${otherProps.value.length ? 'shrink' : ''} form-input-label`}>\n                    {label}\n                </label>\n            ) : null\n            }\n        </InputGroup>\n    )\n}\n\nexport default CustomTextarea","export const calendarTimes = [\n    {\n        name: '00:00',\n        value: '00/00'\n    },\n    {\n        name: '00:30',\n        value: '00/30'\n    },\n    {\n        name: '01:00',\n        value: '01/00'\n    },\n    {\n        name: '01:30',\n        value: '01/30'\n    },\n    {\n        name: '02:00',\n        value: '02/00'\n    },\n    {\n        name: '02:30',\n        value: '02/30'\n    },\n    {\n        name: '03:00',\n        value: '03/00'\n    },\n    {\n        name: '03:30',\n        value: '03/30'\n    },\n    {\n        name: '04:00',\n        value: '04/00'\n    },\n    {\n        name: '04:30',\n        value: '04/30'\n    },\n    {\n        name: '05:00',\n        value: '05/00'\n    },\n    {\n        name: '05:30',\n        value: '05/30'\n    },\n    {\n        name: '06:00',\n        value: '06/00'\n    },\n    {\n        name: '06:30',\n        value: '06/30'\n    },\n    {\n        name: '07:00',\n        value: '07/00'\n    },\n    {\n        name: '07:30',\n        value: '07/30'\n    },\n    {\n        name: '08:00',\n        value: '08/00'\n    },\n    {\n        name: '08:30',\n        value: '08/30'\n    },\n    {\n        name: '09:00',\n        value: '09/00'\n    },\n    {\n        name: '09:30',\n        value: '09/30'\n    },\n    {\n        name: '10:00',\n        value: '10/00'\n    },\n    {\n        name: '10:30',\n        value: '10/30'\n    },\n    {\n        name: '11:00',\n        value: '11/00'\n    },\n    {\n        name: '11:30',\n        value: '11/30'\n    },\n    {\n        name: '12:00',\n        value: '12/00'\n    },\n    {\n        name: '12:30',\n        value: '12/30'\n    },\n    {\n        name: '13:00',\n        value: '13/00'\n    },\n    {\n        name: '13:30',\n        value: '13/30'\n    },\n    {\n        name: '14:00',\n        value: '14/00'\n    },\n    {\n        name: '14:30',\n        value: '14/30'\n    },\n    {\n        name: '15:00',\n        value: '15/00'\n    },\n    {\n        name: '15:30',\n        value: '15/30'\n    },\n    {\n        name: '16:00',\n        value: '16/00'\n    },\n    {\n        name: '16:30',\n        value: '16/30'\n    },\n    {\n        name: '17:00',\n        value: '17/00'\n    },\n    {\n        name: '17:30',\n        value: '17/30'\n    },\n    {\n        name: '18:00',\n        value: '18/00'\n    },\n    {\n        name: '18:30',\n        value: '18/30'\n    },\n    {\n        name: '19:00',\n        value: '19/00'\n    },\n    {\n        name: '19:30',\n        value: '19/30'\n    },\n    {\n        name: '20:00',\n        value: '20/00'\n    },\n    {\n        name: '20:30',\n        value: '20/30'\n    },\n    {\n        name: '21:00',\n        value: '21/00'\n    },\n    {\n        name: '22:30',\n        value: '22/30'\n    },\n    {\n        name: '23:00',\n        value: '23/00'\n    },\n    {\n        name: '23:30',\n        value: '23/30'\n    },\n]\n\nexport const dayNames = [\n    'Pondelok',\n    'Utorok',\n    'Streda',\n    'Štvrtok',\n    'Piatok',\n    'Sobota',\n    'Nedeľa'\n]\n\nexport const months = [\n    'január',\n    'február',\n    'marec',\n    'apríl',\n    'máj',\n    'jún',\n    'júl',\n    'august',\n    'september',\n    'október',\n    'november',\n    'december',\n]\n\nexport const calendarFormat = [\n    'Mesiac',\n    'Týžden'\n]\n\nexport const getMonday = (d) => {\n    d = new Date(d);\n    var day = d.getDay(),\n        diff = d.getDate() - day + (day == 0 ? -6 : 1); // adjust when day is sunday\n    return new Date(d.setDate(diff));\n}\n\nexport const getPreviousMonthDays = (firstDayIndex) => {\n    let arr = [];\n    for (let x = firstDayIndex; x > 0; x--) {\n        arr.push({\n            dayNumber: x,\n            isDisable: true,\n            isPrevDay: true,\n        })\n    }\n    return arr\n}\n\nexport const getNextMonthDays = (nextDays) => {\n    let arr = [];\n    for (let x = 1; x <= nextDays; x++) {\n        arr.push({\n            dayNumber: x,\n            isDisable: true,\n            isNextDay: true\n        })\n    }\n    return arr\n}\n\nexport const getCurrentMonthDays = (lastDay) => {\n    let arr = [];\n    for (let x = 1; x <= lastDay; x++) {\n        arr.push({\n            dayNumber: x,\n        })\n    }\n    return arr\n}\n\nexport const getBooking = (days, calendar, month, year) => {\n    if (!calendar.booked) return days;\n    const bookingsArr = Object.keys(calendar?.booked)\n\n    const bookingDates = bookingsArr.filter((booking) => {\n        const spliteBookingString = booking.split('/')\n        let isBelongHere = false;\n\n        spliteBookingString.forEach(value => {\n            if (month === Number(spliteBookingString[1]) - 1 && year === Number(spliteBookingString[2])) {\n                return isBelongHere = true\n            }\n        })\n\n        if (isBelongHere) {\n            return booking\n        }\n    })\n\n    const daysWithBookingsArr = days.map(day => {\n        let dayObj = {}\n\n        bookingDates.forEach(date => {\n            const splitedDate = date.split('/')\n            if (Number(splitedDate[0]) === day.dayNumber) {\n                return dayObj = {\n                    dayNumber: day.dayNumber,\n                    bookings: calendar.booked[date],\n                    bookingDate: bookingDates.find(bookDate => bookDate === date)\n                }\n            } else {\n                if (dayObj.bookings) return\n                return dayObj = {\n                    dayNumber: day.dayNumber,\n                }\n            }\n        })\n\n        if (dayObj.bookings) return dayObj\n\n        return {\n            dayNumber: day.dayNumber,\n        }\n\n    });\n    return daysWithBookingsArr\n}\n\nexport const checkIfHasAppoinment = (hourIndex, bookingsArr) => {\n    let result = false;\n    if (bookingsArr) {\n        bookingsArr.forEach(booking => {\n            const formatBookingTime = booking.split('/')\n            if (Number(formatBookingTime[0]) === hourIndex) {\n                return result = true\n            }\n        })\n    }\n    return result\n}\n\nexport const formatCalendarObj = calendarObj => {\n    let obj = { ...calendarObj }\n    if (obj.bookings) delete obj[\"bookings\"]\n    if (obj.booked !== undefined) delete obj[\"booked\"]\n    if (obj.__v !== undefined) delete obj[\"__v\"]\n    if (obj._id) delete obj[\"_id\"]\n    if (obj.dateCreated) delete obj[\"dateCreated\"]\n    if (obj.exceptDays) {\n        obj = {\n            ...obj,\n            exceptDays: formatExceptDaysToObj(obj.exceptDays)\n        }\n    }\n\n    return obj\n}\n\nexport const formatExceptDays = exceptDaysObj => {\n    const arr = Object.keys(exceptDaysObj)\n    const formatedArr = arr.map(value => value.split('/').reverse().join('-'))\n    return formatedArr\n}\n\nexport const formatExceptDaysToObj = exceptDaysArr => {\n    let obj = {}\n    const formatedArr = exceptDaysArr.map(value => value.split('-').reverse().join('/'))\n\n    formatedArr.forEach(day => {\n        obj = {\n            ...obj,\n            [day]: \"00/00-23/59\"\n        }\n    })\n    return obj\n}\n\nexport const formatBookingObj = bookingObj => {\n    let obj = { ...bookingObj }\n    if (obj.rows) delete obj[\"rows\"]\n    if (obj.__v !== undefined) delete obj[\"__v\"]\n    if (obj._id) delete obj[\"_id\"]\n    if (obj.dateCreated) delete obj[\"dateCreated\"]\n    if (obj.timesBooked !== undefined) delete obj[\"timesBooked\"]\n    if (obj.premises) delete obj[\"premises\"]\n    if (obj.calendar) delete obj[\"calendar\"]\n\n    return obj\n}\n\nexport const formatDate = (bookingDate) => {\n    const splitedDate = bookingDate?.date.split('-')\n    const formatedDate = `${splitedDate[2]}/${splitedDate[1]}/${splitedDate[0]}`\n    const formatedHour = `${bookingDate?.hour < 10 ? `0${bookingDate?.hour}` : bookingDate?.hour}/${bookingDate?.min === 0 ? `0${bookingDate?.min}` : bookingDate?.min}`\n\n    return `${formatedHour}:${formatedDate}`\n}\n\nexport const formatCalendarStartTime = (calendar, day) => {\n    let dayIndex = new Date(day.year, day.month, day.dayNumber).getDay()\n    if (dayIndex === 0) dayIndex = 7\n    if (calendar.startTimes[dayIndex - 1] === \"X\") return\n    return calendar.startTimes[dayIndex - 1].replace(\"/\", \":\")\n}\nexport const formatCalendarEndTime = (calendar, day) => {\n    let dayIndex = new Date(day.year, day.month, day.dayNumber).getDay()\n    if (dayIndex === 0) dayIndex = 7\n    if (calendar.endTimes[dayIndex - 1] === \"X\") return\n    return calendar.endTimes[dayIndex - 1].replace(\"/\", \":\")\n}","import React, { createContext, useContext } from 'react'\nimport { LoadingModalContext } from '../loading-modal/loading-modal.contenxt'\nimport { AuthContext } from '../auth/auth.context'\nimport { useHistory } from 'react-router-dom'\n\nexport const BookingContext = createContext({\n    createCalendar: () => { },\n    updateCalendar: () => { },\n    deleteCalendar: () => { },\n    createBooking: () => { },\n    updateBooking: () => { },\n    deleteBooking: () => { },\n    createUserBooking: () => { },\n})\n\nconst BookingProvider = ({ children }) => {\n    const { push } = useHistory()\n    const { token } = useContext(AuthContext)\n    const {\n        getMessage,\n        setIsLoading,\n        setShowModal,\n        closeModal\n    } = useContext(LoadingModalContext)\n\n    const myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n    myHeaders.append(\"Content-Type\", \"application/json\");\n\n    const createCalendar = async (calendarToAdd) => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        const raw = JSON.stringify(calendarToAdd);\n\n        const requestOptions = {\n            method: 'POST',\n            headers: myHeaders,\n            body: raw,\n            redirect: 'follow'\n        };\n\n        try {\n            const response = await fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/booking/calendars`, requestOptions)\n            const data = await response.json()\n\n            if (data.calendar) {\n                setIsLoading(false)\n                closeModal()\n                push('/dashboard/rezervacie')\n                return\n            }\n\n            setIsLoading(false)\n            getMessage(data.messageSK)\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Niečo sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    const updateCalendar = async (calendarToUpdate, calendarId) => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        const raw = JSON.stringify(calendarToUpdate);\n\n        const requestOptions = {\n            method: 'PATCH',\n            headers: myHeaders,\n            body: raw,\n            redirect: 'follow'\n        };\n\n\n        try {\n            const response = await fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/booking/calendars/${calendarId}`, requestOptions)\n            const data = await response.json()\n\n            console.log(data)\n\n\n            if (data.calendar) {\n                setIsLoading(false)\n                closeModal()\n                push('/dashboard/rezervacie')\n                return\n            }\n\n\n            setIsLoading(false)\n            getMessage(data.messageSK)\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Niečo sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    const deleteCalendar = async (calendarId) => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        const requestOptions = {\n            method: 'DELETE',\n            headers: myHeaders,\n            // body: raw,\n            redirect: 'follow'\n        };\n\n\n        try {\n            const response = await fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/booking/calendars/${calendarId}`, requestOptions)\n            const data = await response.json()\n\n            console.log(data)\n\n            setIsLoading(false)\n            getMessage(data.messageSK)\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Niečo sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    const createBooking = async (bookingToAdd) => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        const raw = JSON.stringify(bookingToAdd);\n\n        const requestOptions = {\n            method: 'POST',\n            headers: myHeaders,\n            body: raw,\n            redirect: 'follow'\n        };\n\n\n        try {\n            const response = await fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/booking/bookings`, requestOptions)\n            const data = await response.json()\n\n            console.log(data)\n            if (data.booking) {\n                setIsLoading(false)\n                closeModal()\n                return\n            }\n\n            setIsLoading(false)\n            getMessage(data.messageSK)\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Niečo sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    const updateBooking = async (bookingToUpdate, bookingId) => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        const raw = JSON.stringify(bookingToUpdate);\n\n        const requestOptions = {\n            method: 'PATCH',\n            headers: myHeaders,\n            body: raw,\n            redirect: 'follow'\n        };\n\n\n        try {\n            const response = await fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/booking/bookings/${bookingId}`, requestOptions)\n            const data = await response.json()\n\n            console.log(data)\n\n            setIsLoading(false)\n            getMessage(data.message)\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Niečo sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    const deleteBooking = async (bookingId) => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        const requestOptions = {\n            method: 'DELETE',\n            headers: myHeaders,\n            redirect: 'follow'\n        };\n\n        try {\n            const response = await fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/booking/bookings/${bookingId}`, requestOptions)\n            const data = await response.json()\n\n            console.log(data)\n\n            setIsLoading(false)\n            getMessage(data.message)\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Niečo sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    const createUserBooking = async (userBookingToAdd, refetchCalendar, close) => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        const raw = JSON.stringify(userBookingToAdd);\n\n        const requestOptions = {\n            method: 'POST',\n            headers: myHeaders,\n            body: raw,\n            redirect: 'follow'\n        };\n\n        try {\n            const response = await fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/booking/userBookings`, requestOptions)\n            const data = await response.json()\n\n            console.log(\"USERBOOKING RESPONSE\")\n            console.log(data)\n\n            if (data.userBooking) {\n                setIsLoading(false)\n\n                refetchCalendar()\n                closeModal()\n                close()\n            }\n\n\n            setIsLoading(false)\n            getMessage(data.messageSK)\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Niečo sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n\n    return (\n        <BookingContext.Provider\n            value={{\n                createCalendar,\n                updateCalendar,\n                deleteCalendar,\n                createBooking,\n                updateBooking,\n                deleteBooking,\n                createUserBooking\n            }}\n        >\n            {children}\n        </BookingContext.Provider>\n    )\n}\n\nexport default BookingProvider"],"sourceRoot":""}