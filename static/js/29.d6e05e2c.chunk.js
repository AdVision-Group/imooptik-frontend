(this.webpackJsonpimooptik=this.webpackJsonpimooptik||[]).push([[29],{66:function(e,r,t){"use strict";t.r(r),t.d(r,"OrdersContext",(function(){return f}));var n=t(2),a=t(21),o=t(7),c=t.n(o),s=t(12),i=t(10),u=t(1),d=t(3),l=t(19),p=t(18),f=Object(u.createContext)({orders:null,getOrders:function(){},createOrder:function(){},finishOrder:function(){}});r.default=function(e){var r=e.children,t=Object(d.h)().push,o=Object(u.useContext)(p.a),h=o.setIsLoading,b=o.setShowModal,k=o.getMessage,O=o.closeModal,v=Object(u.useContext)(l.a).token,x=Object(u.useState)(null),j=Object(i.a)(x,2),g=j[0],m=j[1],w=new Headers;w.append("auth-token",v),w.append("Content-Type","application/json");var y=function(){var e=Object(s.a)(c.a.mark((function e(){var r,t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),b(!0),r={method:"GET",headers:w,redirect:"follow"},e.prev=3,e.next=6,fetch("".concat("http://195.110.58.166:8080","/api/admin/orders"),r);case 6:return t=e.sent,e.next=9,t.json();case 9:if(n=e.sent,console.log(n),!n.orders){e.next=15;break}return m(n.orders),O(),e.abrupt("return");case 15:k(n.message),h(!1),e.next=24;break;case 19:e.prev=19,e.t0=e.catch(3),console.log(e.t0),k("Nieco sa pokazilo"),h(!1);case 24:case"end":return e.stop()}}),e,null,[[3,19]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(s.a)(c.a.mark((function e(r){var n,o,s,i,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),b(!0),n=Object(a.a)({},r),console.log("ORDER BEFORE SEND"),console.log(n),o=JSON.stringify(n),s={method:"POST",headers:w,body:o,redirect:"follow"},e.prev=7,e.next=10,fetch("".concat("http://195.110.58.166:8080","/api/admin/orders"),s);case 10:return i=e.sent,e.next=13,i.json();case 13:u=e.sent,console.log(u),u.order&&(y(),O(),t("/dashboard/objednavky")),k(u.message),h(!1),e.next=25;break;case 20:e.prev=20,e.t0=e.catch(7),console.log(e.t0),k("Nieco sa pokazilo"),h(!1);case 25:case"end":return e.stop()}}),e,null,[[7,20]])})));return function(r){return e.apply(this,arguments)}}(),C=function(){var e=Object(s.a)(c.a.mark((function e(r){var t,n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),b(!0),t={method:"POST",headers:w,redirect:"follow"},e.prev=3,e.next=6,fetch("".concat("http://195.110.58.166:8080","/api/admin/orders/").concat(r,"/fulfill"),t);case 6:return n=e.sent,e.next=9,n.json();case 9:if(a=e.sent,console.log(a),"undelegated-order"!==a.error){e.next=15;break}return h(!1),k("Objedn\xe1vka nem\xf4\u017ee by\u0165 dokon\u010den\xe1 ak nieje priraden\xe1 k prev\xe1dzke"),e.abrupt("return");case 15:if(!a.order){e.next=18;break}return O(),e.abrupt("return");case 18:k(a.message),h(!1),e.next=27;break;case 22:e.prev=22,e.t0=e.catch(3),console.log(e.t0),k("Nieco sa pokazilo"),h(!1);case 27:case"end":return e.stop()}}),e,null,[[3,22]])})));return function(r){return e.apply(this,arguments)}}();return Object(n.jsx)(f.Provider,{value:{orders:g,getOrders:y,createOrder:S,finishOrder:C},children:r})}}}]);
//# sourceMappingURL=29.d6e05e2c.chunk.js.map