(this.webpackJsonpimooptik=this.webpackJsonpimooptik||[]).push([[13],{228:function(n,e,t){"use strict";t.r(e);var r=t(2),c=t(21),i=t(10),o=t(1),a=t.n(o),l=t(3),d=t(19),u=t(18),s=(t(59),t(54)),b=t(32),j=t(5),v=t(6),f=t(28);function m(){var n=Object(j.a)(["\n    margin-top: 2rem;\n    font-size: 1.4rem;\n    display: block;\n    margin-left: 2rem;;\n"]);return m=function(){return n},n}function h(){var n=Object(j.a)(["\n    margin-top: 2rem;\n    font-size: 1.4rem;\n    display: block;\n    background-color: ",";\n    font-weight: bolder;\n    color: ",";\n"]);return h=function(){return n},n}function O(){var n=Object(j.a)(["\n    display: flex;\n"]);return O=function(){return n},n}function p(){var n=Object(j.a)(["\n    padding: 2rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n\n    &:not(:last-child) {\n        /* margin-right: 2rem; */\n    }\n\n    h3  { \n        font-size: 1.8rem;\n    }\n\n    p {\n        font-size: 1.4rem;\n        opacity: .83;\n\n        span {\n            font-weight: bolder;\n        }\n    }\n"]);return p=function(){return n},n}var g=v.c.div(p()),x=v.c.div(O()),k=Object(v.c)(f.a)(h(),(function(n){return n.isActive?"var(--primary-color)":"var(--body-background-primary-color)"}),(function(n){return n.isActive?"var(--button-font-color)":"var(--primary-color)"})),y=Object(v.c)(f.a)(m()),w=function(n){var e=n.calendar,t=void 0===e?{}:e,c=n.selectedCalendar,i=void 0===c?null:c,o=n.handleShowUpClick,a=void 0===o?function(){}:o,l=n.handleUpdateClick,d=void 0===l?function(){}:l;return Object(r.jsxs)(g,{children:[Object(r.jsx)("h3",{children:null===t||void 0===t?void 0:t.name}),Object(r.jsxs)("p",{children:["Interval medzi vy\u0161etreniami: ",Object(r.jsxs)("span",{children:[null===t||void 0===t?void 0:t.interval,"min"]})]}),Object(r.jsxs)("p",{children:["Po\u010det min\xfat pred rezerv\xe1ciou: ",Object(r.jsxs)("span",{children:[null===t||void 0===t?void 0:t.allowMinutesBefore,"min"]})]}),Object(r.jsxs)("p",{children:["Ko\u013eko dn\xed dopredu sa da objedna\u0165: ",Object(r.jsx)("span",{children:null===t||void 0===t?void 0:t.daysIntoFuture})]}),Object(r.jsxs)(x,{children:[Object(r.jsx)(k,{isActive:i===(null===t||void 0===t?void 0:t._id),onClick:a,children:"Zobrazi\u0165"}),Object(r.jsx)(y,{onClick:d,children:"Upravi\u0165"})]})]})},C=t(7),z=t.n(C),D=t(12),B=t(55),S=t(30),E=t(53),A=function(n,e){if(NaN!==Number(n)){var t=n*e,r=Math.floor(t/60);return I(r,t%60)}},I=function(n,e){return n<10&&0===e?"0".concat(n,"/0").concat(e):n<10?"0".concat(n,"/").concat(e):0===e?"".concat(n,"/0").concat(e):"".concat(n,"/").concat(e)},N=function(n){if(n)return n.replace("/",":")},U=function(n,e,t,r,c){if(!(null===n||void 0===n?void 0:n.booked))return null;var i=Object.keys(null===n||void 0===n?void 0:n.booked).find((function(n){var e=n.split("/").map((function(n){return Number(n)}));if(e[0]===t&&e[1]===r+1&&e[2]===c)return n}));if(!i)return null;var o=A(e,n.interval),a=n.booked[i].find((function(n){return n===o}));return a?{time:a,date:n.booked[i],dueDate:"".concat(a,":").concat(i)}:null},P=Object(o.createContext)({getDayData:function(){},refetchWeekCalendar:function(){},cancelUserBooking:function(){}}),T=function(n){var e=n.children,t=n.calendar,c=n.month,a=n.year,l=(Object(S.a)(n,["children","calendar","month","year"]),Object(E.b)("api/booking/calendars",t,!t)),s=l.response,b=l.isLoading,j=l.refetch,v=Object(o.useContext)(d.a),f=v.closeModal,m=v.setIsLoading,h=v.setShowModal,O=v.getMessage,p=Object(o.useContext)(u.a).token,g=Object(o.useState)(null),x=Object(i.a)(g,2),k=x[0],y=x[1],w=Object(o.useState)(0),C=Object(i.a)(w,2),I=C[0],N=C[1],T=new Headers;T.append("auth-token",p),T.append("Content-Type","application/json");var M=function(){var n=Object(D.a)(z.a.mark((function n(e,t,r){var c,i,o;return z.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return h(!0),m(!0),c={method:"POST",headers:T,redirect:"follow"},n.prev=3,n.next=6,fetch("".concat("http://195.110.58.166:8080","/api/booking/userBookings/").concat(e,"/cancel"),c);case 6:return i=n.sent,n.next=9,i.json();case 9:o=n.sent,console.log(o),o.userBooking&&(f(),t(),r(!1)),O(o.messageSK),m(!1),n.next=21;break;case 16:n.prev=16,n.t0=n.catch(3),console.log(n.t0),O("Nie\u010do sa pokazilo"),m(!1);case 21:case"end":return n.stop()}}),n,null,[[3,16]])})));return function(e,t,r){return n.apply(this,arguments)}}();return Object(o.useEffect)((function(){b||(y(s.calendar),30===s.calendar.interval&&N(48),60===s.calendar.interval&&N(24))}),[b]),Object(o.useEffect)((function(){return function(){y(null)}}),[]),Object(r.jsx)(P.Provider,{value:{getDayData:function(n,e){if(k)return Object(B.a)(Array(I)).map((function(t,r){var i,o,l=null===(i=k.startTimes[e])||void 0===i?void 0:i.split("/").map((function(n){return Number(n)})),d=null===(o=k.endTimes[e])||void 0===o?void 0:o.split("/").map((function(n){return Number(n)})),u=A(r,k.interval),s=u.split("/").map((function(n){return Number(n)}));if(!(l[0]>s[0])&&!(d[0]<s[0])&&"X"!==k.startTimes[e]&&(d[0]!==s[0]||d[1]===s[1]||30!==s[1]))return{id:r,time:u,userBookings:U(k,r,n,c,a)}})).filter((function(n){return void 0!==n}))},refetchWeekCalendar:j,cancelUserBooking:M},children:e})},M=t(67);function H(){var n=Object(j.a)(["\n    height: 8rem;\n    display: flex;\n    justify-content: space-between;\n    align-items: flex-end;\n    border: 1px solid rgba(0,0,0,.1);\n    padding: .6rem 1rem;\n\n    transition: all .15s;\n\n    p {\n        span {\n            width: 3rem;\n            height: 3rem;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            border-radius: 50%;\n            background-color: var(--body-background-primary-color);\n            color: var(--primary-color);\n            font-weight: bolder;\n            font-size: 1.5rem;\n        }\n    }\n\n    ",";\n\n\n\n"]);return H=function(){return n},n}function F(){var n=Object(j.a)(["\n    cursor: default;\n    height: 8rem;\n    background-color: var(--color-black);\n    color: var(--table-head-color);\n    display: flex;\n    align-items:center;\n    justify-content:center;\n    font-weight: 700;\n"]);return F=function(){return n},n}function _(){var n=Object(j.a)(["\n    width: 100%;\n    display: grid;\n    grid-template-columns: repeat(7, 1fr);\n    border: 1px solid rgba(0,0,0,.1);\n    min-width: 55rem;\n"]);return _=function(){return n},n}var K=v.c.div(_()),L=v.c.div(F()),R=v.c.div(H(),(function(n){return n.faded?"opacity: .6":"    \n        cursor: pointer;\n        &:hover {\n        background-color: var(--body-background-primary-color);\n        }\n    "})),V=function(n){var e=n.calendar,t=n.month,c=n.year,a=n.handleCalendarBlockClick;(new Date).setDate(1);var l=new Date(c,t+1,0).getDate(),d=new Date(c,t,0).getDate(),u=new Date(c,t,0).getDay(),s=7-new Date(c,t+1,0).getDay(),b=Object(E.b)("api/booking/calendars",e,!e),j=b.response,v=b.isLoading,f=b.refetch,m=Object(o.useState)([]),h=Object(i.a)(m,2),O=h[0],p=h[1],g=Object(o.useState)([]),x=Object(i.a)(g,2),k=x[0],y=x[1],w=Object(o.useState)([]),C=Object(i.a)(w,2),z=C[0],D=C[1];return Object(o.useEffect)((function(){f()}),[t]),Object(o.useEffect)((function(){e&&f()}),[e]),Object(o.useEffect)((function(){if(!v&&(null===j||void 0===j?void 0:j.calendar)){var n=Object(M.n)(u),e=Object(M.l)(l),r=Object(M.m)(s),i=Object(M.k)(e,j.calendar,t,c);p(n),y(i),D(r)}}),[v]),Object(r.jsxs)(K,{children:[M.c.map((function(n,e){return Object(r.jsx)(L,{children:n},e)})),O.map((function(n,e){return Object(r.jsxs)(R,{faded:!0,children:[Object(r.jsx)("p",{}),Object(r.jsx)("p",{children:d-e})]},e)})),k.map((function(n,e){var t=n.dayNumber,c=n.bookings;return Object(r.jsxs)(R,{onClick:function(){return a(n)},children:[Object(r.jsx)("p",{children:c&&Object(r.jsx)("span",{children:c.length})}),Object(r.jsx)("p",{children:t})]},e)})),z.map((function(n,e){return Object(r.jsxs)(R,{faded:!0,children:[Object(r.jsx)("p",{}),Object(r.jsx)("p",{children:e+1})]},e)}))]})},W=t(69),Y=t(20),q=t.n(Y),G=t(34),Z=t(57);function J(){var n=Object(j.a)(["\n    "," {\n        margin-bottom: 3rem;\n    }\n"]);return J=function(){return n},n}function Q(){var n=Object(j.a)(["\n    display: block;\n    background-color: var(--primary-color);\n    font-weight: bolder;\n"]);return Q=function(){return n},n}function X(){var n=Object(j.a)(["\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    margin-bottom: 2rem;\n"]);return X=function(){return n},n}function $(){var n=Object(j.a)(["\n    padding: 1rem;\n    background-color: var(--body-background-primary-color);\n\n    h3 {\n        font-size: 1.3rem;\n        font-weight: lighter;\n        opacity: .8;\n        margin-bottom: .5rem;\n    }\n\n    p {\n        font-size: 1.8rem;\n        margin-left: 2rem;\n    }\n"]);return $=function(){return n},n}function nn(){var n=Object(j.a)(["\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    align-items: start;\n    grid-gap: 3rem;\n    margin-bottom: 3rem;\n\n"]);return nn=function(){return n},n}function en(){var n=Object(j.a)(["\n    width: 100%;\n    height: 100%;\n\n    position: fixed;\n    left: 0;\n    right: 0;\n    z-index: 99999;\n\n    border: none;\n    outline: none;\n    opacity: 0;\n\n    &:focus {\n        outline: none\n    }\n"]);return en=function(){return n},n}function tn(){var n=Object(j.a)(["\n    width:100%;\n    max-width: 65rem;\n    max-height: 60rem;\n\n    overflow-y: scroll;\n\n    padding: 2rem;\n    border-radius: .5rem;\n    background-color: var(--background-primary-color);\n    color: var(--primary-text-color);\n\n    position: relative;\n    z-index: 999999; \n\n    h2{ \n        margin-bottom: 2rem;\n        /* text-align: center; */\n    }\n\n    ::-webkit-scrollbar {\n        width: 10px;\n    }\n\n    /* Track */\n    ::-webkit-scrollbar-track {\n        background:  var(--background-primary-color);\n    }\n\n    /* Handle */\n    ::-webkit-scrollbar-thumb {\n        background: var(--primary-color);\n    }\n\n    /* Handle on hover */\n    ::-webkit-scrollbar-thumb:hover {\n        background: var(--primary-color);\n    }\n"]);return tn=function(){return n},n}function rn(){var n=Object(j.a)(["\n    position: fixed;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    z-index: 99999;\n\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    background-color: rgba(0,0,0,0.3);\n"]);return rn=function(){return n},n}var cn=v.c.div(rn()),on=v.c.div(tn()),an=v.c.button(en()),ln=v.c.div(nn()),dn=v.c.div($()),un=v.c.div(X()),sn=Object(v.c)(f.a)(Q()),bn=v.c.div(J(),dn),jn=function(n){var e,t,c,a,l=n.close,d=n.userBooking,u=n.calendarId,s=n.cancelUserBooking,b=Object(E.c)("api/booking/calendars/".concat(u,"/dayInfo"),{date:null===d||void 0===d||null===(e=d.userBookings)||void 0===e?void 0:e.dueDate.split(":")[1]},!d),j=b.response,v=b.isLoading,f=Object(o.useState)(null),m=Object(i.a)(f,2),h=m[0],O=m[1];return Object(o.useEffect)((function(){if(!v&&j){var n=j.userBookings.find((function(n){return n.dueTime===d.userBookings.dueDate}));console.log(n),O(n)}}),[v]),console.log(h),q.a.createPortal(Object(r.jsxs)(cn,{children:[Object(r.jsx)(an,{onClick:l}),Object(r.jsxs)(on,{children:[!h&&Object(r.jsx)(G.a,{}),Object(r.jsx)("h2",{children:null===h||void 0===h||null===(t=h.booking)||void 0===t?void 0:t.name}),Object(r.jsxs)(un,{children:[Object(r.jsx)("h3",{children:"Inform\xe1cie:"}),Object(r.jsx)(sn,{onClick:function(){return s(h._id)},children:"Zru\u0161i\u0165 rezerv\xe1ciu"})]}),Object(r.jsxs)(ln,{children:[Object(r.jsxs)(dn,{children:[Object(r.jsx)("h3",{children:"Meno a priezvisko"}),Object(r.jsx)("p",{children:null===h||void 0===h?void 0:h.name})]}),Object(r.jsxs)(dn,{children:[Object(r.jsx)("h3",{children:"Prevadzka"}),Object(r.jsx)("p",{children:Z.d[null===h||void 0===h||null===(c=h.booking)||void 0===c?void 0:c.premises]})]}),Object(r.jsxs)(dn,{children:[Object(r.jsx)("h3",{children:"Tel. \u010d\xedslo"}),Object(r.jsx)("p",{children:null===h||void 0===h?void 0:h.phone})]}),Object(r.jsxs)(dn,{children:[Object(r.jsx)("h3",{children:"E-mail"}),Object(r.jsx)("p",{children:null===h||void 0===h?void 0:h.email})]}),Object(r.jsxs)(dn,{children:[Object(r.jsx)("h3",{children:"D\xe1tum"}),Object(r.jsx)("p",{children:null===h||void 0===h?void 0:h.dueTime})]}),Object(r.jsxs)(dn,{children:[Object(r.jsx)("h3",{children:"Zru\u0161en\xe9"}),Object(r.jsx)("p",{children:(null===h||void 0===h?void 0:h.cancelled)?"Ano":"Nie"})]})]}),Object(r.jsxs)(bn,{children:[Object(r.jsxs)(dn,{children:[Object(r.jsx)("h3",{children:"Pozn\xe1mka"}),(null===h||void 0===h?void 0:h.note)?Object(r.jsx)("p",{children:null===h||void 0===h?void 0:h.note}):Object(r.jsx)("p",{children:"\u017diadn\xe1 pozn\xe1mka"})]}),Object(r.jsxs)(dn,{children:[Object(r.jsx)("h3",{children:"Popis"}),Object(r.jsx)("p",{children:null===h||void 0===h||null===(a=h.booking)||void 0===a?void 0:a.description})]})]})]})]}),document.getElementById("portal"))},vn=t(31),fn=t(52),mn=t(63),hn=t(60);function On(){var n=Object(j.a)(["\n    display: grid;\n    grid-template-columns: 2fr 1fr .4rem 1fr;\n    grid-gap: 1rem;\n\n    p {\n        align-self: center;\n    }\n"]);return On=function(){return n},n}function pn(){var n=Object(j.a)(["\n    margin-top: 2rem;\n    /* min-width: 16.5rem; */\n    width: 100%;\n    background-color: var(--input-background-color);\n    color: var(--input-color);\n    border: none;\n    padding: .8rem .5rem .8rem .5rem;\n    font-size: inherit;\n    font-family: inherit;\n    display: block;\n\n    margin-bottom: 2rem;\n"]);return pn=function(){return n},n}function gn(){var n=Object(j.a)(["\n    padding: 2rem;\n    text-align: center;\n"]);return gn=function(){return n},n}function xn(){var n=Object(j.a)(["\n    display: grid;\n    grid-template-columns: 1fr 1fr 1fr;\n\n    cursor: pointer;\n    align-content: center;\n    margin-bottom: 1rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n\n    transition: all .3s ease-out;\n\n    &:hover {\n        background-color: var(--primary-color); \n        font-weight: bolder;\n        color: var(--button-font-color);\n    }\n\n"]);return xn=function(){return n},n}function kn(){var n=Object(j.a)(["\n    display: grid;\n    grid-template-columns: 1fr 1fr 1fr;\n"]);return kn=function(){return n},n}function yn(){var n=Object(j.a)(["\n    p {\n        text-align: center;\n        opacity: .6;\n    }\n        margin-bottom: 3rem;\n"]);return yn=function(){return n},n}function wn(){var n=Object(j.a)(["\n    button {\n        margin-top: 2rem;\n    }\n"]);return wn=function(){return n},n}function Cn(){var n=Object(j.a)(["\n    ul {\n        justify-content: center;\n    }\n"]);return Cn=function(){return n},n}function zn(){var n=Object(j.a)(["\n    display: block;\n    margin: 0 auto;\n    background-color: var(--primary-color);\n    font-weight: bolder;\n"]);return zn=function(){return n},n}function Dn(){var n=Object(j.a)(["\n    width: 100%;\n    height: 100%;\n\n    position: fixed;\n    left: 0;\n    right: 0;\n    z-index: 99999;\n\n    border: none;\n    outline: none;\n    opacity: 0;\n\n    &:focus {\n        outline: none\n    }\n"]);return Dn=function(){return n},n}function Bn(){var n=Object(j.a)(["\n    width:100%;\n    max-width: 65rem;\n    max-height: 60rem;\n\n    overflow-y: scroll;\n\n    padding: 2rem;\n    border-radius: .5rem;\n    background-color: var(--background-primary-color);\n    color: var(--primary-text-color);\n\n    position: relative;\n    z-index: 999999;\n\n    h2{ \n        margin-bottom: 2rem;\n        text-align: center;\n    }\n\n    ::-webkit-scrollbar {\n        width: 10px;\n    }\n\n    /* Track */\n    ::-webkit-scrollbar-track {\n        background:  var(--background-primary-color);\n    }\n\n    /* Handle */\n    ::-webkit-scrollbar-thumb {\n        background: var(--primary-color);\n    }\n\n    /* Handle on hover */\n    ::-webkit-scrollbar-thumb:hover {\n        background: var(--primary-color);\n    }\n"]);return Bn=function(){return n},n}function Sn(){var n=Object(j.a)(["\n    position: fixed;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    z-index: 99999;\n\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    background-color: rgba(0,0,0,0.3);\n"]);return Sn=function(){return n},n}var En=v.c.div(Sn()),An=v.c.div(Bn()),In=v.c.button(Dn()),Nn=Object(v.c)(f.a)(zn()),Un=Object(v.c)(hn.a)(Cn()),Pn=v.c.div(wn()),Tn=v.c.div(yn()),Mn=v.c.div(kn()),Hn=v.c.div(xn()),Fn=v.c.div(gn()),_n=v.c.select(pn()),Kn=v.c.div(On()),Ln=function(n){var e,t,l,d=n.refetchWeekCalendar,u=n.close,s=n.day,b=n.calendar,j=n.refetchCalendar,v=n.createUserBooking,f=Object(o.useState)(null),m=Object(i.a)(f,2),h=m[0],O=m[1],p=Object(o.useState)(0),g=Object(i.a)(p,2),x=g[0],k=g[1],y=Object(o.useState)({}),w=Object(i.a)(y,2),C=w[0],z=w[1],D=Object(o.useState)({date:"",hour:"",min:0}),B=Object(i.a)(D,2),S=B[0],A=B[1],I=Object(o.useState)(null),N=Object(i.a)(I,2),U=N[0],P=N[1],T=Object(o.useState)(null),H=Object(i.a)(T,2),F=H[0],_=H[1],K=Object(E.c)("api/admin/users/filter",h,!h),L=K.refetch,R=K.response,V=function(n){var e=n.target,t=e.name,r=e.value;if(""===r)return delete C[t],void z(Object(c.a)({},C));z((function(n){return Object(c.a)(Object(c.a)({},n),{},Object(vn.a)({},t,r))}))},W=function(n){var e=n.target,t=e.name,r=e.value;A((function(n){return Object(c.a)(Object(c.a)({},n),{},Object(vn.a)({},t,r))}))};return Object(o.useEffect)((function(){if(s){var n=s.time,e=s.dayNumber,t=s.month,r=s.year;console.log("DAY DATA"),console.log(s),P(Object(M.g)(b,s)),_(Object(M.e)(b,s)),A({date:"".concat(r,"-").concat(t<9?"0".concat(t+1):t+1,"-").concat(e<10?"0".concat(e):e),hour:Number(null===n||void 0===n?void 0:n.split("/")[0]),min:Number(null===n||void 0===n?void 0:n.split("/")[1])})}}),[s]),Object(o.useEffect)((function(){return function(){z({}),O(null),k(0)}}),[]),q.a.createPortal(Object(r.jsxs)(En,{children:[Object(r.jsx)(In,{onClick:u}),Object(r.jsxs)(An,{children:[Object(r.jsx)("h2",{children:"Objedna\u0165 z\xe1kazn\xedka"}),Object(r.jsx)(Un,{items:Rn,activeIndex:x,setActiveIndex:k}),1===x?Object(r.jsxs)(Pn,{children:[Object(r.jsx)(fn.a,{label:"Meno, priezvisko, e-mail alebo tel. \u010d\xedslo",name:"query",value:h?null===h||void 0===h?void 0:h.query:"",handleChange:function(n){return O({limit:10,query:n.target.value})},onKeyPress:function(n){null!==h&&"Enter"===n.key&&L()}}),Object(r.jsx)(Nn,{onClick:function(){h&&L()},children:"H\u013eada\u0165"}),Object(r.jsxs)(Tn,{children:[Object(r.jsxs)(Mn,{children:[Object(r.jsx)(Fn,{children:"Meno"}),Object(r.jsx)(Fn,{children:"E-mail"}),Object(r.jsx)(Fn,{children:"Tel. \u010d\xedslo"})]}),(null===R||void 0===R?void 0:R.users)?null===R||void 0===R||null===(e=R.users)||void 0===e?void 0:e.map((function(n,e){var t=n.name,i=n.email,o=n.phone;return Object(r.jsxs)(Hn,{onClick:function(){return n={name:t,email:i,phone:o},z((function(e){return Object(c.a)(Object(c.a)({},e),n)})),k(0),void O(null);var n},children:[Object(r.jsx)(Fn,{children:t}),Object(r.jsx)(Fn,{children:i}),Object(r.jsx)(Fn,{children:o})]},e)})):Object(r.jsx)("div",{children:Object(r.jsx)("p",{children:"\u017diaden v\xfdsledok"})})]})]}):Object(r.jsxs)(a.a.Fragment,{children:[Object(r.jsxs)("div",{children:[Object(r.jsx)("h3",{children:"D\xe1tum vy\u0161etrenia"}),Object(r.jsxs)(Kn,{children:[Object(r.jsx)(fn.a,{label:"",type:"date",name:"date",handleChange:W,value:null===S||void 0===S?void 0:S.date}),Object(r.jsx)("div",{children:Object(r.jsx)(fn.a,{label:"\u010cas",type:"number",name:"hour",value:null===S||void 0===S||null===(t=S.hour)||void 0===t?void 0:t.toString(),min:null===U||void 0===U?void 0:U.split(":")[0],max:null===F||void 0===F?void 0:F.split(":")[0],handleChange:W,step:"1"})}),Object(r.jsx)("p",{children:":"}),Object(r.jsx)("div",{children:Object(r.jsxs)(_n,{name:"min",value:null===S||void 0===S||null===(l=S.min)||void 0===l?void 0:l.toString(),onChange:W,children:[Object(r.jsx)("option",{value:0,children:"00"}),30===(null===b||void 0===b?void 0:b.interval)&&Object(r.jsx)("option",{value:30,children:"30"})]})})]})]}),Object(r.jsx)("div",{children:Object(r.jsx)(fn.a,{label:"Meno*",name:"name",value:(null===C||void 0===C?void 0:C.name)||"",handleChange:V})}),Object(r.jsx)("div",{children:Object(r.jsx)(fn.a,{label:"E-mail*",name:"email",value:(null===C||void 0===C?void 0:C.email)||"",handleChange:V})}),Object(r.jsx)("div",{children:Object(r.jsx)(fn.a,{label:"Tel. \u010d\xedslo*",name:"phone",value:(null===C||void 0===C?void 0:C.phone)||"",handleChange:V})}),Object(r.jsx)("div",{children:Object(r.jsx)(mn.a,{label:"Pozn\xe1mka",name:"note",rows:"5",value:(null===C||void 0===C?void 0:C.note)||"",handleChange:V})}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h3",{children:"Vy\u0161etrenie"}),Object(r.jsxs)(_n,{name:"booking",value:(null===C||void 0===C?void 0:C.booking)||"",onChange:V,children:[Object(r.jsx)("option",{value:"",children:"Nezvolen\xe9"}),null===b||void 0===b?void 0:b.bookings.map((function(n,e){if(!1!==n.active)return Object(r.jsx)("option",{value:n._id,children:n.name},e)}))]})]})]}),0===x&&Object(r.jsx)(Nn,{onClick:function(){var n=Object(c.a)(Object(c.a)({},C),{},{dueTime:Object(M.h)(S),values:{}});console.log("USER BOOKING BEFORE SEND"),console.log(n),v(n,j,u,d)},children:"Vytvori\u0165"})]})]}),document.getElementById("portal"))},Rn=[{id:0,name:"Nov\xfd z\xe1kazn\xedk"},{id:1,name:"Vyhlada\u0165 z\xe1kazn\xedka"}];function Vn(){var n=Object(j.a)(["\n    cursor: pointer;\n    border: var(--appointment-container-border);\n    background-color: var(--appointment-container-background-color);\n    color: var(--appointment-container-text-color);\n    font-weight: bolder;\n    width: 100%;\n    height: 100%;\n    padding: .5rem;\n    position: absolute;\n    bottom: ",";\n    top: ",";\n    font-size: 1.2rem;\n    z-index: 99;\n\n    h4 {\n        width: 8rem;\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n    }\n"]);return Vn=function(){return n},n}var Wn=v.c.div(Vn(),(function(n){return n.isHalfHour?0:"unset"}),(function(n){return n.isHalfHour?"unset":0})),Yn=function(n){var e,t=n.dayData,c=n.calendarId,l=n.time,d=n.userBookings,u=n.open,s=Object(o.useState)(!1),b=Object(i.a)(s,2),j=b[0],v=b[1],f=Object(E.c)("api/booking/calendars/".concat(c,"/dayInfo"),{date:t.bookingDate},!d),m=f.response,h=f.isLoading,O=Object(o.useState)(null),p=Object(i.a)(O,2),g=p[0],x=p[1],k=Object(o.useState)(!1),y=Object(i.a)(k,2),w=y[0],C=y[1];return Object(o.useEffect)((function(){if(!h){var n=m.userBookings.find((function(n){return n.dueTime===d.dueDate}));d.dueDate===(null===n||void 0===n?void 0:n.dueTime)&&C(!0),x(n)}}),[h]),Object(o.useEffect)((function(){return function(){v(!1),C(!1)}}),[]),Object(r.jsx)(a.a.Fragment,{children:Object(r.jsx)(Wn,{onClick:w?u:function(){},isHalfHour:j,children:w&&Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:g&&(null===g||void 0===g||null===(e=g.booking)||void 0===e?void 0:e.name)}),Object(r.jsx)("h5",{children:l})]})})})};function qn(){var n=Object(j.a)(["\n    cursor: pointer;\n    border: var(--appointment-container-border);\n    background-color: var(--appointment-container-background-color);\n    color: var(--appointment-container-text-color);\n    font-weight: bolder;\n    width: 100%;\n    height: 50%;\n    padding: .5rem;\n    /* position: absolute; */\n\n"]);return qn=function(){return n},n}function Gn(){var n=Object(j.a)(['\n    content: "";\n    position: relative;\n    /* position: absolute; */\n    /* width: 5rem; */\n    height: 100%;\n    /* top: 0;\n    left: 0;\n    bottom: 0;\n    right: 0; */\n    /* background-color: red; */\n']);return Gn=function(){return n},n}function Zn(){var n=Object(j.a)(["\n    cursor: pointer;\n    position: relative;\n    /* width: 15rem; */\n    height: 10rem;\n    border-bottom: var(--table-border);\n    background-color: var(--background-primary-color);\n\n\n    span {\n        display: none;\n    }\n"]);return Zn=function(){return n},n}function Jn(){var n=Object(j.a)(["\n    background-color: var(--body-background-primary-color);\n    /* border: var(--table-border); */\n \n    \n\n    &:nth-child(1) {\n        div {\n            span {\n                width: 6rem;\n                display: block;\n                opacity: .6;\n                position: absolute;\n                top: 0rem;\n                left: -5.8rem;\n                font-size: 1.4rem;\n                padding: .5rem 1rem .5rem .2rem;\n                border-radius: 9999rem;\n                text-align: end;\n                letter-spacing: .05rem;\n            }\n        }\n    }\n"]);return Jn=function(){return n},n}function Qn(){var n=Object(j.a)(["\n    cursor: default;\n    height: 8rem;\n    background-color: var(--color-black);\n    color: var(--table-head-color);\n    display: flex;\n    flex-direction: column;\n    align-items:center;\n    justify-content:center;\n    font-weight: 700;\n\n    p:first-child {\n        font-weight: lighter;\n    }\n\n    /* background-color: red; */\n    ","\n"]);return Qn=function(){return n},n}function Xn(){var n=Object(j.a)(["\n    display: grid;\n    grid-template-columns: repeat(7, 1fr);\n    background-color: var(--color-black);\n\n    /* border: var(--table-border); */\n    min-width: 55rem;\n    padding-left: 5rem;\n    padding-right: 1rem;\n\n"]);return Xn=function(){return n},n}function $n(){var n=Object(j.a)(["\n    overflow-y: scroll;\n    /* overflow-x: auto; */\n    height: 60rem;\n    display: grid;\n    grid-template-columns: repeat(7, 1fr);\n    /* border: var(--table-border); */\n    min-width: 55rem;\n    padding-left: 5rem;\n\n\n   ::-webkit-scrollbar {\n        width: 1rem;\n    }\n\n    /* Track */\n    ::-webkit-scrollbar-track {\n        background:  var(--background-primary-color);\n    }\n\n    /* Handle */\n    ::-webkit-scrollbar-thumb {\n        background: var(--primary-color);\n    }\n\n    /* Handle on hover */\n    ::-webkit-scrollbar-thumb:hover {\n        background: var(--primary-color);\n    }\n"]);return $n=function(){return n},n}function ne(){var n=Object(j.a)(["\n    width: 100%;\n"]);return ne=function(){return n},n}var ee=v.c.div(ne()),te=v.c.div($n()),re=v.c.div(Xn()),ce=v.c.div(Qn(),(function(n){return n.isDisabled?"\n        opacity: .6;\n    ":""})),ie=v.c.div(Jn()),oe=v.c.div(Zn()),ae=v.c.div(Gn()),le=(v.c.div(qn()),function(n){var e=n.calendar,t=n.year,l=n.month,d=n.weekIndex,u=n.showUserBooking,s=n.setShowUserBooking,b=n.handleOpenUserBookingModal,j=n.selectedDay,v=Object(o.useContext)(P),f=v.getDayData,m=v.refetchWeekCalendar,h=v.cancelUserBooking,O=Object(o.useContext)(W.BookingContext).createUserBooking,p=Object(E.b)("api/booking/calendars",e,!e),g=p.response,x=p.isLoading,k=p.refetch,y=new Date(t,l+1,0).getDate(),w=new Date(t,l,0).getDay(),C=new Date(t,l+1,0).getDay(),z=new Date(t,l,0).getDate(),D=7-C,S=Object(o.useState)([]),A=Object(i.a)(S,2),I=A[0],U=A[1],T=Object(o.useState)(!1),H=Object(i.a)(T,2),F=H[0],_=H[1],K=Object(o.useState)(null),L=Object(i.a)(K,2),R=L[0],V=L[1];return Object(o.useEffect)((function(){if(!x&&g.calendar){var n=Object(M.n)(w),e=Object(M.l)(y),r=Object(M.m)(D),c=Object(M.k)(e,g.calendar,l,t);U([].concat(Object(B.a)(n),Object(B.a)(c),Object(B.a)(r)))}}),[x]),Object(r.jsxs)("div",{children:[F&&Object(r.jsx)(jn,{cancelUserBooking:function(n){h(n,m,_)},calendarId:e,userBooking:R,close:function(){return _(!1)}}),u&&Object(r.jsx)(Ln,{refetchWeekCalendar:m,createUserBooking:O,refetchCalendar:k,calendar:null===g||void 0===g?void 0:g.calendar,day:j,close:function(){return s(!1)}}),Object(r.jsxs)(ee,{children:[Object(r.jsx)(re,{children:I.slice(7*d,7*d+7).map((function(n,e){var c=n.dayNumber,i=n.isDisable,o=n.isPrevDay,d=n.isNextDay;return Object(r.jsx)(ce,{isDisabled:i,children:o?Object(r.jsxs)(a.a.Fragment,{children:[Object(r.jsx)("p",{children:M.c[new Date(t,l-1,z-c).getDay()]}),Object(r.jsx)("p",{children:z-(c-1)})]}):d?Object(r.jsxs)(a.a.Fragment,{children:[Object(r.jsx)("p",{children:M.c[new Date(t,l+1,c-1).getDay()]}),Object(r.jsxs)("p",{children:[c," "]})]}):Object(r.jsxs)(a.a.Fragment,{children:[Object(r.jsx)("p",{children:M.c[new Date(t,l,c-1).getDay()]}),Object(r.jsxs)("p",{children:[c," "]})]})},e)}))}),Object(r.jsx)(te,{children:I.slice(7*d,7*d+7).map((function(n,i){var o=f(null===n||void 0===n?void 0:n.dayNumber,i);return Object(r.jsx)(ie,{children:o&&o.map((function(i,o){var a,d;return Object(r.jsxs)(oe,{style:60===(null===g||void 0===g||null===(a=g.calendar)||void 0===a?void 0:a.interval)?{height:"10rem"}:{height:"5rem"},children:[(null===i||void 0===i?void 0:i.userBookings)&&Object(r.jsx)(Yn,{dayData:n,calendarId:e,time:i.time,userBookings:i.userBookings,open:function(){return V(i),void _(!0)}}),Object(r.jsx)(ae,{onClick:function(){return b(Object(c.a)(Object(c.a)({},n),{},{time:i.time,year:t,month:l}))}}),Object(r.jsx)("span",{children:null!==(d=N(null===i||void 0===i?void 0:i.time))&&void 0!==d?d:""})]},o)}))},i)}))})]})]})});function de(){var n=Object(j.a)(["\n    display: grid;\n    grid-template-columns: 10rem 1fr 1fr 20rem 1fr 10rem;\n    align-items: center;\n    margin-bottom: 1rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n"]);return de=function(){return n},n}function ue(){var n=Object(j.a)(["\n    padding: 2rem;\n    text-align: center;\n"]);return ue=function(){return n},n}function se(){var n=Object(j.a)(["\n    display: grid;\n    align-content: center;\n    grid-template-columns: 10rem 1fr 1fr 20rem 1fr 10rem;\n\n    border-bottom: 1px solid var(--secondary-text-color);\n    font-weight: bolder;\n"]);return se=function(){return n},n}v.c.div(se()),v.c.div(ue()),v.c.div(de());var be=t(58);function je(){var n=Object(j.a)(["\n    display: block;\n    margin: 0 auto;\n    background-color: var(--primary-color);\n    font-weight: bolder;\n"]);return je=function(){return n},n}function ve(){var n=Object(j.a)(["\n    margin-bottom: 2rem;\n"]);return ve=function(){return n},n}function fe(){var n=Object(j.a)(["\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n\n"]);return fe=function(){return n},n}function me(){var n=Object(j.a)(["\n    width: 100%;\n    height: 100%;\n\n    position: fixed;\n    left: 0;\n    right: 0;\n    z-index: 99999;\n\n    border: none;\n    outline: none;\n    opacity: 0;\n\n    &:focus {\n        outline: none\n    }\n"]);return me=function(){return n},n}function he(){var n=Object(j.a)(["\n    width:100%;\n    max-width: 50rem;\n    max-height: 60rem;\n\n    overflow-y: scroll;\n\n    /* display: flex;\n    flex-direction: column;\n    align-items: center; */\n\n    padding: 2rem;\n    border-radius: .5rem;\n    background-color: var(--background-primary-color);\n    color: var(--primary-text-color);\n\n    position: relative;\n    z-index: 999999;\n\n    ::-webkit-scrollbar {\n        width: 10px;\n    }\n\n    /* Track */\n    ::-webkit-scrollbar-track {\n        background:  var(--background-primary-color);\n    }\n\n    /* Handle */\n    ::-webkit-scrollbar-thumb {\n        background: var(--primary-color);\n    }\n\n    /* Handle on hover */\n    ::-webkit-scrollbar-thumb:hover {\n        background: var(--primary-color);\n    }\n"]);return he=function(){return n},n}function Oe(){var n=Object(j.a)(["\n    position: fixed;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    z-index: 99999;\n\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    background-color: rgba(0,0,0,0.3);\n"]);return Oe=function(){return n},n}var pe=v.c.div(Oe()),ge=v.c.div(he()),xe=v.c.button(me()),ke=v.c.div(fe()),ye=v.c.div(ve()),we=Object(v.c)(f.a)(je()),Ce=function(n){var e=n.close,t=n.calendarId,a=n.refetch,l=n.selectedBooking,d=Object(o.useContext)(W.BookingContext),u=d.createBooking,s=d.updateBooking,b=Object(E.b)("api/booking/bookings",l,!l),j=b.response,v=b.isLoading,f=Object(o.useState)({}),m=Object(i.a)(f,2),h=m[0],O=m[1],p=Object(o.useState)(!1),g=Object(i.a)(p,2),x=g[0],k=g[1],y=function(n){var e=n.target,t=e.name,r=e.value;if(""===r)return delete h[t],void O(Object(c.a)({},h));O((function(n){return Object(c.a)(Object(c.a)({},n),{},Object(vn.a)({},t,r))}))},w=function(){if(null===h||void 0===h?void 0:h.name){if(x){var n=Object(M.d)(h);console.log("BOOKING BEFORE UPDATE"),console.log(n),s(n,h._id)}else{var r=Object(c.a)(Object(c.a)({},h),{},{calendar:t});console.log("BOOKING BEFORE CREATE"),console.log(r),u(r)}a(),e()}};return Object(o.useEffect)((function(){v||(null===j||void 0===j?void 0:j.booking)&&(k(!0),O(null===j||void 0===j?void 0:j.booking))}),[l,v]),Object(o.useEffect)((function(){return function(){k(!1),O({})}}),[]),console.log(h),q.a.createPortal(Object(r.jsxs)(pe,{children:[Object(r.jsx)(xe,{onClick:e}),Object(r.jsxs)(ge,{children:[Object(r.jsxs)(ke,{children:[!x&&Object(r.jsx)("h2",{children:"Nov\xe9 vy\u0161etrenie"}),x&&Object(r.jsx)("h2",{children:"Upravi\u0165 vy\u0161etrenie"}),Object(r.jsx)("div",{children:Object(r.jsx)(be.a,{label:"Aktivn\xe9",isActive:(null===h||void 0===h?void 0:h.active)||!1,name:"active",handleClick:function(){return y({target:{name:"active",value:!(null===h||void 0===h?void 0:h.active)||!(null===h||void 0===h?void 0:h.active)}})}})})]}),Object(r.jsx)(ye,{children:Object(r.jsx)(fn.a,{label:"N\xe1zov vy\u0161etrenia*",name:"name",value:(null===h||void 0===h?void 0:h.name)||"",handleChange:y})}),Object(r.jsx)(ye,{children:Object(r.jsx)(fn.a,{label:"Cena",name:"price",value:(null===h||void 0===h?void 0:h.price)||"",handleChange:y})}),Object(r.jsx)(ye,{children:Object(r.jsx)(fn.a,{label:"\u010cas",name:"time",value:(null===h||void 0===h?void 0:h.time)||"",handleChange:y})}),Object(r.jsx)(ye,{children:Object(r.jsx)(mn.a,{label:"Popis",rows:"5",name:"description",value:(null===h||void 0===h?void 0:h.description)||"",handleChange:y})}),!x&&Object(r.jsx)(we,{onClick:w,children:"Prida\u0165"}),x&&Object(r.jsx)(we,{onClick:w,children:"Ulo\u017ei\u0165"})]})]}),document.getElementById("portal"))};function ze(){var n=Object(j.a)(["\n    margin-left: 1rem;\n    opacity: .6;\n"]);return ze=function(){return n},n}function De(){var n=Object(j.a)(["\n    background-color: var(--primary-color);\n    font-weight: bolder;\n    font-size: 1.2rem;\n"]);return De=function(){return n},n}function Be(){var n=Object(j.a)(["\n    background-color: var(--color-red);\n    font-size: 1.2rem;\n    margin-left: 1rem;\n"]);return Be=function(){return n},n}function Se(){var n=Object(j.a)(["\n    display: flex;\n    justify-content: flex-end;\n"]);return Se=function(){return n},n}function Ee(){var n=Object(j.a)(["\n    opacity: .8;\n    margin-bottom: 2rem;\n"]);return Ee=function(){return n},n}function Ae(){var n=Object(j.a)(["\n    font-size: 1.2rem;\n    color: ",";\n"]);return Ae=function(){return n},n}function Ie(){var n=Object(j.a)(["\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 1rem;\n"]);return Ie=function(){return n},n}function Ne(){var n=Object(j.a)(["\n    padding: 2rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n    border-radius: .5rem;\n    margin-bottom: 3rem;\n"]);return Ne=function(){return n},n}function Ue(){var n=Object(j.a)(["\n    background-color: var(--primary-color);\n    font-weight: bolder;\n"]);return Ue=function(){return n},n}function Pe(){var n=Object(j.a)(["\n    display: flex;\n    justify-content: space-between;\n    align-items: center; \n    margin-bottom: 3rem;\n"]);return Pe=function(){return n},n}function Te(){var n=Object(j.a)(["\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    grid-gap: 3rem;\n    margin-bottom: 10rem;\n\n    @media all and (max-width: 1150px) {\n        grid-template-columns: 2fr 1fr;\n        @media all and (max-width: 800px) {\n            grid-template-columns: 3fr 1fr;\n            @media all and (max-width: 500px) {\n                grid-template-columns: 1fr;\n            }\n        }\n\n    }\n"]);return Te=function(){return n},n}var Me=v.c.div(Te()),He=v.c.div(Pe()),Fe=Object(v.c)(f.a)(Ue()),_e=v.c.div(Ne()),Ke=v.c.div(Ie()),Le=v.c.span(Ae(),(function(n){return n.isActive?"var(--color-green)":"var(--color-red)"})),Re=v.c.div(Ee()),Ve=v.c.div(Se()),We=Object(v.c)(f.a)(Be()),Ye=Object(v.c)(f.a)(De()),qe=v.c.div(ze()),Ge=function(n){var e,t,c,a,l=n.calendarId,d=Object(o.useContext)(u.a).isAdmin,s=Object(o.useContext)(W.BookingContext).deleteBooking,b=Object(E.b)("api/booking/calendars",l,!l),j=b.response,v=b.isLoading,f=b.refetch,m=Object(o.useState)(!1),h=Object(i.a)(m,2),O=h[0],p=h[1],g=Object(o.useState)(null),x=Object(i.a)(g,2),k=x[0],y=x[1];return v?Object(r.jsx)(G.a,{}):Object(r.jsxs)(Me,{children:[O&&Object(r.jsx)(Ce,{selectedBooking:k,calendarId:l,close:function(){p(!1),y(null)},refetch:f}),Object(r.jsxs)("div",{children:[Object(r.jsxs)(He,{children:[Object(r.jsx)("h3",{children:"Vy\u0161etrenia"}),d&&Object(r.jsx)(Fe,{onClick:function(){return p(!0)},children:"Prida\u0165"})]}),Object(r.jsxs)("div",{children:[null===j||void 0===j||null===(e=j.calendar)||void 0===e||null===(t=e.bookings)||void 0===t?void 0:t.map((function(n,e){return Object(r.jsxs)(_e,{children:[Object(r.jsxs)(Ke,{children:[Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:n.name}),Object(r.jsx)(Le,{isActive:null===n||void 0===n?void 0:n.active,children:(null===n||void 0===n?void 0:n.active)?"Aktivn\xe9":"Neaktivn\xe9"})]}),Object(r.jsx)("div",{children:Object(r.jsxs)("p",{children:[n.price,"\u20ac"]})})]}),Object(r.jsx)(Re,{children:Object(r.jsx)("p",{children:n.description})}),d&&Object(r.jsxs)(Ve,{children:[Object(r.jsx)(Ye,{onClick:function(){return e=n._id,y(e),void p(!0);var e},children:"Upravi\u0165"}),Object(r.jsx)(We,{onClick:function(){return e=n._id,s(e),void f();var e},children:"Vymaza\u0165"})]})]},e)})),!(null===j||void 0===j||null===(c=j.calendar)||void 0===c||null===(a=c.bookings)||void 0===a?void 0:a.length)&&Object(r.jsx)(qe,{children:"\u017diadn\xe9 vy\u0161etrenia"})]})]})]})},Ze=t(56),Je=t(14);function Qe(){var n=Object(j.a)(["\n    background-color: ",";\n    color: ",";\n    cursor: pointer;\n    padding: 0.5rem 2rem;\n\n    transition: all .3s ease-in-out;\n"]);return Qe=function(){return n},n}function Xe(){var n=Object(j.a)(["\n    display: flex;\n    align-items: center;\n\n    button {\n        cursor: pointer;\n        font-size: 2rem;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        color: var(--primary-color);\n\n    }\n\n    div {\n        text-align: center;\n        margin: 0 1rem;\n    }\n\n    p {\n        text-transform: capitalize;\n        margin: 0 1rem;\n    }\n"]);return Xe=function(){return n},n}function $e(){var n=Object(j.a)(["\n    display: flex; \n    justify-content: space-between;\n    align-items: center;\n\n    ul {\n        list-style: none;\n        display: flex;\n        /* gap: 2rem; */\n\n\n    }\n"]);return $e=function(){return n},n}function nt(){var n=Object(j.a)(["\n    display: flex;\n    justify-content:center;\n    align-items: center;\n    color: var(--primary-color);\n    font-size: 3rem;\n    margin-left: 1rem;\n"]);return nt=function(){return n},n}function et(){var n=Object(j.a)(["\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 3rem;\n\n    div {\n        display: flex;\n        align-items: center;\n        cursor: pointer;\n    }\n"]);return et=function(){return n},n}function tt(){var n=Object(j.a)(["\n    margin-top: 3rem;\n    margin-bottom: 3rem;\n"]);return tt=function(){return n},n}function rt(){var n=Object(j.a)(["\n    display: grid;\n    grid-template-columns: repeat( auto-fit, minmax(27rem, 1fr) );\n    margin-bottom: 3rem;\n    grid-gap: 2rem;\n"]);return rt=function(){return n},n}function ct(){var n=Object(j.a)(["\n    /* margin-bottom: 2rem; */\n"]);return ct=function(){return n},n}function it(){var n=Object(j.a)(["\n    background-color: var(--primary-color);\n    font-weight: bolder;\n    margin-left: 2rem;\n"]);return it=function(){return n},n}function ot(){var n=Object(j.a)(["\n    ","\n    padding-top: 2rem;\n    padding-bottom: 3rem;\n    display: flex;\n    align-items:center;\n    justify-content: space-between;\n    color: var(--primary-text-color);\n"]);return ot=function(){return n},n}var at=v.c.div(ot(),Je.e),lt=Object(v.c)(f.a)(it()),dt=v.c.h2(ct()),ut=v.c.div(rt()),st=v.c.div(tt()),bt=v.c.div(et()),jt=v.c.div(nt()),vt=v.c.div($e()),ft=v.c.div(Xe()),mt=v.c.li(Qe(),(function(n){return n.isActive?"var(--primary-color)":"none"}),(function(n){return n.isActive?"var(--button-font-color)":"var(--primary-color)"}));e.default=function(){var n,e=Object(o.useContext)(u.a),t=e.isAdmin,j=e.currentUser,v=e.isOptometrist,f=Object(o.useContext)(d.a),m=f.showModal,h=f.setShowModal,O=f.message,p=f.closeModal,g=Object(l.h)().push,x=Object(o.useState)(!0),k=Object(i.a)(x,2),y=k[0],C=k[1],z=Object(o.useState)(1),D=Object(i.a)(z,2),B=D[0],S=D[1],A=Object(o.useState)([]),I=Object(i.a)(A,2),N=I[0],U=I[1],P=Object(o.useState)(null),H=Object(i.a)(P,2),F=H[0],_=H[1],K=Object(o.useState)((new Date).getMonth()),L=Object(i.a)(K,2),R=L[0],W=L[1],Y=Object(o.useState)((new Date).getFullYear()),q=Object(i.a)(Y,2),G=q[0],Z=q[1],J=Object(o.useState)(0),Q=Object(i.a)(J,2),X=Q[0],$=Q[1],nn=Object(o.useState)(null),en=Object(i.a)(nn,2),tn=en[0],rn=en[1],cn=Object(o.useState)(!1),on=Object(i.a)(cn,2),an=on[0],ln=on[1],dn=function(n){console.log("dayData"),console.log("dayData"),console.log(n),null!==n&&rn(Object(c.a)({},n)),ln(!0)},un=Object(E.a)("api/booking/calendars"),sn=un.isLoading,bn=un.response,jn=function(n){n&&(_(n),C(!1),vn())},vn=function(){W((new Date).getMonth()),Z((new Date).getFullYear()),$(Math.ceil((new Date).getDate()/7)-1),rn(null)},fn=function(n){console.log(n),$(Math.ceil(n.dayNumber/7)-1),S(1)};return Object(o.useEffect)((function(){if(!sn&&bn){if(t){U(bn.calendars);var n=bn.calendars.find((function(n){return n.premises===j.premises}));jn(null===n||void 0===n?void 0:n._id),h(!1)}else{U(bn.calendars.filter((function(n){return n.premises===j.premises})));var e=bn.calendars.find((function(n){return n.premises===j.premises}));jn(null===e||void 0===e?void 0:e._id),h(!1)}p()}}),[sn]),Object(o.useEffect)((function(){return console.log("unmount"),function(){h(!0),C(!0),S(0),U([]),_(null),W((new Date).getMonth()),Z((new Date).getFullYear()),$(0),rn(null)}}),[]),console.log(N),console.log(F),console.log(an),Object(r.jsxs)("section",{children:[m&&Object(r.jsx)(b.a,{loading:sn,title:O,close:function(){return h(!1)}}),t&&Object(r.jsxs)(at,{children:[Object(r.jsx)("div",{children:Object(r.jsx)("h1",{children:"Rezerv\xe1cie"})}),Object(r.jsxs)("div",{children:[Object(r.jsx)(lt,{onClick:function(){return dn(null)},children:"Prida\u0165 rezerv\xe1ciu"}),Object(r.jsx)(lt,{onClick:function(){return g("rezervacie/novy-kalendar")},children:"Prida\u0165 kalend\xe1r"})]})]}),!v&&!t&&Object(r.jsxs)(at,{children:[Object(r.jsx)("div",{children:Object(r.jsx)("h1",{children:"Rezerv\xe1cie"})}),F?Object(r.jsx)("div",{children:Object(r.jsx)(lt,{onClick:function(){return dn(null)},children:"Prida\u0165 rezerv\xe1ciu"})}):Object(r.jsx)("div",{children:Object(r.jsx)("p",{children:"K va\u0161emu \xfa\u010dtu nieje priraden\xe1 prev\xe1dzka"})})]}),v&&!t&&Object(r.jsxs)(at,{children:[Object(r.jsx)("div",{children:Object(r.jsx)("h1",{children:"Rezerv\xe1cie"})}),F?Object(r.jsxs)("div",{children:[Object(r.jsx)(lt,{onClick:function(){return dn(null)},children:"Prida\u0165 rezerv\xe1ciu"}),Object(r.jsx)(lt,{onClick:function(){return g("rezervacie/".concat(F))},children:"Upravi\u0165 kalend\xe1r"})]}):Object(r.jsx)("div",{children:Object(r.jsx)("p",{children:"K va\u0161emu \xfa\u010dtu nieje priraden\xe1 prev\xe1dzka"})})]}),Object(r.jsxs)(s.a,{children:[t&&Object(r.jsxs)(bt,{children:[Object(r.jsx)(dt,{children:"Pobo\u010dky"}),Object(r.jsxs)("div",{onClick:function(){return C((function(n){return!n}))},children:[Object(r.jsx)("p",{children:null===(n=N.find((function(n){return n._id===F})))||void 0===n?void 0:n.name}),Object(r.jsx)(jt,{children:y?Object(r.jsx)(Ze.r,{}):Object(r.jsx)(Ze.f,{})})]})]}),y&&Object(r.jsx)(ut,{children:N&&N.map((function(n,e){return Object(r.jsx)(w,{calendar:n,selectedCalendar:F,handleShowUpClick:function(){return jn(n._id)},handleUpdateClick:function(){return g("rezervacie/".concat(n._id))}},e)}))}),F&&Object(r.jsxs)(a.a.Fragment,{children:[Object(r.jsxs)(vt,{children:[Object(r.jsx)(dt,{children:"Kalend\xe1r"}),0===B?Object(r.jsxs)(ft,{children:[Object(r.jsx)("button",{onClick:function(){0===R?(Z((function(n){return n-1})),W(11)):W((function(n){return n-1}))},children:Object(r.jsx)(Ze.m,{})}),Object(r.jsx)("p",{children:M.o[R]}),Object(r.jsx)("button",{onClick:function(){11===R?(Z((function(n){return n+1})),W(0)):W((function(n){return n+1}))},children:Object(r.jsx)(Ze.p,{})})]}):Object(r.jsxs)(ft,{children:[Object(r.jsx)("button",{onClick:function(){$(X-1<0?0:function(n){return n-1})},children:Object(r.jsx)(Ze.m,{})}),Object(r.jsxs)("div",{children:[Object(r.jsx)("p",{children:X+1}),Object(r.jsx)("p",{children:M.o[R]})]}),Object(r.jsx)("button",{onClick:function(){var n=new Date(G,R,0).getDate();console.log(7*X),console.log(n),$(7*(X+1)>=n?0:function(n){return n+1})},children:Object(r.jsx)(Ze.p,{})})]}),Object(r.jsx)("ul",{children:M.a.map((function(n,e){return Object(r.jsx)(mt,{isActive:B===e,onClick:function(){return S(e)},children:n},e)}))})]}),Object(r.jsx)(st,{children:0===B?Object(r.jsx)(V,{calendar:F,month:R,year:G,handleCalendarBlockClick:fn}):Object(r.jsx)(T,{calendar:F,month:R,year:G,weekIndex:X,handleCalendarBlockClick:fn,children:Object(r.jsx)(le,{calendar:F,month:R,year:G,weekIndex:X,handleCalendarBlockClick:fn,showUserBooking:an,setShowUserBooking:ln,handleOpenUserBookingModal:dn,selectedDay:tn})})}),Object(r.jsx)(Ge,{calendarId:F})]})]})]})}},58:function(n,e,t){"use strict";var r=t(21),c=t(2),i=t(30),o=(t(1),t(5));function a(){var n=Object(o.a)(["\n    display: inline-block;\n    cursor: pointer;\n    font-size: 1.5rem;\n    font-weight: 700;\n    /* margin-right: 2rem; */\n    background-color: ",";\n    color: ",";\n    /* font-weight: ","; */\n    padding: .8rem 3rem;\n    border-radius: .2rem;\n    transition: all .2s ease-out;\n\n    @media all and (max-width: 500px) {\n        padding: 0.5rem 1.5rem;\n        font-size: 1.4rem;\n    }\n"]);return a=function(){return n},n}var l=t(6).c.div(a(),(function(n){return n.isActive?"var(--primary-color)":"var(--body-background-primary-color)"}),(function(n){return n.isActive?"var(--button-font-color)":"var(--secondary-text-color)"}),(function(n){return n.isActive?"border":"normal"}));e.a=function(n){var e=n.label,t=n.isActive,o=n.handleClick,a=Object(i.a)(n,["label","isActive","handleClick"]);return Object(c.jsx)(l,Object(r.a)(Object(r.a)({isActive:t,onClick:o},a),{},{children:e}))}},59:function(n,e,t){"use strict";var r=t(2),c=(t(1),t(52)),i=t(5),o=t(6),a=t(28),l=t(14);function d(){var n=Object(i.a)(["\n    margin-top: 2rem;\n    margin-left: 1rem;\n    background-color: var(--primary-color);\n    font-weight: bolder;\n"]);return d=function(){return n},n}function u(){var n=Object(i.a)(["\n    margin-top: 2rem;\n\n    margin-left: 2rem;\n"]);return u=function(){return n},n}function s(){var n=Object(i.a)(["\n    background-color: var(--color-red);\n    margin-left: 1.5rem;\n    color: var(--primary-text-color);\n    padding: .5rem 1rem;\n    border-radius: 1.5rem;\n    font-size: 1.4rem;\n"]);return s=function(){return n},n}function b(){var n=Object(i.a)(["\n    display: flex;\n    align-items: center;\n"]);return b=function(){return n},n}function j(){var n=Object(i.a)(["\n    margin-top: 2rem;\n\n    display: flex;\n    align-items: center;\n\n"]);return j=function(){return n},n}function v(){var n=Object(i.a)(["\n    display: flex;\n    color: var(--primary-text-color);\n    justify-content: space-between;\n    margin-bottom: 3rem;\n    ",";    \n\n    @media all and (max-width: 600px) {\n        flex-wrap: wrap;\n    }\n"]);return v=function(){return n},n}var f=o.c.div(v(),l.e),m=o.c.div(j()),h=o.c.div(b()),O=(o.c.div(s()),Object(o.c)(a.a)(u())),p=Object(o.c)(a.a)(d());e.a=function(n){var e=n.searchQuery,t=n.handleSearch,i=n.handleChange,o=n.title,a=(n.count,n.handleAddButton),l=void 0===a?function(){}:a;return Object(r.jsxs)(f,{children:[Object(r.jsx)(m,{children:Object(r.jsx)("h1",{children:o})}),Object(r.jsxs)(h,{children:[t&&Object(r.jsx)("div",{children:Object(r.jsx)(c.a,{type:"search",name:"searchbox",value:e,handleChange:i,onKeyPress:function(n){""!==e&&"Enter"===n.key&&t()},label:"Vyh\u013eada\u0165"})}),t&&Object(r.jsx)(O,{onClick:t,children:"Vyh\u013eada\u0165"}),Object(r.jsx)(p,{onClick:l,children:"Prida\u0165"})]})]})}},60:function(n,e,t){"use strict";var r=t(21),c=t(2),i=t(30),o=(t(1),t(5)),a=t(6),l=t(28),d=t(14);function u(){var n=Object(o.a)(["\n    transition: all 0.3s ease-out;\n    background-color: ",";\n    color: ",";\n    font-weight: ",";\n    padding: ",";\n    font-weight: ",";\n"]);return u=function(){return n},n}function s(){var n=Object(o.a)(["\n    margin-bottom: 3rem;\n    ","\n\n    ul {\n        display: flex;\n        list-style: none;\n\n        li {\n            margin-right: 1.5rem;\n        }\n    }\n"]);return s=function(){return n},n}var b=a.c.div(s(),d.e),j=Object(a.c)(l.a)(u(),(function(n){return n.active?"var(--primary-color)":"var(--background-primary-color)"}),(function(n){return n.active?"#fff":"var(--primary-text-color)"}),(function(n){return n.active?400:700}),(function(n){return n.active?".5rem 2.5rem":".5rem 1rem .5rem 0"}),(function(n){return n.active?"bolder":"normal"}));e.a=function(n){var e=n.items,t=n.activeIndex,o=n.setActiveIndex,a=Object(i.a)(n,["items","activeIndex","setActiveIndex"]);return Object(c.jsx)(b,Object(r.a)(Object(r.a)({},a),{},{children:Object(c.jsx)("ul",{children:e.map((function(n){return Object(c.jsx)("li",{children:Object(c.jsx)(j,{active:n.id===t,onClick:function(){return o(n.id)},children:n.name})},n.id)}))})}))}},63:function(n,e,t){"use strict";var r=t(2),c=t(21),i=t(30),o=(t(1),t(5)),a=t(6);function l(){var n=Object(o.a)(["\n    position: relative;\n    /* margin: 45px 0; */\n\n    .form-input {\n        background: none;\n        background-color: var(--input-background-color);\n        color: var(--input-color);\n\n        font-size: 1.5rem;\n        padding: .5rem .5rem .5rem 2rem;\n        display: block;\n        width: 100%;\n        border: none;\n        border-radius: .5rem;\n        /* border-bottom: 1px solid #000; */\n        margin: 25px 0;\n        font-family: inherit;\n        resize: none;\n\n        &:focus {\n        outline: none;\n        }\n\n        &:focus ~ .form-input-label {\n            ","\n        }\n    }\n\n    .form-input-label {\n        color: var(--input-color);\n        font-size: 1.4rem;\n        font-weight: normal;\n        position: absolute;\n        pointer-events: none;\n        left: 1.5rem;\n        top: .6rem;\n        transition: 300ms ease all;\n\n        &.shrink {\n            ","\n        }\n    }\n"]);return l=function(){return n},n}function d(){var n=Object(o.a)(["\n    left: .5rem;\n    top: -14px;\n    font-size: 12px;\n    color: var(--input-color);\n"]);return d=function(){return n},n}var u=Object(a.b)(d()),s=a.c.div(l(),u,u);e.a=function(n){var e=n.handleChange,t=n.label,o=n.name,a=Object(i.a)(n,["handleChange","label","name"]);return Object(r.jsxs)(s,{children:[Object(r.jsx)("textarea",Object(c.a)({className:"form-input",name:o,onChange:e},a)),t?Object(r.jsx)("label",{htmlFor:o,className:"".concat(a.value.length?"shrink":""," form-input-label"),children:t}):null]})}}}]);
//# sourceMappingURL=13.6ca2253b.chunk.js.map