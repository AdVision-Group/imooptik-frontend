(this.webpackJsonpimooptik=this.webpackJsonpimooptik||[]).push([[29],{69:function(e,t,r){"use strict";r.r(t),r.d(t,"OrdersContext",(function(){return f}));var n=r(2),o=r(21),a=r(7),c=r.n(a),s=r(12),i=r(10),u=r(1),d=r(3),l=r(19),p=r(18),f=Object(u.createContext)({orders:null,getOrders:function(){},createOrder:function(){},updateOrder:function(){},finishOrder:function(){}});t.default=function(e){var t=e.children,r=Object(d.h)().push,a=Object(u.useContext)(p.a),h=a.setIsLoading,b=a.setShowModal,O=a.getMessage,v=a.closeModal,k=Object(u.useContext)(l.a).token,g=Object(u.useState)(null),x=Object(i.a)(g,2),j=x[0],m=x[1],w=new Headers;w.append("auth-token",k),w.append("Content-Type","application/json");var y=function(){var e=Object(s.a)(c.a.mark((function e(){var t,r,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),b(!0),t={method:"GET",headers:w,redirect:"follow"},e.prev=3,e.next=6,fetch("".concat("http://195.110.58.166:8080","/api/admin/orders"),t);case 6:return r=e.sent,e.next=9,r.json();case 9:if(n=e.sent,console.log(n),!n.orders){e.next=15;break}return m(n.orders),v(),e.abrupt("return");case 15:O(n.message),h(!1),e.next=24;break;case 19:e.prev=19,e.t0=e.catch(3),console.log(e.t0),O("Nieco sa pokazilo"),h(!1);case 24:case"end":return e.stop()}}),e,null,[[3,19]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,a,s,i,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),b(!0),n=Object(o.a)({},t),console.log("ORDER BEFORE SEND"),console.log(n),a=JSON.stringify(n),s={method:"POST",headers:w,body:a,redirect:"follow"},e.prev=7,e.next=10,fetch("".concat("http://195.110.58.166:8080","/api/admin/orders"),s);case 10:return i=e.sent,e.next=13,i.json();case 13:u=e.sent,console.log(u),u.order&&(y(),v(),r("/dashboard/objednavky")),O(u.message),h(!1),e.next=25;break;case 20:e.prev=20,e.t0=e.catch(7),console.log(e.t0),O("Nieco sa pokazilo"),h(!1);case 25:case"end":return e.stop()}}),e,null,[[7,20]])})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(s.a)(c.a.mark((function e(t,n){var a,s,i,u,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),b(!0),a=Object(o.a)({},t),console.log("ORDER BEFORE SEND"),console.log(a),s=JSON.stringify(a),i={method:"PATCH",headers:w,body:s,redirect:"follow"},e.prev=7,e.next=10,fetch("".concat("http://195.110.58.166:8080","/api/admin/orders/").concat(n),i);case 10:return u=e.sent,e.next=13,u.json();case 13:d=e.sent,console.log(d),d.order&&(y(),v(),r("/dashboard/objednavky")),O(d.message),h(!1),e.next=25;break;case 20:e.prev=20,e.t0=e.catch(7),console.log(e.t0),O("Nieco sa pokazilo"),h(!1);case 25:case"end":return e.stop()}}),e,null,[[7,20]])})));return function(t,r){return e.apply(this,arguments)}}(),S=function(){var e=Object(s.a)(c.a.mark((function e(t){var r,n,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),b(!0),r={method:"POST",headers:w,redirect:"follow"},e.prev=3,e.next=6,fetch("".concat("http://195.110.58.166:8080","/api/admin/orders/").concat(t,"/fulfill"),r);case 6:return n=e.sent,e.next=9,n.json();case 9:if(o=e.sent,console.log(o),"undelegated-order"!==o.error){e.next=15;break}return h(!1),O("Objedn\xe1vka nem\xf4\u017ee by\u0165 dokon\u010den\xe1 ak nieje priraden\xe1 k prev\xe1dzke"),e.abrupt("return");case 15:if(!o.order){e.next=18;break}return v(),e.abrupt("return");case 18:O(o.message),h(!1),e.next=27;break;case 22:e.prev=22,e.t0=e.catch(3),console.log(e.t0),O("Nieco sa pokazilo"),h(!1);case 27:case"end":return e.stop()}}),e,null,[[3,22]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsx)(f.Provider,{value:{orders:j,getOrders:y,createOrder:E,updateOrder:N,finishOrder:S},children:t})}}}]);
//# sourceMappingURL=29.ca68c60b.chunk.js.map