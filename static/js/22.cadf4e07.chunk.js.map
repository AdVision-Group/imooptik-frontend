{"version":3,"sources":["utils/warehouse.utils.jsx","context/coupons/coupons.context.jsx"],"names":["retailNames","retailNamesTabs","id","name","glassesColors","glassesMaterials","glassesShapes","formatPrice","price","toString","value","includes","split","length","Number","formatfloatNumber","number","CouponsContext","createContext","coupon","coupons","handleChange","getCoupon","getCoupons","createCoupon","deleteCoupon","isUpdating","resetCoupons","initCouponObj","code","type","maxUses","minValue","maxUsesTotal","CouponsProvider","children","useContext","LoadingModalContext","closeModal","getMessage","setIsLoading","setShowModal","token","AuthContext","push","useHistory","myHeaders","Headers","append","useState","setCoupon","setCoupons","setIsupdating","a","requestOptions","method","headers","redirect","fetch","process","response","json","data","message","console","log","couponToCreate","raw","JSON","stringify","undefined","body","error","ok","Provider","e","target"],"mappings":"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","file":"static/js/22.cadf4e07.chunk.js","sourcesContent":["export const brands = [\r\n    \"Adidas\",\r\n    \"Armani Exchange\",\r\n    \"Arnette\",\r\n    \"Blackfin\",\r\n    \"Blumarine\",\r\n    \"Burberry\",\r\n    \"Bvlgari\",\r\n    \"Calvin Klein\",\r\n    \"Carolina Herrera\",\r\n    \"Carrera\",\r\n    \"David Beckham\",\r\n    \"Dior\",\r\n    \"Dolce & Gabbana\",\r\n    \"Elle\",\r\n    \"Emporio Armani\",\r\n    \"Esprit\",\r\n    \"Etnia Barcelona\",\r\n    \"Fendi\",\r\n    \"Fossil\",\r\n    \"Furla\",\r\n    \"Giorgio Armani\",\r\n    \"Givenchy\",\r\n    \"Gucci\",\r\n    \"Guess\",\r\n    \"H.I.S\",\r\n    \"Hawkers\",\r\n    \"Hugo Boss\",\r\n    \"Jaguar\",\r\n    \"Jimmy Choo\",\r\n    \"Lacoste\",\r\n    \"Liu Jo\",\r\n    \"Marc Jacobs\",\r\n    \"Max Mara\",\r\n    \"Max&Co\",\r\n    \"Meller\",\r\n    \"Mexx\",\r\n    \"Michael Kors\",\r\n    \"Moschino\",\r\n    \"Oakley\",\r\n    \"Persol\",\r\n    \"Polaroid\",\r\n    \"Police\",\r\n    \"Polo Ralph Lauren\",\r\n    \"Prada\",\r\n    \"Prada Linea Rossa\",\r\n    \"Ralph\",\r\n    \"Ralph Lauren\",\r\n    \"Ray-Ban\",\r\n    \"Salvatore Ferragamo\",\r\n    \"Smith\",\r\n    \"Strellson\",\r\n    \"Tiffany&Co.\",\r\n    \"Tom Ford\",\r\n    \"Tommy Hilfiger\",\r\n    \"Versace\",\r\n    \"Vogue\"\r\n]\r\n\r\nexport const lensesBrands = [\r\n    \"Acuvue\",\r\n    \"Adore\",\r\n    \"Air Optix\",\r\n    \"Biofinity\",\r\n    \"Biomedics\",\r\n    \"Clariti\",\r\n    \"ColourVue\",\r\n    \"Comfilcon A\",\r\n    \"Dailies\",\r\n    \"Freshlook\",\r\n    \"Lenjoy\",\r\n    \"Proclear\",\r\n    \"Purevision\",\r\n    \"Soflens\",\r\n]\r\n\r\nexport const retailNames = [\r\n    \"eshop\",\r\n    \"Centrálny sklad\",\r\n    \"Obchodná, Bratislava\",\r\n    \"Miletičova, Bratislava\",\r\n    \"Vajnory, Bratislava\",\r\n    \"Vajnorská 53, Bratislava\",\r\n    \"OC Branč, Senica\"\r\n]\r\n\r\nexport const retailNamesTabs = [\r\n    {\r\n        id: 0,\r\n        name: \"Všetky\",\r\n    },\r\n    {\r\n        id: 1,\r\n        name: \"Centrálny sklad\",\r\n    },\r\n    {\r\n        id: 2,\r\n        name: \"Obchodná, Bratislava\",\r\n    },\r\n    {\r\n        id: 3,\r\n        name: \"Miletičova, Bratislava\",\r\n    },\r\n    {\r\n        id: 4,\r\n        name: \"Vajnory, Bratislava\",\r\n    },\r\n    {\r\n        id: 5,\r\n        name: \"Vajnorská 53, Bratislava\",\r\n    },\r\n    {\r\n        id: 6,\r\n        name: \"OC Branč, Senica\",\r\n    },\r\n]\r\n\r\nexport const glassesColors = [\r\n    \"Čierná\",\r\n    \"Modrá\",\r\n    \"Červená\",\r\n    \"Sivá\",\r\n    \"Zlatá\",\r\n    \"Strieborná\",\r\n    \"Hnedá\",\r\n    \"Fialová\",\r\n    \"Zelená\",\r\n    \"Sedá\",\r\n    \"Bordová\",\r\n]\r\n\r\nexport const glassesMaterials = [\r\n    \"Acetát\",\r\n    \"Kov\",\r\n    \"Titán\",\r\n    \"TR90\",\r\n    \"Patent\",\r\n    \"Optyl\",\r\n]\r\n\r\nexport const glassesShapes = [\r\n    \"Pilot\",\r\n    \"Squared\",\r\n    \"Browline\",\r\n    \"Cat eye\",\r\n    \"Tiny\",\r\n    \"Oversize\",\r\n    \"Okrúhle\",\r\n    \"Oválne\",\r\n    \"Obdĺžnikové\",\r\n    \"Flat top\",\r\n    \"Špeciálne\"\r\n]\r\n\r\nexport const formatPrice = (price = \"\") => {\r\n    price.toString()\r\n    let value = 0\r\n    if (price.includes(',')) {\r\n        if (price.split(',')[1].length === 1) {\r\n            value = price.split(',')[0] + price.split(',')[1] + \"0\"\r\n            return Number(value)\r\n        } else {\r\n            value = price.split(',')[0] + price.split(',')[1]\r\n            return Number(value)\r\n        }\r\n    } else {\r\n        return Number(price * 100)\r\n    }\r\n}\r\n\r\nexport const formatfloatNumber = number => {\r\n    let value = 0\r\n\r\n    if (number.includes(',')) {\r\n        value = number.split(',')[0] + '.' + number.split(',')[1]\r\n        return value\r\n    } else {\r\n        return number\r\n    }\r\n}","import React, { createContext, useContext, useState } from 'react'\r\nimport { LoadingModalContext } from '../loading-modal/loading-modal.contenxt'\r\nimport { AuthContext } from '../auth/auth.context'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { formatPrice } from '../../utils/warehouse.utils'\r\n\r\nexport const CouponsContext = createContext({\r\n    coupon: null,\r\n    coupons: null,\r\n    handleChange: () => { },\r\n    getCoupon: () => { },\r\n    getCoupons: () => { },\r\n    createCoupon: () => { },\r\n    // updateCoupon: () => { },\r\n    deleteCoupon: () => { },\r\n    isUpdating: false,\r\n    resetCoupons: () => { }\r\n})\r\n\r\nconst initCouponObj = {\r\n    code: '',\r\n    type: 'percentage', // flat\r\n    value: 0,\r\n    maxUses: 0,\r\n    minValue: 0,\r\n    maxUsesTotal: 0\r\n}\r\n\r\n\r\nconst CouponsProvider = ({ children }) => {\r\n    const {\r\n        closeModal,\r\n        getMessage,\r\n        setIsLoading,\r\n        setShowModal\r\n    } = useContext(LoadingModalContext)\r\n    const { token } = useContext(AuthContext)\r\n    const { push } = useHistory()\r\n\r\n    const myHeaders = new Headers();\r\n    myHeaders.append(\"auth-token\", token);\r\n    myHeaders.append(\"Content-Type\", \"application/json\");\r\n\r\n    const [coupon, setCoupon] = useState(initCouponObj)\r\n    const [coupons, setCoupons] = useState(null)\r\n\r\n    const [isUpdating, setIsupdating] = useState(false)\r\n\r\n    const handleChange = (e) => {\r\n        const { name, value } = e.target\r\n\r\n        setCoupon({\r\n            ...coupon,\r\n            [name]: value\r\n        })\r\n    }\r\n\r\n    const getCoupon = async (id) => {\r\n        setIsupdating(true)\r\n        setIsLoading(true)\r\n        setShowModal(true)\r\n\r\n        const requestOptions = {\r\n            method: 'GET',\r\n            headers: myHeaders,\r\n            redirect: 'follow'\r\n        };\r\n\r\n        try {\r\n            const response = await fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/coupons/${id}`, requestOptions)\r\n            const data = await response.json()\r\n\r\n            if (data.coupon) {\r\n                setCoupon({\r\n                    ...coupon,\r\n                    ...data.coupon\r\n                })\r\n                closeModal()\r\n                return\r\n            }\r\n\r\n            getMessage(data.message)\r\n            setIsLoading(false)\r\n        } catch (err) {\r\n            console.log(err)\r\n            getMessage(\"Niečo sa pokazilo\")\r\n            setIsLoading(false)\r\n        }\r\n\r\n    }\r\n\r\n    const getCoupons = async () => {\r\n        setIsLoading(true)\r\n        setShowModal(true)\r\n\r\n        const requestOptions = {\r\n            method: 'GET',\r\n            headers: myHeaders,\r\n            redirect: 'follow'\r\n        };\r\n\r\n        try {\r\n            const response = await fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/coupons`, requestOptions)\r\n            const data = await response.json()\r\n\r\n            if (data.coupons) {\r\n                setCoupons(data.coupons)\r\n            }\r\n            setIsLoading(false)\r\n            closeModal()\r\n        } catch (err) {\r\n            console.log(err)\r\n            getMessage(\"Niečo sa pokazilo\")\r\n            setIsLoading(false)\r\n        }\r\n    }\r\n\r\n    const createCoupon = async (couponToCreate) => {\r\n        setIsLoading(true)\r\n        setShowModal(true)\r\n\r\n        console.log(couponToCreate.value)\r\n\r\n        const raw = JSON.stringify({\r\n            code: couponToCreate.code,\r\n            type: couponToCreate.type, // flat\r\n            ...(couponToCreate.value) && { value: couponToCreate.type === \"flat\" ? formatPrice(couponToCreate.value) : Number(couponToCreate.value) },\r\n            // value: couponToCreate.value === '' || couponToCreate.value === '0' ? undefined : Number(couponToCreate.value),\r\n            maxUses: couponToCreate.maxUses === '' || couponToCreate.maxUses === '0' ? undefined : Number(couponToCreate.maxUses),\r\n            ...(couponToCreate.minValue) && { minValue: formatPrice(couponToCreate.minValue) },\r\n            maxUsesTotal: couponToCreate.maxUsesTotal === '' || couponToCreate.maxUsesTotal === '0' ? undefined : Number(couponToCreate.maxUsesTotal)\r\n        })\r\n\r\n        const requestOptions = {\r\n            method: 'POST',\r\n            headers: myHeaders,\r\n            body: raw,\r\n            redirect: 'follow'\r\n        };\r\n\r\n        try {\r\n            const response = await fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/coupons/create`, requestOptions)\r\n            const data = await response.json()\r\n\r\n            if (data.error === \"format\") {\r\n                getMessage(\"Kód kupónu je povinný\")\r\n            }\r\n            if (data.error === 'exists') {\r\n                getMessage(\"Kupón už existuje\")\r\n            }\r\n\r\n            if (response.ok) {\r\n                getCoupons()\r\n                push('/dashboard/kupony')\r\n            }\r\n\r\n            // getMessage(data.message)\r\n            setIsLoading(false)\r\n        } catch (err) {\r\n            console.log(err)\r\n            getMessage(\"Niečo sa pokazilo\")\r\n            setIsLoading(false)\r\n        }\r\n\r\n    }\r\n\r\n    // const updateCoupon = async () => {\r\n    //     console.log(\"Update coupon\")\r\n\r\n    //     setIsLoading(true)\r\n    //     setShowModal(true)\r\n\r\n    //     const requestOptions = {\r\n    //         method: 'GET',\r\n    //         headers: myHeaders,\r\n    //         redirect: 'follow'\r\n    //     };\r\n\r\n    //     try {\r\n    //         const response = await fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/coupons/${id}`, requestOptions)\r\n    //         const data = await response.json()\r\n\r\n    //         getMessage(data.message)\r\n    //         setIsLoading(false)\r\n    //     } catch (err) {\r\n    //         console.log(err)\r\n    //         getMessage(\"Niečo sa pokazilo\")\r\n    //         setIsLoading(false)\r\n    //     }\r\n\r\n    // }\r\n\r\n    const deleteCoupon = async (id) => {\r\n        setIsLoading(true)\r\n        setShowModal(true)\r\n\r\n        const requestOptions = {\r\n            method: 'DELETE',\r\n            headers: myHeaders,\r\n            redirect: 'follow'\r\n        };\r\n\r\n        try {\r\n            const response = await fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/coupons/${id}`, requestOptions)\r\n            const data = await response.json()\r\n\r\n            if (response.ok) {\r\n                getCoupons()\r\n                push('/dashboard/kupony')\r\n            }\r\n            // getMessage(data.message)\r\n            setIsLoading(false)\r\n        } catch (err) {\r\n            console.log(err)\r\n            getMessage(\"Niečo sa pokazilo\")\r\n            setIsLoading(false)\r\n        }\r\n    }\r\n\r\n    const resetCoupons = async () => {\r\n        setIsupdating(false)\r\n        setCoupon(initCouponObj)\r\n    }\r\n\r\n    return (\r\n        <CouponsContext.Provider\r\n            value={{\r\n                coupon,\r\n                coupons,\r\n                handleChange,\r\n                getCoupon,\r\n                getCoupons,\r\n                createCoupon,\r\n                // updateCoupon,\r\n                deleteCoupon,\r\n                isUpdating,\r\n                resetCoupons\r\n            }}\r\n        >\r\n            {children}\r\n        </CouponsContext.Provider>\r\n    )\r\n}\r\n\r\nexport default CouponsProvider"],"sourceRoot":""}