(this.webpackJsonpimooptik=this.webpackJsonpimooptik||[]).push([[17,29],{225:function(n,e,t){"use strict";t.r(e);var r=t(2),c=t(31),o=t(21),i=t(55),a=t(10),d=t(1),l=t(18),s=t(3),u=t(54),b=t(32),j=t(7),v=t.n(j),h=t(12),m=t(20),O=t.n(m),p=t(19),f=t(52),x=t(56),g=t(5),y=t(6),k=t(59),w=t(28);function C(){var n=Object(g.a)(["\n    background-color: var(--body-background-primary-color);\n    border-radius: 50%;\n    width: 10rem;\n    height: 10rem;\n    margin: 0 auto;\n    margin-bottom: 1.5rem;\n"]);return C=function(){return n},n}function P(){var n=Object(g.a)(["\n    cursor: pointer;\n    width: 100%;\n    max-width: 32rem;\n    padding: 2rem;\n    border-radius: .5rem;\n    box-shadow: var(--container-shadow);\n    text-align: center;\n    transition: transform .3s ease-out,\n                box-shadow .3s ease-out;\n    margin: 2rem auto;\n\n    &:last-child {\n        display:flex;\n        flex-direction: column;\n        justify-content: space-between;\n    }\n\n    h4 {\n        font-size: 2.5rem;\n        margin-bottom: 1.5rem\n    }\n\n    img {\n        /* background-color:#000; */\n        width: 15rem;\n        height: 15rem;\n        margin-bottom: 1rem; \n        object-fit: contain;\n        object-position: center;\n    }\n\n    p {\n        opacity: .65;\n        &:not(:last-child){\n            margin-bottom: .5rem;\n        }\n    }\n\n    h5 {\n        font-size: 2.5rem;\n    }\n"]);return P=function(){return n},n}function S(){var n=Object(g.a)(["\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    grid-gap: 2rem;\n    margin-bottom: 2rem;\n"]);return S=function(){return n},n}function z(){var n=Object(g.a)(["\n    margin-top: 1.5rem;\n    min-width: 16.5rem;\n    width: 100%;\n    background-color: var(--input-background-color);\n    color: var(--input-color);\n    border: none;\n    padding: .5rem .5rem .5rem 1rem;\n    font-size: inherit;\n    font-family: inherit;\n    display: block;\n    outline: none;\n\n    &:focus {\n        outline: none;\n    }\n"]);return z=function(){return n},n}function D(){var n=Object(g.a)(["\n    display: flex;\n    align-items: center;\n    margin-bottom: 2rem;\n\n\n    label {\n        display: block;\n        outline: none;\n        margin-left: 1rem;\n\n        &:focus {\n            outline: none;\n\n        }\n    }\n\n    input: {\n        display: block;\n    }\n"]);return D=function(){return n},n}function L(){var n=Object(g.a)(["\n    display: block;\n    margin: 2rem auto 0;\n"]);return L=function(){return n},n}function E(){var n=Object(g.a)(["\n    /* background-color: gray; */\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    margin-top: 4rem;\n    margin-bottom: 4rem;\n\n    img {\n        width: 20rem;\n        \n    }\n\n    span {\n        opacity: .6;\n        font-size: 1.2rem;\n        display: block;\n        text-align: center;\n    }\n\n    p {\n        font-weight: bolder;\n        font-size: 2rem;\n    }\n"]);return E=function(){return n},n}function A(){var n=Object(g.a)(["\n    margin-top: 1rem;\n    margin-right: 2rem;\n"]);return A=function(){return n},n}function M(){var n=Object(g.a)(["\n    width: 100%;\n    height: 100%;\n\n    position: fixed;\n    left: 0;\n    right: 0;\n    z-index: 99999;\n\n    border: none;\n    outline: none;\n    opacity: 0;\n\n    &:focus {\n        outline: none\n    }\n"]);return M=function(){return n},n}function N(){var n=Object(g.a)(["\n    width:100%;\n    max-width: 50rem;\n    max-height: 60rem;\n\n    overflow-y: scroll;\n\n    /* display: flex;\n    flex-direction: column;\n    align-items: center; */\n\n    padding: 2rem;\n    border-radius: .5rem;\n    background-color: var(--background-primary-color);\n    color: var(--primary-text-color);\n\n    position: relative;\n    z-index: 999999;\n\n    h2{ \n        margin-bottom: 2rem;\n        text-align: center;\n    }\n\n    ::-webkit-scrollbar {\n        width: 10px;\n    }\n\n    /* Track */\n    ::-webkit-scrollbar-track {\n        background:  var(--background-primary-color);\n    }\n\n    /* Handle */\n    ::-webkit-scrollbar-thumb {\n        background: var(--primary-color);\n    }\n\n    /* Handle on hover */\n    ::-webkit-scrollbar-thumb:hover {\n        background: var(--primary-color);\n    }\n"]);return N=function(){return n},n}function F(){var n=Object(g.a)(["\n    position: fixed;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    z-index: 99999;\n\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    background-color: rgba(0,0,0,0.3);\n"]);return F=function(){return n},n}var R=y.c.div(F()),B=y.c.div(N()),T=y.c.button(M()),H=Object(y.c)(k.a)(A()),I=y.c.div(E()),U=Object(y.c)(w.a)(L()),V=y.c.div(D()),K=y.c.select(z()),J=y.c.div(S()),_=y.c.div(P()),Z=y.c.div(C()),G=function(n){var e,t,i,u,b=n.close,j=n.order,m=n.addCombineProduct,g=n.next,y=Object(d.useContext)(l.a),k=y.setIsLoading,w=y.getMessage,C=y.setShowModal,P=y.closeModal,S=Object(d.useContext)(p.a),z=S.isAdmin,D=S.token,L=j.product,E=j.lenses,A=L.contactLenses,M=Object(d.useState)({}),N=Object(a.a)(M,2),F=N[0],G=N[1],q=Object(d.useState)({}),Q=Object(a.a)(q,2),W=Q[0],X=Q[1],Y=Object(d.useState)({}),$=Object(a.a)(Y,2),nn=$[0],en=$[1],tn=Object(d.useState)("flat"),rn=Object(a.a)(tn,2),cn=rn[0],on=rn[1],an=Object(d.useState)("flat"),dn=Object(a.a)(an,2),ln=dn[0],sn=dn[1],un=Object(d.useState)(!1),bn=Object(a.a)(un,2),jn=bn[0],vn=bn[1],hn=Object(d.useState)(!1),mn=Object(a.a)(hn,2),On=mn[0],pn=mn[1],fn=Object(d.useState)(!1),xn=Object(a.a)(fn,2),gn=xn[0],yn=xn[1];console.log(j),console.log(W),console.log(E);var kn=function(n){X({}),on(n)},wn=function(n){en({}),sn(n)},Cn=function(n,e,t){var r=n.target,i=r.name,a=r.value,d=t;d[e]=""===a?1001:Number(a),G(Object(o.a)(Object(o.a)({},F),{},{contactLenses:Object(o.a)(Object(o.a)({},F.contactLenses),{},Object(c.a)({},i,d))}))},Pn=function(){var n=Object(h.a)(v.a.mark((function n(e){var t,r,c,i,a,d;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.preventDefault(),k(!0),C(!0),t={},L.type&&(5===L.type&&(t={product:j.product._id}),3===L.type?t={product:j.product._id,contactLenses:F.contactLenses}:(t={product:j.product._id},j.lenses&&(t={product:j.product._id,lens:j.lenses._id})),jn?(t="flat"===cn?Object(o.a)(Object(o.a)({},t),{},{discount:{product:{flat:Object(x.b)(W.flat)}}}):Object(o.a)(Object(o.a)({},t),{},{discount:{product:Object(o.a)({},W)}}),On&&(t="flat"===ln?Object(o.a)(Object(o.a)({},t),{},{discount:{product:{flat:Object(x.b)(W.flat)},lenses:{flat:Object(x.b)(nn.flat)}}}):Object(o.a)(Object(o.a)({},t),{},{discount:{product:Object(o.a)({},W),lenses:Object(o.a)({},nn)}}))):On&&(t="flat"===ln?Object(o.a)(Object(o.a)({},t),{},{discount:{lenses:{flat:Object(x.b)(nn.flat)}}}):Object(o.a)(Object(o.a)({},t),{},{discount:{lenses:Object(o.a)({},nn)}}))),console.log("COMBINED PRODUCT BEFORE SEND"),console.log(t),r=JSON.stringify(t),(c=new Headers).append("auth-token",D),c.append("Content-Type","application/json"),i={method:"POST",headers:c,body:r,redirect:"follow"},n.prev=12,n.next=15,fetch("".concat("http://195.110.58.166:8080","/api/store/combinedProducts"),i);case 15:return a=n.sent,n.next=18,a.json();case 18:d=n.sent,console.log(d),d.combinedProduct&&(m(d.combinedProduct),P(),g()),k(!1),w(d.message),n.next=30;break;case 25:n.prev=25,n.t0=n.catch(12),console.log(n.t0),w("Nieco sa pokazilo"),k(!1);case 30:case"end":return n.stop()}}),n,null,[[12,25]])})));return function(e){return n.apply(this,arguments)}}();return Object(d.useEffect)((function(){L.type&&3===L.type&&G({contactLenses:{curve:[L.contactLenses.allowedCurves[0],L.contactLenses.allowedCurves[0]],diameter:[L.contactLenses.allowedDiameters[0],L.contactLenses.allowedDiameters[0]],diopters:[0,0]}})}),[L]),Object(d.useEffect)((function(){return function(){G({}),X({}),on("flat"),vn(!1),yn(!1)}}),[]),O.a.createPortal(Object(r.jsxs)(R,{children:[Object(r.jsx)(s.a,{when:gn,message:"Chcete opusti\u0165 t\xfato str\xe1nku?"}),Object(r.jsx)(T,{onClick:b}),Object(r.jsxs)(B,{children:[Object(r.jsx)("h2",{children:"Produkt ktory chcete prida\u0165"}),Object(r.jsxs)(I,{children:[Object(r.jsx)("div",{children:L.image&&Object(r.jsx)("img",{src:"".concat("http://195.110.58.166:8080","/uploads/").concat(L.image.imagePath),alt:L.image.alt})}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:L.name}),Object(r.jsx)("span",{children:L.eanCode})]}),Object(r.jsx)("div",{children:Object(r.jsxs)("p",{children:[(L.price/100).toFixed(2),"\u20ac"]})})]}),E&&Object(r.jsxs)(_,{children:[Object(r.jsx)("h4",{children:E.name}),Object(r.jsx)(Z,{}),Object(r.jsx)("p",{children:E.description}),E.dioptersRange&&Object(r.jsx)("p",{children:"Dioptrie od ".concat(E.dioptersRange[0]," do ").concat(E.dioptersRange[1])}),E.cylinderRange&&Object(r.jsx)("p",{children:"Cylinder  od ".concat(E.cylinderRange[0]," do ").concat(E.cylinderRange[1])}),Object(r.jsxs)("h5",{children:[(E.price/100).toFixed(2),"\u20ac"]})]}),F.contactLenses&&3===L.type&&Object(r.jsxs)(J,{children:[Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"\u013dave oko"}),Object(r.jsx)(K,{name:"curve",value:F.contactLenses.curve[0],onChange:function(n){return Cn(n,0,F.contactLenses.curve)},children:L.contactLenses.allowedCurves.map((function(n,e){return Object(r.jsx)("option",{value:n,children:n},e)}))}),Object(r.jsx)(K,{name:"diameter",value:F.contactLenses.diameter[0],onChange:function(n){return Cn(n,0,F.contactLenses.diameter)},children:L.contactLenses.allowedDiameters.map((function(n,e){return Object(r.jsx)("option",{value:n,children:n},e)}))}),Object(r.jsx)(f.a,{name:"diopters",type:"number",value:F.contactLenses.diopters[0],min:A.dioptersRange[0],max:A.dioptersRange[1],step:.25,onChange:function(n){return Cn(n,0,F.contactLenses.diopters)}})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Prav\xe9 oko"}),Object(r.jsx)(K,{name:"curve",value:F.contactLenses.curve[1],onChange:function(n){return Cn(n,1,F.contactLenses.curve)},children:L.contactLenses.allowedCurves.map((function(n,e){return Object(r.jsx)("option",{value:n,children:n},e)}))}),Object(r.jsx)(K,{name:"diameter",value:F.contactLenses.diameter[1],onChange:function(n){return Cn(n,1,F.contactLenses.diameter)},children:L.contactLenses.allowedDiameters.map((function(n,e){return Object(r.jsx)("option",{value:n,children:n},e)}))}),Object(r.jsx)(f.a,{type:"number",value:F.contactLenses.diopters[1],min:A.dioptersRange[0],max:A.dioptersRange[1],step:.25,name:"diopters",onChange:function(n){return Cn(n,1,F.contactLenses.diopters)}})]})]}),z&&Object(r.jsxs)("div",{children:[Object(r.jsxs)(V,{children:[Object(r.jsx)("input",{id:"discount",name:"discount",type:"checkbox",value:jn,onChange:function(){return vn(!jn)}}),Object(r.jsx)("label",{htmlFor:"discount",children:"Prida\u0165 zlavu pre produkt"})]}),jn&&Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Zlava pre produkt"}),Object(r.jsxs)("div",{children:[Object(r.jsx)(H,{label:"Fixn\xe1 suma",value:"flat",name:"flat",isActive:"flat"===cn,handleClick:function(){return kn("flat")}}),Object(r.jsx)(H,{label:"Percert\xe1",value:"percent",name:"percent",isActive:"percent"===cn,handleClick:function(){return kn("percent")}})]}),Object(r.jsx)("div",{children:Object(r.jsx)(f.a,{label:"Hodnota",value:"flat"===cn?null!==(e=W.flat)&&void 0!==e?e:"":null!==(t=W.percent)&&void 0!==t?t:"",onChange:function(n){!function(n){var e=n.target,t=e.name,r=e.value;if(""===r)return delete W[t],void X(Object(o.a)({},W));X(Object(o.a)(Object(o.a)({},W),{},Object(c.a)({},t,r)))}({target:{name:cn,value:n.target.value}},L.type)}})})]})]}),z&&(null===j||void 0===j?void 0:j.lenses)&&Object(r.jsxs)("div",{children:[Object(r.jsxs)(V,{children:[Object(r.jsx)("input",{id:"lensdiscount",name:"lensdiscount",type:"checkbox",value:On,onChange:function(){return pn(!On)}}),Object(r.jsx)("label",{htmlFor:"lensdiscount",children:"Prida\u0165 zlavu pre \u0161o\u0161ovky"})]}),On&&Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Zlava pre \u0161o\u0161ovky"}),Object(r.jsxs)("div",{children:[Object(r.jsx)(H,{label:"Fixn\xe1 suma",value:"flat",name:"flat",isActive:"flat"===ln,handleClick:function(){return wn("flat")}}),Object(r.jsx)(H,{label:"Percert\xe1",value:"percent",name:"percent",isActive:"percent"===ln,handleClick:function(){return wn("percent")}})]}),Object(r.jsx)("div",{children:Object(r.jsx)(f.a,{label:"Hodnota",value:"flat"===ln?null!==(i=nn.flat)&&void 0!==i?i:"":null!==(u=nn.percent)&&void 0!==u?u:"",onChange:function(n){!function(n){var e=n.target,t=e.name,r=e.value;if(""===r)return delete nn[t],void en(Object(o.a)({},nn));en(Object(o.a)(Object(o.a)({},nn),{},Object(c.a)({},t,r)))}({target:{name:ln,value:n.target.value}})}})})]})]}),Object(r.jsx)(U,{onClick:Pn,children:"Prida\u0165 do objedn\xe1vky"})]})]}),document.getElementById("portal"))},q=t(97);function Q(){var n=Object(g.a)(["\n    max-width: 40rem;\n    padding: 2rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n    margin: 0 auto;\n    border-radius: .5rem;\n\n    h3 {\n        text-align: center;\n        font-size: 3rem;\n    }\n\n    div {\n\n        &:not(:last-child) {\n            margin-bottom: 3rem;\n\n        }\n    }\n"]);return Q=function(){return n},n}function W(){var n=Object(g.a)(["\n    padding: 2rem;\n    text-align: center;\n\n    img {\n        width: 5rem;\n    }\n"]);return W=function(){return n},n}function X(){var n=Object(g.a)(["\n    margin: 5rem 0;\n"]);return X=function(){return n},n}function Y(){var n=Object(g.a)(["\n    display: block;\n    margin: 0 auto;\n"]);return Y=function(){return n},n}function $(){var n=Object(g.a)(["\n    cursor: pointer;\n    display: grid;\n    align-content: center;\n    grid-template-columns: 1fr 2fr 25rem;\n    margin-bottom: 1rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n\n    transition: all .3s ease-out;\n\n    &:hover {\n        background-color: var(--primary-color); \n        font-weight: bolder;\n        color: var(--button-font-color);\n    }\n"]);return $=function(){return n},n}function nn(){var n=Object(g.a)(["\n    display: grid;\n    align-content: center;\n    grid-template-columns: 1fr 2fr 25rem;\n    border-bottom: 1px solid var(--secondary-text-color);\n    font-weight: bolder;\n"]);return nn=function(){return n},n}var en=y.c.div(nn()),tn=y.c.div($()),rn=Object(y.c)(w.a)(Y()),cn=y.c.div(X()),on=y.c.div(W()),an=y.c.div(Q()),dn=function(n){var e=n.next,t=n.addToOrder,c=Object(d.useState)(""),o=Object(a.a)(c,2),i=o[0],l=o[1],s=Object(d.useState)([]),u=Object(a.a)(s,2),b=u[0],j=u[1],v=Object(d.useContext)(q.UserContext),h=v.users,m=v.getFilteredUsers,O=v.getUserByQuery;return Object(d.useEffect)((function(){h||m({limit:5}),h&&j(h)}),[h]),Object(d.useEffect)((function(){h&&""===i&&(m({limit:5}),j(h))}),[i]),Object(d.useEffect)((function(){return function(){l(""),j([])}}),[]),Object(r.jsxs)("div",{children:[Object(r.jsxs)(an,{children:[Object(r.jsx)("h3",{children:"Vyh\u013eada\u0165 z\xe1kaznika"}),Object(r.jsx)("div",{children:Object(r.jsx)(f.a,{label:"Meno, priezvisko, email alebo tel. \u010d\xedslo",value:i,onChange:function(n){return l(n.target.value)},onKeyPress:function(n){""!==i&&"Enter"===n.key&&O({query:i})}})}),Object(r.jsx)(rn,{onClick:function(){""!==i&&O({query:i})},children:"H\u013eada\u0165"})]}),Object(r.jsxs)(cn,{children:[Object(r.jsxs)(en,{children:[Object(r.jsx)(on,{children:"Meno a priezvisko"}),Object(r.jsx)(on,{children:"Email"}),Object(r.jsx)(on,{children:"Mo\u017enosti"})]}),b.map((function(n,c){return Object(r.jsxs)(tn,{onClick:function(){return function(n){t({name:"user",value:n}),e()}(n)},children:[Object(r.jsx)(on,{children:n.name}),Object(r.jsx)(on,{children:n.email}),Object(r.jsx)(on,{children:n.phone})]},c)}))]})]})},ln=t(73),sn=t(223);function un(){var n=Object(g.a)(["\n    cursor: pointer;\n    border: 4px solid var(--backbutton-color);\n    color: var(--backbutton-color);\n    border-radius: 50%;\n    padding: 1.2rem 1.2rem;\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    margin-bottom: 3rem;\n"]);return un=function(){return n},n}var bn=y.c.div(un()),jn=function(n){var e=Object.assign({},n);return Object(r.jsx)(bn,Object(o.a)(Object(o.a)({},e),{},{children:Object(r.jsx)(sn.a,{})}))};function vn(){var n=Object(g.a)(["\n    cursor: pointer;\n    display: grid;\n    align-content: center;\n    grid-template-columns: 10rem 15rem 1fr 1fr 10rem 1fr;\n    margin-bottom: 1rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n\n    transition: all .3s ease-out;\n\n    &:hover {\n        background-color: var(--primary-color); \n        font-weight: bolder;\n        color: var(--button-font-color);\n    }\n"]);return vn=function(){return n},n}function hn(){var n=Object(g.a)(["\n    display: grid;\n    align-content: center;\n    grid-template-columns: 10rem 15rem 1fr 1fr 10rem 1fr;\n    border-bottom: 1px solid var(--secondary-text-color);\n    font-weight: bolder;\n"]);return hn=function(){return n},n}function mn(){var n=Object(g.a)(["\n    padding: 2rem;\n    text-align: center;\n\n    img {\n        width: 5rem;\n    }\n"]);return mn=function(){return n},n}function On(){var n=Object(g.a)(["\n    margin: 5rem 0;\n"]);return On=function(){return n},n}function pn(){var n=Object(g.a)(["\n    display: block;\n    margin: 0 auto;\n"]);return pn=function(){return n},n}function fn(){var n=Object(g.a)(["\n    max-width: 40rem;\n    padding: 2rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n    margin: 0 auto;\n    border-radius: .5rem;\n\n    h3 {\n        text-align: center;\n        font-size: 3rem;\n    }\n\n    div {\n\n        &:not(:last-child) {\n            margin-bottom: 3rem;\n\n        }\n    }\n"]);return fn=function(){return n},n}var xn=y.c.div(fn()),gn=Object(y.c)(w.a)(pn()),yn=y.c.div(On()),kn=y.c.div(mn()),wn=y.c.div(hn()),Cn=y.c.div(vn()),Pn=function(n){var e=n.back,t=n.next,c=n.addToOrder,o=n.showModal,i=n.showErrorMessage,l=Object(d.useState)(""),s=Object(a.a)(l,2),u=s[0],b=s[1],j=Object(d.useState)([]),v=Object(a.a)(j,2),h=v[0],m=v[1],O=Object(d.useContext)(ln.WarehouseContext),p=O.products,x=O.getProductsByQuery;return Object(d.useEffect)((function(){(!p||h.length<1)&&x({limit:10}),p&&m(p)}),[p]),Object(d.useEffect)((function(){p&&""===u&&x({limit:10})}),[u]),Object(d.useEffect)((function(){return function(){m([])}}),[]),Object(r.jsxs)("div",{children:[Object(r.jsx)(jn,{onClick:e}),Object(r.jsxs)(xn,{children:[Object(r.jsx)("h3",{children:"Vyh\u013eada\u0165 produkt"}),Object(r.jsx)("div",{children:Object(r.jsx)(f.a,{label:"N\xe1zov produktu, eanCode alebo popis",value:u,handleChange:function(n){return b(n.target.value)},onKeyPress:function(n){""!==u&&"Enter"===n.key&&x({query:u})}})}),Object(r.jsx)(gn,{onClick:function(){""!==u&&x({query:u})},children:"H\u013eada\u0165"})]}),Object(r.jsxs)(yn,{children:[Object(r.jsxs)(wn,{children:[Object(r.jsx)(kn,{children:"eanCode"}),Object(r.jsx)(kn,{children:"Obr\xe1zok"}),Object(r.jsx)(kn,{children:"N\xe1zov"}),Object(r.jsx)(kn,{children:"Zna\u010dka"}),Object(r.jsx)(kn,{children:"Cena"}),Object(r.jsx)(kn,{children:"Dostupnos\u0165"})]}),h.map((function(n,e){return Object(r.jsxs)(Cn,{onClick:function(){return(e=n.available)&&("number"===typeof e?e>0:e.reduce((function(n,e){return n+e}))>0)?function(n){c({name:"product",value:n}),1===n.type?t("selectLenses"):o()}(n):i("Produkt nieje na sklade.");var e},children:[Object(r.jsx)(kn,{children:n.eanCode}),Object(r.jsx)(kn,{children:(null===n||void 0===n?void 0:n.image)&&Object(r.jsx)("img",{src:"".concat("http://195.110.58.166:8080","/uploads/").concat(n.image.imagePath),alt:n.image.alt})}),Object(r.jsx)(kn,{children:n.name}),Object(r.jsx)(kn,{children:n.brand}),Object(r.jsxs)(kn,{children:[(n.price/100).toFixed(2),"\u20ac"]}),Object(r.jsx)(kn,{children:(a=n.available,a?"number"===typeof a?a>0?"Na sklade":"Nedostupn\xe9":a.reduce((function(n,e){return n+e}))>0?"Na sklade":"Nedostupn\xe9":"Nedostupn\xe9")})]},e);var a}))]})]})},Sn=t(87);function zn(){var n=Object(g.a)(["\n    background-color: var(--background-primary-color);\n    border-radius: 50%;\n    width: 10rem;\n    height: 10rem;\n    margin: 0 auto;\n    margin-bottom: 1.5rem;\n"]);return zn=function(){return n},n}function Dn(){var n=Object(g.a)(["\n    cursor: pointer;\n    width: 100%;\n    max-width: 32rem;\n    padding: 2rem;\n    border-radius: .5rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n    text-align: center;\n    transition: transform .3s ease-out,\n                box-shadow .3s ease-out;\n\n    &:last-child {\n        display:flex;\n        flex-direction: column;\n        justify-content: space-between;\n    }\n\n    h4 {\n        font-size: 2.5rem;\n        margin-bottom: 1.5rem\n    }\n\n    img {\n        /* background-color:#000; */\n        width: 15rem;\n        height: 15rem;\n        margin-bottom: 1rem; \n        object-fit: contain;\n        object-position: center;\n    }\n\n    p {\n        opacity: .65;\n        &:not(:last-child){\n            margin-bottom: .5rem;\n        }\n    }\n\n    h5 {\n        font-size: 2.5rem;\n    }\n\n    &:hover {\n        transform: scale(1.03);\n        box-shadow: var(--container-shadow);\n    }\n"]);return Dn=function(){return n},n}function Ln(){var n=Object(g.a)(["\n    display: flex;\n    flex-wrap: wrap;\n    gap: 2rem;\n"]);return Ln=function(){return n},n}function En(){var n=Object(g.a)(["\n    margin: 5rem 0;\n\n    h3 {\n        font-size: 3rem;\n        margin-bottom: 3rem;\n    }\n"]);return En=function(){return n},n}function An(){var n=Object(g.a)(["\n    h3 {\n        font-size: 3rem;\n        margin-bottom: 1rem;\n    }\n"]);return An=function(){return n},n}var Mn=y.c.div(An()),Nn=y.c.div(En()),Fn=y.c.div(Ln()),Rn=y.c.div(Dn()),Bn=y.c.div(zn()),Tn=function(n){var e=n.back,t=(n.next,n.addToOrder),c=n.order,o=n.showModal,i=Object(d.useState)([]),l=Object(a.a)(i,2),s=l[0],u=l[1],b=Object(d.useContext)(ln.WarehouseContext),j=b.lensesProducts,v=b.getLenses,h=function(n){t({name:"lenses",value:n}),o()};return Object(d.useEffect)((function(){j||v(),j&&u(j)}),[j]),Object(r.jsxs)("div",{children:[Object(r.jsx)(jn,{onClick:e}),Object(r.jsx)("div",{children:Object(r.jsxs)(Mn,{children:[Object(r.jsx)("h3",{children:"Parametre z\xe1kaznika"}),Object(r.jsx)(Sn.a,{parameters:c.user.lenses,disabledInputs:!0})]})}),Object(r.jsxs)(Nn,{children:[Object(r.jsx)("h3",{children:"V\xfdber \u0160o\u0161oviek"}),Object(r.jsxs)(Fn,{children:[s.map((function(n,e){return Object(r.jsxs)(Rn,{onClick:function(){return h(n)},children:[Object(r.jsx)("h4",{children:n.name}),Object(r.jsx)(Bn,{}),Object(r.jsx)("p",{children:n.description}),n.dioptersRange&&Object(r.jsx)("p",{children:"Dioptrie od ".concat(n.dioptersRange[0]," do ").concat(n.dioptersRange[1])}),n.cylinderRange&&Object(r.jsx)("p",{children:"Cylinder  od ".concat(n.cylinderRange[0]," do ").concat(n.cylinderRange[1])}),Object(r.jsxs)("h5",{children:[(n.price/100).toFixed(2),"\u20ac"]})]},e)})),Object(r.jsxs)(Rn,{onClick:function(){return h(null)},children:[Object(r.jsx)("h4",{children:"\u017diadn\xe9 skl\xe1"}),Object(r.jsx)(Bn,{}),Object(r.jsx)("h5",{children:"0\u20ac"})]})]})]})]})},Hn=t(69);function In(){var n=Object(g.a)(["\n    display: flex;\n    align-items: center;\n    margin-bottom: 2rem;\n\n\n    label {\n        display: block;\n        outline: none;\n        margin-left: 1rem;\n\n        &:focus {\n            outline: none;\n\n        }\n    }\n\n    input: {\n        display: block;\n    }\n"]);return In=function(){return n},n}function Un(){var n=Object(g.a)(["\n    display: flex;\n    align-items: center;\n    margin-bottom: 2rem;\n\n\n    label {\n        display: block;\n        outline: none;\n        margin-left: 1rem;\n\n        &:focus {\n            outline: none;\n\n        }\n    }\n\n    input: {\n        display: block;\n    }\n"]);return Un=function(){return n},n}function Vn(){var n=Object(g.a)(["\n    margin-top: 2rem;\n    margin-right: 2rem;\n"]);return Vn=function(){return n},n}function Kn(){var n=Object(g.a)(["\n    margin-top: 1.5rem;\n    min-width: 16.5rem;\n    width: 100%;\n    background-color: var(--input-background-color);\n    color: var(--input-color);\n    border: none;\n    padding: .5rem .5rem .5rem 1rem;\n    font-size: inherit;\n    font-family: inherit;\n    display: block;\n    outline: none;\n    margin-bottom: 2rem;\n\n    &:focus {\n        outline: none;\n    }\n"]);return Kn=function(){return n},n}function Jn(){var n=Object(g.a)(["\n    display: block;\n    margin: 2rem auto 0;\n"]);return Jn=function(){return n},n}function _n(){var n=Object(g.a)(["\n    width: 100%;\n    height: 100%;\n\n    position: fixed;\n    left: 0;\n    right: 0;\n    z-index: 99999;\n\n    border: none;\n    outline: none;\n    opacity: 0;\n\n    &:focus {\n        outline: none\n    }\n"]);return _n=function(){return n},n}function Zn(){var n=Object(g.a)(["\n    width:100%;\n    max-width: 50rem;\n    max-height: 60rem;\n\n    overflow-y: scroll;\n\n    /* display: flex;\n    flex-direction: column;\n    align-items: center; */\n\n    padding: 2rem;\n    border-radius: .5rem;\n    background-color: var(--background-primary-color);\n\n    position: relative;\n    z-index: 999999;\n\n    h2{ \n        margin-bottom: 2rem;\n        text-align: center;\n    }\n    h4{ \n        margin-top: 2rem;\n    }\n\n    ::-webkit-scrollbar {\n        width: 10px;\n    }\n\n    /* Track */\n    ::-webkit-scrollbar-track {\n        background:  var(--background-primary-color);\n    }\n\n    /* Handle */\n    ::-webkit-scrollbar-thumb {\n        background: var(--primary-color);\n    }\n\n    /* Handle on hover */\n    ::-webkit-scrollbar-thumb:hover {\n        background: var(--primary-color);\n    }\n"]);return Zn=function(){return n},n}function Gn(){var n=Object(g.a)(["\n    position: fixed;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    z-index: 99999;\n\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    background-color: rgba(0,0,0,0.3);\n"]);return Gn=function(){return n},n}var qn=y.c.div(Gn()),Qn=y.c.div(Zn()),Wn=y.c.button(_n()),Xn=Object(y.c)(w.a)(Jn()),Yn=y.c.select(Kn()),$n=Object(y.c)(k.a)(Vn()),ne=y.c.div(Un()),ee=y.c.div(In()),te=function(n){var e,t,i,l,s,u,b,j,v,h,m=n.close,O=n.order,p=n.combinedProducts,g=n.createOrder,y=n.setHasChanged,k=n.isUpdating,w=n.updateOrder,C=Object(d.useState)({paymentType:"cash"}),P=Object(a.a)(C,2),S=P[0],z=P[1],D=Object(d.useState)(!1),L=Object(a.a)(D,2),E=L[0],A=L[1],M=Object(d.useState)(!1),N=Object(a.a)(M,2),F=N[0],R=N[1],B=function(n){var e=n.target,t=e.name,r=e.value;if(""===r)return delete S[t],void z(Object(o.a)({},S));z(Object(o.a)(Object(o.a)({},S),{},Object(c.a)({},t,r)))},T=function(n){var e=n.target,t=e.name,r=e.value;if(""===r)return delete S.overwrite[t],void z(Object(o.a)({},S));z(Object(o.a)(Object(o.a)({},S),{},{overwrite:Object(o.a)(Object(o.a)({},S.overwrite),{},Object(c.a)({},t,r))}))};return Object(d.useEffect)((function(){var n,e;k&&((null===O||void 0===O?void 0:O.order)&&(B({target:{name:"shouldDeliver",value:null===O||void 0===O||null===(n=O.order)||void 0===n?void 0:n.shouldDeliver}}),B({target:{name:"buyingAsCompany",value:null===O||void 0===O||null===(e=O.order)||void 0===e?void 0:e.buyingAsCompany}})))}),[k,O]),Object(d.useEffect)((function(){return function(){z({paymentType:"cash"}),A(!1),R(!1)}}),[]),Object(r.jsxs)(qn,{children:[Object(r.jsx)(Wn,{onClick:m}),Object(r.jsxs)(Qn,{children:[Object(r.jsx)("h2",{children:k?"Upravi\u0165 objedn\xe1vku":"Dokon\u010deni\u0165 objedn\xe1vky"}),!k&&Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Sp\xf4sob platby"}),Object(r.jsxs)(Yn,{name:"paymentType",value:null!==(e=null===S||void 0===S?void 0:S.paymentType)&&void 0!==e?e:"cash",onChange:function(n){return B(n)},children:[Object(r.jsx)("option",{value:"cash",children:"Hotovos\u0165"}),Object(r.jsx)("option",{value:"card",children:"Karta"}),Object(r.jsx)("option",{value:"coupon",children:"Kup\xf3n"})]}),Object(r.jsxs)(ee,{children:[Object(r.jsx)("input",{id:"hasDeposit",name:"hasDeposit",type:"checkbox",value:E,onChange:function(){E?(A(!1),S.paidAlready&&(delete S.paidAlready,z(Object(o.a)({},S)))):A(!0)}}),Object(r.jsx)("label",{htmlFor:"hasDeposit",children:"Prida\u0165 z\xe1lohu"})]}),E&&Object(r.jsx)(f.a,{label:"Zaplaten\xe1 z\xe1loha",name:"paidAlready",type:"text",value:null!==(t=null===S||void 0===S?void 0:S.paidAlready)&&void 0!==t?t:"",onChange:function(n){return B(n)}})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Inform\xe1cie o doru\u010den\xed"}),Object(r.jsx)($n,{label:"Doru\u010di\u0165 na adresu",isActive:null===S||void 0===S?void 0:S.shouldDeliver,handleClick:function(){return B({target:{name:"shouldDeliver",value:!(null===S||void 0===S?void 0:S.shouldDeliver)||!(null===S||void 0===S?void 0:S.shouldDeliver)}})}}),Object(r.jsx)($n,{label:"N\xe1kup na firmu",isActive:null===S||void 0===S?void 0:S.buyingAsCompany,handleClick:function(){return B({target:{name:"buyingAsCompany",value:!(null===S||void 0===S?void 0:S.buyingAsCompany)||!(null===S||void 0===S?void 0:S.buyingAsCompany)}})}}),(null===S||void 0===S?void 0:S.shouldDeliver)&&Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Adresa"}),Object(r.jsx)("p",{children:O.user.psc}),Object(r.jsx)("p",{children:O.user.address}),Object(r.jsx)("p",{children:O.user.city}),Object(r.jsx)("p",{children:O.user.country}),Object(r.jsxs)("div",{children:[Object(r.jsxs)(ne,{children:[Object(r.jsx)("input",{id:"overwrite",name:"overwrite",type:"checkbox",value:F,onChange:function(){F?(R(!1),S.overwrite&&(delete S.overwrite,z(Object(o.a)({},S)))):R(!0)}}),Object(r.jsx)("label",{htmlFor:"overwrite",children:"In\xe1 adresa"})]}),F&&Object(r.jsxs)("div",{children:[Object(r.jsx)(f.a,{label:"Adresa",name:"address",type:"text",value:null!==(i=null===S||void 0===S||null===(l=S.overwrite)||void 0===l?void 0:l.address)&&void 0!==i?i:"",onChange:function(n){return T(n)}}),Object(r.jsx)(f.a,{label:"PS\u010c",name:"psc",type:"text",value:null!==(s=null===S||void 0===S||null===(u=S.overwrite)||void 0===u?void 0:u.psc)&&void 0!==s?s:"",onChange:function(n){return T(n)}}),Object(r.jsx)(f.a,{label:"Mesto",name:"city",type:"text",value:null!==(b=null===S||void 0===S||null===(j=S.overwrite)||void 0===j?void 0:j.city)&&void 0!==b?b:"",onChange:function(n){return T(n)}}),Object(r.jsx)(f.a,{label:"\u0160t\xe1t",name:"country",type:"text",value:null!==(v=null===S||void 0===S||null===(h=S.overwrite)||void 0===h?void 0:h.country)&&void 0!==v?v:"",onChange:function(n){return T(n)}})]})]})]})]}),Object(r.jsx)(Xn,{onClick:function(n){if(n.preventDefault(),k){var e=Object(o.a)({},S);delete e.paymentType,delete e.shouldDeliver,y(!1),w(e,O.order._id)}else{var t=Object(o.a)(Object(o.a)({},S),{},{user:O.user._id,combinedProducts:p.map((function(n){return n._id})),status:E?"half-paid":"paid"});S.paidAlready&&(t=Object(o.a)(Object(o.a)({},t),{},{paidAlready:Object(x.b)(S.paidAlready)})),console.log(t),y(!1),g(t)}},children:"Vytvori\u0165 objedn\xe1vku"})]})]})},re=t(53),ce=function(n){var e=n.productId,t=Object(re.b)("api/store/products",e,!e),c=t.isLoading,o=t.response;return Object(r.jsx)("span",{style:{whiteSpace:"nowrap"},children:c?"H\u013eadam...":o.product.name.slice(0,6).concat("...")})},oe=function(n){var e=n.lensesId,t=Object(re.b)("api/store/lenses",e,!e),c=t.isLoading,o=t.response;return Object(r.jsx)("span",{style:{whiteSpace:"nowrap"},children:c?"H\u013eadam...":o.lenses.name.slice(0,8).concat("...")})},ie=t(60);function ae(){var n=Object(g.a)(["\n    &:not(:last-child) {\n        margin-right: .5rem;\n    }\n\n    &:last-child {\n        background-color: var(--primary-color);\n        font-weight: bolder;\n    }\n"]);return ae=function(){return n},n}function de(){var n=Object(g.a)(["\n    padding: 2rem;\n    border-radius: .5rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n    margin-bottom: 3rem;\n\n\n    h3 {\n        margin-bottom: 1rem;\n    }\n"]);return de=function(){return n},n}function le(){var n=Object(g.a)(["\n    padding: 2rem;\n    border-radius: .5rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n    margin-bottom: 3rem;\n\n    h3 {\n        margin-bottom: 1rem;\n    }\n\n    h4 {\n        margin-top: 1rem;\n        margin-bottom: .5rem;\n    }\n\n    div {\n        p {\n            opacity: .83;\n        }\n\n        &:not(:last-child) {\n            margin-bottom: 1rem;\n        }\n\n        a {\n            background-color: #000;\n            color: #fff;\n            display: inline-block;\n            padding: .5rem 2.5rem;\n            margin-top: 1rem;\n        }\n    }\n\n"]);return le=function(){return n},n}function se(){var n=Object(g.a)(["\n    opacity: .83;\n    font-size: 1.4rem;\n    margin-left: 1.5rem;\n\n    &:not(:last-child) {\n        margin-bottom: .5rem;\n    }\n"]);return se=function(){return n},n}function ue(){var n=Object(g.a)(["\n    padding: 2rem;\n    border-radius: .5rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n\n\n    h3 {\n        margin-bottom: .5rem;\n    }\n\n    h4 {\n        margin-top: 1rem;\n        margin-bottom: .5rem;\n    }\n\n"]);return ue=function(){return n},n}function be(){var n=Object(g.a)(["\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    grid-gap: 3rem;\n    align-items: start;\n"]);return be=function(){return n},n}function je(){var n=Object(g.a)(["\n    margin-top: 2rem;\n    display:flex;\n    justify-content: flex-end;\n    align-items: center;\n\n    span {\n        display: block;\n        margin-right: .5rem;\n        \n    }\n\n    p {\n        font-weight: bolder;\n        font-size: 2.5rem;\n    }\n"]);return je=function(){return n},n}function ve(){var n=Object(g.a)(["\n    padding: 2rem;\n    text-align: center;\n\n    img {\n        width: 5rem;\n    }\n"]);return ve=function(){return n},n}function he(){var n=Object(g.a)(["\n    display: grid;\n    align-content: center;\n    grid-template-columns: 5rem 1fr 10rem 10rem 1fr 10rem 10rem 10rem 10rem;\n    /* box-shadow: 0 0 1.5rem 0 rgba(0,0,0, 0.08); */\n    /* margin-bottom: 1rem; */\n"]);return he=function(){return n},n}function me(){var n=Object(g.a)(["\n    display: grid;\n    align-content: center;\n    grid-template-columns: 5rem 1fr 10rem 10rem 1fr 10rem 10rem 10rem 10rem;\n    font-weight: bolder;\n    border-bottom: 1px solid var(--secondary-text-color);\n"]);return me=function(){return n},n}function Oe(){var n=Object(g.a)(["\n    margin-bottom: 3rem;\n"]);return Oe=function(){return n},n}function pe(){var n=Object(g.a)(["\n    padding: 2rem;\n    border-radius: .5rem;\n    box-shadow: var(--container-shadow);\n    margin-bottom: 3rem;\n    background-color: var(--container-background-color);\n\n"]);return pe=function(){return n},n}var fe=y.c.div(pe()),xe=y.c.h3(Oe()),ge=y.c.div(me()),ye=y.c.div(he()),ke=y.c.div(ve()),we=y.c.div(je()),Ce=y.c.div(be()),Pe=y.c.div(ue()),Se=y.c.p(se()),ze=y.c.div(le()),De=y.c.div(de()),Le=Object(y.c)(w.a)(ae()),Ee=function(n){var e,t,c,o,i,l,s,u,b,j,v,h,m,O,p,f,x,g,y=n.order,k=n.combinedProducts,w=n.addNextProduct,C=n.setHasChanged,P=n.isUpdating,S=Object(d.useContext)(Hn.OrdersContext),z=S.createOrder,D=S.updateOrder,L=Object(d.useState)(!1),E=Object(a.a)(L,2),A=E[0],M=E[1],N=Object(d.useState)(0),F=Object(a.a)(N,2),R=F[0],B=F[1],T=new Date(null===y||void 0===y||null===(e=y.order)||void 0===e?void 0:e.date);console.log(y),console.log(k),Object(d.useEffect)((function(){k&&B(k.reduce((function(n,e){return n+e.discountedPrice}),0))}),[k]);var H;return Object(r.jsxs)("div",{children:[A&&Object(r.jsx)(te,{close:function(){return M(!1)},order:y,combinedProducts:k,createOrder:z,setHasChanged:C,isUpdating:P,updateOrder:D}),Object(r.jsxs)(fe,{children:[Object(r.jsx)(xe,{children:"Preh\u013aad objedn\xe1vky"}),Object(r.jsxs)(ge,{children:[Object(r.jsx)(ke,{children:"#"}),Object(r.jsx)(ke,{children:"ProduktID"}),Object(r.jsx)(ke,{children:"Cena"}),Object(r.jsx)(ke,{children:"Po zlave"}),Object(r.jsx)(ke,{children:"\u0160osovkyID"}),Object(r.jsx)(ke,{children:"Cena"}),Object(r.jsx)(ke,{children:"Po zlave"}),Object(r.jsx)(ke,{children:"Dohromady"}),Object(r.jsx)(ke,{children:"Po zlave"})]}),k.map((function(n,e){var t,c,o,i;return Object(r.jsxs)(ye,{children:[Object(r.jsx)(ke,{children:e+1}),Object(r.jsx)(ke,{children:(null===n||void 0===n?void 0:n.product)?Object(r.jsx)(ce,{productId:null===n||void 0===n?void 0:n.product}):""}),Object(r.jsx)(ke,{children:(null===n||void 0===n?void 0:n.productPrice)?"".concat(((null===n||void 0===n||null===(t=n.productPrice)||void 0===t?void 0:t.full)/100).toFixed(2),"\u20ac"):""}),Object(r.jsx)(ke,{children:(null===n||void 0===n?void 0:n.productPrice)?"".concat(((null===n||void 0===n||null===(c=n.productPrice)||void 0===c?void 0:c.discounted)/100).toFixed(2),"\u20ac"):""}),Object(r.jsx)(ke,{children:(null===n||void 0===n?void 0:n.lens)?Object(r.jsx)(oe,{lensesId:null===n||void 0===n?void 0:n.lens}):""}),Object(r.jsx)(ke,{children:(null===n||void 0===n?void 0:n.lensPrice)?"".concat(((null===n||void 0===n||null===(o=n.lensPrice)||void 0===o?void 0:o.full)/100).toFixed(2),"\u20ac"):""}),Object(r.jsx)(ke,{children:(null===n||void 0===n?void 0:n.lensPrice)?"".concat(((null===n||void 0===n||null===(i=n.lensPrice)||void 0===i?void 0:i.discounted)/100).toFixed(2),"\u20ac"):""}),Object(r.jsx)(ke,{children:(null===n||void 0===n?void 0:n.price)?"".concat(((null===n||void 0===n?void 0:n.price)/100).toFixed(2),"\u20ac"):""}),Object(r.jsxs)(ke,{children:[((null===n||void 0===n?void 0:n.discountedPrice)/100).toFixed(2),"\u20ac"]})]},e)})),Object(r.jsx)(we,{children:Object(r.jsxs)("p",{children:["Spolu: ",(R/100).toFixed(2),"\u20ac"]})})]}),Object(r.jsxs)(Ce,{children:[Object(r.jsxs)(Pe,{children:[Object(r.jsx)("h3",{children:"Z\xe1kaznik"}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Meno a prizvisko"}),Object(r.jsx)(Se,{children:null===y||void 0===y||null===(t=y.user)||void 0===t?void 0:t.name})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Adresa"}),Object(r.jsx)(Se,{children:null===y||void 0===y||null===(c=y.user)||void 0===c?void 0:c.psc}),Object(r.jsx)(Se,{children:null===y||void 0===y||null===(o=y.user)||void 0===o?void 0:o.address}),Object(r.jsx)(Se,{children:null===y||void 0===y||null===(i=y.user)||void 0===i?void 0:i.city}),Object(r.jsx)(Se,{children:null===y||void 0===y||null===(l=y.user)||void 0===l?void 0:l.country})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Kontakt"}),Object(r.jsx)(Se,{children:null===y||void 0===y||null===(s=y.user)||void 0===s?void 0:s.email}),Object(r.jsx)(Se,{children:null===y||void 0===y||null===(u=y.user)||void 0===u?void 0:u.phone})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Parametre"}),y&&y.user&&Object(r.jsx)(Sn.a,{parameters:null===y||void 0===y||null===(b=y.user)||void 0===b?void 0:b.lenses,disabledInputs:!0})]})]}),Object(r.jsxs)("div",{children:[!P&&Object(r.jsxs)(De,{children:[Object(r.jsx)("h3",{children:"Mo\u017enosti"}),Object(r.jsx)(Le,{onClick:w,children:"Prida\u0165 produkt"}),Object(r.jsx)(Le,{onClick:function(){return M(!0)},children:"Vytvori\u0165 objednavku"})]}),P&&Object(r.jsxs)(De,{children:[Object(r.jsx)("h3",{children:"Mo\u017enosti"}),Object(r.jsx)(Le,{onClick:function(){return M(!0)},children:"Upravi\u0165 objednavku"})]}),P&&(null===y||void 0===y||null===(j=y.order)||void 0===j?void 0:j.overwrite)&&Object(r.jsxs)(ze,{children:[Object(r.jsx)("h3",{children:"Doru\u010dovacia adresa"}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Adresa"}),Object(r.jsx)(Se,{children:null===y||void 0===y||null===(v=y.order)||void 0===v||null===(h=v.overwrite)||void 0===h?void 0:h.psc}),Object(r.jsx)(Se,{children:null===y||void 0===y||null===(m=y.order)||void 0===m||null===(O=m.overwrite)||void 0===O?void 0:O.address}),Object(r.jsx)(Se,{children:null===y||void 0===y||null===(p=y.order)||void 0===p||null===(f=p.overwrite)||void 0===f?void 0:f.city}),Object(r.jsx)(Se,{children:null===y||void 0===y||null===(x=y.order)||void 0===x||null===(g=x.overwrite)||void 0===g?void 0:g.country})]})]}),y.order&&Object(r.jsxs)(ze,{children:[Object(r.jsx)("h3",{children:"Detaily objedn\xe1vky"}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"D\xe1tum objedn\xe1vky"}),Object(r.jsx)(Se,{children:T.toLocaleDateString("sk-SK",{weekday:"long",month:"long",day:"numeric"})})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Doru\u010di\u0165 na adresu"}),Object(r.jsx)(Se,{children:y.order.shouldDeliver?"\xc1no":"Nie"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"N\xe1kup na firmu"}),Object(r.jsx)(Se,{children:y.order.buyingAsCompany?"\xc1no":"Nie"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Sp\xf4sob \xfahrady"}),Object(r.jsx)(Se,{children:(H=y.order.paymentType,"cash"===H?"Hotovos\u0165":"card"===H?"Karta":"coupon"===H?"Kup\xf3n":H)})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Stav objedn\xe1vky"}),Object(r.jsx)(Se,{children:"half-paid"===y.order.status?"Z\xe1loha: ".concat((y.order.paidAlready/100).toFixed(2),"\u20ac"):"Zaplaten\xe9"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Vybavuje prev\xe1dzka"}),Object(r.jsx)(Se,{children:0===y.order.premises?"Neuveden\xe9":ie.n[y.order.premises-1]})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"PDF"}),Object(r.jsx)("a",{href:"".concat("http://195.110.58.166:8080","/uploads/pdf/").concat(y.order.pdfPath),target:"_blank",rel:"noreferrer noopener",children:"Zobraz PDF"})]})]})]})]})]})},Ae=t(14);function Me(){var n=Object(g.a)(["\n    display: flex;\n    justify-content: space-between;\n\n    ","\n    padding-top: 3rem;\n    padding-bottom: 3rem;\n\n    h1 {\n        color: var(--primary-text-color);\n    }\n\n    @media all and (max-width: 800px) {\n        flex-wrap: wrap;\n\n        div:nth-child(2) {\n            margin-bottom: 2rem;\n        }\n    }\n"]);return Me=function(){return n},n}var Ne=y.c.div(Me(),Ae.e);e.default=function(){var n,e=Object(s.i)(),t=e.userId,j=e.orderId,v=Object(d.useState)("selectUser"),h=Object(a.a)(v,2),m=h[0],O=h[1],p=Object(d.useState)({}),f=Object(a.a)(p,2),x=f[0],g=f[1],y=Object(d.useState)(!1),k=Object(a.a)(y,2),w=k[0],C=k[1],P=Object(d.useState)(!1),S=Object(a.a)(P,2),z=S[0],D=S[1],L=Object(d.useState)(!1),E=Object(a.a)(L,2),A=E[0],M=E[1],N=Object(d.useState)([]),F=Object(a.a)(N,2),R=F[0],B=F[1],T=function(n){C(!0);var e=n.name,t=n.value;g(Object(o.a)(Object(o.a)({},x),{},Object(c.a)({},e,t)))},H=Object(d.useContext)(l.a),I=H.getMessage,U=H.setShowModal,V=H.closeModal,K=H.isLoading,J=H.showModal,_=H.message,Z=Object(re.b)("api/admin/users",t,!(t&&j)),q=Object(re.b)("api/admin/orders",j,!j);return Object(d.useEffect)((function(){"nova-objednavka"!==t&&j?(M(!0),O("summary"),q.response&&(g(Object(o.a)(Object(o.a)({},x),{},{order:q.response.order,user:q.response.order.orderedBy})),B(q.response.order.combinedProducts))):"nova-objednavka"!==t&&void 0===j&&(O("findProduct"),Z.response&&g((function(n){return Object(o.a)(Object(o.a)({},n),{},{user:Z.response.user})})))}),[t,j,Z.response,q.response]),Object(d.useEffect)((function(){return function(){O("selectUser"),g({}),C(!1),D(!1),B([]),M(!1)}}),[]),console.log(x),console.log(q),Object(r.jsxs)("section",{children:[Object(r.jsx)(s.a,{when:w,message:"M\xe1te nedokon\u010den\xfa objedn\xe1vku, skuto\u010dne chcete od\xeds\u0165?"}),J&&Object(r.jsx)(b.a,{loading:K,title:_,close:V}),z&&Object(r.jsx)(G,{order:x,close:function(){return D(!1)},addCombineProduct:function(n){B([].concat(Object(i.a)(R),[n]))},next:function(){O("summary"),D(!1)}}),Object(r.jsx)(Ne,{children:Object(r.jsx)("div",{children:Object(r.jsx)("h1",{children:A?"Objednavka \u010d\xedslo ".concat(null===x||void 0===x||null===(n=x.order)||void 0===n?void 0:n.customId):"Nov\xe1 objedn\xe1vka"})})}),Object(r.jsx)(u.a,{children:Object(r.jsxs)("div",{children:["selectUser"===m&&Object(r.jsx)(dn,{next:function(){return O("findProduct")},addToOrder:T}),"findProduct"===m&&Object(r.jsx)(Pn,{back:function(){return O("selectUser")},next:O,addToOrder:T,showErrorMessage:function(n){I(n),U(!0)},showModal:function(){return D(!0)}}),"selectLenses"===m&&Object(r.jsx)(Tn,{back:function(){return O("findProduct")},next:function(){return O("summary")},addToOrder:T,order:x,showModal:function(){return D(!0)}}),"summary"===m&&Object(r.jsx)(Ee,{order:x,isUpdating:A,combinedProducts:R,back:function(){return O("selectLenses")},addNextProduct:function(){O("findProduct"),(null===x||void 0===x?void 0:x.product)&&((null===x||void 0===x?void 0:x.lenses)?(delete x.lenses,delete x.product):delete x.product,g(Object(o.a)({},x)))},setHasChanged:C})]})})]})}},56:function(n,e,t){"use strict";t.d(e,"a",(function(){return r})),t.d(e,"c",(function(){return c})),t.d(e,"d",(function(){return o})),t.d(e,"e",(function(){return i})),t.d(e,"b",(function(){return a}));var r=["Adidas","Armani Exchange","Arnette","Blackfin","Blumarine","Burberry","Bvlgari","Calvin Klein","Carolina Herrera","Carrera","David Beckham","Dior","Dolce & Gabbana","Elle","Emporio Armani","Esprit","Etnia Barcelona","Fendi","Fossil","Furla","Giorgio Armani","Givenchy","Gucci","Guess","H.I.S","Hawkers","Hugo Boss","Jaguar","Jimmy Choo","Lacoste","Liu Jo","Marc Jacobs","Max Mara","Max&Co","Meller","Mexx","Michael Kors","Moschino","Oakley","Persol","Polaroid","Police","Polo Ralph Lauren","Prada","Prada Linea Rossa","Ralph","Ralph Lauren","Ray-Ban","Salvatore Ferragamo","Smith","Strellson","Tiffany&Co.","Tom Ford","Tommy Hilfiger","Versace","Vogue"],c=["Acuvue","Adore","Air Optix","Biofinity","Biomedics","Clariti","ColourVue","Comfilcon A","Dailies","Freshlook","Lenjoy","Proclear","Purevision","Soflens"],o=["Obchodn\xe1 57, Bratislava","Mileti\u010dova 38, Bratislava","Vajnory, Bratislava","Senica, OC Bran\u010d","Trnava, City Ar\xe9na"],i=[{id:0,name:"E-shop"},{id:1,name:"Obchodn\xe1 57, Bratislava"},{id:2,name:"Mileti\u010dova 38, Bratislava"},{id:3,name:"Vajnory, Bratislava"},{id:4,name:"Senica, OC Bran\u010d"}],a=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";n.toString();var e=0;return n.includes(",")?1===n.split(",")[1].length?(e=n.split(",")[0]+n.split(",")[1]+"0",Number(e)):(e=n.split(",")[0]+n.split(",")[1],Number(e)):Number(100*n)}},69:function(n,e,t){"use strict";t.r(e),t.d(e,"OrdersContext",(function(){return j}));var r=t(2),c=t(21),o=t(7),i=t.n(o),a=t(12),d=t(10),l=t(1),s=t(3),u=t(19),b=t(18),j=Object(l.createContext)({orders:null,getOrders:function(){},createOrder:function(){},updateOrder:function(){},finishOrder:function(){}});e.default=function(n){var e=n.children,t=Object(s.h)().push,o=Object(l.useContext)(b.a),v=o.setIsLoading,h=o.setShowModal,m=o.getMessage,O=o.closeModal,p=Object(l.useContext)(u.a).token,f=Object(l.useState)(null),x=Object(d.a)(f,2),g=x[0],y=x[1],k=new Headers;k.append("auth-token",p),k.append("Content-Type","application/json");var w=function(){var n=Object(a.a)(i.a.mark((function n(){var e,t,r;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return v(!0),h(!0),e={method:"GET",headers:k,redirect:"follow"},n.prev=3,n.next=6,fetch("".concat("http://195.110.58.166:8080","/api/admin/orders"),e);case 6:return t=n.sent,n.next=9,t.json();case 9:if(r=n.sent,console.log(r),!r.orders){n.next=15;break}return y(r.orders),O(),n.abrupt("return");case 15:m(r.message),v(!1),n.next=24;break;case 19:n.prev=19,n.t0=n.catch(3),console.log(n.t0),m("Nieco sa pokazilo"),v(!1);case 24:case"end":return n.stop()}}),n,null,[[3,19]])})));return function(){return n.apply(this,arguments)}}(),C=function(){var n=Object(a.a)(i.a.mark((function n(e){var r,o,a,d,l;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return v(!0),h(!0),r=Object(c.a)({},e),console.log("ORDER BEFORE SEND"),console.log(r),o=JSON.stringify(r),a={method:"POST",headers:k,body:o,redirect:"follow"},n.prev=7,n.next=10,fetch("".concat("http://195.110.58.166:8080","/api/admin/orders"),a);case 10:return d=n.sent,n.next=13,d.json();case 13:l=n.sent,console.log(l),l.order&&(w(),O(),t("/dashboard/objednavky")),m(l.message),v(!1),n.next=25;break;case 20:n.prev=20,n.t0=n.catch(7),console.log(n.t0),m("Nieco sa pokazilo"),v(!1);case 25:case"end":return n.stop()}}),n,null,[[7,20]])})));return function(e){return n.apply(this,arguments)}}(),P=function(){var n=Object(a.a)(i.a.mark((function n(e,r){var o,a,d,l,s;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return v(!0),h(!0),o=Object(c.a)({},e),console.log("ORDER BEFORE SEND"),console.log(o),a=JSON.stringify(o),d={method:"PATCH",headers:k,body:a,redirect:"follow"},n.prev=7,n.next=10,fetch("".concat("http://195.110.58.166:8080","/api/admin/orders/").concat(r),d);case 10:return l=n.sent,n.next=13,l.json();case 13:s=n.sent,console.log(s),s.order&&(w(),O(),t("/dashboard/objednavky")),m(s.message),v(!1),n.next=25;break;case 20:n.prev=20,n.t0=n.catch(7),console.log(n.t0),m("Nieco sa pokazilo"),v(!1);case 25:case"end":return n.stop()}}),n,null,[[7,20]])})));return function(e,t){return n.apply(this,arguments)}}(),S=function(){var n=Object(a.a)(i.a.mark((function n(e){var t,r,c;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return v(!0),h(!0),t={method:"POST",headers:k,redirect:"follow"},n.prev=3,n.next=6,fetch("".concat("http://195.110.58.166:8080","/api/admin/orders/").concat(e,"/fulfill"),t);case 6:return r=n.sent,n.next=9,r.json();case 9:if(c=n.sent,console.log(c),"undelegated-order"!==c.error){n.next=15;break}return v(!1),m("Objedn\xe1vka nem\xf4\u017ee by\u0165 dokon\u010den\xe1 ak nieje priraden\xe1 k prev\xe1dzke"),n.abrupt("return");case 15:if(!c.order){n.next=18;break}return O(),n.abrupt("return");case 18:m(c.message),v(!1),n.next=27;break;case 22:n.prev=22,n.t0=n.catch(3),console.log(n.t0),m("Nieco sa pokazilo"),v(!1);case 27:case"end":return n.stop()}}),n,null,[[3,22]])})));return function(e){return n.apply(this,arguments)}}();return Object(r.jsx)(j.Provider,{value:{orders:g,getOrders:w,createOrder:C,updateOrder:P,finishOrder:S},children:e})}}}]);
//# sourceMappingURL=17.63e8ac6d.chunk.js.map