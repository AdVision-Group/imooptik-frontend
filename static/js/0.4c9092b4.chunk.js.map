{"version":3,"sources":["context/warehouse/warehouse.utils.jsx","context/image/image.queries.jsx","context/image/image.context.jsx","hooks/useFetch.jsx","context/warehouse/warehouse.queries.jsx","context/warehouse/warehouse.context.jsx"],"names":["initProductObj","name","description","price","type","brand","soldAmount","available","eanCode","colorCode","colorName","imagePath","image","eshop","specs","frameColor","frameMaterial","frameStyle","lensColor","sex","size","initLensesObj","id","dioptersRange","cylinderRange","retailNames","productCategories","value","brands","uploadImage","token","img","imgName","imgAlt","myHeaders","Headers","append","requestOptions","method","headers","body","JSON","stringify","redirect","fetch","process","fetchFilteredImages","limit","skip","sortBy","dateCreated","deleteImage","ImageContext","createContext","isDisabled","images","selectedImage","getImages","handleImage","handleDeleteImage","setSelectedImage","getNextImages","getPrevImage","ImageProvider","children","useContext","LoadingModalContext","getMessage","setIsLoading","setShowModal","closeModal","AuthContext","useState","setIsDisabled","setImages","setSkip","setImage","close","a","response","json","data","console","log","_id","addToSkip","length","message","e","preventDefault","respone","Provider","useFetch","path","options","setResponse","error","setError","isLoading","useEffect","res","fetchData","fetchProducts","fetchSingleProduct","fetchLenses","fetchSingleLenses","delLense","postLenses","newProduct","map","val","Number","patchLenses","postProduct","raw","patchProduct","product","deleteProduct","WarehouseContext","formToShow","toggleProductForms","showUpdateForm","isUpdating","activeCategoryIndex","categories","getEanCode","toggleDraft","handleCategoryChange","handleAvailableChange","handleSizeChange","selectImage","products","handleChange","handleSpecsChange","resetProduct","lenses","lensesArr","handleLensesChange","handleLensesDioptersRangeChange","handleLensesCylinderRangeChange","totalCount","getProducts","getSingleProduct","createNewProduct","handleProductDelete","updateProduct","createNewLenses","getLenses","getSigleLenses","updateLenses","deleteLenses","lensesParameters","handleParameterChange","WarehouseProvider","currentUser","push","useHistory","setTotalCount","setIsUpdating","setActiveCategoryIndex","setFormToShow","admin","setProduct","setProducts","setLenses","setLensesArr","diopters","curvature","average","setLensesParameters","count","premises","filter","num","idx","productToAdd","success","productToUpdate","switchFormButtons","formName","code","arr","target","imgId"],"mappings":"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","file":"static/js/0.4c9092b4.chunk.js","sourcesContent":["export const initProductObj = {\n    // Product id\n    // Product name: Ultra glasses\n    name: \"\",\n    // Product description: Awesome product\n    description: \"\",\n    // price in cents: 1050 => 10.50\n    price: '0',\n    // product type: glesses, lenses, ...\n    type: 1,\n    // brand name: Adidas\n    brand: \"\",\n    //kolko sa ich zatial predalo\n    soldAmount: 0,\n    //kolko je kusov na ktorej prevádzke [arr] \n    available: [0],\n    //ean kod = unikatny kod ktory ma kazdy produkt\n    eanCode: \"\",\n    //farebny kod, ktory spolu s ean kodom tvori \"identitu\" produktu. Moze existovat viacero\n    //produktov s rovnakym ean kodom ale rozlicnym color kodom. Je to takto urobené kvôli skladovému\n    //systému napr. mam na sklade iny pocet zltych ramov isteho druhu ako ciernych\n    colorCode: \"\",\n    //meno farby\n    colorName: \"\",\n    //path k obrazku na serveri (toto bude mozno array este sa uvidi)\n    imagePath: \"\",\n    image: null,\n    eshop: true,\n\n    specs: {\n        frameColor: \"\",\n        frameMaterial: \"\",\n        frameStyle: \"\",\n        lensColor: \"\",\n        sex: \"M\",\n        size: [0, 0, 0],\n    }\n}\n\nexport const initLensesObj = {\n    // id [5fd4cae9f9432022689dd223]\n    id: \"\",\n    // Lense name\n    name: \"\",\n    // Paradne sosovky\n    description: \"\",\n    //vsetky skla su dostupne len pre isty interval dioptrií a cylindrov, ak si zvolím ze mam dioptrie\n    //mimo tohto intervalu tak si tieto skla k mojim okuliarom vybrat nemozem\n    dioptersRange: [\"0\", \"0\"],\n    cylinderRange: [\"0\", \"0\"],\n    //cena v centoch\n    price: \"0\",\n    brand: \"\",\n    imagePath: ''\n}\n\nexport const retailNames = [\n    \"Obchodná 57, Bratislava\",\n    \"Miletičova 38, Bratislava\",\n    \"Vajnory, Bratislava\",\n    \"Senica, OC Branč\",\n    \"Trnava, City Aréna\"\n]\n\n// Category variables\nexport const productCategories = [\n    {\n        name: \"Dioptrické\",\n        value: 1\n    },\n    {\n        name: \"Slnečné\",\n        value: 2\n    },\n    {\n        name: \"Športové\",\n        value: 3\n    },\n    {\n        name: \"Šošovky\",\n        value: 4\n    },\n    {\n        name: \"Doplnky\",\n        value: 5\n    },\n]\n\n\n\nexport const resetProductObj = () => {\n    return initProductObj\n}\n\nexport const resetLensesObj = () => {\n    return initLensesObj\n}\n\nexport const brands = [\n    \"Adidas\",\n    \"Armani Exchange\",\n    \"Arnette\",\n    \"Blackfin\",\n    \"Blumarine\",\n    \"Burberry\",\n    \"Bvlgari\",\n    \"Calvin Klein\",\n    \"Carolina Herrera\",\n    \"Carrera\",\n    \"David Beckham\",\n    \"Dior\",\n    \"Dolce & Gabbana\",\n    \"Elle\",\n    \"Emporio Armani\",\n    \"Esprit\",\n    \"Etnia Barcelona\",\n    \"Fendi\",\n    \"Fossil\",\n    \"Furla\",\n    \"Giorgio Armani\",\n    \"Givenchy\",\n    \"Gucci\",\n    \"Guess\",\n    \"H.I.S\",\n    \"Hawkers\",\n    \"Hugo Boss\",\n    \"Jaguar\",\n    \"Jimmy Choo\",\n    \"Lacoste\",\n    \"Liu Jo\",\n    \"Marc Jacobs\",\n    \"Max Mara\",\n    \"Max&Co\",\n    \"Meller\",\n    \"Mexx\",\n    \"Michael Kors\",\n    \"Moschino\",\n    \"Oakley\",\n    \"Persol\",\n    \"Polaroid\",\n    \"Police\",\n    \"Polo Ralph Lauren\",\n    \"Prada\",\n    \"Prada Linea Rossa\",\n    \"Ralph\",\n    \"Ralph Lauren\",\n    \"Ray-Ban\",\n    \"Salvatore Ferragamo\",\n    \"Smith\",\n    \"Strellson\",\n    \"Tiffany&Co.\",\n    \"Tom Ford\",\n    \"Tommy Hilfiger\",\n    \"Versace\",\n    \"Vogue\"\n]","export const uploadImage = (token, img, imgName, imgAlt) => {\n    const myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n    myHeaders.append(\"Content-Type\", \"application/json\");\n\n\n    const raw = JSON.stringify({ \"name\": imgName || \" \", \"alt\": imgAlt || \" \", 'image': img });\n\n    const requestOptions = {\n        method: 'POST',\n        headers: myHeaders,\n        body: raw,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/images/upload`, requestOptions)\n}\n\nexport const fetchImages = () => {\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/images`)\n}\n\nexport const fetchFilteredImages = (token, limit, skip) => {\n    const myHeaders = new Headers();\n    // myHeaders.append(\"auth-token\", token);\n    myHeaders.append(\"Content-Type\", \"application/json\");\n\n\n    const raw = JSON.stringify({\n        sortBy: {\n            dateCreated: -1\n        },\n        limit,\n        skip\n    });\n\n    const requestOptions = {\n        method: 'POST',\n        headers: myHeaders,\n        body: raw,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/images/filter`, requestOptions)\n}\n\nexport const deleteImage = (token, id) => {\n    const myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n\n    const requestOptions = {\n        method: 'DELETE',\n        headers: myHeaders,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/images/${id}`, requestOptions)\n}","import React, { createContext, useState, useContext } from 'react'\nimport { LoadingModalContext } from '../loading-modal/loading-modal.contenxt'\nimport { AuthContext } from '../auth/auth.context'\nimport { deleteImage, fetchImages, uploadImage, fetchFilteredImages } from './image.queries'\n\nexport const ImageContext = createContext({\n    isDisabled: false,\n    images: null,\n    selectedImage: null,\n    getImages: () => { },\n    handleImage: () => { },\n    handleDeleteImage: () => { },\n    setSelectedImage: () => { },\n    getNextImages: () => { },\n    getPrevImage: () => { }\n})\n\nconst ImageProvider = ({ children }) => {\n    const {\n        getMessage,\n        setIsLoading,\n        setShowModal,\n        closeModal\n    } = useContext(LoadingModalContext)\n\n    const { token } = useContext(AuthContext)\n\n    const [isDisabled, setIsDisabled] = useState(false)\n    const [images, setImages] = useState(null)\n    const [selectedImage, setSelectedImage] = useState(null)\n    const [limit, setLimit] = useState(4)\n    const [skip, setSkip] = useState(0)\n\n    const handleImage = async (img, imgName, imgAlt, setImage, close) => {\n        setShowModal(true)\n        setIsLoading(true)\n        setIsDisabled(true)\n\n        try {\n            const response = await uploadImage(token, img, imgName, imgAlt)\n            const data = await response.json()\n            console.log(data)\n\n            if (data.image) {\n                setSelectedImage(data.image)\n                setImage(data.image._id)\n                getImages()\n                close()\n            }\n\n            setShowModal(false)\n            setIsLoading(false)\n            setIsDisabled(false)\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n            setIsDisabled(false)\n        }\n    }\n\n    const getNextImages = async (addToSkip) => {\n        try {\n            if (images.length !== limit) return\n\n            const response = await fetchFilteredImages(token, limit, skip + addToSkip)\n            const data = await response.json()\n\n            if (data.images) {\n                setImages(data.images)\n\n                setSkip(skip + addToSkip)\n            }\n\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    const getPrevImage = async (addToSkip) => {\n        if (skip === 0) return\n        try {\n            const response = await fetchFilteredImages(token, limit, skip - addToSkip)\n            const data = await response.json()\n\n            if (data.images) {\n                setImages(data.images)\n\n                setSkip(skip - addToSkip)\n\n            }\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    const getImages = async () => {\n        setShowModal(true)\n        setIsLoading(true)\n\n        try {\n            // const response = await fetchImages()\n            const response = await fetchFilteredImages(token, limit, skip)\n\n            const data = await response.json()\n\n            if (data.images) {\n                setImages(data.images)\n            }\n\n            getMessage(data.message)\n            setIsLoading(false)\n            closeModal()\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    const handleDeleteImage = async (id, e) => {\n        e.preventDefault()\n        setShowModal(true)\n        setIsLoading(true)\n\n        try {\n            const respone = await deleteImage(token, id)\n            const data = await respone.json()\n\n            getMessage(data.message)\n            setIsLoading(false)\n            getImages()\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    return (\n        <ImageContext.Provider\n            value={{\n                isDisabled,\n                images,\n                selectedImage,\n                getImages,\n                handleImage,\n                handleDeleteImage,\n                setSelectedImage,\n                getNextImages,\n                getPrevImage\n            }}\n        >\n            {children}\n        </ImageContext.Provider>\n    )\n}\n\nexport default ImageProvider","import { useEffect, useState } from 'react'\n\nexport const useFetch = (path, options) => {\n    const [response, setResponse] = useState(null)\n    const [error, setError] = useState(null)\n    const [isLoading, setIsLoading] = useState(true)\n\n    useEffect(() => {\n        const fetchData = async () => {\n            try {\n                const res = await fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/${path}`, options)\n                const data = await res.json()\n\n                setResponse(data)\n                setIsLoading(false)\n            } catch (err) {\n                setError(err)\n                setIsLoading(false)\n            }\n        }\n        fetchData()\n    }, [])\n\n    return { response, isLoading, error }\n}","export const fetchProducts = (token) => {\n    const myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n\n    const requestOptions = {\n        method: 'GET',\n        headers: myHeaders,\n        redirect: 'follow'\n    };\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/products`, requestOptions)\n}\n\nexport const fetchSingleProduct = (id) => {\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/store/products/${id}`)\n}\n\nexport const fetchLenses = (token) => {\n    var myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n\n\n    var requestOptions = {\n        method: 'GET',\n        headers: myHeaders,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/lenses`, requestOptions)\n}\n\nexport const fetchSingleLenses = (id) => {\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/store/lenses/${id}`)\n}\n\n\nexport const delLense = (token, id) => {\n    var myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n\n\n    var requestOptions = {\n        method: 'DELETE',\n        headers: myHeaders,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/lenses/${id}`, requestOptions)\n\n}\n\n\nexport const postLenses = (token, newProduct) => {\n\n    const {\n        brand,\n        cylinderRange,\n        description,\n        dioptersRange,\n        name,\n        price,\n        imagePath,\n        eshop\n    } = newProduct\n\n\n    const myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n    myHeaders.append(\"Content-Type\", \"application/json\");\n\n    const raw = JSON.stringify({\n        \"brand\": brand || \" \",\n        \"cylinderRange\": cylinderRange.map(val => Number(val)),\n        \"name\": name,\n        \"price\": Number(price),\n        \"description\": description,\n        \"image\": imagePath,\n        \"dioptersRange\": dioptersRange.map(val => Number(val)),\n        \"eshop\": eshop\n    });\n\n    const requestOptions = {\n        method: 'POST',\n        headers: myHeaders,\n        body: raw,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/lenses`, requestOptions)\n}\nexport const patchLenses = (token, newProduct) => {\n\n    const {\n        _id,\n        brand,\n        cylinderRange,\n        description,\n        dioptersRange,\n        name,\n        price,\n        imagePath,\n        eshop\n    } = newProduct\n\n    const myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n    myHeaders.append(\"Content-Type\", \"application/json\");\n\n    const raw = JSON.stringify({\n        \"brand\": brand || ' ',\n        \"cylinderRange\": cylinderRange.map(val => Number(val)),\n        \"name\": name,\n        \"price\": Number(price),\n        \"description\": description,\n        \"image\": imagePath,\n        \"dioptersRange\": dioptersRange.map(val => Number(val)),\n        \"eshop\": eshop\n    });\n\n    const requestOptions = {\n        method: 'PATCH',\n        headers: myHeaders,\n        body: raw,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/lenses/${_id}`, requestOptions)\n}\n\n\nexport const postProduct = (token, newProduct) => {\n    const {\n        available,\n        brand,\n        colorCode,\n        // colorName,\n        description,\n        eanCode,\n        eshop,\n        name,\n        price,\n        specs: {\n            frameColor,\n            frameMaterial,\n            frameStyle,\n            lensColor,\n            sex,\n        },\n        type,\n        imagePath\n    } = newProduct\n\n    const myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n    myHeaders.append(\"Content-Type\", \"application/json\");\n\n    let raw = {}\n\n    console.log(available)\n\n    if (type === 4 || type === 5) {\n        raw = JSON.stringify({\n            available: available.length > 1 ? [...available, 0] : available[0],\n            brand: brand || \" \",\n            colorCode: colorCode || \" \",\n            // colorName,\n            description: description || \" \",\n            eanCode,\n            eshop,\n            name,\n            price,\n            // specs: {\n            // frameColor: frameColor || \" \",\n            // frameMaterial: frameMaterial || \" \",\n            // frameStyle: frameStyle || \" \",\n            // lensColor: lensColor || \" \",\n            // sex,\n            // },\n            type,\n            image: imagePath\n        })\n    } else {\n        raw = JSON.stringify({\n            available: available.length > 1 ? [...available, 0] : available[0],\n            brand: brand || \" \",\n            colorCode: colorCode || \" \",\n            // colorName,\n            description: description || \" \",\n            eanCode,\n            eshop,\n            name,\n            price,\n            specs: {\n                frameColor: frameColor || \" \",\n                frameMaterial: frameMaterial || \" \",\n                frameStyle: frameStyle || \" \",\n                lensColor: lensColor || \" \",\n                sex,\n            },\n            type,\n            image: imagePath\n        })\n    }\n\n    console.log(raw)\n\n    const requestOptions = {\n        method: 'POST',\n        headers: myHeaders,\n        body: raw,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/products`, requestOptions)\n}\n\nexport const patchProduct = (token, product) => {\n    const {\n        available,\n        brand,\n        colorCode,\n        // colorName,\n        description,\n        eanCode,\n        eshop,\n        name,\n        price,\n        specs: {\n            frameColor,\n            frameMaterial,\n            frameStyle,\n            lensColor,\n            sex,\n        },\n        type,\n        imagePath,\n        _id\n    } = product\n\n    const myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n    myHeaders.append(\"Content-Type\", \"application/json\");\n\n    let raw = {}\n\n    if (type === 4 || type === 5) {\n        raw = JSON.stringify({\n            available: available.length > 1 ? [...available, 0] : available[0],\n            brand: brand || \" \",\n            colorCode: colorCode || \" \",\n            // colorName,\n            description: description || \" \",\n            eanCode,\n            eshop,\n            name,\n            price,\n            // specs: {\n            // frameColor: frameColor || \" \",\n            // frameMaterial: frameMaterial || \" \",\n            // frameStyle: frameStyle || \" \",\n            // lensColor: lensColor || \" \",\n            // sex,\n            // },\n            type,\n            image: imagePath\n        })\n    } else {\n        raw = JSON.stringify({\n            available: available.length > 1 ? [...available, 0] : available[0],\n            brand: brand || \" \",\n            colorCode: colorCode || \" \",\n            // colorName,\n            description: description || \" \",\n            eanCode,\n            eshop,\n            name,\n            price,\n            specs: {\n                frameColor: frameColor || \" \",\n                frameMaterial: frameMaterial || \" \",\n                frameStyle: frameStyle || \" \",\n                lensColor: lensColor || \" \",\n                sex,\n            },\n            type,\n            image: imagePath\n        })\n    }\n\n    console.log(raw)\n\n    const requestOptions = {\n        method: 'PATCH',\n        headers: myHeaders,\n        body: raw,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/products/${_id}`, requestOptions)\n}\n\nexport const deleteProduct = (token, id) => {\n    const myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n    myHeaders.append(\"Content-Type\", \"application/json\");\n\n    const requestOptions = {\n        method: 'DELETE',\n        headers: myHeaders,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/products/${id}`, requestOptions)\n\n}","import React, { createContext, useState, useContext } from 'react'\nimport { useHistory } from 'react-router-dom'\nimport { LoadingModalContext } from '../loading-modal/loading-modal.contenxt'\nimport { AuthContext } from '../auth/auth.context'\nimport { ImageContext } from '../image/image.context'\nimport {\n    fetchProducts,\n    postProduct,\n    deleteProduct,\n    patchProduct,\n    postLenses,\n    fetchLenses,\n    patchLenses,\n    delLense,\n    fetchSingleProduct,\n    fetchSingleLenses\n    // fetchFilteredProducts\n} from './warehouse.queries'\n\nimport {\n    initProductObj,\n    initLensesObj,\n    productCategories\n} from './warehouse.utils'\n\nimport { useFetch } from '../../hooks/useFetch'\n\n\nexport const WarehouseContext = createContext({\n    formToShow: 0,\n    toggleProductForms: () => { },\n    showUpdateForm: () => { },\n    isUpdating: false,\n    activeCategoryIndex: 0,\n    categories: [],\n    getEanCode: () => { },\n    toggleDraft: () => { },\n    handleCategoryChange: () => { },\n    handleAvailableChange: () => { },\n    handleSizeChange: () => { },\n    selectImage: () => { },\n    product: null,\n    products: null,\n    handleChange: () => { },\n    handleSpecsChange: () => { },\n    resetProduct: () => { },\n    lenses: null,\n    lensesArr: null,\n    handleLensesChange: () => { },\n    handleLensesDioptersRangeChange: () => { },\n    handleLensesCylinderRangeChange: () => { },\n    totalCount: 0,\n    getProducts: () => { },\n    getSingleProduct: () => { },\n    createNewProduct: () => { },\n    handleProductDelete: () => { },\n    updateProduct: () => { },\n    createNewLenses: () => { },\n    getLenses: () => { },\n    getSigleLenses: () => { },\n    updateLenses: () => { },\n    deleteLenses: () => { },\n    lensesParameters: {},\n    handleParameterChange: () => { }\n})\n\n\nconst WarehouseProvider = ({ children }) => {\n    const { token, currentUser } = useContext(AuthContext)\n    const { setIsLoading, setShowModal, getMessage, closeModal } = useContext(LoadingModalContext)\n    const { setSelectedImage } = useContext(ImageContext)\n    const { push } = useHistory()\n\n    // ------------------------\n\n    const [totalCount, setTotalCount] = useState(0)\n    const [isUpdating, setIsUpdating] = useState(false)\n    const [activeCategoryIndex, setActiveCategoryIndex] = useState(0)\n\n    // ------------------------\n\n    const switchFormButtons = [\n        {\n            name: \"Okuliare a i.\"\n        },\n        {\n            name: \"Sklá\"\n        }\n    ]\n    const [formToShow, setFormToShow] = useState(0)\n\n    // ------------------------\n\n    const [categories] = useState(productCategories)\n    const [product, setProduct] = useState(currentUser.admin === 1 ? initProductObj : { ...initProductObj, available: [0, 0, 0, 0] })\n    const [products, setProducts] = useState(null)\n\n    // ------------------------\n\n    const [lenses, setLenses] = useState(initLensesObj)\n    const [lensesArr, setLensesArr] = useState(null)\n\n    const [lensesParameters, setLensesParameters] = useState({\n        diopters: [0, 0],\n        curvature: 0,\n        average: 0\n    })\n\n    const handleParameterChange = (e, idx) => {\n        const { name, value } = e.target\n        let arr = lensesParameters.lenses[name]\n        arr[idx] = Number(value)\n        setLensesParameters({\n            ...lensesParameters,\n            [name]: arr\n        })\n    }\n\n    // ------------------------\n    // PRODUCT ACTIONS\n    // ------------------------\n\n    const getEanCode = (code) => {\n        setProduct({\n            ...product,\n            eanCode: code\n        })\n    }\n\n    const toggleProductForms = (e, idx) => {\n        e.preventDefault()\n        setFormToShow(idx)\n    }\n\n    const toggleDraft = () => {\n        setProduct({\n            ...product,\n            eshop: !product.eshop\n        })\n        setLenses({\n            ...lenses,\n            eshop: !product.eshop\n        })\n    }\n\n    const handleChange = (e) => {\n        const { name, value } = e.target\n        setProduct({\n            ...product,\n            [name]: value\n        })\n    }\n    const handleSpecsChange = (e) => {\n        const { name, value } = e.target\n        setProduct({\n            ...product,\n            specs: {\n                ...product.specs,\n                [name]: value\n            }\n        })\n    }\n\n    const handleCategoryChange = (value) => {\n        setActiveCategoryIndex(value)\n        setProduct({\n            ...product,\n            type: value\n        })\n    }\n\n    const handleAvailableChange = (e, idx) => {\n        let arr = product.available\n        arr[idx] = Number(e.target.value)\n        setProduct({\n            ...product,\n            available: arr\n        })\n    }\n\n    const handleSizeChange = (e, idx) => {\n        let arr = product.specs.size\n        arr[idx] = Number(e.target.value)\n        setProduct({\n            ...product,\n            specs: {\n                ...product.specs,\n                size: arr\n            }\n        })\n    }\n\n    const selectImage = (imgId) => {\n        setProduct({\n            ...product,\n            imagePath: imgId\n        })\n        setLenses({\n            ...lenses,\n            imagePath: imgId\n        })\n    }\n\n    const resetProduct = () => {\n        setProduct(currentUser.admin === 1 ? initProductObj : { ...initProductObj, available: [0, 0, 0, 0] })\n        setLenses(initLensesObj)\n        setSelectedImage(null)\n        setIsUpdating(false)\n        setActiveCategoryIndex(0)\n        setFormToShow(0)\n    }\n\n    const handleLensesChange = (e) => {\n        const { name, value } = e.target\n        setLenses({\n            ...lenses,\n            [name]: value\n        })\n    }\n\n    const handleLensesCylinderRangeChange = (e, idx) => {\n        let arr = lenses.cylinderRange\n        arr[idx] = Number(e.target.value)\n        setLenses({\n            ...lenses,\n            cylinderRange: arr\n        })\n    }\n\n    const handleLensesDioptersRangeChange = (e, idx) => {\n        let arr = lenses.dioptersRange\n        arr[idx] = Number(e.target.value)\n        setLenses({\n            ...lenses,\n            dioptersRange: arr\n        })\n    }\n\n    const showUpdateForm = (formName) => {\n        setFormToShow(formName)\n        setIsUpdating(true)\n\n    }\n\n    // ------------------------\n    // START GLASSES ACTIONS\n    // ------------------------\n\n    // Get all products\n    const getProducts = async () => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        try {\n            const response = await fetchProducts(token)\n            const data = await response.json()\n\n            if (data.products) {\n                setTotalCount(totalCount + data.count)\n                setProducts(data.products)\n                setIsLoading(false)\n                closeModal()\n                return\n            }\n\n            getMessage(data.message)\n            setIsLoading(false)\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    // Get single product\n\n    const getSingleProduct = async (id) => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        try {\n            const response = await fetchSingleProduct(id)\n            const data = await response.json()\n\n            if (data.error) {\n                getMessage(data.message)\n                setIsLoading(false)\n                return\n            }\n\n            if (data.product) {\n                if (currentUser.admin === 1) {\n                    setProduct({\n                        ...product,\n                        ...data.product,\n                        specs: {\n                            ...product.specs,\n                            ...data.product.specs\n                        },\n                        imagePath: data.product.image._id,\n                        available: [data.product.available[currentUser.premises - 1]]\n                    })\n                } else {\n                    setProduct({\n                        ...product,\n                        ...data.product,\n                        specs: {\n                            ...product.specs,\n                            ...data.product.specs\n                        },\n                        imagePath: data.product.image._id,\n                        available: data.product.available.filter((num, idx) => idx !== 4)\n\n                    })\n                }\n                setActiveCategoryIndex(data.product.type)\n                setSelectedImage(data.product.image)\n                setIsUpdating(true)\n            }\n\n            closeModal()\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n\n    }\n\n    // Create Glasses\n    const createNewProduct = async (productToAdd) => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        try {\n            const response = await postProduct(token, productToAdd)\n            const data = await response.json()\n\n            console.log(data)\n\n            if (data.error) {\n                getMessage(data.message)\n                setIsLoading(false)\n                return\n            }\n\n            setIsLoading(false)\n            getMessage(data.success)\n            resetProduct()\n            push('/dashboard/obchod')\n            getProducts()\n            closeModal()\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    // Update Glasses\n    const updateProduct = async (productToUpdate) => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        try {\n            const response = await patchProduct(token, productToUpdate)\n            const data = await response.json()\n            console.log(data)\n\n            if (data.error) {\n                getMessage(data.message)\n                setIsLoading(false)\n                return\n            }\n\n            getMessage(data.message)\n            setIsLoading(false)\n            push('/dashboard/obchod')\n            getProducts()\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    // Delete glasses\n    const handleProductDelete = async (id) => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        try {\n            const response = await deleteProduct(token, id)\n            const data = await response.json()\n\n            setIsLoading(false)\n            getMessage(data.message)\n            getProducts()\n            push('/dashboard/obchod')\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    // ------------------------\n    // END GLASSES ACTIONS\n    // ------------------------\n\n\n    // ------------------------\n    // START LENSES ACTIONS\n    // ------------------------\n\n    // Get all lenses\n    const getLenses = async () => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        try {\n            const response = await fetchLenses(token)\n            const data = await response.json()\n\n            if (data.lenses) {\n                setTotalCount(totalCount + data.count)\n                setLensesArr(data.lenses)\n                setIsLoading(false)\n                closeModal()\n                return\n            }\n\n            setIsLoading(false)\n            getMessage(data.message)\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    // Get single lenses\n    const getSigleLenses = async (id) => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        try {\n            const response = await fetchSingleLenses(id)\n            const data = await response.json()\n\n            console.log(data)\n\n\n            if (data.error) {\n                getMessage(data.message)\n                setIsLoading(false)\n                return\n            }\n\n            if (data.lenses) {\n                setLenses({\n                    ...lenses,\n                    ...data.lenses,\n                    imagePath: data.lenses.image._id\n                })\n                setSelectedImage(data.lenses.image)\n                setIsUpdating(true)\n            }\n\n            closeModal()\n\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    // Create Lense\n    const createNewLenses = async (productToAdd) => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        try {\n            const response = await postLenses(token, productToAdd)\n            const data = await response.json()\n\n            if (data) {\n                setIsLoading(false)\n                getMessage(data.message)\n                push('/dashboard/obchod')\n                getLenses()\n                closeModal()\n            }\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    // Update Lense\n    const updateLenses = async (productToAdd) => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        try {\n            const response = await patchLenses(token, productToAdd)\n            const data = await response.json()\n\n            console.log(data)\n\n            if (data) {\n                setIsLoading(false)\n                getMessage(data.message)\n                push('/dashboard/obchod')\n                getLenses()\n            }\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    // Delete Lense\n    const deleteLenses = async (id) => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        try {\n            const response = await delLense(token, id)\n            const data = await response.json()\n\n            if (data.error) {\n                setIsLoading(false)\n                getMessage(data.message)\n            }\n\n\n            getLenses()\n            setIsLoading(false)\n            getMessage(data.message)\n            push('/dashboard/obchod')\n            closeModal()\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    // ------------------------\n    // END LENSES ACTIONS\n    // ------------------------\n\n    console.log(product)\n\n\n    return (\n        <WarehouseContext.Provider\n            value={{\n                switchFormButtons,\n                formToShow,\n                toggleProductForms,\n                showUpdateForm,\n                isUpdating,\n                activeCategoryIndex,\n                categories,\n                getEanCode,\n                toggleDraft,\n                handleCategoryChange,\n                handleAvailableChange,\n                handleSizeChange,\n                selectImage,\n                product,\n                products,\n                handleChange,\n                handleSpecsChange,\n                resetProduct,\n                lenses,\n                lensesArr,\n                handleLensesChange,\n                handleLensesDioptersRangeChange,\n                handleLensesCylinderRangeChange,\n                totalCount,\n                getProducts,\n                getSingleProduct,\n                createNewProduct,\n                handleProductDelete,\n                updateProduct,\n                createNewLenses,\n                getLenses,\n                getSigleLenses,\n                updateLenses,\n                deleteLenses,\n                lensesParameters,\n                handleParameterChange,\n            }}\n        >\n            {children}\n        </WarehouseContext.Provider>\n    )\n}\n\nexport default WarehouseProvider"],"sourceRoot":""}