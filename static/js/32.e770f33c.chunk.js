(this.webpackJsonpimooptik=this.webpackJsonpimooptik||[]).push([[32],{75:function(e,t,r){"use strict";r.r(t),r.d(t,"OrdersContext",(function(){return f}));var n=r(2),a=r(13),o=r(8),c=r.n(o),s=r(12),i=r(5),u=r(1),p=r(3),d=r(20),l=r(19),f=Object(u.createContext)({orders:null,getPDF:function(){},getOrders:function(){},createOrder:function(){},updateOrder:function(){},finishOrder:function(){},cancelOrder:function(){}});t.default=function(e){var t=e.children,r=Object(p.h)().push,o=Object(u.useContext)(l.a),h=o.setIsLoading,b=o.setShowModal,v=o.getMessage,k=o.closeModal,j=Object(u.useContext)(d.a).token,m=Object(u.useState)(null),O=Object(i.a)(m,2),x=O[0],w=O[1],g=new Headers;g.append("auth-token",j),g.append("Content-Type","application/json");var S=function(){var e=Object(s.a)(c.a.mark((function e(){var t,r,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),b(!0),t={method:"GET",headers:g,redirect:"follow"},e.prev=3,e.next=6,fetch("".concat("https://imooptik-backend-jbuievsjdq-ew.a.run.app","/api/admin/orders"),t);case 6:return r=e.sent,e.next=9,r.json();case 9:if(!(n=e.sent).orders){e.next=14;break}return w(n.orders),k(),e.abrupt("return");case 14:v(n.messageSK),h(!1),e.next=23;break;case 18:e.prev=18,e.t0=e.catch(3),console.log(e.t0),v("Nieco sa pokazilo"),h(!1);case 23:case"end":return e.stop()}}),e,null,[[3,18]])})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(s.a)(c.a.mark((function e(t){var r,n,o,s,i=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>1&&void 0!==i[1]&&i[1],h(!0),b(!0),n=Object(a.a)(Object(a.a)({method:"POST",headers:g},r&&{body:JSON.stringify({black:!0})}),{},{redirect:"follow"}),e.prev=4,e.next=7,fetch("".concat("https://imooptik-backend-jbuievsjdq-ew.a.run.app","/api/admin/orders/").concat(t,"/createPdf"),n);case 7:return o=e.sent,e.next=10,o.json();case 10:(s=e.sent).filename&&(h(!1),v(s.messageSK),setTimeout((function(){var e=window.open("".concat("https://imooptik-backend-jbuievsjdq-ew.a.run.app","/uploads/pdf/").concat(s.filename),"_blank","noreferrer noopener");null===e||void 0===e||e.focus()}),100)),v(s.messageSK),h(!1),e.next=21;break;case 16:e.prev=16,e.t0=e.catch(4),console.log(e.t0),v("Nieco sa pokazilo"),h(!1);case 21:case"end":return e.stop()}}),e,null,[[4,16]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,o,s,i,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),b(!0),n=Object(a.a)({},t),o=JSON.stringify(n),s={method:"POST",headers:g,body:o,redirect:"follow"},e.prev=5,e.next=8,fetch("".concat("https://imooptik-backend-jbuievsjdq-ew.a.run.app","/api/admin/orders"),s);case 8:return i=e.sent,e.next=11,i.json();case 11:if(!(u=e.sent).error){e.next=16;break}return v(u.messageSK),h(!1),e.abrupt("return");case 16:u.order&&(S(),k(),r("/dashboard/objednavky"),setTimeout((function(){y(u.order._id)}),100)),e.next=24;break;case 19:e.prev=19,e.t0=e.catch(5),console.log(e.t0),v("Nieco sa pokazilo"),h(!1);case 24:case"end":return e.stop()}}),e,null,[[5,19]])})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(s.a)(c.a.mark((function e(t,n){var o,s,i,u,p;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),b(!0),o=Object(a.a)({},t),s=JSON.stringify(o),i={method:"PATCH",headers:g,body:s,redirect:"follow"},e.prev=5,e.next=8,fetch("".concat("https://imooptik-backend-jbuievsjdq-ew.a.run.app","/api/admin/orders/").concat(n),i);case 8:return u=e.sent,e.next=11,u.json();case 11:(p=e.sent).order&&(S(),k(),r("/dashboard/objednavky")),v(p.messageSK),h(!1),e.next=22;break;case 17:e.prev=17,e.t0=e.catch(5),console.log(e.t0),v("Nieco sa pokazilo"),h(!1);case 22:case"end":return e.stop()}}),e,null,[[5,17]])})));return function(t,r){return e.apply(this,arguments)}}(),P=function(){var e=Object(s.a)(c.a.mark((function e(t,r){var n,a,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),b(!0),n={method:"POST",headers:g,redirect:"follow"},e.prev=3,e.next=6,fetch("".concat("https://imooptik-backend-jbuievsjdq-ew.a.run.app","/api/admin/orders/").concat(t,"/fulfill"),n);case 6:return a=e.sent,e.next=9,a.json();case 9:if(!(o=e.sent).order){e.next=14;break}return r(),k(),e.abrupt("return");case 14:v(o.messageSK),h(!1),e.next=23;break;case 18:e.prev=18,e.t0=e.catch(3),console.log(e.t0),v("Nieco sa pokazilo"),h(!1);case 23:case"end":return e.stop()}}),e,null,[[3,18]])})));return function(t,r){return e.apply(this,arguments)}}(),q=function(){var e=Object(s.a)(c.a.mark((function e(t,r){var n,a,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),b(!0),n={method:"POST",headers:g,redirect:"follow"},e.prev=3,e.next=6,fetch("".concat("https://imooptik-backend-jbuievsjdq-ew.a.run.app","/api/admin/orders/").concat(t,"/cancel"),n);case 6:return a=e.sent,e.next=9,a.json();case 9:if(!(o=e.sent).order){e.next=13;break}return setTimeout((function(){r(),k()}),100),e.abrupt("return");case 13:v(o.messageSK),h(!1),e.next=22;break;case 17:e.prev=17,e.t0=e.catch(3),console.log(e.t0),v("Nieco sa pokazilo"),h(!1);case 22:case"end":return e.stop()}}),e,null,[[3,17]])})));return function(t,r){return e.apply(this,arguments)}}();return Object(n.jsx)(f.Provider,{value:{orders:x,getPDF:y,getOrders:S,createOrder:T,updateOrder:N,finishOrder:P,cancelOrder:q},children:t})}}}]);
//# sourceMappingURL=32.e770f33c.chunk.js.map