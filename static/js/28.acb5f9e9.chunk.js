(this.webpackJsonpimooptik=this.webpackJsonpimooptik||[]).push([[28],{93:function(e,t,n){"use strict";n.r(t),n.d(t,"AnalyticsContext",(function(){return l})),n.d(t,"useAnalytics",(function(){return d}));var a=n(2),r=n(8),o=n.n(r),s=n(12),c=n(5),i=n(1),u=n(20),p=n(19),l=Object(i.createContext)({stats:null,getAnalytics:function(){},generateReport:function(){},updateRegistry:function(){}}),d=function(){return Object(i.useContext)(l)};t.default=function(e){var t=e.children,n=Object(i.useContext)(u.a).token,r=Object(i.useContext)(p.a),d=r.closeModal,f=r.getMessage,h=r.setShowModal,b=r.setIsLoading,v=Object(i.useState)(null),k=Object(c.a)(v,2),j=k[0],m=k[1],g=new Headers;g.append("auth-token",n),g.append("Content-Type","application/json");var x=function(){var e=Object(s.a)(o.a.mark((function e(t){var n,a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),b(!0),n={method:"GET",headers:g,redirect:"follow"},e.prev=3,e.next=6,fetch("".concat("https://imooptik-backend-jbuievsjdq-ew.a.run.app","/api/admin/stats?timespan=").concat(t),n);case 6:return a=e.sent,e.next=9,a.json();case 9:if(!(r=e.sent).stats){e.next=14;break}return m(r.stats),d(),e.abrupt("return");case 14:f(r.messageSK),b(!1),e.next=23;break;case 18:e.prev=18,e.t0=e.catch(3),console.log(e.t0),f("Nieco sa pokazilo"),b(!1);case 23:case"end":return e.stop()}}),e,null,[[3,18]])})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(s.a)(o.a.mark((function e(t){var n,a,r,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),b(!0),n=JSON.stringify(t),a={method:"POST",headers:g,body:n,redirect:"follow"},e.prev=4,e.next=7,fetch("".concat("https://imooptik-backend-jbuievsjdq-ew.a.run.app","/api/admin/stats/generateReport"),a);case 7:return r=e.sent,e.next=10,r.json();case 10:(s=e.sent).name&&setTimeout((function(){var e=window.open("".concat("https://imooptik-backend-jbuievsjdq-ew.a.run.app","/uploads/excel/").concat(s.name),"_blank","noreferrer noopener");null===e||void 0===e||e.focus()}),2e3),f(s.messageSK),b(!1),e.next=21;break;case 16:e.prev=16,e.t0=e.catch(4),console.log(e.t0),f("Nieo sa pokazilo"),b(!1);case 21:case"end":return e.stop()}}),e,null,[[4,16]])})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(s.a)(o.a.mark((function e(t){var n,a,r,s,c,i=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:function(){},h(!0),b(!0),a=JSON.stringify(t),r={method:"POST",headers:g,body:a,redirect:"follow"},e.prev=5,e.next=8,fetch("".concat("https://imooptik-backend-jbuievsjdq-ew.a.run.app","/api/admin/stats/modifyRegister"),r);case 8:return s=e.sent,e.next=11,s.json();case 11:c=e.sent,f(c.messageSK),n(c),b(!1),e.next=22;break;case 17:e.prev=17,e.t0=e.catch(5),console.log(e.t0),f("Nie\u010do sa pokazilo"),b(!1);case 22:case"end":return e.stop()}}),e,null,[[5,17]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)(l.Provider,{value:{stats:j,getAnalytics:x,generateReport:w,updateRegistry:y},children:t})}}}]);
//# sourceMappingURL=28.acb5f9e9.chunk.js.map