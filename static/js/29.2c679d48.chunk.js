(this.webpackJsonpimooptik=this.webpackJsonpimooptik||[]).push([[29],{90:function(e,t,n){"use strict";n.r(t),n.d(t,"BlogContext",(function(){return b}));var a=n(2),o=n(8),r=n.n(o),s=n(12),c=n(5),u=n(1),i=n(20),p=n(19),l=function(e){return fetch("".concat("https://coronashop.store:8080","/api/blogs/").concat(e))},f=function(e,t,n,a,o,r){var s=new Headers;s.append("auth-token",e),s.append("Content-Type","application/json");var c={method:"POST",headers:s,body:JSON.stringify({name:t,description:n,draft:a,html:o,image:r}),redirect:"follow"};return fetch("".concat("https://coronashop.store:8080","/api/admin/blogs"),c)},h=function(e,t,n,a,o,r,s){var c=new Headers;c.append("auth-token",e),c.append("Content-Type","application/json");var u={method:"PATCH",headers:c,body:JSON.stringify({name:t,description:n,draft:a,html:o,image:r}),redirect:"follow"};return fetch("".concat("https://coronashop.store:8080","/api/admin/blogs/").concat(s),u)},d=function(e,t){var n=new Headers;n.append("auth-token",e),n.append("Content-Type","application/json");var a={method:"DELETE",headers:n,redirect:"follow"};return fetch("".concat("https://coronashop.store:8080","/api/admin/blogs/").concat(t),a)},b=Object(u.createContext)({posts:null,post:null,postsCount:0,getPosts:function(){},createPost:function(){},getPost:function(){},handlePostUpdate:function(){},handlePostDelete:function(){},resetBlog:function(){}});t.default=function(e){var t=e.children,n=Object(u.useContext)(i.a).token,o=Object(u.useContext)(p.a),v=o.getMessage,g=o.setIsLoading,x=o.setShowModal,j=Object(u.useState)(null),m=Object(c.a)(j,2),k=m[0],w=m[1],O=Object(u.useState)(null),P=Object(c.a)(O,2),y=P[0],C=P[1],S=Object(u.useState)(0),N=Object(c.a)(S,2),T=N[0],z=N[1],H=function(){var e=Object(s.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),g(!0),e.next=4,fetch("".concat("https://coronashop.store:8080","/api/blogs"));case 4:return t=e.sent,e.next=7,t.json();case 7:n=e.sent,w(n.blogs),z(n.count),x(!1),g(!1);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=Object(s.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),g(!0),e.prev=2,e.next=5,l(t);case 5:return n=e.sent,e.next=8,n.json();case 8:if(!(a=e.sent).blog){e.next=14;break}return C(a.blog),g(!1),v(a.message),e.abrupt("return");case 14:g(!1),v(a.message),e.next=23;break;case 18:e.prev=18,e.t0=e.catch(2),console.log(e.t0),v("Nieco sa pokazilo"),g(!1);case 23:x(!1),g(!1);case 25:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(s.a)(r.a.mark((function e(t,a,o,s,c){var u,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),g(!0),e.prev=2,e.next=5,f(n,a,o,s,c,t);case 5:return u=e.sent,e.next=8,u.json();case 8:i=e.sent,v(i.message),g(!1),H(),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(2),console.log(e.t0),v("Nieco sa pokazilo"),g(!1);case 19:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t,n,a,o,r){return e.apply(this,arguments)}}(),D=function(){var e=Object(s.a)(r.a.mark((function e(t,a,o,s,c,u){var i,p;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),g(!0),e.prev=2,e.next=5,h(n,t,a,o,s,c,u);case 5:return i=e.sent,e.next=8,i.json();case 8:p=e.sent,v(p.message),g(!1),H(),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(2),console.log(e.t0),v("Nieco sa pokazilo"),g(!1);case 19:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t,n,a,o,r,s){return e.apply(this,arguments)}}(),E=function(){var e=Object(s.a)(r.a.mark((function e(t){var a,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),g(!0),e.prev=2,e.next=5,d(n,t);case 5:return a=e.sent,e.next=8,a.json();case 8:o=e.sent,v(o.message),g(!1),H(),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(2),console.log(e.t0),v("Nieco sa pokazilo"),g(!1);case 19:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)(b.Provider,{value:{posts:k,post:y,postsCount:T,getPosts:H,createPost:B,getPost:J,handlePostUpdate:D,handlePostDelete:E,resetBlog:function(){C(null)}},children:t})}}}]);
//# sourceMappingURL=29.2c679d48.chunk.js.map