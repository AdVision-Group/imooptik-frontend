(this.webpackJsonpimooptik=this.webpackJsonpimooptik||[]).push([[13],{228:function(n,e,t){"use strict";t.r(e);var r=t(2),c=t(10),i=t(1),o=t.n(i),a=t(3),l=t(19),d=t(18),u=t(59),s=t(54),b=t(32),j=t(5),v=t(6),f=t(28);function m(){var n=Object(j.a)(["\n    margin-top: 2rem;\n    font-size: 1.4rem;\n    display: block;\n    margin-left: 2rem;;\n"]);return m=function(){return n},n}function O(){var n=Object(j.a)(["\n    margin-top: 2rem;\n    font-size: 1.4rem;\n    display: block;\n    background-color: ",";\n    font-weight: bolder;\n    color: ",";\n"]);return O=function(){return n},n}function h(){var n=Object(j.a)(["\n    display: flex;\n"]);return h=function(){return n},n}function g(){var n=Object(j.a)(["\n    padding: 2rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n\n    &:not(:last-child) {\n        /* margin-right: 2rem; */\n    }\n\n    h3  { \n        font-size: 1.8rem;\n    }\n\n    p {\n        font-size: 1.4rem;\n        opacity: .83;\n\n        span {\n            font-weight: bolder;\n        }\n    }\n"]);return g=function(){return n},n}var p=v.c.div(g()),x=v.c.div(h()),k=Object(v.c)(f.a)(O(),(function(n){return n.isActive?"var(--primary-color)":"var(--body-background-primary-color)"}),(function(n){return n.isActive?"var(--button-font-color)":"var(--primary-color)"})),y=Object(v.c)(f.a)(m()),w=function(n){var e=n.calendar,t=void 0===e?{}:e,c=n.selectedCalendar,i=void 0===c?null:c,o=n.handleShowUpClick,a=void 0===o?function(){}:o,l=n.handleUpdateClick,d=void 0===l?function(){}:l;return Object(r.jsxs)(p,{children:[Object(r.jsx)("h3",{children:null===t||void 0===t?void 0:t.name}),Object(r.jsxs)("p",{children:["Interval medzi vy\u0161etreniami: ",Object(r.jsxs)("span",{children:[null===t||void 0===t?void 0:t.interval,"min"]})]}),Object(r.jsxs)("p",{children:["Po\u010det min\xfat pred rezerv\xe1ciou: ",Object(r.jsxs)("span",{children:[null===t||void 0===t?void 0:t.allowMinutesBefore,"min"]})]}),Object(r.jsxs)("p",{children:["Ko\u013eko dn\xed dopredu sa da objedna\u0165: ",Object(r.jsx)("span",{children:null===t||void 0===t?void 0:t.daysIntoFuture})]}),Object(r.jsxs)(x,{children:[Object(r.jsx)(k,{isActive:i===(null===t||void 0===t?void 0:t._id),onClick:a,children:"Zobrazi\u0165"}),Object(r.jsx)(y,{onClick:d,children:"Upravi\u0165"})]})]})},C=t(7),D=t.n(C),z=t(12),B=t(55),S=t(30),E=t(53),A=function(n,e){if(NaN!==Number(n)){var t=n*e,r=Math.floor(t/60);return I(r,t%60)}},I=function(n,e){return n<10&&0===e?"0".concat(n,"/0").concat(e):n<10?"0".concat(n,"/").concat(e):0===e?"".concat(n,"/0").concat(e):"".concat(n,"/").concat(e)},N=function(n){if(n)return n.replace("/",":")},M=function(n,e,t,r,c){if(!(null===n||void 0===n?void 0:n.booked))return null;var i=Object.keys(null===n||void 0===n?void 0:n.booked).find((function(n){var e=n.split("/").map((function(n){return Number(n)}));if(e[0]===t&&e[1]===r+1&&e[2]===c)return n}));if(!i)return null;var o=A(e,n.interval),a=n.booked[i].find((function(n){return n===o}));return a?{time:a,date:n.booked[i],dueDate:"".concat(a,":").concat(i)}:null},P=Object(i.createContext)({getDayData:function(){},refetchWeekCalendar:function(){},cancelUserBooking:function(){}}),T=function(n){var e=n.children,t=n.calendar,o=n.month,a=n.year,u=(Object(S.a)(n,["children","calendar","month","year"]),Object(E.b)("api/booking/calendars",t,!t)),s=u.response,b=u.isLoading,j=u.refetch,v=Object(i.useContext)(l.a),f=(v.closeModal,v.setIsLoading),m=v.setShowModal,O=v.getMessage,h=Object(i.useContext)(d.a).token,g=Object(i.useState)(null),p=Object(c.a)(g,2),x=p[0],k=p[1],y=Object(i.useState)(0),w=Object(c.a)(y,2),C=w[0],I=w[1],N=new Headers;N.append("auth-token",h),N.append("Content-Type","application/json");var T=function(){var n=Object(z.a)(D.a.mark((function n(e){var t,r,c;return D.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return m(!0),f(!0),t={method:"POST",headers:N,redirect:"follow"},n.prev=3,n.next=6,fetch("".concat("http://195.110.58.166:8080","/api/booking/userBookings/").concat(e,"/cancel"),t);case 6:return r=n.sent,n.next=9,r.json();case 9:c=n.sent,console.log(c),O(c.messageSK),f(!1),n.next=20;break;case 15:n.prev=15,n.t0=n.catch(3),console.log(n.t0),O("Nie\u010do sa pokazilo"),f(!1);case 20:case"end":return n.stop()}}),n,null,[[3,15]])})));return function(e){return n.apply(this,arguments)}}();return Object(i.useEffect)((function(){b||(k(s.calendar),30===s.calendar.interval&&I(48),60===s.calendar.interval&&I(24))}),[b]),Object(i.useEffect)((function(){return function(){k(null)}}),[]),Object(r.jsx)(P.Provider,{value:{getDayData:function(n,e){if(x)return Object(B.a)(Array(C)).map((function(t,r){var c,i,l=null===(c=x.startTimes[e])||void 0===c?void 0:c.split("/").map((function(n){return Number(n)})),d=null===(i=x.endTimes[e])||void 0===i?void 0:i.split("/").map((function(n){return Number(n)})),u=A(r,x.interval),s=u.split("/").map((function(n){return Number(n)}));if(!(l[0]>s[0])&&!(d[0]<s[0])&&"X"!==x.startTimes[e]&&(d[0]!==s[0]||d[1]===s[1]||30!==s[1]))return{id:r,time:u,userBookings:M(x,r,n,o,a)}})).filter((function(n){return void 0!==n}))},refetchWeekCalendar:j,cancelUserBooking:T},children:e})},U=t(67);function H(){var n=Object(j.a)(["\n    height: 8rem;\n    display: flex;\n    justify-content: space-between;\n    align-items: flex-end;\n    border: 1px solid rgba(0,0,0,.1);\n    padding: .6rem 1rem;\n\n    transition: all .15s;\n\n    p {\n        span {\n            width: 3rem;\n            height: 3rem;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            border-radius: 50%;\n            background-color: var(--body-background-primary-color);\n            color: var(--primary-color);\n            font-weight: bolder;\n            font-size: 1.5rem;\n        }\n    }\n\n    ",";\n\n\n\n"]);return H=function(){return n},n}function F(){var n=Object(j.a)(["\n    cursor: default;\n    height: 8rem;\n    background-color: var(--color-black);\n    color: var(--table-head-color);\n    display: flex;\n    align-items:center;\n    justify-content:center;\n    font-weight: 700;\n"]);return F=function(){return n},n}function L(){var n=Object(j.a)(["\n    width: 100%;\n    display: grid;\n    grid-template-columns: repeat(7, 1fr);\n    border: 1px solid rgba(0,0,0,.1);\n    min-width: 55rem;\n"]);return L=function(){return n},n}var _=v.c.div(L()),K=v.c.div(F()),V=v.c.div(H(),(function(n){return n.faded?"opacity: .6":"    \n        cursor: pointer;\n        &:hover {\n        background-color: var(--body-background-primary-color);\n        }\n    "})),R=function(n){var e=n.calendar,t=n.month,o=n.year,a=n.handleCalendarBlockClick;(new Date).setDate(1);var l=new Date(o,t+1,0).getDate(),d=new Date(o,t,0).getDate(),u=new Date(o,t,0).getDay(),s=7-new Date(o,t+1,0).getDay(),b=Object(E.b)("api/booking/calendars",e,!e),j=b.response,v=b.isLoading,f=b.refetch,m=Object(i.useState)([]),O=Object(c.a)(m,2),h=O[0],g=O[1],p=Object(i.useState)([]),x=Object(c.a)(p,2),k=x[0],y=x[1],w=Object(i.useState)([]),C=Object(c.a)(w,2),D=C[0],z=C[1];return Object(i.useEffect)((function(){f()}),[t]),Object(i.useEffect)((function(){e&&f()}),[e]),Object(i.useEffect)((function(){if(!v&&(null===j||void 0===j?void 0:j.calendar)){var n=Object(U.n)(u),e=Object(U.l)(l),r=Object(U.m)(s),c=Object(U.k)(e,j.calendar,t,o);g(n),y(c),z(r)}}),[v]),Object(r.jsxs)(_,{children:[U.c.map((function(n,e){return Object(r.jsx)(K,{children:n},e)})),h.map((function(n,e){return Object(r.jsxs)(V,{faded:!0,children:[Object(r.jsx)("p",{}),Object(r.jsx)("p",{children:d-e})]},e)})),k.map((function(n,e){var t=n.dayNumber,c=n.bookings;return Object(r.jsxs)(V,{onClick:function(){return a(n)},children:[Object(r.jsx)("p",{children:c&&Object(r.jsx)("span",{children:c.length})}),Object(r.jsx)("p",{children:t})]},e)})),D.map((function(n,e){return Object(r.jsxs)(V,{faded:!0,children:[Object(r.jsx)("p",{}),Object(r.jsx)("p",{children:e+1})]},e)}))]})},W=t(21),Y=t(69),q=t(20),G=t.n(q),Z=t(34),J=t(56);function Q(){var n=Object(j.a)(["\n    "," {\n        margin-bottom: 3rem;\n    }\n"]);return Q=function(){return n},n}function X(){var n=Object(j.a)(["\n    display: block;\n    background-color: var(--primary-color);\n    font-weight: bolder;\n"]);return X=function(){return n},n}function $(){var n=Object(j.a)(["\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    margin-bottom: 2rem;\n"]);return $=function(){return n},n}function nn(){var n=Object(j.a)(["\n    padding: 1rem;\n    background-color: var(--body-background-primary-color);\n\n    h3 {\n        font-size: 1.3rem;\n        font-weight: lighter;\n        opacity: .8;\n        margin-bottom: .5rem;\n    }\n\n    p {\n        font-size: 1.8rem;\n        margin-left: 2rem;\n    }\n"]);return nn=function(){return n},n}function en(){var n=Object(j.a)(["\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    align-items: start;\n    grid-gap: 3rem;\n    margin-bottom: 3rem;\n\n"]);return en=function(){return n},n}function tn(){var n=Object(j.a)(["\n    width: 100%;\n    height: 100%;\n\n    position: fixed;\n    left: 0;\n    right: 0;\n    z-index: 99999;\n\n    border: none;\n    outline: none;\n    opacity: 0;\n\n    &:focus {\n        outline: none\n    }\n"]);return tn=function(){return n},n}function rn(){var n=Object(j.a)(["\n    width:100%;\n    max-width: 65rem;\n    max-height: 60rem;\n\n    overflow-y: scroll;\n\n    padding: 2rem;\n    border-radius: .5rem;\n    background-color: var(--background-primary-color);\n    color: var(--primary-text-color);\n\n    position: relative;\n    z-index: 999999; \n\n    h2{ \n        margin-bottom: 2rem;\n        /* text-align: center; */\n    }\n\n    ::-webkit-scrollbar {\n        width: 10px;\n    }\n\n    /* Track */\n    ::-webkit-scrollbar-track {\n        background:  var(--background-primary-color);\n    }\n\n    /* Handle */\n    ::-webkit-scrollbar-thumb {\n        background: var(--primary-color);\n    }\n\n    /* Handle on hover */\n    ::-webkit-scrollbar-thumb:hover {\n        background: var(--primary-color);\n    }\n"]);return rn=function(){return n},n}function cn(){var n=Object(j.a)(["\n    position: fixed;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    z-index: 99999;\n\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    background-color: rgba(0,0,0,0.3);\n"]);return cn=function(){return n},n}var on=v.c.div(cn()),an=v.c.div(rn()),ln=v.c.button(tn()),dn=v.c.div(en()),un=v.c.div(nn()),sn=v.c.div($()),bn=Object(v.c)(f.a)(X()),jn=v.c.div(Q(),un),vn=function(n){var e,t,o,a,l=n.close,d=n.userBooking,u=n.calendarId,s=n.cancelUserBooking,b=Object(E.c)("api/booking/calendars/".concat(u,"/dayInfo"),{date:null===d||void 0===d||null===(e=d.userBookings)||void 0===e?void 0:e.dueDate.split(":")[1]},!d),j=b.response,v=b.isLoading,f=Object(i.useState)(null),m=Object(c.a)(f,2),O=m[0],h=m[1];return Object(i.useEffect)((function(){if(!v&&j){var n=j.userBookings.find((function(n){return n.dueTime===d.userBookings.dueDate}));console.log(n),h(n)}}),[v]),console.log(O),G.a.createPortal(Object(r.jsxs)(on,{children:[Object(r.jsx)(ln,{onClick:l}),Object(r.jsxs)(an,{children:[!O&&Object(r.jsx)(Z.a,{}),Object(r.jsx)("h2",{children:null===O||void 0===O||null===(t=O.booking)||void 0===t?void 0:t.name}),Object(r.jsxs)(sn,{children:[Object(r.jsx)("h3",{children:"Inform\xe1cie:"}),Object(r.jsx)(bn,{onClick:function(){return s(O._id)},children:"Zru\u0161i\u0165 rezerv\xe1ciu"})]}),Object(r.jsxs)(dn,{children:[Object(r.jsxs)(un,{children:[Object(r.jsx)("h3",{children:"Meno a priezvisko"}),Object(r.jsx)("p",{children:null===O||void 0===O?void 0:O.name})]}),Object(r.jsxs)(un,{children:[Object(r.jsx)("h3",{children:"Prevadzka"}),Object(r.jsx)("p",{children:J.d[null===O||void 0===O||null===(o=O.booking)||void 0===o?void 0:o.premises]})]}),Object(r.jsxs)(un,{children:[Object(r.jsx)("h3",{children:"Tel. \u010d\xedslo"}),Object(r.jsx)("p",{children:null===O||void 0===O?void 0:O.phone})]}),Object(r.jsxs)(un,{children:[Object(r.jsx)("h3",{children:"E-mail"}),Object(r.jsx)("p",{children:null===O||void 0===O?void 0:O.email})]}),Object(r.jsxs)(un,{children:[Object(r.jsx)("h3",{children:"D\xe1tum"}),Object(r.jsx)("p",{children:null===O||void 0===O?void 0:O.dueTime})]}),Object(r.jsxs)(un,{children:[Object(r.jsx)("h3",{children:"Zru\u0161en\xe9"}),Object(r.jsx)("p",{children:(null===O||void 0===O?void 0:O.cancelled)?"Ano":"Nie"})]})]}),Object(r.jsxs)(jn,{children:[Object(r.jsxs)(un,{children:[Object(r.jsx)("h3",{children:"Pozn\xe1mka"}),(null===O||void 0===O?void 0:O.note)?Object(r.jsx)("p",{children:null===O||void 0===O?void 0:O.note}):Object(r.jsx)("p",{children:"\u017diadn\xe1 pozn\xe1mka"})]}),Object(r.jsxs)(un,{children:[Object(r.jsx)("h3",{children:"Popis"}),Object(r.jsx)("p",{children:null===O||void 0===O||null===(a=O.booking)||void 0===a?void 0:a.description})]})]})]})]}),document.getElementById("portal"))},fn=t(31),mn=t(52),On=t(63),hn=t(60);function gn(){var n=Object(j.a)(["\n    display: grid;\n    grid-template-columns: 2fr 1fr .4rem 1fr;\n    grid-gap: 1rem;\n\n    p {\n        align-self: center;\n    }\n"]);return gn=function(){return n},n}function pn(){var n=Object(j.a)(["\n    margin-top: 2rem;\n    /* min-width: 16.5rem; */\n    width: 100%;\n    background-color: var(--input-background-color);\n    color: var(--input-color);\n    border: none;\n    padding: .8rem .5rem .8rem .5rem;\n    font-size: inherit;\n    font-family: inherit;\n    display: block;\n\n    margin-bottom: 2rem;\n"]);return pn=function(){return n},n}function xn(){var n=Object(j.a)(["\n    padding: 2rem;\n    text-align: center;\n"]);return xn=function(){return n},n}function kn(){var n=Object(j.a)(["\n    display: grid;\n    grid-template-columns: 1fr 1fr 1fr;\n\n    cursor: pointer;\n    align-content: center;\n    margin-bottom: 1rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n\n    transition: all .3s ease-out;\n\n    &:hover {\n        background-color: var(--primary-color); \n        font-weight: bolder;\n        color: var(--button-font-color);\n    }\n\n"]);return kn=function(){return n},n}function yn(){var n=Object(j.a)(["\n    display: grid;\n    grid-template-columns: 1fr 1fr 1fr;\n"]);return yn=function(){return n},n}function wn(){var n=Object(j.a)(["\n    p {\n        text-align: center;\n        opacity: .6;\n    }\n        margin-bottom: 3rem;\n"]);return wn=function(){return n},n}function Cn(){var n=Object(j.a)(["\n    button {\n        margin-top: 2rem;\n    }\n"]);return Cn=function(){return n},n}function Dn(){var n=Object(j.a)(["\n    ul {\n        justify-content: center;\n    }\n"]);return Dn=function(){return n},n}function zn(){var n=Object(j.a)(["\n    display: block;\n    margin: 0 auto;\n    background-color: var(--primary-color);\n    font-weight: bolder;\n"]);return zn=function(){return n},n}function Bn(){var n=Object(j.a)(["\n    width: 100%;\n    height: 100%;\n\n    position: fixed;\n    left: 0;\n    right: 0;\n    z-index: 99999;\n\n    border: none;\n    outline: none;\n    opacity: 0;\n\n    &:focus {\n        outline: none\n    }\n"]);return Bn=function(){return n},n}function Sn(){var n=Object(j.a)(["\n    width:100%;\n    max-width: 65rem;\n    max-height: 60rem;\n\n    overflow-y: scroll;\n\n    padding: 2rem;\n    border-radius: .5rem;\n    background-color: var(--background-primary-color);\n    color: var(--primary-text-color);\n\n    position: relative;\n    z-index: 999999;\n\n    h2{ \n        margin-bottom: 2rem;\n        text-align: center;\n    }\n\n    ::-webkit-scrollbar {\n        width: 10px;\n    }\n\n    /* Track */\n    ::-webkit-scrollbar-track {\n        background:  var(--background-primary-color);\n    }\n\n    /* Handle */\n    ::-webkit-scrollbar-thumb {\n        background: var(--primary-color);\n    }\n\n    /* Handle on hover */\n    ::-webkit-scrollbar-thumb:hover {\n        background: var(--primary-color);\n    }\n"]);return Sn=function(){return n},n}function En(){var n=Object(j.a)(["\n    position: fixed;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    z-index: 99999;\n\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    background-color: rgba(0,0,0,0.3);\n"]);return En=function(){return n},n}var An=v.c.div(En()),In=v.c.div(Sn()),Nn=v.c.button(Bn()),Mn=Object(v.c)(f.a)(zn()),Pn=Object(v.c)(hn.a)(Dn()),Tn=v.c.div(Cn()),Un=v.c.div(wn()),Hn=v.c.div(yn()),Fn=v.c.div(kn()),Ln=v.c.div(xn()),_n=v.c.select(pn()),Kn=v.c.div(gn()),Vn=function(n){var e,t,a,l=n.refetchWeekCalendar,d=n.close,u=n.day,s=n.calendar,b=n.refetchCalendar,j=n.createUserBooking,v=Object(i.useState)(null),f=Object(c.a)(v,2),m=f[0],O=f[1],h=Object(i.useState)(0),g=Object(c.a)(h,2),p=g[0],x=g[1],k=Object(i.useState)({}),y=Object(c.a)(k,2),w=y[0],C=y[1],D=Object(i.useState)({date:"",hour:"",min:0}),z=Object(c.a)(D,2),B=z[0],S=z[1],A=Object(U.g)(s,u),I=Object(U.e)(s,u),N=Object(E.c)("api/admin/users/filter",m,!m),M=N.refetch,P=N.response,T=function(n){var e=n.target,t=e.name,r=e.value;if(""===r)return delete w[t],void C(Object(W.a)({},w));C((function(n){return Object(W.a)(Object(W.a)({},n),{},Object(fn.a)({},t,r))}))},H=function(n){var e=n.target,t=e.name,r=e.value;S((function(n){return Object(W.a)(Object(W.a)({},n),{},Object(fn.a)({},t,r))}))};return Object(i.useEffect)((function(){if(u){var n=u.time,e=u.dayNumber,t=u.month,r=u.year;console.log("DAY DATA"),console.log(u),S({date:"".concat(r,"-").concat(t<9?"0".concat(t+1):t+1,"-").concat(e<10?"0".concat(e):e),hour:Number(null===n||void 0===n?void 0:n.split("/")[0]),min:Number(null===n||void 0===n?void 0:n.split("/")[1])})}}),[u]),Object(i.useEffect)((function(){return function(){C({}),O(null),x(0)}}),[]),G.a.createPortal(Object(r.jsxs)(An,{children:[Object(r.jsx)(Nn,{onClick:d}),Object(r.jsxs)(In,{children:[Object(r.jsx)("h2",{children:"Objedna\u0165 z\xe1kazn\xedka"}),Object(r.jsx)(Pn,{items:Rn,activeIndex:p,setActiveIndex:x}),1===p?Object(r.jsxs)(Tn,{children:[Object(r.jsx)(mn.a,{label:"Meno, priezvisko, e-mail alebo tel. \u010d\xedslo",name:"query",value:m?null===m||void 0===m?void 0:m.query:"",handleChange:function(n){return O({limit:10,query:n.target.value})},onKeyPress:function(n){null!==m&&"Enter"===n.key&&M()}}),Object(r.jsx)(Mn,{onClick:function(){m&&M()},children:"H\u013eada\u0165"}),Object(r.jsxs)(Un,{children:[Object(r.jsxs)(Hn,{children:[Object(r.jsx)(Ln,{children:"Meno"}),Object(r.jsx)(Ln,{children:"E-mail"}),Object(r.jsx)(Ln,{children:"Tel. \u010d\xedslo"})]}),(null===P||void 0===P?void 0:P.users)?null===P||void 0===P||null===(e=P.users)||void 0===e?void 0:e.map((function(n,e){var t=n.name,c=n.email,i=n.phone;return Object(r.jsxs)(Fn,{onClick:function(){return n={name:t,email:c,phone:i},C((function(e){return Object(W.a)(Object(W.a)({},e),n)})),x(0),void O(null);var n},children:[Object(r.jsx)(Ln,{children:t}),Object(r.jsx)(Ln,{children:c}),Object(r.jsx)(Ln,{children:i})]},e)})):Object(r.jsx)("div",{children:Object(r.jsx)("p",{children:"\u017diaden v\xfdsledok"})})]})]}):Object(r.jsxs)(o.a.Fragment,{children:[Object(r.jsxs)("div",{children:[Object(r.jsx)("h3",{children:"D\xe1tum vy\u0161etrenia"}),Object(r.jsxs)(Kn,{children:[Object(r.jsx)(mn.a,{label:"",type:"date",name:"date",handleChange:H,value:null===B||void 0===B?void 0:B.date}),Object(r.jsx)("div",{children:Object(r.jsx)(mn.a,{label:"\u010cas",type:"number",name:"hour",value:null===B||void 0===B||null===(t=B.hour)||void 0===t?void 0:t.toString(),min:null===A||void 0===A?void 0:A.split(":")[0],max:null===I||void 0===I?void 0:I.split(":")[0],handleChange:H,step:"1"})}),Object(r.jsx)("p",{children:":"}),Object(r.jsx)("div",{children:Object(r.jsxs)(_n,{name:"min",value:null===B||void 0===B||null===(a=B.min)||void 0===a?void 0:a.toString(),onChange:H,children:[Object(r.jsx)("option",{value:0,children:"00"}),30===(null===s||void 0===s?void 0:s.interval)&&Object(r.jsx)("option",{value:30,children:"30"})]})})]})]}),Object(r.jsx)("div",{children:Object(r.jsx)(mn.a,{label:"Meno*",name:"name",value:(null===w||void 0===w?void 0:w.name)||"",handleChange:T})}),Object(r.jsx)("div",{children:Object(r.jsx)(mn.a,{label:"E-mail*",name:"email",value:(null===w||void 0===w?void 0:w.email)||"",handleChange:T})}),Object(r.jsx)("div",{children:Object(r.jsx)(mn.a,{label:"Tel. \u010d\xedslo*",name:"phone",value:(null===w||void 0===w?void 0:w.phone)||"",handleChange:T})}),Object(r.jsx)("div",{children:Object(r.jsx)(On.a,{label:"Pozn\xe1mka",name:"note",rows:"5",value:(null===w||void 0===w?void 0:w.note)||"",handleChange:T})}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h3",{children:"Vy\u0161etrenie"}),Object(r.jsxs)(_n,{name:"booking",value:(null===w||void 0===w?void 0:w.booking)||"",onChange:T,children:[Object(r.jsx)("option",{value:"",children:"Nezvolen\xe9"}),null===s||void 0===s?void 0:s.bookings.map((function(n,e){if(!1!==n.active)return Object(r.jsx)("option",{value:n._id,children:n.name},e)}))]})]})]}),0===p&&Object(r.jsx)(Mn,{onClick:function(){var n=Object(W.a)(Object(W.a)({},w),{},{dueTime:Object(U.h)(B),values:{}});console.log("USER BOOKING BEFORE SEND"),console.log(n),j(n,b,d,l)},children:"Vytvori\u0165"})]})]}),document.getElementById("portal"))},Rn=[{id:0,name:"Nov\xfd z\xe1kazn\xedk"},{id:1,name:"Vyhlada\u0165 z\xe1kazn\xedka"}];function Wn(){var n=Object(j.a)(["\n    cursor: pointer;\n    border: var(--appointment-container-border);\n    background-color: var(--appointment-container-background-color);\n    color: var(--appointment-container-text-color);\n    font-weight: bolder;\n    width: 100%;\n    height: 100%;\n    padding: .5rem;\n    position: absolute;\n    bottom: ",";\n    top: ",";\n    font-size: 1.2rem;\n    z-index: 99;\n\n    h4 {\n        width: 8rem;\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n    }\n"]);return Wn=function(){return n},n}var Yn=v.c.div(Wn(),(function(n){return n.isHalfHour?0:"unset"}),(function(n){return n.isHalfHour?"unset":0})),qn=function(n){var e,t=n.dayData,a=n.calendarId,l=n.time,d=n.userBookings,u=n.open,s=Object(i.useState)(!1),b=Object(c.a)(s,2),j=b[0],v=b[1],f=Object(E.c)("api/booking/calendars/".concat(a,"/dayInfo"),{date:t.bookingDate},!d),m=f.response,O=f.isLoading,h=Object(i.useState)(null),g=Object(c.a)(h,2),p=g[0],x=g[1],k=Object(i.useState)(!1),y=Object(c.a)(k,2),w=y[0],C=y[1];return Object(i.useEffect)((function(){if(!O){var n=m.userBookings.find((function(n){return n.dueTime===d.dueDate}));d.dueDate===(null===n||void 0===n?void 0:n.dueTime)&&C(!0),x(n)}}),[O]),Object(i.useEffect)((function(){return function(){v(!1),C(!1)}}),[]),Object(r.jsx)(o.a.Fragment,{children:Object(r.jsx)(Yn,{onClick:u,isHalfHour:j,children:w&&Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:p&&(null===p||void 0===p||null===(e=p.booking)||void 0===e?void 0:e.name)}),Object(r.jsx)("h5",{children:l})]})})})};function Gn(){var n=Object(j.a)(["\n    cursor: pointer;\n    border: var(--appointment-container-border);\n    background-color: var(--appointment-container-background-color);\n    color: var(--appointment-container-text-color);\n    font-weight: bolder;\n    width: 100%;\n    height: 50%;\n    padding: .5rem;\n    /* position: absolute; */\n\n"]);return Gn=function(){return n},n}function Zn(){var n=Object(j.a)(['\n    content: "";\n    position: relative;\n    /* position: absolute; */\n    /* width: 5rem; */\n    height: 100%;\n    /* top: 0;\n    left: 0;\n    bottom: 0;\n    right: 0; */\n    /* background-color: red; */\n']);return Zn=function(){return n},n}function Jn(){var n=Object(j.a)(["\n    cursor: pointer;\n    position: relative;\n    /* width: 15rem; */\n    height: 10rem;\n    border-bottom: var(--table-border);\n    background-color: var(--background-primary-color);\n\n\n    span {\n        display: none;\n    }\n"]);return Jn=function(){return n},n}function Qn(){var n=Object(j.a)(["\n    background-color: var(--body-background-primary-color);\n    /* border: var(--table-border); */\n \n    \n\n    &:nth-child(1) {\n        div {\n            span {\n                width: 6rem;\n                display: block;\n                opacity: .6;\n                position: absolute;\n                top: 0rem;\n                left: -5.8rem;\n                font-size: 1.4rem;\n                padding: .5rem 1rem .5rem .2rem;\n                border-radius: 9999rem;\n                text-align: end;\n                letter-spacing: .05rem;\n            }\n        }\n    }\n"]);return Qn=function(){return n},n}function Xn(){var n=Object(j.a)(["\n    cursor: default;\n    height: 8rem;\n    background-color: var(--color-black);\n    color: var(--table-head-color);\n    display: flex;\n    flex-direction: column;\n    align-items:center;\n    justify-content:center;\n    font-weight: 700;\n\n    p:first-child {\n        font-weight: lighter;\n    }\n\n    /* background-color: red; */\n    ","\n"]);return Xn=function(){return n},n}function $n(){var n=Object(j.a)(["\n    display: grid;\n    grid-template-columns: repeat(7, 1fr);\n    background-color: var(--color-black);\n\n    /* border: var(--table-border); */\n    min-width: 55rem;\n    padding-left: 5rem;\n    padding-right: 1rem;\n\n"]);return $n=function(){return n},n}function ne(){var n=Object(j.a)(["\n    overflow-y: scroll;\n    /* overflow-x: auto; */\n    height: 60rem;\n    display: grid;\n    grid-template-columns: repeat(7, 1fr);\n    /* border: var(--table-border); */\n    min-width: 55rem;\n    padding-left: 5rem;\n\n\n   ::-webkit-scrollbar {\n        width: 1rem;\n    }\n\n    /* Track */\n    ::-webkit-scrollbar-track {\n        background:  var(--background-primary-color);\n    }\n\n    /* Handle */\n    ::-webkit-scrollbar-thumb {\n        background: var(--primary-color);\n    }\n\n    /* Handle on hover */\n    ::-webkit-scrollbar-thumb:hover {\n        background: var(--primary-color);\n    }\n"]);return ne=function(){return n},n}function ee(){var n=Object(j.a)(["\n    width: 100%;\n"]);return ee=function(){return n},n}var te=v.c.div(ee()),re=v.c.div(ne()),ce=v.c.div($n()),ie=v.c.div(Xn(),(function(n){return n.isDisabled?"\n        opacity: .6;\n    ":""})),oe=v.c.div(Qn()),ae=v.c.div(Jn()),le=v.c.div(Zn()),de=(v.c.div(Gn()),function(n){var e=n.calendar,t=n.year,a=n.month,l=n.weekIndex,d=(n.handleCalendarBlockClick,Object(i.useContext)(P)),u=d.getDayData,s=d.refetchWeekCalendar,b=d.cancelUserBooking,j=Object(i.useContext)(Y.BookingContext).createUserBooking,v=Object(E.b)("api/booking/calendars",e,!e),f=v.response,m=v.isLoading,O=v.refetch,h=new Date(t,a+1,0).getDate(),g=new Date(t,a,0).getDay(),p=new Date(t,a+1,0).getDay(),x=new Date(t,a,0).getDate(),k=7-p,y=Object(i.useState)([]),w=Object(c.a)(y,2),C=w[0],D=w[1],z=Object(i.useState)(null),S=Object(c.a)(z,2),A=S[0],I=S[1],M=Object(i.useState)(!1),T=Object(c.a)(M,2),H=T[0],F=T[1],L=Object(i.useState)(!1),_=Object(c.a)(L,2),K=_[0],V=_[1],R=Object(i.useState)(null),q=Object(c.a)(R,2),G=q[0],Z=q[1];return Object(i.useEffect)((function(){if(!m&&f.calendar){var n=Object(U.n)(g),e=Object(U.l)(h),r=Object(U.m)(k),c=Object(U.k)(e,f.calendar,a,t);D([].concat(Object(B.a)(n),Object(B.a)(c),Object(B.a)(r)))}}),[m]),Object(r.jsxs)("div",{children:[K&&Object(r.jsx)(vn,{cancelUserBooking:b,calendarId:e,userBooking:G,close:function(){return V(!1)}}),H&&Object(r.jsx)(Vn,{refetchWeekCalendar:s,createUserBooking:j,refetchCalendar:O,calendar:null===f||void 0===f?void 0:f.calendar,day:A,close:function(){return F(!1)}}),Object(r.jsxs)(te,{children:[Object(r.jsx)(ce,{children:C.slice(7*l,7*l+7).map((function(n,e){var c=n.dayNumber,i=n.isDisable,l=n.isPrevDay,d=n.isNextDay;return Object(r.jsx)(ie,{isDisabled:i,children:l?Object(r.jsxs)(o.a.Fragment,{children:[Object(r.jsx)("p",{children:U.c[new Date(t,a-1,x-c).getDay()]}),Object(r.jsx)("p",{children:x-(c-1)})]}):d?Object(r.jsxs)(o.a.Fragment,{children:[Object(r.jsx)("p",{children:U.c[new Date(t,a+1,c-1).getDay()]}),Object(r.jsxs)("p",{children:[c," "]})]}):Object(r.jsxs)(o.a.Fragment,{children:[Object(r.jsx)("p",{children:U.c[new Date(t,a,c-1).getDay()]}),Object(r.jsxs)("p",{children:[c," "]})]})},e)}))}),Object(r.jsx)(re,{children:C.slice(7*l,7*l+7).map((function(n,c){var i=u(null===n||void 0===n?void 0:n.dayNumber,c);return Object(r.jsx)(oe,{children:i&&i.map((function(c,i){var o,l;return Object(r.jsxs)(ae,{style:60===(null===f||void 0===f||null===(o=f.calendar)||void 0===o?void 0:o.interval)?{height:"10rem"}:{height:"5rem"},children:[(null===c||void 0===c?void 0:c.userBookings)&&Object(r.jsx)(qn,{dayData:n,calendarId:e,time:c.time,userBookings:c.userBookings,open:function(){return Z(c),void V(!0)}}),Object(r.jsx)(le,{onClick:function(){return function(n){I(Object(W.a)(Object(W.a)({},n),{},{year:t,month:a})),F(!0)}(Object(W.a)(Object(W.a)({},n),{},{time:c.time}))}}),Object(r.jsx)("span",{children:null!==(l=N(null===c||void 0===c?void 0:c.time))&&void 0!==l?l:""})]},i)}))},c)}))})]})]})}),ue=function(n){var e,t=n.bookingId,c=Object(E.b)("api/booking/bookings",t,!t),i=c.isLoading,a=c.response;return i?"H\u013ead\xe1m...":Object(r.jsx)(o.a.Fragment,{children:null===a||void 0===a||null===(e=a.booking)||void 0===e?void 0:e.name})};function se(){var n=Object(j.a)(["\n    display: grid;\n    grid-template-columns: 10rem 1fr 1fr 20rem 1fr 10rem;\n    align-items: center;\n    margin-bottom: 1rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n"]);return se=function(){return n},n}function be(){var n=Object(j.a)(["\n    padding: 2rem;\n    text-align: center;\n"]);return be=function(){return n},n}function je(){var n=Object(j.a)(["\n    display: grid;\n    align-content: center;\n    grid-template-columns: 10rem 1fr 1fr 20rem 1fr 10rem;\n\n    border-bottom: 1px solid var(--secondary-text-color);\n    font-weight: bolder;\n"]);return je=function(){return n},n}var ve=v.c.div(je()),fe=v.c.div(be()),me=v.c.div(se()),Oe=function(n){var e,t=n.day;console.log(t);var c=Object(E.c)("api/admin/booking/userBookings/filter",{filters:{dueDate:t.bookingDate}}),o=c.response,a=c.isLoading,l=c.refetch;return Object(i.useEffect)((function(){l()}),[t]),a?Object(r.jsx)(Z.a,{}):Object(r.jsxs)("div",{children:[Object(r.jsxs)(ve,{children:[Object(r.jsx)(fe,{children:"#"}),Object(r.jsx)(fe,{children:"Vy\u0161etrenie"}),Object(r.jsx)(fe,{children:"Meno"}),Object(r.jsx)(fe,{children:"D\xe1tum"}),Object(r.jsx)(fe,{children:"Pozn\xe1mka"}),Object(r.jsx)(fe,{children:"Mo\u017enosti"})]}),null===o||void 0===o||null===(e=o.userBookings)||void 0===e?void 0:e.map((function(n,e){var t=n.booking,c=n.name,i=n.dueDate,o=n.note;return Object(r.jsxs)(me,{children:[Object(r.jsx)(fe,{children:e+1}),Object(r.jsx)(fe,{children:Object(r.jsx)(ue,{bookingId:t})}),Object(r.jsx)(fe,{children:c}),Object(r.jsx)(fe,{children:i}),Object(r.jsx)(fe,{children:o}),Object(r.jsx)(fe,{children:"Mo\u017enosti"})]},e)}))]})},he=t(57);function ge(){var n=Object(j.a)(["\n    display: block;\n    margin: 0 auto;\n    background-color: var(--primary-color);\n    font-weight: bolder;\n"]);return ge=function(){return n},n}function pe(){var n=Object(j.a)(["\n    margin-bottom: 2rem;\n"]);return pe=function(){return n},n}function xe(){var n=Object(j.a)(["\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n\n"]);return xe=function(){return n},n}function ke(){var n=Object(j.a)(["\n    width: 100%;\n    height: 100%;\n\n    position: fixed;\n    left: 0;\n    right: 0;\n    z-index: 99999;\n\n    border: none;\n    outline: none;\n    opacity: 0;\n\n    &:focus {\n        outline: none\n    }\n"]);return ke=function(){return n},n}function ye(){var n=Object(j.a)(["\n    width:100%;\n    max-width: 50rem;\n    max-height: 60rem;\n\n    overflow-y: scroll;\n\n    /* display: flex;\n    flex-direction: column;\n    align-items: center; */\n\n    padding: 2rem;\n    border-radius: .5rem;\n    background-color: var(--background-primary-color);\n    color: var(--primary-text-color);\n\n    position: relative;\n    z-index: 999999;\n\n    ::-webkit-scrollbar {\n        width: 10px;\n    }\n\n    /* Track */\n    ::-webkit-scrollbar-track {\n        background:  var(--background-primary-color);\n    }\n\n    /* Handle */\n    ::-webkit-scrollbar-thumb {\n        background: var(--primary-color);\n    }\n\n    /* Handle on hover */\n    ::-webkit-scrollbar-thumb:hover {\n        background: var(--primary-color);\n    }\n"]);return ye=function(){return n},n}function we(){var n=Object(j.a)(["\n    position: fixed;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    z-index: 99999;\n\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    background-color: rgba(0,0,0,0.3);\n"]);return we=function(){return n},n}var Ce=v.c.div(we()),De=v.c.div(ye()),ze=v.c.button(ke()),Be=v.c.div(xe()),Se=v.c.div(pe()),Ee=Object(v.c)(f.a)(ge()),Ae=function(n){var e=n.close,t=n.calendarId,o=n.refetch,a=n.selectedBooking,l=Object(i.useContext)(Y.BookingContext),d=l.createBooking,u=l.updateBooking,s=Object(E.b)("api/booking/bookings",a,!a),b=s.response,j=s.isLoading,v=Object(i.useState)({}),f=Object(c.a)(v,2),m=f[0],O=f[1],h=Object(i.useState)(!1),g=Object(c.a)(h,2),p=g[0],x=g[1],k=function(n){var e=n.target,t=e.name,r=e.value;if(""===r)return delete m[t],void O(Object(W.a)({},m));O((function(n){return Object(W.a)(Object(W.a)({},n),{},Object(fn.a)({},t,r))}))},y=function(){if(null===m||void 0===m?void 0:m.name){if(p){var n=Object(U.d)(m);console.log("BOOKING BEFORE UPDATE"),console.log(n),u(n,m._id)}else{var r=Object(W.a)(Object(W.a)({},m),{},{calendar:t});console.log("BOOKING BEFORE CREATE"),console.log(r),d(r)}o(),e()}};return Object(i.useEffect)((function(){j||(null===b||void 0===b?void 0:b.booking)&&(x(!0),O(null===b||void 0===b?void 0:b.booking))}),[a,j]),Object(i.useEffect)((function(){return function(){x(!1),O({})}}),[]),console.log(m),G.a.createPortal(Object(r.jsxs)(Ce,{children:[Object(r.jsx)(ze,{onClick:e}),Object(r.jsxs)(De,{children:[Object(r.jsxs)(Be,{children:[!p&&Object(r.jsx)("h2",{children:"Nov\xe9 vy\u0161etrenie"}),p&&Object(r.jsx)("h2",{children:"Upravi\u0165 vy\u0161etrenie"}),Object(r.jsx)("div",{children:Object(r.jsx)(he.a,{label:"Aktivn\xe9",isActive:(null===m||void 0===m?void 0:m.active)||!1,name:"active",handleClick:function(){return k({target:{name:"active",value:!(null===m||void 0===m?void 0:m.active)||!(null===m||void 0===m?void 0:m.active)}})}})})]}),Object(r.jsx)(Se,{children:Object(r.jsx)(mn.a,{label:"N\xe1zov vy\u0161etrenia*",name:"name",value:(null===m||void 0===m?void 0:m.name)||"",handleChange:k})}),Object(r.jsx)(Se,{children:Object(r.jsx)(mn.a,{label:"Cena",name:"price",value:(null===m||void 0===m?void 0:m.price)||"",handleChange:k})}),Object(r.jsx)(Se,{children:Object(r.jsx)(mn.a,{label:"\u010cas",name:"time",value:(null===m||void 0===m?void 0:m.time)||"",handleChange:k})}),Object(r.jsx)(Se,{children:Object(r.jsx)(On.a,{label:"Popis",rows:"5",name:"description",value:(null===m||void 0===m?void 0:m.description)||"",handleChange:k})}),!p&&Object(r.jsx)(Ee,{onClick:y,children:"Prida\u0165"}),p&&Object(r.jsx)(Ee,{onClick:y,children:"Ulo\u017ei\u0165"})]})]}),document.getElementById("portal"))};function Ie(){var n=Object(j.a)(["\n    margin-left: 1rem;\n    opacity: .6;\n"]);return Ie=function(){return n},n}function Ne(){var n=Object(j.a)(["\n    background-color: var(--primary-color);\n    font-weight: bolder;\n    font-size: 1.2rem;\n"]);return Ne=function(){return n},n}function Me(){var n=Object(j.a)(["\n    background-color: var(--color-red);\n    font-size: 1.2rem;\n    margin-left: 1rem;\n"]);return Me=function(){return n},n}function Pe(){var n=Object(j.a)(["\n    display: flex;\n    justify-content: flex-end;\n"]);return Pe=function(){return n},n}function Te(){var n=Object(j.a)(["\n    opacity: .8;\n    margin-bottom: 2rem;\n"]);return Te=function(){return n},n}function Ue(){var n=Object(j.a)(["\n    font-size: 1.2rem;\n    color: ",";\n"]);return Ue=function(){return n},n}function He(){var n=Object(j.a)(["\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 1rem;\n"]);return He=function(){return n},n}function Fe(){var n=Object(j.a)(["\n    padding: 2rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n    border-radius: .5rem;\n    margin-bottom: 3rem;\n"]);return Fe=function(){return n},n}function Le(){var n=Object(j.a)(["\n    background-color: var(--primary-color);\n    font-weight: bolder;\n"]);return Le=function(){return n},n}function _e(){var n=Object(j.a)(["\n    display: flex;\n    justify-content: space-between;\n    align-items: center; \n    margin-bottom: 3rem;\n"]);return _e=function(){return n},n}function Ke(){var n=Object(j.a)(["\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    grid-gap: 3rem;\n    margin-bottom: 10rem;\n\n    @media all and (max-width: 1150px) {\n        grid-template-columns: 2fr 1fr;\n        @media all and (max-width: 800px) {\n            grid-template-columns: 3fr 1fr;\n            @media all and (max-width: 500px) {\n                grid-template-columns: 1fr;\n            }\n        }\n\n    }\n"]);return Ke=function(){return n},n}var Ve=v.c.div(Ke()),Re=v.c.div(_e()),We=Object(v.c)(f.a)(Le()),Ye=v.c.div(Fe()),qe=v.c.div(He()),Ge=v.c.span(Ue(),(function(n){return n.isActive?"var(--color-green)":"var(--color-red)"})),Ze=v.c.div(Te()),Je=v.c.div(Pe()),Qe=Object(v.c)(f.a)(Me()),Xe=Object(v.c)(f.a)(Ne()),$e=v.c.div(Ie()),nt=function(n){var e,t,o,a,l=n.calendarId,u=Object(i.useContext)(d.a).isAdmin,s=Object(i.useContext)(Y.BookingContext).deleteBooking,b=Object(E.b)("api/booking/calendars",l,!l),j=b.response,v=b.isLoading,f=b.refetch,m=Object(i.useState)(!1),O=Object(c.a)(m,2),h=O[0],g=O[1],p=Object(i.useState)(null),x=Object(c.a)(p,2),k=x[0],y=x[1];return v?Object(r.jsx)(Z.a,{}):Object(r.jsxs)(Ve,{children:[h&&Object(r.jsx)(Ae,{selectedBooking:k,calendarId:l,close:function(){g(!1),y(null)},refetch:f}),Object(r.jsxs)("div",{children:[Object(r.jsxs)(Re,{children:[Object(r.jsx)("h3",{children:"Vy\u0161etrenia"}),u&&Object(r.jsx)(We,{onClick:function(){return g(!0)},children:"Prida\u0165"})]}),Object(r.jsxs)("div",{children:[null===j||void 0===j||null===(e=j.calendar)||void 0===e||null===(t=e.bookings)||void 0===t?void 0:t.map((function(n,e){return Object(r.jsxs)(Ye,{children:[Object(r.jsxs)(qe,{children:[Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:n.name}),Object(r.jsx)(Ge,{isActive:null===n||void 0===n?void 0:n.active,children:(null===n||void 0===n?void 0:n.active)?"Aktivn\xe9":"Neaktivn\xe9"})]}),Object(r.jsx)("div",{children:Object(r.jsxs)("p",{children:[n.price,"\u20ac"]})})]}),Object(r.jsx)(Ze,{children:Object(r.jsx)("p",{children:n.description})}),u&&Object(r.jsxs)(Je,{children:[Object(r.jsx)(Xe,{onClick:function(){return e=n._id,y(e),void g(!0);var e},children:"Upravi\u0165"}),Object(r.jsx)(Qe,{onClick:function(){return e=n._id,s(e),void f();var e},children:"Vymaza\u0165"})]})]},e)})),!(null===j||void 0===j||null===(o=j.calendar)||void 0===o||null===(a=o.bookings)||void 0===a?void 0:a.length)&&Object(r.jsx)($e,{children:"\u017diadn\xe9 vy\u0161etrenia"})]})]})]})},et=t(58),tt=t(14);function rt(){var n=Object(j.a)(["\n    background-color: ",";\n    color: ",";\n    cursor: pointer;\n    padding: 0.5rem 2rem;\n\n    transition: all .3s ease-in-out;\n"]);return rt=function(){return n},n}function ct(){var n=Object(j.a)(["\n    display: flex;\n    align-items: center;\n\n    button {\n        cursor: pointer;\n        font-size: 2rem;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        color: var(--primary-color);\n\n    }\n\n    div {\n        text-align: center;\n        margin: 0 1rem;\n    }\n\n    p {\n        text-transform: capitalize;\n        margin: 0 1rem;\n    }\n"]);return ct=function(){return n},n}function it(){var n=Object(j.a)(["\n    display: flex; \n    justify-content: space-between;\n    align-items: center;\n\n    ul {\n        list-style: none;\n        display: flex;\n        /* gap: 2rem; */\n\n\n    }\n"]);return it=function(){return n},n}function ot(){var n=Object(j.a)(["\n    display: flex;\n    justify-content:center;\n    align-items: center;\n    color: var(--primary-color);\n    font-size: 3rem;\n    margin-left: 1rem;\n"]);return ot=function(){return n},n}function at(){var n=Object(j.a)(["\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 3rem;\n\n    div {\n        display: flex;\n        align-items: center;\n        cursor: pointer;\n    }\n"]);return at=function(){return n},n}function lt(){var n=Object(j.a)(["\n    margin-top: 3rem;\n    margin-bottom: 3rem;\n"]);return lt=function(){return n},n}function dt(){var n=Object(j.a)(["\n    display: grid;\n    grid-template-columns: repeat( auto-fit, minmax(27rem, 1fr) );\n    margin-bottom: 3rem;\n    grid-gap: 2rem;\n"]);return dt=function(){return n},n}function ut(){var n=Object(j.a)(["\n    /* margin-bottom: 2rem; */\n"]);return ut=function(){return n},n}function st(){var n=Object(j.a)(["\n    background-color: var(--primary-color);\n    font-weight: bolder;\n"]);return st=function(){return n},n}function bt(){var n=Object(j.a)(["\n    ","\n    padding-top: 2rem;\n    padding-bottom: 3rem;\n    display: flex;\n    justify-content: space-between;\n    color: var(--primary-text-color);\n"]);return bt=function(){return n},n}var jt=v.c.div(bt(),tt.e),vt=Object(v.c)(f.a)(st()),ft=v.c.h2(ut()),mt=v.c.div(dt()),Ot=v.c.div(lt()),ht=v.c.div(at()),gt=v.c.div(ot()),pt=v.c.div(it()),xt=v.c.div(ct()),kt=v.c.li(rt(),(function(n){return n.isActive?"var(--primary-color)":"none"}),(function(n){return n.isActive?"var(--button-font-color)":"var(--primary-color)"}));e.default=function(){var n,e=Object(i.useContext)(d.a),t=e.isAdmin,j=e.currentUser,v=e.isOptometrist,f=Object(i.useContext)(l.a),m=f.showModal,O=f.setShowModal,h=f.message,g=f.closeModal,p=Object(a.h)().push,x=Object(i.useState)(!0),k=Object(c.a)(x,2),y=k[0],C=k[1],D=Object(i.useState)(0),z=Object(c.a)(D,2),B=z[0],S=z[1],A=Object(i.useState)(""),I=Object(c.a)(A,2),N=I[0],M=I[1],P=Object(i.useState)([]),H=Object(c.a)(P,2),F=H[0],L=H[1],_=Object(i.useState)(null),K=Object(c.a)(_,2),V=K[0],W=K[1],Y=Object(i.useState)((new Date).getMonth()),q=Object(c.a)(Y,2),G=q[0],Z=q[1],J=Object(i.useState)((new Date).getFullYear()),Q=Object(c.a)(J,2),X=Q[0],$=Q[1],nn=Object(i.useState)(0),en=Object(c.a)(nn,2),tn=en[0],rn=en[1],cn=Object(i.useState)(null),on=Object(c.a)(cn,2),an=on[0],ln=on[1],dn=Object(E.a)("api/booking/calendars"),un=dn.isLoading,sn=dn.response,bn=function(n){W(n),C(!1),jn()},jn=function(){Z((new Date).getMonth()),$((new Date).getFullYear()),rn(Math.ceil((new Date).getDate()/7)-1),ln(null)},vn=function(n){console.log(n),rn(Math.ceil(n.dayNumber/7)-1),S(1)};return Object(i.useEffect)((function(){if(!un&&sn){if(t)L(sn.calendars),O(!1);else{L(sn.calendars.filter((function(n){return n.premises===j.premises})));var n=sn.calendars.find((function(n){return n.premises===j.premises}));bn(n._id),O(!1)}g()}}),[un]),Object(i.useEffect)((function(){return console.log("unmount"),function(){O(!0),C(!0),S(0),M(""),L([]),W(null),Z((new Date).getMonth()),$((new Date).getFullYear()),rn(0),ln(null)}}),[]),console.log(F),console.log(V),Object(r.jsxs)("section",{children:[m&&Object(r.jsx)(b.a,{loading:un,title:h,close:function(){return O(!1)}}),t&&Object(r.jsx)(u.a,{searchQuery:N,handleChange:function(n){return M(n.target.value)},handleAddButton:function(){return p("rezervacie/novy-kalendar")},title:"Rezerv\xe1cie"}),v&&!t&&Object(r.jsxs)(jt,{children:[Object(r.jsx)("div",{children:Object(r.jsx)("h1",{children:"Rezerv\xe1cie"})}),Object(r.jsx)("div",{children:Object(r.jsx)(vt,{onClick:function(){return p("rezervacie/".concat(V))},children:"Upravi\u0165 kalend\xe1r"})})]}),Object(r.jsxs)(s.a,{children:[t&&Object(r.jsxs)(ht,{children:[Object(r.jsx)(ft,{children:"Pobo\u010dky"}),Object(r.jsxs)("div",{onClick:function(){return C((function(n){return!n}))},children:[Object(r.jsx)("p",{children:null===(n=F.find((function(n){return n._id===V})))||void 0===n?void 0:n.name}),Object(r.jsx)(gt,{children:y?Object(r.jsx)(et.r,{}):Object(r.jsx)(et.f,{})})]})]}),y&&Object(r.jsx)(mt,{children:F&&F.map((function(n,e){return Object(r.jsx)(w,{calendar:n,selectedCalendar:V,handleShowUpClick:function(){return bn(n._id)},handleUpdateClick:function(){return p("rezervacie/".concat(n._id))}},e)}))}),V&&Object(r.jsxs)(o.a.Fragment,{children:[Object(r.jsxs)(pt,{children:[Object(r.jsx)(ft,{children:"Kalend\xe1r"}),0===B?Object(r.jsxs)(xt,{children:[Object(r.jsx)("button",{onClick:function(){0===G?($((function(n){return n-1})),Z(11)):Z((function(n){return n-1}))},children:Object(r.jsx)(et.m,{})}),Object(r.jsx)("p",{children:U.o[G]}),Object(r.jsx)("button",{onClick:function(){11===G?($((function(n){return n+1})),Z(0)):Z((function(n){return n+1}))},children:Object(r.jsx)(et.p,{})})]}):Object(r.jsxs)(xt,{children:[Object(r.jsx)("button",{onClick:function(){rn(tn-1<0?0:function(n){return n-1})},children:Object(r.jsx)(et.m,{})}),Object(r.jsxs)("div",{children:[Object(r.jsx)("p",{children:tn+1}),Object(r.jsx)("p",{children:U.o[G]})]}),Object(r.jsx)("button",{onClick:function(){var n=new Date(X,G,0).getDate();console.log(7*tn),console.log(n),rn(7*(tn+1)>=n?0:function(n){return n+1})},children:Object(r.jsx)(et.p,{})})]}),Object(r.jsx)("ul",{children:U.a.map((function(n,e){return Object(r.jsx)(kt,{isActive:B===e,onClick:function(){return S(e)},children:n},e)}))})]}),Object(r.jsx)(Ot,{children:0===B?Object(r.jsx)(R,{calendar:V,month:G,year:X,handleCalendarBlockClick:vn}):Object(r.jsx)(T,{calendar:V,month:G,year:X,weekIndex:tn,handleCalendarBlockClick:vn,children:Object(r.jsx)(de,{calendar:V,month:G,year:X,weekIndex:tn,handleCalendarBlockClick:vn})})}),Object(r.jsx)(nt,{calendarId:V})]}),an&&Object(r.jsx)(Oe,{day:an})]})]})}},57:function(n,e,t){"use strict";var r=t(21),c=t(2),i=t(30),o=(t(1),t(5));function a(){var n=Object(o.a)(["\n    display: inline-block;\n    cursor: pointer;\n    font-size: 1.5rem;\n    font-weight: 700;\n    /* margin-right: 2rem; */\n    background-color: ",";\n    color: ",";\n    /* font-weight: ","; */\n    padding: .8rem 3rem;\n    border-radius: .2rem;\n    transition: all .2s ease-out;\n\n    @media all and (max-width: 500px) {\n        padding: 0.5rem 1.5rem;\n        font-size: 1.4rem;\n    }\n"]);return a=function(){return n},n}var l=t(6).c.div(a(),(function(n){return n.isActive?"var(--primary-color)":"var(--body-background-primary-color)"}),(function(n){return n.isActive?"var(--button-font-color)":"var(--secondary-text-color)"}),(function(n){return n.isActive?"border":"normal"}));e.a=function(n){var e=n.label,t=n.isActive,o=n.handleClick,a=Object(i.a)(n,["label","isActive","handleClick"]);return Object(c.jsx)(l,Object(r.a)(Object(r.a)({isActive:t,onClick:o},a),{},{children:e}))}},59:function(n,e,t){"use strict";var r=t(2),c=(t(1),t(52)),i=t(5),o=t(6),a=t(28),l=t(14);function d(){var n=Object(i.a)(["\n    margin-top: 2rem;\n    margin-left: 1rem;\n    background-color: var(--primary-color);\n    font-weight: bolder;\n"]);return d=function(){return n},n}function u(){var n=Object(i.a)(["\n    margin-top: 2rem;\n\n    margin-left: 2rem;\n"]);return u=function(){return n},n}function s(){var n=Object(i.a)(["\n    background-color: var(--color-red);\n    margin-left: 1.5rem;\n    color: var(--primary-text-color);\n    padding: .5rem 1rem;\n    border-radius: 1.5rem;\n    font-size: 1.4rem;\n"]);return s=function(){return n},n}function b(){var n=Object(i.a)(["\n    display: flex;\n    align-items: center;\n"]);return b=function(){return n},n}function j(){var n=Object(i.a)(["\n    margin-top: 2rem;\n\n    display: flex;\n    align-items: center;\n\n"]);return j=function(){return n},n}function v(){var n=Object(i.a)(["\n    display: flex;\n    color: var(--primary-text-color);\n    justify-content: space-between;\n    margin-bottom: 3rem;\n    ",";    \n\n    @media all and (max-width: 600px) {\n        flex-wrap: wrap;\n    }\n"]);return v=function(){return n},n}var f=o.c.div(v(),l.e),m=o.c.div(j()),O=o.c.div(b()),h=(o.c.div(s()),Object(o.c)(a.a)(u())),g=Object(o.c)(a.a)(d());e.a=function(n){var e=n.searchQuery,t=n.handleSearch,i=n.handleChange,o=n.title,a=(n.count,n.handleAddButton),l=void 0===a?function(){}:a;return Object(r.jsxs)(f,{children:[Object(r.jsx)(m,{children:Object(r.jsx)("h1",{children:o})}),Object(r.jsxs)(O,{children:[t&&Object(r.jsx)("div",{children:Object(r.jsx)(c.a,{type:"search",name:"searchbox",value:e,handleChange:i,onKeyPress:function(n){""!==e&&"Enter"===n.key&&t()},label:"Vyh\u013eada\u0165"})}),t&&Object(r.jsx)(h,{onClick:t,children:"Vyh\u013eada\u0165"}),Object(r.jsx)(g,{onClick:l,children:"Prida\u0165"})]})]})}},60:function(n,e,t){"use strict";var r=t(21),c=t(2),i=t(30),o=(t(1),t(5)),a=t(6),l=t(28),d=t(14);function u(){var n=Object(o.a)(["\n    transition: all 0.3s ease-out;\n    background-color: ",";\n    color: ",";\n    font-weight: ",";\n    padding: ",";\n    font-weight: ",";\n"]);return u=function(){return n},n}function s(){var n=Object(o.a)(["\n    margin-bottom: 3rem;\n    ","\n\n    ul {\n        display: flex;\n        list-style: none;\n\n        li {\n            margin-right: 1.5rem;\n        }\n    }\n"]);return s=function(){return n},n}var b=a.c.div(s(),d.e),j=Object(a.c)(l.a)(u(),(function(n){return n.active?"var(--primary-color)":"var(--background-primary-color)"}),(function(n){return n.active?"#fff":"var(--primary-text-color)"}),(function(n){return n.active?400:700}),(function(n){return n.active?".5rem 2.5rem":".5rem 1rem .5rem 0"}),(function(n){return n.active?"bolder":"normal"}));e.a=function(n){var e=n.items,t=n.activeIndex,o=n.setActiveIndex,a=Object(i.a)(n,["items","activeIndex","setActiveIndex"]);return Object(c.jsx)(b,Object(r.a)(Object(r.a)({},a),{},{children:Object(c.jsx)("ul",{children:e.map((function(n){return Object(c.jsx)("li",{children:Object(c.jsx)(j,{active:n.id===t,onClick:function(){return o(n.id)},children:n.name})},n.id)}))})}))}},63:function(n,e,t){"use strict";var r=t(2),c=t(21),i=t(30),o=(t(1),t(5)),a=t(6);function l(){var n=Object(o.a)(["\n    position: relative;\n    /* margin: 45px 0; */\n\n    .form-input {\n        background: none;\n        background-color: var(--input-background-color);\n        color: var(--input-color);\n\n        font-size: 1.5rem;\n        padding: .5rem .5rem .5rem 2rem;\n        display: block;\n        width: 100%;\n        border: none;\n        border-radius: .5rem;\n        /* border-bottom: 1px solid #000; */\n        margin: 25px 0;\n        font-family: inherit;\n        resize: none;\n\n        &:focus {\n        outline: none;\n        }\n\n        &:focus ~ .form-input-label {\n            ","\n        }\n    }\n\n    .form-input-label {\n        color: var(--input-color);\n        font-size: 1.4rem;\n        font-weight: normal;\n        position: absolute;\n        pointer-events: none;\n        left: 1.5rem;\n        top: .6rem;\n        transition: 300ms ease all;\n\n        &.shrink {\n            ","\n        }\n    }\n"]);return l=function(){return n},n}function d(){var n=Object(o.a)(["\n    left: .5rem;\n    top: -14px;\n    font-size: 12px;\n    color: var(--input-color);\n"]);return d=function(){return n},n}var u=Object(a.b)(d()),s=a.c.div(l(),u,u);e.a=function(n){var e=n.handleChange,t=n.label,o=n.name,a=Object(i.a)(n,["handleChange","label","name"]);return Object(r.jsxs)(s,{children:[Object(r.jsx)("textarea",Object(c.a)({className:"form-input",name:o,onChange:e},a)),t?Object(r.jsx)("label",{htmlFor:o,className:"".concat(a.value.length?"shrink":""," form-input-label"),children:t}):null]})}}}]);
//# sourceMappingURL=13.73ca89db.chunk.js.map