(this.webpackJsonpimooptik=this.webpackJsonpimooptik||[]).push([[36],{272:function(e,n,t){"use strict";t.r(n);var r=t(2),i=t(57),a=t(31),c=t(13),o=t(5),l=t(1),d=t(73),s=t(19),u=t(20),j=t(3),b=t(56),m=t(6),v=t(7);function O(){var e=Object(m.a)(["\n    margin-top: 2rem;\n    min-width: 16.5rem;\n    width: 100%;\n    background-color: var(--input-background-color);\n    color: var(--input-color);\n    border: none;\n    padding: .8rem 1rem .8rem 1rem;\n    font-size: inherit;\n    font-family: inherit;\n    display: block;\n"]);return O=function(){return e},e}var f=v.c.select(O()),h=function(e){var n=e.name,t=e.value,i=e.handleChange,a=e.listItems,c=e.defaultOption,o=void 0!==c&&c,l=e.defaultValue,d=e.defaultLabel;return Object(r.jsxs)(f,{name:n,value:t,onChange:function(e){return i(e)},children:[o&&Object(r.jsx)("option",{value:l,children:d}),a.map((function(e,n){if(0!==n)return Object(r.jsx)("option",{value:n,children:e},n)}))]})},p=t(53),x=t(32),g=t(244),y=t.n(g),k=t(54),C=t(55),T=t(70),w=t(15),D=t(28);function z(){var e=Object(m.a)(["\n    align-self: center;\n\n    input {}\n"]);return z=function(){return e},e}function X(){var e=Object(m.a)(["\n    display: grid;\n    grid-template-columns: 2fr 1fr 1fr 5rem;\n\n    button {\n        margin-top: 1.5rem;\n        display: block;\n        color: var(--primary-color);\n        align-self: center;\n    }\n"]);return X=function(){return e},e}function M(){var e=Object(m.a)(["\n    display: grid;\n    grid-template-columns: repeat(8, 1fr);\n    /* justify-items: center; */\n    /* align-items: center; */\n\n\n    select {\n        /* margin-top: 2rem; */\n        /* min-width: 16.5rem; */\n        width: 100%;\n        background-color: var(--input-background-color);\n        color: var(--input-color);\n        border: none;\n        padding: .8rem .5rem .8rem .5rem;\n        font-size: inherit;\n        font-family: inherit;\n        display: block;\n    }\n"]);return M=function(){return e},e}function N(){var e=Object(m.a)(["\n    padding: 2rem;\n    text-align: center;\n\n    border-right: ",";\n    display: flex;\n    align-items: center;\n    justify-content: center;\n"]);return N=function(){return e},e}function S(){var e=Object(m.a)(["\n    display: grid;\n    grid-template-columns: repeat(8, 1fr);\n    /* justify-items: center; */\n    border-bottom: 1px solid var(--secondary-text-color);\n"]);return S=function(){return e},e}function F(){var e=Object(m.a)(["\n    grid-column: 1/3;\n    padding: 2rem;\n    border-radius: .5rem;\n    background-color: var(--container-background-color);\n    box-shadow: var(--container-shadow);\n    margin-bottom: 3rem;\n    min-width: 90rem;\n\n    h3 {\n        margin-bottom: 2rem;\n    }\n\n    h4 {\n        margin-top: 2rem;\n    }\n"]);return F=function(){return e},e}function I(){var e=Object(m.a)(["\n    padding: 2rem;\n    border-radius: .5rem;\n    background-color: var(--container-background-color);\n    box-shadow: var(--container-shadow);\n    margin-bottom: 3rem;\n\n    h3 {\n        margin-bottom: 2rem;\n    }\n\n    h4 {\n        margin-top: 2rem;\n    }\n\n    select {\n        margin-top: 2rem;\n        /* min-width: 16.5rem; */\n        width: 100%;\n        background-color: var(--input-background-color);\n        color: var(--input-color);\n        border: none;\n        padding: .8rem .5rem .8rem .5rem;\n        font-size: inherit;\n        font-family: inherit;\n        display: block;\n    }\n"]);return I=function(){return e},e}function K(){var e=Object(m.a)(["\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    grid-gap: 3rem;\n    align-items: start;\n    margin-bottom: 5rem;\n"]);return K=function(){return e},e}function A(){var e=Object(m.a)(["\n    margin-top: 2rem;\n    background-color: var(--primary-color);\n    font-weight: bolder;\n"]);return A=function(){return e},e}function L(){var e=Object(m.a)(["\n    background-color: var(--color-red);\n"]);return L=function(){return e},e}function B(){var e=Object(m.a)(["\n    background-color: var(--primary-color);\n    font-weight: bolder;\n    margin-left: 1rem;\n"]);return B=function(){return e},e}function P(){var e=Object(m.a)(["\n    ","\n    padding-top: 3rem;\n    padding-bottom: 3rem;\n    color: var(--primary-text-color);\n"]);return P=function(){return e},e}var V=v.c.div(P(),w.g),E=Object(v.c)(D.a)(B()),J=(Object(v.c)(D.a)(L()),Object(v.c)(D.a)(A())),Z=v.c.div(K()),U=v.c.div(I()),_=v.c.div(F()),q=v.c.div(S()),G=v.c.div(N(),(function(e){return e.isFirst?"1px solid var(--secondary-text-color)":""})),H=v.c.div(M()),Q=v.c.div(X()),R=v.c.div(z());n.default=function(){var e,n,t,m=Object(l.useContext)(s.a),v=m.closeModal,O=m.getMessage,f=m.setShowModal,g=m.isLoading,D=m.message,z=m.showModal,X=Object(l.useContext)(u.a).isAdmin,M=Object(l.useContext)(d.BookingContext),N=M.createCalendar,S=M.updateCalendar,F=(M.deleteCalendar,Object(j.i)().calendarId),I=Object(k.b)("api/booking/calendars",F,"novy-kalendar"===F),K=I.response,A=I.isLoading,L=Object(l.useState)({fromTime:["00:00"],toTime:["23:59"]}),B=Object(o.a)(L,2),P=B[0],W=B[1],Y=Object(l.useState)(!1),$=Object(o.a)(Y,2),ee=$[0],ne=$[1],te=Object(l.useState)("00:00"),re=Object(o.a)(te,2),ie=(re[0],re[1],Object(l.useState)("23:59")),ae=Object(o.a)(ie,2),ce=(ae[0],ae[1],function(e){var n=e.target,t=n.name,r=n.value;if(""===r)return delete P[t],void W(Object(c.a)({},P));W((function(e){return Object(c.a)(Object(c.a)({},e),{},Object(a.a)({},t,r))}))}),oe=function(e,n){var t=e.target,r=t.name,i=t.value,o=P[r]?P[r]:["X","X","X","X","X","X","X"];o[n]=i,W((function(e){return Object(c.a)(Object(c.a)({},e),{},Object(a.a)({},r,o))}))},le=function(e,n,t){console.log(e),console.log(n),console.log(t);var r=P[n];r[t]=e,W((function(e){return Object(c.a)(Object(c.a)({},e),{},Object(a.a)({},n,r))}))};return Object(l.useEffect)((function(){if(!A&&K.calendar)if(ne(!0),K.calendar.exceptDays){var e=Object(T.i)(K.calendar.exceptDays),n=Object(T.k)(K.calendar.exceptDays);console.log("exceptDaysArr"),console.log(n),W(Object(c.a)(Object(c.a)({},K.calendar),{},{exceptDays:e,fromTime:n.map((function(e){return e.split("-")[0]})),toTime:n.map((function(e){return e.split("-")[1]}))})),v()}else W(Object(c.a)(Object(c.a)({},K.calendar),{},{fromTime:[],toTime:[]})),v()}),[A]),Object(l.useEffect)((function(){return function(){ne(!1),W({})}}),[]),Object(r.jsxs)("section",{children:[z&&Object(r.jsx)(x.a,{loading:g,title:D,close:v}),Object(r.jsx)(V,{children:Object(r.jsxs)(w.c,{children:[Object(r.jsx)("div",{children:ee?Object(r.jsxs)("h1",{children:["Kalend\xe1r: ",null===P||void 0===P?void 0:P.name]}):Object(r.jsx)("h1",{children:"Nov\xfd kalend\xe1r"})}),Object(r.jsx)("div",{children:Object(r.jsx)(E,{onClick:function(){if(!P.name)return O("Meno Kalend\xe1ra je povinn\xe9"),void f(!0);if(!P.premises)return O("Nie je zvolen\xe1 prev\xe1dzka ku ktorej patr\xed kalend\xe1r"),void f(!0);if(!P.endTimes&&!P.startTimes)return O("Nie s\xfa vyplnen\xe9 \u010dasy na prehliadky"),void f(!0);if(!P.interval)return O("Nie je zvolen\xfd interval"),void f(!0);if(ee){var e=Object(T.f)(P,P.fromTime,P.toTime);S(e,P._id)}else{var n={};n=P.exceptDays?Object(c.a)(Object(c.a)({},P),{},{exceptDays:Object(T.j)(P.exceptDays,P.fromTime,P.toTime)}):Object(c.a)({},P),N(n)}},children:ee?"Upravi\u0165":"Vytvori\u0165"})})]})}),Object(r.jsx)(b.a,{children:Object(r.jsxs)(Z,{children:[Object(r.jsxs)("div",{children:[X&&Object(r.jsxs)(U,{children:[Object(r.jsx)("h3",{children:"Z\xe1kladn\xe9 inform\xe1cie"}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Kalend\xe1r je pre prev\xe1dzku"}),Object(r.jsx)(h,{name:"premises",value:(null===P||void 0===P?void 0:P.premises)||"0",listItems:C.g,defaultOption:!0,defaultValue:0,defaultLabel:"Nezadan\xe9",handleChange:ce})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Meno kalend\xe1ra"}),Object(r.jsx)(p.a,{type:"text",label:"Meno*",name:"name",value:(null===P||void 0===P?void 0:P.name)||"",handleChange:ce})]})]}),Object(r.jsxs)(U,{children:[Object(r.jsx)("h3",{children:"Dovolenka"}),(null===P||void 0===P?void 0:P.exceptDays)&&(null===P||void 0===P||null===(e=P.exceptDays)||void 0===e?void 0:e.map((function(e,n){var t,i;return Object(r.jsxs)(Q,{children:[Object(r.jsx)(p.a,{type:"date",name:"exceptDays",value:e||"",handleChange:function(e){return function(e,n){var t=e.target,r=t.name,i=t.value,o=P[r];o[n]=i,W((function(e){return Object(c.a)(Object(c.a)({},e),{},Object(a.a)({},r,o))}))}(e,n)}}),Object(r.jsx)(R,{children:Object(r.jsx)(y.a,{onChange:function(e){return le(e,"fromTime",n)},value:null!==(t=null===P||void 0===P?void 0:P.fromTime[n])&&void 0!==t?t:"00:00",locale:"sv-sv",disableClock:!0})}),Object(r.jsx)(R,{children:Object(r.jsx)(y.a,{onChange:function(e){return le(e,"toTime",n)},value:null!==(i=null===P||void 0===P?void 0:P.toTime[n])&&void 0!==i?i:"23:00",locale:"sv-sv",disableClock:!0})}),Object(r.jsx)("button",{onClick:function(){return function(e){console.log(e);var n=P.exceptDays.filter((function(n){return n!==e}));W((function(e){return Object(c.a)(Object(c.a)({},e),{},{exceptDays:n})}))}(e)},children:"X"})]},n)}))),Object(r.jsx)(J,{onClick:function(){W((function(e){return Object(c.a)(Object(c.a)({},e),{},{exceptDays:e.exceptDays?[].concat(Object(i.a)(e.exceptDays),[""]):[""]})}))},children:"Prida\u0165"})]})]}),Object(r.jsxs)(U,{children:[Object(r.jsx)("h3",{children:"Nastavenie kalend\xe1ra"}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Interval medzi prehliadkami"}),Object(r.jsxs)("select",{name:"interval",value:(null===P||void 0===P?void 0:P.interval)||"",onChange:ce,children:[Object(r.jsx)("option",{value:"",children:"Nezadan\xe9"}),Object(r.jsx)("option",{value:15,children:"15min"}),Object(r.jsx)("option",{value:30,children:"30min"}),Object(r.jsx)("option",{value:60,children:"60min"})]})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"\u010cas pred objednan\xedm"}),Object(r.jsx)(p.a,{type:"text",label:"Po\u010det min\xfat",name:"allowMinutesBefore",value:(null===P||void 0===P||null===(n=P.allowMinutesBefore)||void 0===n?void 0:n.toString())||"",handleChange:ce})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Ko\u013eko dn\xed dopredu sa d\xe1 objedna\u0165"}),Object(r.jsx)(p.a,{type:"text",label:"Po\u010det dn\xed",name:"daysIntoFuture",value:(null===P||void 0===P||null===(t=P.daysIntoFuture)||void 0===t?void 0:t.toString())||"",handleChange:ce})]})]}),Object(r.jsxs)(_,{children:[Object(r.jsx)("h3",{children:"Ordina\u010dn\xe9 hodiny"}),Object(r.jsxs)(q,{children:[Object(r.jsx)(G,{isFirst:!0,children:"\u010cas \\ De\u0148"}),T.c.map((function(e,n){return Object(r.jsx)(G,{children:e},n)}))]}),Object(r.jsxs)(H,{children:[Object(r.jsx)(G,{isFirst:!0,children:"Za\u010diatok"}),Object(i.a)(Array(7)).map((function(e,n){return Object(r.jsx)(G,{children:Object(r.jsxs)("select",{name:"startTimes",value:(null===P||void 0===P?void 0:P.startTimes)?null===P||void 0===P?void 0:P.startTimes[n]:"x",onChange:function(e){return oe(e,n)},children:[Object(r.jsx)("option",{value:"X",children:"\u017diadny"}),T.b.map((function(e,n){var t=e.name,i=e.value;return Object(r.jsx)("option",{value:i,children:t},n)}))]})},n)}))]}),Object(r.jsxs)(H,{children:[Object(r.jsx)(G,{isFirst:!0,children:"Koniec"}),Object(i.a)(Array(7)).map((function(e,n){return Object(r.jsx)(G,{children:Object(r.jsxs)("select",{name:"endTimes",value:(null===P||void 0===P?void 0:P.endTimes)?null===P||void 0===P?void 0:P.endTimes[n]:"x",onChange:function(e){return oe(e,n)},children:[Object(r.jsx)("option",{value:"X",children:"\u017diadny"}),T.b.map((function(e,n){var t=e.name,i=e.value;return Object(r.jsx)("option",{value:i,children:t},n)}))]})},n)}))]})]})]})})]})}}}]);
//# sourceMappingURL=36.eaf7ea7d.chunk.js.map