(this.webpackJsonpimooptik=this.webpackJsonpimooptik||[]).push([[13],{126:function(n,e){function t(n,e){if((n=n.replace(/\s+/g,""))===(e=e.replace(/\s+/g,"")))return 1;if(n.length<2||e.length<2)return 0;for(var t=new Map,r=0;r<n.length-1;r++){var i=n.substring(r,r+2),c=t.has(i)?t.get(i)+1:1;t.set(i,c)}for(var o=0,a=0;a<e.length-1;a++){var l=e.substring(a,a+2),u=t.has(l)?t.get(l):0;u>0&&(t.set(l,u-1),o++)}return 2*o/(n.length+e.length-2)}n.exports={compareTwoStrings:t,findBestMatch:function(n,e){if(!function(n,e){return"string"===typeof n&&(!!Array.isArray(e)&&(!!e.length&&!e.find((function(n){return"string"!==typeof n}))))}(n,e))throw new Error("Bad arguments: First argument should be a string, second should be an array of strings");for(var r=[],i=0,c=0;c<e.length;c++){var o=e[c],a=t(n,o);r.push({target:o,rating:a}),a>r[i].rating&&(i=c)}var l=r[i];return{ratings:r,bestMatch:l,bestMatchIndex:i}}}},230:function(n,e,t){"use strict";t.r(e);var r=t(2),i=t(21),c=t(10),o=t(1),a=t.n(o),l=t(3),u=t(19),d=t(18),s=(t(59),t(54)),b=t(32),j=t(5),v=t(6),f=t(28);function m(){var n=Object(j.a)(["\n    margin-top: 2rem;\n    font-size: 1.4rem;\n    display: block;\n    margin-left: 2rem;;\n"]);return m=function(){return n},n}function h(){var n=Object(j.a)(["\n    margin-top: 2rem;\n    font-size: 1.4rem;\n    display: block;\n    background-color: ",";\n    font-weight: bolder;\n    color: ",";\n"]);return h=function(){return n},n}function O(){var n=Object(j.a)(["\n    display: flex;\n"]);return O=function(){return n},n}function g(){var n=Object(j.a)(["\n    padding: 2rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n\n    &:not(:last-child) {\n        /* margin-right: 2rem; */\n    }\n\n    h3  { \n        font-size: 1.8rem;\n    }\n\n    p {\n        font-size: 1.4rem;\n        opacity: .83;\n\n        span {\n            font-weight: bolder;\n        }\n    }\n"]);return g=function(){return n},n}var p=v.c.div(g()),x=v.c.div(O()),k=Object(v.c)(f.a)(h(),(function(n){return n.isActive?"var(--primary-color)":"var(--body-background-primary-color)"}),(function(n){return n.isActive?"var(--button-font-color)":"var(--primary-color)"})),y=Object(v.c)(f.a)(m()),w=function(n){var e=n.calendar,t=void 0===e?{}:e,i=n.selectedCalendar,c=void 0===i?null:i,o=n.handleShowUpClick,a=void 0===o?function(){}:o,l=n.handleUpdateClick,u=void 0===l?function(){}:l;return Object(r.jsxs)(p,{children:[Object(r.jsx)("h3",{children:null===t||void 0===t?void 0:t.name}),Object(r.jsxs)("p",{children:["Interval medzi vy\u0161etreniami: ",Object(r.jsxs)("span",{children:[null===t||void 0===t?void 0:t.interval,"min"]})]}),Object(r.jsxs)("p",{children:["Po\u010det min\xfat pred rezerv\xe1ciou: ",Object(r.jsxs)("span",{children:[null===t||void 0===t?void 0:t.allowMinutesBefore,"min"]})]}),Object(r.jsxs)("p",{children:["Ko\u013eko dn\xed dopredu sa da objedna\u0165: ",Object(r.jsx)("span",{children:null===t||void 0===t?void 0:t.daysIntoFuture})]}),Object(r.jsxs)(x,{children:[Object(r.jsx)(k,{isActive:c===(null===t||void 0===t?void 0:t._id),onClick:a,children:"Zobrazi\u0165"}),Object(r.jsx)(y,{onClick:u,children:"Upravi\u0165"})]})]})},C=t(7),D=t.n(C),z=t(12),B=t(56),S=t(30),E=t(53),A=function(n,e){if(!isNaN(n)){var t=n*e,r=Math.floor(t/60);return M(r,t%60)}},M=function(n,e){return n<10&&0===e?"0".concat(n,"/0").concat(e):n<10?"0".concat(n,"/").concat(e):0===e?"".concat(n,"/0").concat(e):"".concat(n,"/").concat(e)},N=function(n){if(n)return n.replace("/",":")},I=function(n,e,t,r,i){if(!(null===n||void 0===n?void 0:n.booked))return null;var c=Object.keys(null===n||void 0===n?void 0:n.booked).find((function(n){var e=n.split("/").map((function(n){return Number(n)}));return e[0]===t&&e[1]===r+1&&e[2]===i&&n}));if(!c)return null;var o=A(e,n.interval),a=n.booked[c].find((function(n){return n===o}));return a?{time:a,date:n.booked[c],dueDate:"".concat(a,":").concat(c)}:null},U=Object(o.createContext)({timeline:null,getDayData:function(){},refetchWeekCalendar:function(){},cancelUserBooking:function(){}}),T=function(n){var e=n.children,t=n.calendar,i=n.month,a=n.year,l=(Object(S.a)(n,["children","calendar","month","year"]),Object(E.b)("api/booking/calendars",t,!t)),s=l.response,b=l.isLoading,j=l.refetch,v=Object(o.useContext)(u.a),f=v.closeModal,m=v.setIsLoading,h=v.setShowModal,O=v.getMessage,g=Object(o.useContext)(d.a).token,p=Object(o.useState)(null),x=Object(c.a)(p,2),k=x[0],y=x[1],w=Object(o.useState)(0),C=Object(c.a)(w,2),M=C[0],N=C[1],T=Object(o.useState)(null),P=Object(c.a)(T,2),F=P[0],H=P[1],K=new Headers;K.append("auth-token",g),K.append("Content-Type","application/json");var _=function(){var n=Object(z.a)(D.a.mark((function n(e,t,r){var i,c,o;return D.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return h(!0),m(!0),i={method:"POST",headers:K,redirect:"follow"},n.prev=3,n.next=6,fetch("".concat("http://195.110.58.166:8080","/api/booking/userBookings/").concat(e,"/cancel"),i);case 6:return c=n.sent,n.next=9,c.json();case 9:o=n.sent,console.log(o),o.userBooking&&(f(),t(),r(!1)),O(o.messageSK),m(!1),n.next=21;break;case 16:n.prev=16,n.t0=n.catch(3),console.log(n.t0),O("Nie\u010do sa pokazilo"),m(!1);case 21:case"end":return n.stop()}}),n,null,[[3,16]])})));return function(e,t,r){return n.apply(this,arguments)}}();return Object(o.useEffect)((function(){if(!b){y(s.calendar),30===s.calendar.interval&&N(48),60===s.calendar.interval&&N(24);var n=function(n,e,t){var r=n.filter((function(n){return"X"!==n})).map((function(n){return Number(n.split("/")[0])})),i=e.filter((function(n){return"X"!==n})).map((function(n){return Number(n.split("/")[0])})),c=e.filter((function(n){return"X"!==n})).map((function(n){return Number(n.split("/")[1])})),o=Math.max.apply(Math,Object(B.a)(r)),a=Math.max.apply(Math,Object(B.a)(i)),l=Math.max.apply(Math,Object(B.a)(c));return Object(B.a)(Array(30===t?48:24)).map((function(n,e){var r=A(e,t),i=r.split("/").map((function(n){return Number(n)}));return o>i[0]||a<i[0]||a===i[0]&&l!==i[1]&&30===i[1]?null:r})).filter((function(n){return null!==n}))}(s.calendar.startTimes,s.calendar.endTimes,s.calendar.interval);H(n)}}),[b]),Object(o.useEffect)((function(){return function(){y(null)}}),[]),Object(r.jsx)(U.Provider,{value:{timeline:F,getDayData:function(n,e){if(k)return Object(B.a)(Array(M)).map((function(t,r){var c,o,l=null===(c=k.startTimes[e])||void 0===c?void 0:c.split("/").map((function(n){return Number(n)})),u=null===(o=k.endTimes[e])||void 0===o?void 0:o.split("/").map((function(n){return Number(n)})),d=A(r,k.interval),s=d.split("/").map((function(n){return Number(n)}));if(!(l[0]>s[0])&&!(u[0]<s[0])&&"X"!==k.startTimes[e]&&(u[0]!==s[0]||u[1]===s[1]||30!==s[1]))return{id:r,time:d,userBookings:I(k,r,n,i,a)}})).filter((function(n){return void 0!==n}))},refetchWeekCalendar:j,cancelUserBooking:_},children:e})},P=t(67);function F(){var n=Object(j.a)(["\n    height: 8rem;\n    display: flex;\n    justify-content: space-between;\n    align-items: flex-end;\n    border: 1px solid rgba(0,0,0,.1);\n    padding: .6rem 1rem;\n\n    transition: all .15s;\n\n    p {\n        span {\n            width: 3rem;\n            height: 3rem;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            border-radius: 50%;\n            background-color: var(--body-background-primary-color);\n            color: var(--primary-color);\n            font-weight: bolder;\n            font-size: 1.5rem;\n        }\n    }\n\n    ",";\n\n\n\n"]);return F=function(){return n},n}function H(){var n=Object(j.a)(["\n    cursor: default;\n    height: 8rem;\n    background-color: var(--color-black);\n    color: var(--table-head-color);\n    display: flex;\n    align-items:center;\n    justify-content:center;\n    font-weight: 700;\n"]);return H=function(){return n},n}function K(){var n=Object(j.a)(["\n    width: 100%;\n    display: grid;\n    grid-template-columns: repeat(7, 1fr);\n    border: 1px solid rgba(0,0,0,.1);\n    min-width: 55rem;\n"]);return K=function(){return n},n}var _=v.c.div(K()),L=v.c.div(H()),R=v.c.div(F(),(function(n){return n.faded?"opacity: .6":"    \n        cursor: pointer;\n        &:hover {\n        background-color: var(--body-background-primary-color);\n        }\n    "})),V=function(n){var e=n.calendar,t=n.month,i=n.year,a=n.handleCalendarBlockClick;(new Date).setDate(1);var l=new Date(i,t+1,0).getDate(),u=new Date(i,t,0).getDate(),d=new Date(i,t,0).getDay(),s=7-new Date(i,t+1,0).getDay(),b=Object(E.b)("api/booking/calendars",e,!e),j=b.response,v=b.isLoading,f=b.refetch,m=Object(o.useState)([]),h=Object(c.a)(m,2),O=h[0],g=h[1],p=Object(o.useState)([]),x=Object(c.a)(p,2),k=x[0],y=x[1],w=Object(o.useState)([]),C=Object(c.a)(w,2),D=C[0],z=C[1];return Object(o.useEffect)((function(){f()}),[t]),Object(o.useEffect)((function(){e&&f()}),[e]),Object(o.useEffect)((function(){if(!v&&(null===j||void 0===j?void 0:j.calendar)){var n=Object(P.n)(d),e=Object(P.l)(l),r=Object(P.m)(s),c=Object(P.k)(e,j.calendar,t,i);g(n),y(c),z(r)}}),[v]),Object(o.useEffect)((function(){return console.log("UNMOUNT WEEK CALENDAR"),function(){g([]),y([]),z([])}}),[]),Object(r.jsxs)(_,{children:[P.c.map((function(n,e){return Object(r.jsx)(L,{children:n},e)})),O.map((function(n,e){return Object(r.jsxs)(R,{faded:!0,children:[Object(r.jsx)("p",{}),Object(r.jsx)("p",{children:u-e})]},e)})),k.map((function(n,e){var t=n.dayNumber,i=n.bookings;return Object(r.jsxs)(R,{onClick:function(){return a(n)},children:[Object(r.jsx)("p",{children:i&&Object(r.jsx)("span",{children:i.length})}),Object(r.jsx)("p",{children:t})]},e)})),D.map((function(n,e){return Object(r.jsxs)(R,{faded:!0,children:[Object(r.jsx)("p",{}),Object(r.jsx)("p",{children:e+1})]},e)}))]})},W=t(69),X=t(20),Y=t.n(X),Z=t(34),q=t(58);function G(){var n=Object(j.a)(["\n    "," {\n        margin-bottom: 3rem;\n    }\n"]);return G=function(){return n},n}function J(){var n=Object(j.a)(["\n    display: block;\n    background-color: var(--primary-color);\n    font-weight: bolder;\n"]);return J=function(){return n},n}function Q(){var n=Object(j.a)(["\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    margin-bottom: 2rem;\n"]);return Q=function(){return n},n}function $(){var n=Object(j.a)(["\n    padding: 1rem;\n    background-color: var(--body-background-primary-color);\n\n    h3 {\n        font-size: 1.3rem;\n        font-weight: lighter;\n        opacity: .8;\n        margin-bottom: .5rem;\n    }\n\n    p {\n        font-size: 1.8rem;\n        margin-left: 2rem;\n    }\n"]);return $=function(){return n},n}function nn(){var n=Object(j.a)(["\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    align-items: start;\n    grid-gap: 3rem;\n    margin-bottom: 3rem;\n\n"]);return nn=function(){return n},n}function en(){var n=Object(j.a)(["\n    width: 100%;\n    height: 100%;\n\n    position: fixed;\n    left: 0;\n    right: 0;\n    z-index: 99999;\n\n    border: none;\n    outline: none;\n    opacity: 0;\n\n    &:focus {\n        outline: none\n    }\n"]);return en=function(){return n},n}function tn(){var n=Object(j.a)(["\n    width:100%;\n    max-width: 65rem;\n    max-height: 60rem;\n\n    overflow-y: scroll;\n\n    padding: 2rem;\n    border-radius: .5rem;\n    background-color: var(--background-primary-color);\n    color: var(--primary-text-color);\n\n    position: relative;\n    z-index: 999999; \n\n    h2{ \n        margin-bottom: 2rem;\n        /* text-align: center; */\n    }\n\n    ::-webkit-scrollbar {\n        width: 10px;\n    }\n\n    /* Track */\n    ::-webkit-scrollbar-track {\n        background:  var(--background-primary-color);\n    }\n\n    /* Handle */\n    ::-webkit-scrollbar-thumb {\n        background: var(--primary-color);\n    }\n\n    /* Handle on hover */\n    ::-webkit-scrollbar-thumb:hover {\n        background: var(--primary-color);\n    }\n"]);return tn=function(){return n},n}function rn(){var n=Object(j.a)(["\n    position: fixed;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    z-index: 99999;\n\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    background-color: rgba(0,0,0,0.3);\n"]);return rn=function(){return n},n}var cn=v.c.div(rn()),on=v.c.div(tn()),an=v.c.button(en()),ln=v.c.div(nn()),un=v.c.div($()),dn=v.c.div(Q()),sn=Object(v.c)(f.a)(J()),bn=v.c.div(G(),un),jn=function(n){var e,t,i,a,l=n.close,u=n.userBooking,d=n.calendarId,s=n.cancelUserBooking,b=Object(E.c)("api/booking/calendars/".concat(d,"/dayInfo"),{date:null===u||void 0===u||null===(e=u.userBookings)||void 0===e?void 0:e.dueDate.split(":")[1]},!u),j=b.response,v=b.isLoading,f=Object(o.useState)(null),m=Object(c.a)(f,2),h=m[0],O=m[1];return Object(o.useEffect)((function(){if(!v&&j){var n=j.userBookings.find((function(n){return n.dueTime===u.userBookings.dueDate}));console.log(n),O(n)}}),[v]),console.log(h),Y.a.createPortal(Object(r.jsxs)(cn,{children:[Object(r.jsx)(an,{onClick:l}),Object(r.jsxs)(on,{children:[!h&&Object(r.jsx)(Z.a,{}),Object(r.jsx)("h2",{children:null===h||void 0===h||null===(t=h.booking)||void 0===t?void 0:t.name}),Object(r.jsxs)(dn,{children:[Object(r.jsx)("h3",{children:"Inform\xe1cie:"}),Object(r.jsx)(sn,{onClick:function(){return s(h._id)},children:"Zru\u0161i\u0165 rezerv\xe1ciu"})]}),Object(r.jsxs)(ln,{children:[Object(r.jsxs)(un,{children:[Object(r.jsx)("h3",{children:"Meno a priezvisko"}),Object(r.jsx)("p",{children:null===h||void 0===h?void 0:h.name})]}),Object(r.jsxs)(un,{children:[Object(r.jsx)("h3",{children:"Prevadzka"}),Object(r.jsx)("p",{children:q.d[null===h||void 0===h||null===(i=h.booking)||void 0===i?void 0:i.premises]})]}),Object(r.jsxs)(un,{children:[Object(r.jsx)("h3",{children:"Tel. \u010d\xedslo"}),Object(r.jsx)("p",{children:null===h||void 0===h?void 0:h.phone})]}),Object(r.jsxs)(un,{children:[Object(r.jsx)("h3",{children:"E-mail"}),Object(r.jsx)("p",{children:null===h||void 0===h?void 0:h.email})]}),Object(r.jsxs)(un,{children:[Object(r.jsx)("h3",{children:"D\xe1tum"}),Object(r.jsx)("p",{children:null===h||void 0===h?void 0:h.dueTime})]}),Object(r.jsxs)(un,{children:[Object(r.jsx)("h3",{children:"Zru\u0161en\xe9"}),Object(r.jsx)("p",{children:(null===h||void 0===h?void 0:h.cancelled)?"Ano":"Nie"})]})]}),Object(r.jsxs)(bn,{children:[Object(r.jsxs)(un,{children:[Object(r.jsx)("h3",{children:"Pozn\xe1mka"}),(null===h||void 0===h?void 0:h.note)?Object(r.jsx)("p",{children:null===h||void 0===h?void 0:h.note}):Object(r.jsx)("p",{children:"\u017diadn\xe1 pozn\xe1mka"})]}),Object(r.jsxs)(un,{children:[Object(r.jsx)("h3",{children:"Popis"}),Object(r.jsx)("p",{children:null===h||void 0===h||null===(a=h.booking)||void 0===a?void 0:a.description})]})]})]})]}),document.getElementById("portal"))},vn=t(31),fn=t(52),mn=t(61),hn=t(60);function On(){var n=Object(j.a)(["\n    display: grid;\n    grid-template-columns: 2fr 1fr .4rem 1fr;\n    grid-gap: 1rem;\n\n    p {\n        align-self: center;\n    }\n"]);return On=function(){return n},n}function gn(){var n=Object(j.a)(["\n    margin-top: 2rem;\n    /* min-width: 16.5rem; */\n    width: 100%;\n    background-color: var(--input-background-color);\n    color: var(--input-color);\n    border: none;\n    padding: .8rem .5rem .8rem .5rem;\n    font-size: inherit;\n    font-family: inherit;\n    display: block;\n\n    margin-bottom: 2rem;\n"]);return gn=function(){return n},n}function pn(){var n=Object(j.a)(["\n    padding: 2rem;\n    text-align: center;\n"]);return pn=function(){return n},n}function xn(){var n=Object(j.a)(["\n    display: grid;\n    grid-template-columns: 1fr 1fr 1fr;\n\n    cursor: pointer;\n    align-content: center;\n    margin-bottom: 1rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n\n    transition: all .3s ease-out;\n\n    &:hover {\n        background-color: var(--primary-color); \n        font-weight: bolder;\n        color: var(--button-font-color);\n    }\n\n"]);return xn=function(){return n},n}function kn(){var n=Object(j.a)(["\n    display: grid;\n    grid-template-columns: 1fr 1fr 1fr;\n"]);return kn=function(){return n},n}function yn(){var n=Object(j.a)(["\n    p {\n        text-align: center;\n        opacity: .6;\n    }\n        margin-bottom: 3rem;\n"]);return yn=function(){return n},n}function wn(){var n=Object(j.a)(["\n    button {\n        margin-top: 2rem;\n    }\n"]);return wn=function(){return n},n}function Cn(){var n=Object(j.a)(["\n    ul {\n        justify-content: center;\n    }\n"]);return Cn=function(){return n},n}function Dn(){var n=Object(j.a)(["\n    display: block;\n    margin: 0 auto;\n    background-color: var(--primary-color);\n    font-weight: bolder;\n"]);return Dn=function(){return n},n}function zn(){var n=Object(j.a)(["\n    width: 100%;\n    height: 100%;\n\n    position: fixed;\n    left: 0;\n    right: 0;\n    z-index: 99999;\n\n    border: none;\n    outline: none;\n    opacity: 0;\n\n    &:focus {\n        outline: none\n    }\n"]);return zn=function(){return n},n}function Bn(){var n=Object(j.a)(["\n    width:100%;\n    max-width: 65rem;\n    max-height: 60rem;\n\n    overflow-y: scroll;\n\n    padding: 2rem;\n    border-radius: .5rem;\n    background-color: var(--background-primary-color);\n    color: var(--primary-text-color);\n\n    position: relative;\n    z-index: 999999;\n\n    h2{ \n        margin-bottom: 2rem;\n        text-align: center;\n    }\n\n    ::-webkit-scrollbar {\n        width: 10px;\n    }\n\n    /* Track */\n    ::-webkit-scrollbar-track {\n        background:  var(--background-primary-color);\n    }\n\n    /* Handle */\n    ::-webkit-scrollbar-thumb {\n        background: var(--primary-color);\n    }\n\n    /* Handle on hover */\n    ::-webkit-scrollbar-thumb:hover {\n        background: var(--primary-color);\n    }\n"]);return Bn=function(){return n},n}function Sn(){var n=Object(j.a)(["\n    position: fixed;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    z-index: 99999;\n\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    background-color: rgba(0,0,0,0.3);\n"]);return Sn=function(){return n},n}var En=v.c.div(Sn()),An=v.c.div(Bn()),Mn=v.c.button(zn()),Nn=Object(v.c)(f.a)(Dn()),In=Object(v.c)(hn.a)(Cn()),Un=v.c.div(wn()),Tn=v.c.div(yn()),Pn=v.c.div(kn()),Fn=v.c.div(xn()),Hn=v.c.div(pn()),Kn=v.c.select(gn()),_n=v.c.div(On()),Ln=function(n){var e,t,l,u=n.refetchWeekCalendar,d=n.close,s=n.day,b=n.calendar,j=n.refetchCalendar,v=n.createUserBooking,f=Object(o.useState)(null),m=Object(c.a)(f,2),h=m[0],O=m[1],g=Object(o.useState)(0),p=Object(c.a)(g,2),x=p[0],k=p[1],y=Object(o.useState)({}),w=Object(c.a)(y,2),C=w[0],D=w[1],z=Object(o.useState)({date:"",hour:"",min:0}),B=Object(c.a)(z,2),S=B[0],A=B[1],M=Object(o.useState)(null),N=Object(c.a)(M,2),I=N[0],U=N[1],T=Object(o.useState)(null),F=Object(c.a)(T,2),H=F[0],K=F[1],_=Object(E.c)("api/admin/users/filter",h,!h),L=_.refetch,R=_.response,V=function(n){var e=n.target,t=e.name,r=e.value;if(""===r)return delete C[t],void D(Object(i.a)({},C));D((function(n){return Object(i.a)(Object(i.a)({},n),{},Object(vn.a)({},t,r))}))},W=function(n){var e=n.target,t=e.name,r=e.value;A((function(n){return Object(i.a)(Object(i.a)({},n),{},Object(vn.a)({},t,r))}))};return Object(o.useEffect)((function(){if(s){var n=s.time,e=s.dayNumber,t=s.month,r=s.year;console.log("DAY DATA"),console.log(s),U(Object(P.g)(b,s)),K(Object(P.e)(b,s)),A({date:"".concat(r,"-").concat(t<9?"0".concat(t+1):t+1,"-").concat(e<10?"0".concat(e):e),hour:Number(null===n||void 0===n?void 0:n.split("/")[0]),min:Number(null===n||void 0===n?void 0:n.split("/")[1])})}}),[s]),Object(o.useEffect)((function(){return function(){D({}),O(null),k(0)}}),[]),Y.a.createPortal(Object(r.jsxs)(En,{children:[Object(r.jsx)(Mn,{onClick:d}),Object(r.jsxs)(An,{children:[Object(r.jsx)("h2",{children:"Objedna\u0165 z\xe1kazn\xedka"}),Object(r.jsx)(In,{items:Rn,activeIndex:x,setActiveIndex:k}),1===x?Object(r.jsxs)(Un,{children:[Object(r.jsx)(fn.a,{label:"Meno, priezvisko, e-mail alebo tel. \u010d\xedslo",name:"query",value:h?null===h||void 0===h?void 0:h.query:"",handleChange:function(n){return O({limit:10,query:n.target.value})},onKeyPress:function(n){null!==h&&"Enter"===n.key&&L()}}),Object(r.jsx)(Nn,{onClick:function(){h&&L()},children:"H\u013eada\u0165"}),Object(r.jsxs)(Tn,{children:[Object(r.jsxs)(Pn,{children:[Object(r.jsx)(Hn,{children:"Meno"}),Object(r.jsx)(Hn,{children:"E-mail"}),Object(r.jsx)(Hn,{children:"Tel. \u010d\xedslo"})]}),(null===R||void 0===R?void 0:R.users)?null===R||void 0===R||null===(e=R.users)||void 0===e?void 0:e.map((function(n,e){var t=n.name,c=n.email,o=n.phone;return Object(r.jsxs)(Fn,{onClick:function(){return n={name:t,email:c,phone:o},D((function(e){return Object(i.a)(Object(i.a)({},e),n)})),k(0),void O(null);var n},children:[Object(r.jsx)(Hn,{children:t}),Object(r.jsx)(Hn,{children:c}),Object(r.jsx)(Hn,{children:o})]},e)})):Object(r.jsx)("div",{children:Object(r.jsx)("p",{children:"\u017diaden v\xfdsledok"})})]})]}):Object(r.jsxs)(a.a.Fragment,{children:[Object(r.jsxs)("div",{children:[Object(r.jsx)("h3",{children:"D\xe1tum vy\u0161etrenia"}),Object(r.jsxs)(_n,{children:[Object(r.jsx)(fn.a,{label:"",type:"date",name:"date",handleChange:W,value:null===S||void 0===S?void 0:S.date}),Object(r.jsx)("div",{children:Object(r.jsx)(fn.a,{label:"\u010cas",type:"number",name:"hour",value:null===S||void 0===S||null===(t=S.hour)||void 0===t?void 0:t.toString(),min:null===I||void 0===I?void 0:I.split(":")[0],max:null===H||void 0===H?void 0:H.split(":")[0],handleChange:W,step:"1"})}),Object(r.jsx)("p",{children:":"}),Object(r.jsx)("div",{children:Object(r.jsxs)(Kn,{name:"min",value:null===S||void 0===S||null===(l=S.min)||void 0===l?void 0:l.toString(),onChange:W,children:[Object(r.jsx)("option",{value:0,children:"00"}),30===(null===b||void 0===b?void 0:b.interval)&&Object(r.jsx)("option",{value:30,children:"30"})]})})]})]}),Object(r.jsx)("div",{children:Object(r.jsx)(fn.a,{label:"Meno*",name:"name",value:(null===C||void 0===C?void 0:C.name)||"",handleChange:V})}),Object(r.jsx)("div",{children:Object(r.jsx)(fn.a,{label:"E-mail*",name:"email",value:(null===C||void 0===C?void 0:C.email)||"",handleChange:V})}),Object(r.jsx)("div",{children:Object(r.jsx)(fn.a,{label:"Tel. \u010d\xedslo*",name:"phone",value:(null===C||void 0===C?void 0:C.phone)||"",handleChange:V})}),Object(r.jsx)("div",{children:Object(r.jsx)(mn.a,{label:"Pozn\xe1mka",name:"note",rows:"5",value:(null===C||void 0===C?void 0:C.note)||"",handleChange:V})}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h3",{children:"Vy\u0161etrenie"}),Object(r.jsxs)(Kn,{name:"booking",value:(null===C||void 0===C?void 0:C.booking)||"",onChange:V,children:[Object(r.jsx)("option",{value:"",children:"Nezvolen\xe9"}),null===b||void 0===b?void 0:b.bookings.map((function(n,e){if(!1!==n.active)return Object(r.jsx)("option",{value:n._id,children:n.name},e)}))]})]})]}),0===x&&Object(r.jsx)(Nn,{onClick:function(){var n=Object(i.a)(Object(i.a)({},C),{},{dueTime:Object(P.h)(S),values:{}});console.log("USER BOOKING BEFORE SEND"),console.log(n),v(n,j,d,u)},children:"Vytvori\u0165"})]})]}),document.getElementById("portal"))},Rn=[{id:0,name:"Nov\xfd z\xe1kazn\xedk"},{id:1,name:"Vyhlada\u0165 z\xe1kazn\xedka"}],Vn=t(126),Wn=t.n(Vn);function Xn(){var n=Object(j.a)(["\n    cursor: pointer;\n    border: var(--appointment-container-border);\n    background-color: ",";\n    color: var(--appointment-container-text-color);\n    font-weight: bolder;\n    width: 100%;\n    height: 100%;\n    padding: .5rem;\n    position: absolute;\n    bottom: ",";\n    top: ",";\n    font-size: 1.2rem;\n    z-index: 99;\n\n    h4 {\n        width: 8rem;\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n    }\n"]);return Xn=function(){return n},n}var Yn=v.c.div(Xn(),(function(n){var e=n.color;return e||"transparent"}),(function(n){return n.isHalfHour?0:"unset"}),(function(n){return n.isHalfHour?"unset":0})),Zn=function(n){var e,t,i,l=n.dayData,u=n.calendarId,d=n.time,s=n.userBookings,b=n.open,j=Object(o.useState)(!1),v=Object(c.a)(j,2),f=v[0],m=v[1],h=Object(E.c)("api/booking/calendars/".concat(u,"/dayInfo"),{date:l.bookingDate},!(null===l||void 0===l?void 0:l.bookingDate)),O=h.response,g=h.isLoading,p=h.refetch,x=Object(o.useState)(null),k=Object(c.a)(x,2),y=k[0],w=k[1],C=Object(o.useState)(!1),D=Object(c.a)(C,2),z=D[0],B=D[1],S=Object(o.useState)(!1),A=Object(c.a)(S,2),M=(A[0],A[1]);return Object(o.useEffect)((function(){var n;if(!g){var e=null===O||void 0===O||null===(n=O.userBookings)||void 0===n?void 0:n.filter((function(n){return!(null===n||void 0===n?void 0:n.cancelled)})).map((function(n){return null===n||void 0===n?void 0:n.dueTime}));if((null===e||void 0===e?void 0:e.length)>0){var t,r,i,c=Wn.a.findBestMatch(null===s||void 0===s?void 0:s.dueDate,e),o=null===O||void 0===O||null===(t=O.userBookings)||void 0===t?void 0:t.find((function(n){return(null===n||void 0===n?void 0:n.dueTime)===(null===s||void 0===s?void 0:s.dueDate)})),a=null===O||void 0===O||null===(r=O.userBookings)||void 0===r?void 0:r.find((function(n){var e;return(null===n||void 0===n?void 0:n.dueTime)===(null===c||void 0===c||null===(e=c.bestMatch)||void 0===e?void 0:e.target)}));(null===s||void 0===s?void 0:s.dueDate)===(null===o||void 0===o?void 0:o.dueTime)?B(!0):(null===c||void 0===c||null===(i=c.bestMatch)||void 0===i?void 0:i.target)===(null===a||void 0===a?void 0:a.dueTime)&&M(!0),w(a)}}}),[g]),Object(o.useEffect)((function(){(null===l||void 0===l?void 0:l.bookingDate)&&p()}),[null===l||void 0===l?void 0:l.bookingDate]),Object(o.useEffect)((function(){return function(){m(!1),B(!1)}}),[]),Object(r.jsx)(a.a.Fragment,{children:Object(r.jsx)(Yn,{onClick:z?b:function(){},color:(null===y||void 0===y||null===(e=y.booking)||void 0===e?void 0:e.color)?"#".concat(null===y||void 0===y||null===(t=y.booking)||void 0===t?void 0:t.color):"#444",isHalfHour:f,children:z&&Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:y&&(null===y||void 0===y||null===(i=y.booking)||void 0===i?void 0:i.name)}),Object(r.jsx)("h5",{children:d})]})})})};function qn(){var n=Object(j.a)(["\n    cursor: pointer;\n    border: var(--appointment-container-border);\n    background-color: var(--appointment-container-background-color);\n    color: var(--appointment-container-text-color);\n    font-weight: bolder;\n    width: 100%;\n    height: 50%;\n    padding: .5rem;\n    /* position: absolute; */\n\n"]);return qn=function(){return n},n}function Gn(){var n=Object(j.a)(['\n    content: "";\n    position: relative;\n    /* position: absolute; */\n    /* width: 5rem; */\n    height: 100%;\n    /* top: 0;\n    left: 0;\n    bottom: 0;\n    right: 0; */\n    /* background-color: red; */\n']);return Gn=function(){return n},n}function Jn(){var n=Object(j.a)(["\n    cursor: pointer;\n    position: relative;\n    /* width: 15rem; */\n    height: 10rem;\n    border-bottom: var(--table-border);\n    background-color: var(--background-primary-color);\n\n\n    span {\n        display: none;\n    }\n"]);return Jn=function(){return n},n}function Qn(){var n=Object(j.a)(["\n    display: block;\n    /* position: relative; */\n    p {\n        /* width: 6rem; */\n        display: block;\n        opacity: .6;\n        /* position: absolute; */\n        top: 0rem;\n        /* left: -5.8rem; */\n        left: 0;\n        font-size: 1.4rem;\n        padding: .5rem 1rem .5rem .2rem;\n        border-radius: 9999rem;\n        text-align: end;\n        letter-spacing: .05rem;\n    }\n"]);return Qn=function(){return n},n}function $n(){var n=Object(j.a)(["\n    background-color: var(--body-background-primary-color);\n\n"]);return $n=function(){return n},n}function ne(){var n=Object(j.a)(["\n    cursor: default;\n    height: 8rem;\n    background-color: var(--color-black);\n    color: var(--table-head-color);\n    display: flex;\n    flex-direction: column;\n    align-items:center;\n    justify-content:center;\n    font-weight: 700;\n\n    p:first-child {\n        font-weight: lighter;\n    }\n\n    /* background-color: red; */\n    ","\n"]);return ne=function(){return n},n}function ee(){var n=Object(j.a)(["\n    display: grid;\n    grid-template-columns: 6rem repeat(7, 1fr);\n\n    background-color: var(--color-black);\n\n    /* border: var(--table-border); */\n    min-width: 55rem;\n    /* padding-left: 5rem; */\n    padding-right: 1rem;\n\n"]);return ee=function(){return n},n}function te(){var n=Object(j.a)(["\n    position: relative;\n\n    overflow-y: scroll;\n    /* overflow-x: auto; */\n    height: 60rem;\n    display: grid;\n    grid-template-columns: 6rem repeat(7, 1fr);\n    /* border: var(--table-border); */\n    min-width: 55rem;\n    /* padding-left: 5rem; */\n\n\n   ::-webkit-scrollbar {\n        width: 1rem;\n    }\n\n    /* Track */\n    ::-webkit-scrollbar-track {\n        background:  var(--background-primary-color);\n    }\n\n    /* Handle */\n    ::-webkit-scrollbar-thumb {\n        background: var(--primary-color);\n    }\n\n    /* Handle on hover */\n    ::-webkit-scrollbar-thumb:hover {\n        background: var(--primary-color);\n    }\n"]);return te=function(){return n},n}function re(){var n=Object(j.a)(["\n    width: 100%;\n"]);return re=function(){return n},n}var ie=v.c.div(re()),ce=v.c.div(te()),oe=v.c.div(ee()),ae=v.c.div(ne(),(function(n){return n.isDisabled?"\n        opacity: .6;\n    ":""})),le=v.c.div($n()),ue=v.c.div(Qn()),de=v.c.div(Jn()),se=v.c.div(Gn()),be=(v.c.div(qn()),function(n){var e=n.calendar,t=n.year,l=n.month,u=n.weekIndex,d=n.showUserBooking,s=n.setShowUserBooking,b=n.handleOpenUserBookingModal,j=n.selectedDay,v=Object(o.useContext)(U),f=v.timeline,m=v.getDayData,h=v.refetchWeekCalendar,O=v.cancelUserBooking,g=Object(o.useContext)(W.BookingContext).createUserBooking,p=Object(E.b)("api/booking/calendars",e,!e),x=p.response,k=p.isLoading,y=p.refetch,w=new Date(t,l+1,0).getDate(),C=new Date(t,l,0).getDay(),D=new Date(t,l+1,0).getDay(),z=new Date(t,l,0).getDate(),S=7-D,A=Object(o.useState)([]),M=Object(c.a)(A,2),I=M[0],T=M[1],F=Object(o.useState)(!1),H=Object(c.a)(F,2),K=H[0],_=H[1],L=Object(o.useState)(null),R=Object(c.a)(L,2),V=R[0],X=R[1];return Object(o.useEffect)((function(){if(!k&&x.calendar){var n=Object(P.n)(C),e=Object(P.l)(w),r=Object(P.m)(S),i=Object(P.k)(e,x.calendar,l,t);T([].concat(Object(B.a)(n),Object(B.a)(i),Object(B.a)(r)))}}),[k]),Object(o.useEffect)((function(){y()}),[l]),Object(r.jsxs)("div",{children:[K&&Object(r.jsx)(jn,{cancelUserBooking:function(n){O(n,h,_)},calendarId:e,userBooking:V,close:function(){return _(!1)}}),d&&Object(r.jsx)(Ln,{refetchWeekCalendar:h,createUserBooking:g,refetchCalendar:y,calendar:null===x||void 0===x?void 0:x.calendar,day:j,close:function(){return s(!1)}}),Object(r.jsxs)(ie,{children:[Object(r.jsxs)(oe,{children:[Object(r.jsx)(ae,{children:" "}),I.slice(7*u,7*u+7).map((function(n,e){var i=n.dayNumber,c=n.isDisable,o=n.isPrevDay,u=n.isNextDay;return Object(r.jsx)(ae,{isDisabled:c,children:o?Object(r.jsxs)(a.a.Fragment,{children:[Object(r.jsx)("p",{children:P.c[new Date(t,l-1,z-i).getDay()]}),Object(r.jsx)("p",{children:z-(i-1)})]}):u?Object(r.jsxs)(a.a.Fragment,{children:[Object(r.jsx)("p",{children:P.c[new Date(t,l+1,i-1).getDay()]}),Object(r.jsxs)("p",{children:[i," "]})]}):Object(r.jsxs)(a.a.Fragment,{children:[Object(r.jsx)("p",{children:P.c[new Date(t,l,i-1).getDay()]}),Object(r.jsxs)("p",{children:[i," "]})]})},e)}))]}),Object(r.jsxs)(ce,{children:[Object(r.jsx)(le,{children:f&&f.map((function(n,e){var t,i;return Object(r.jsx)(de,{style:60===(null===x||void 0===x||null===(t=x.calendar)||void 0===t?void 0:t.interval)?{height:"10rem"}:{height:"5rem"},children:Object(r.jsx)(ue,{children:Object(r.jsx)("p",{children:null!==(i=N(n))&&void 0!==i?i:""})})},e)}))}),I.length>0&&I.slice(7*u,7*u+7).map((function(n,c){var o=m(null===n||void 0===n?void 0:n.dayNumber,c);return Object(r.jsx)(le,{children:o&&o.map((function(c,o){var a;return Object(r.jsxs)(de,{style:60===(null===x||void 0===x||null===(a=x.calendar)||void 0===a?void 0:a.interval)?{height:"10rem"}:{height:"5rem"},children:[(null===c||void 0===c?void 0:c.userBookings)&&Object(r.jsx)(Zn,{dayData:n,calendarId:e,time:c.time,userBookings:c.userBookings,open:function(){return X(c),void _(!0)}}),Object(r.jsx)(se,{onClick:function(){return b(Object(i.a)(Object(i.a)({},n),{},{time:c.time,year:t,month:l}))}})]},o)}))},c)}))]})]})]})});function je(){var n=Object(j.a)(["\n    display: grid;\n    grid-template-columns: 10rem 1fr 1fr 20rem 1fr 10rem;\n    align-items: center;\n    margin-bottom: 1rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n"]);return je=function(){return n},n}function ve(){var n=Object(j.a)(["\n    padding: 2rem;\n    text-align: center;\n"]);return ve=function(){return n},n}function fe(){var n=Object(j.a)(["\n    display: grid;\n    align-content: center;\n    grid-template-columns: 10rem 1fr 1fr 20rem 1fr 10rem;\n\n    border-bottom: 1px solid var(--secondary-text-color);\n    font-weight: bolder;\n"]);return fe=function(){return n},n}v.c.div(fe()),v.c.div(ve()),v.c.div(je());var me=t(55);function he(){var n=Object(j.a)(["\n    margin-top: 1.5rem;\n    min-width: 16.5rem;\n    width: 100%;\n    background-color: var(--input-background-color);\n    color: var(--input-color);\n    border: none;\n    padding: .5rem .5rem .5rem 1rem;\n    font-size: inherit;\n    font-family: inherit;\n    display: block;\n"]);return he=function(){return n},n}function Oe(){var n=Object(j.a)(["\n    display: block;\n    margin: 0 auto;\n    background-color: var(--primary-color);\n    font-weight: bolder;\n"]);return Oe=function(){return n},n}function ge(){var n=Object(j.a)(["\n    margin-bottom: 2rem;\n"]);return ge=function(){return n},n}function pe(){var n=Object(j.a)(["\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n\n"]);return pe=function(){return n},n}function xe(){var n=Object(j.a)(["\n    width: 100%;\n    height: 100%;\n\n    position: fixed;\n    left: 0;\n    right: 0;\n    z-index: 99999;\n\n    border: none;\n    outline: none;\n    opacity: 0;\n\n    &:focus {\n        outline: none\n    }\n"]);return xe=function(){return n},n}function ke(){var n=Object(j.a)(["\n    width:100%;\n    max-width: 50rem;\n    max-height: 60rem;\n\n    overflow-y: scroll;\n\n    /* display: flex;\n    flex-direction: column;\n    align-items: center; */\n\n    padding: 2rem;\n    border-radius: .5rem;\n    background-color: var(--background-primary-color);\n    color: var(--primary-text-color);\n\n    position: relative;\n    z-index: 999999;\n\n    ::-webkit-scrollbar {\n        width: 10px;\n    }\n\n    /* Track */\n    ::-webkit-scrollbar-track {\n        background:  var(--background-primary-color);\n    }\n\n    /* Handle */\n    ::-webkit-scrollbar-thumb {\n        background: var(--primary-color);\n    }\n\n    /* Handle on hover */\n    ::-webkit-scrollbar-thumb:hover {\n        background: var(--primary-color);\n    }\n"]);return ke=function(){return n},n}function ye(){var n=Object(j.a)(["\n    position: fixed;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    z-index: 99999;\n\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    background-color: rgba(0,0,0,0.3);\n"]);return ye=function(){return n},n}var we=v.c.div(ye()),Ce=v.c.div(ke()),De=v.c.button(xe()),ze=v.c.div(pe()),Be=v.c.div(ge()),Se=Object(v.c)(f.a)(Oe()),Ee=v.c.select(he()),Ae=function(n){var e=n.close,t=n.calendarId,a=n.refetch,l=n.selectedBooking,u=Object(o.useContext)(W.BookingContext),d=u.createBooking,s=u.updateBooking,b=Object(E.b)("api/booking/bookings",l,!l),j=b.response,v=b.isLoading,f=Object(o.useState)({}),m=Object(c.a)(f,2),h=m[0],O=m[1],g=Object(o.useState)(!1),p=Object(c.a)(g,2),x=p[0],k=p[1],y=function(n){var e=n.target,t=e.name,r=e.value;if(""===r)return delete h[t],void O(Object(i.a)({},h));O((function(n){return Object(i.a)(Object(i.a)({},n),{},Object(vn.a)({},t,r))}))},w=function(){if(null===h||void 0===h?void 0:h.name){if(x){var n=Object(P.d)(h);console.log("BOOKING BEFORE UPDATE"),console.log(n),s(n,h._id)}else{var r=Object(i.a)(Object(i.a)({},h),{},{calendar:t});console.log("BOOKING BEFORE CREATE"),console.log(r),d(r)}a(),e()}};return Object(o.useEffect)((function(){v||(null===j||void 0===j?void 0:j.booking)&&(k(!0),O(null===j||void 0===j?void 0:j.booking))}),[l,v]),Object(o.useEffect)((function(){return function(){k(!1),O({})}}),[]),console.log(h),Y.a.createPortal(Object(r.jsxs)(we,{children:[Object(r.jsx)(De,{onClick:e}),Object(r.jsxs)(Ce,{children:[Object(r.jsxs)(ze,{children:[!x&&Object(r.jsx)("h2",{children:"Nov\xe9 vy\u0161etrenie"}),x&&Object(r.jsx)("h2",{children:"Upravi\u0165 vy\u0161etrenie"}),Object(r.jsx)("div",{children:Object(r.jsx)(me.a,{label:"Aktivn\xe9",isActive:(null===h||void 0===h?void 0:h.active)||!1,name:"active",handleClick:function(){return y({target:{name:"active",value:!(null===h||void 0===h?void 0:h.active)||!(null===h||void 0===h?void 0:h.active)}})}})})]}),Object(r.jsx)(Be,{children:Object(r.jsx)(fn.a,{label:"N\xe1zov vy\u0161etrenia*",name:"name",value:(null===h||void 0===h?void 0:h.name)||"",handleChange:y})}),Object(r.jsx)(Be,{children:Object(r.jsx)(fn.a,{label:"Cena",name:"price",value:(null===h||void 0===h?void 0:h.price)||"",handleChange:y})}),Object(r.jsx)(Be,{children:Object(r.jsx)(fn.a,{label:"\u010cas",name:"time",value:(null===h||void 0===h?void 0:h.time)||"",handleChange:y})}),Object(r.jsx)(Be,{children:Object(r.jsxs)(Ee,{label:"Farba",type:"text",name:"color",value:(null===h||void 0===h?void 0:h.color)||"",onChange:y,children:[Object(r.jsx)("option",{value:"DD4C4C",children:"\u010cerven\xe1"}),Object(r.jsx)("option",{value:"ebac01",children:"\u017dlt\xe1"}),Object(r.jsx)("option",{value:"32AA5F",children:"Zelen\xe1"})]})}),Object(r.jsx)(Be,{children:Object(r.jsx)(mn.a,{label:"Popis",rows:"5",name:"description",value:(null===h||void 0===h?void 0:h.description)||"",handleChange:y})}),!x&&Object(r.jsx)(Se,{onClick:w,children:"Prida\u0165"}),x&&Object(r.jsx)(Se,{onClick:w,children:"Ulo\u017ei\u0165"})]})]}),document.getElementById("portal"))};function Me(){var n=Object(j.a)(["\n    margin-left: 1rem;\n    opacity: .6;\n"]);return Me=function(){return n},n}function Ne(){var n=Object(j.a)(["\n    background-color: var(--primary-color);\n    font-weight: bolder;\n    font-size: 1.2rem;\n"]);return Ne=function(){return n},n}function Ie(){var n=Object(j.a)(["\n    background-color: var(--color-red);\n    font-size: 1.2rem;\n    margin-left: 1rem;\n"]);return Ie=function(){return n},n}function Ue(){var n=Object(j.a)(["\n    display: flex;\n    justify-content: flex-end;\n"]);return Ue=function(){return n},n}function Te(){var n=Object(j.a)(["\n    opacity: .8;\n    margin-bottom: 2rem;\n"]);return Te=function(){return n},n}function Pe(){var n=Object(j.a)(["\n    font-size: 1.2rem;\n    color: ",";\n"]);return Pe=function(){return n},n}function Fe(){var n=Object(j.a)(["\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 1rem;\n"]);return Fe=function(){return n},n}function He(){var n=Object(j.a)(["\n    padding: 2rem;\n    box-shadow: var(--container-shadow);\n    background-color: var(--container-background-color);\n    border-radius: .5rem;\n    margin-bottom: 3rem;\n"]);return He=function(){return n},n}function Ke(){var n=Object(j.a)(["\n    background-color: var(--primary-color);\n    font-weight: bolder;\n"]);return Ke=function(){return n},n}function _e(){var n=Object(j.a)(["\n    display: flex;\n    justify-content: space-between;\n    align-items: center; \n    margin-bottom: 3rem;\n"]);return _e=function(){return n},n}function Le(){var n=Object(j.a)(["\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    grid-gap: 3rem;\n    margin-bottom: 10rem;\n\n    @media all and (max-width: 1150px) {\n        grid-template-columns: 2fr 1fr;\n        @media all and (max-width: 800px) {\n            grid-template-columns: 3fr 1fr;\n            @media all and (max-width: 500px) {\n                grid-template-columns: 1fr;\n            }\n        }\n\n    }\n"]);return Le=function(){return n},n}var Re=v.c.div(Le()),Ve=v.c.div(_e()),We=Object(v.c)(f.a)(Ke()),Xe=v.c.div(He()),Ye=v.c.div(Fe()),Ze=v.c.span(Pe(),(function(n){return n.isActive?"var(--color-green)":"var(--color-red)"})),qe=v.c.div(Te()),Ge=v.c.div(Ue()),Je=Object(v.c)(f.a)(Ie()),Qe=Object(v.c)(f.a)(Ne()),$e=v.c.div(Me()),nt=function(n){var e,t,i,a,l=n.calendarId,u=Object(o.useContext)(d.a).isAdmin,s=Object(o.useContext)(W.BookingContext).deleteBooking,b=Object(E.b)("api/booking/calendars",l,!l),j=b.response,v=b.isLoading,f=b.refetch,m=Object(o.useState)(!1),h=Object(c.a)(m,2),O=h[0],g=h[1],p=Object(o.useState)(null),x=Object(c.a)(p,2),k=x[0],y=x[1];return v?Object(r.jsx)(Z.a,{}):Object(r.jsxs)(Re,{children:[O&&Object(r.jsx)(Ae,{selectedBooking:k,calendarId:l,close:function(){g(!1),y(null)},refetch:f}),Object(r.jsxs)("div",{children:[Object(r.jsxs)(Ve,{children:[Object(r.jsx)("h3",{children:"Vy\u0161etrenia"}),u&&Object(r.jsx)(We,{onClick:function(){return g(!0)},children:"Prida\u0165"})]}),Object(r.jsxs)("div",{children:[null===j||void 0===j||null===(e=j.calendar)||void 0===e||null===(t=e.bookings)||void 0===t?void 0:t.map((function(n,e){return Object(r.jsxs)(Xe,{children:[Object(r.jsxs)(Ye,{children:[Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:n.name}),Object(r.jsx)(Ze,{isActive:null===n||void 0===n?void 0:n.active,children:(null===n||void 0===n?void 0:n.active)?"Aktivn\xe9":"Neaktivn\xe9"})]}),Object(r.jsx)("div",{children:Object(r.jsxs)("p",{children:[n.price,"\u20ac"]})})]}),Object(r.jsx)(qe,{children:Object(r.jsx)("p",{children:n.description})}),u&&Object(r.jsxs)(Ge,{children:[Object(r.jsx)(Qe,{onClick:function(){return e=n._id,y(e),void g(!0);var e},children:"Upravi\u0165"}),Object(r.jsx)(Je,{onClick:function(){return e=n._id,s(e),void f();var e},children:"Vymaza\u0165"})]})]},e)})),!(null===j||void 0===j||null===(i=j.calendar)||void 0===i||null===(a=i.bookings)||void 0===a?void 0:a.length)&&Object(r.jsx)($e,{children:"\u017diadn\xe9 vy\u0161etrenia"})]})]})]})},et=t(57),tt=t(14);function rt(){var n=Object(j.a)(["\n    background-color: ",";\n    color: ",";\n    cursor: pointer;\n    padding: 0.5rem 2rem;\n\n    transition: all .3s ease-in-out;\n"]);return rt=function(){return n},n}function it(){var n=Object(j.a)(["\n    display: flex;\n    align-items: center;\n\n    button {\n        cursor: pointer;\n        font-size: 2rem;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        color: var(--primary-color);\n\n    }\n\n    div {\n        text-align: center;\n        margin: 0 1rem;\n    }\n\n    p {\n        text-transform: capitalize;\n        margin: 0 1rem;\n    }\n"]);return it=function(){return n},n}function ct(){var n=Object(j.a)(["\n    display: flex; \n    justify-content: space-between;\n    align-items: center;\n\n    ul {\n        list-style: none;\n        display: flex;\n        /* gap: 2rem; */\n\n\n    }\n"]);return ct=function(){return n},n}function ot(){var n=Object(j.a)(["\n    display: flex;\n    justify-content:center;\n    align-items: center;\n    color: var(--primary-color);\n    font-size: 3rem;\n    margin-left: 1rem;\n"]);return ot=function(){return n},n}function at(){var n=Object(j.a)(["\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 3rem;\n\n    div {\n        display: flex;\n        align-items: center;\n        cursor: pointer;\n    }\n"]);return at=function(){return n},n}function lt(){var n=Object(j.a)(["\n    margin-top: 3rem;\n    margin-bottom: 3rem;\n"]);return lt=function(){return n},n}function ut(){var n=Object(j.a)(["\n    display: grid;\n    grid-template-columns: repeat( auto-fit, minmax(27rem, 1fr) );\n    margin-bottom: 3rem;\n    grid-gap: 2rem;\n"]);return ut=function(){return n},n}function dt(){var n=Object(j.a)(["\n    /* margin-bottom: 2rem; */\n"]);return dt=function(){return n},n}function st(){var n=Object(j.a)(["\n    background-color: var(--primary-color);\n    font-weight: bolder;\n    margin-left: 2rem;\n"]);return st=function(){return n},n}function bt(){var n=Object(j.a)(["\n    ","\n    padding-top: 2rem;\n    padding-bottom: 3rem;\n    display: flex;\n    align-items:center;\n    justify-content: space-between;\n    color: var(--primary-text-color);\n"]);return bt=function(){return n},n}var jt=v.c.div(bt(),tt.e),vt=Object(v.c)(f.a)(st()),ft=v.c.h2(dt()),mt=v.c.div(ut()),ht=v.c.div(lt()),Ot=v.c.div(at()),gt=v.c.div(ot()),pt=v.c.div(ct()),xt=v.c.div(it()),kt=v.c.li(rt(),(function(n){return n.isActive?"var(--primary-color)":"none"}),(function(n){return n.isActive?"var(--button-font-color)":"var(--primary-color)"}));e.default=function(){var n,e=Object(o.useContext)(d.a),t=e.isAdmin,j=e.currentUser,v=e.isOptometrist,f=Object(o.useContext)(u.a),m=f.showModal,h=f.setShowModal,O=f.message,g=f.closeModal,p=Object(l.h)().push,x=Object(o.useState)(!0),k=Object(c.a)(x,2),y=k[0],C=k[1],D=Object(o.useState)(1),z=Object(c.a)(D,2),B=z[0],S=z[1],A=Object(o.useState)([]),M=Object(c.a)(A,2),N=M[0],I=M[1],U=Object(o.useState)(null),F=Object(c.a)(U,2),H=F[0],K=F[1],_=Object(o.useState)((new Date).getMonth()),L=Object(c.a)(_,2),R=L[0],W=L[1],X=Object(o.useState)((new Date).getFullYear()),Y=Object(c.a)(X,2),Z=Y[0],q=Y[1],G=Object(o.useState)(0),J=Object(c.a)(G,2),Q=J[0],$=J[1],nn=Object(o.useState)(null),en=Object(c.a)(nn,2),tn=en[0],rn=en[1],cn=Object(o.useState)(!1),on=Object(c.a)(cn,2),an=on[0],ln=on[1],un=function(n){console.log("dayData"),console.log("dayData"),console.log(n),null!==n&&rn(Object(i.a)({},n)),ln(!0)},dn=Object(E.a)("api/booking/calendars"),sn=dn.isLoading,bn=dn.response,jn=function(n){n&&(K(n),C(!1),vn())},vn=function(){W((new Date).getMonth()),q((new Date).getFullYear()),$(Math.ceil((new Date).getDate()/7)-1)},fn=function(n){console.log(n),$(Math.ceil(n.dayNumber/7)-1),S(1)};return Object(o.useEffect)((function(){if(!sn&&bn){if(t){I(bn.calendars);var n=bn.calendars.find((function(n){return n.premises===j.premises}));jn(null===n||void 0===n?void 0:n._id),h(!1)}else{I(bn.calendars.filter((function(n){return n.premises===j.premises})));var e=bn.calendars.find((function(n){return n.premises===j.premises}));jn(null===e||void 0===e?void 0:e._id),h(!1)}g()}}),[sn]),Object(o.useEffect)((function(){return console.log("unmount"),function(){h(!0),C(!0),S(0),I([]),K(null),W((new Date).getMonth()),q((new Date).getFullYear()),$(0),rn(null)}}),[]),console.log(N),console.log(H),console.log(an),Object(r.jsxs)("section",{children:[m&&Object(r.jsx)(b.a,{loading:sn,title:O,close:function(){return h(!1)}}),t&&Object(r.jsxs)(jt,{children:[Object(r.jsx)("div",{children:Object(r.jsx)("h1",{children:"Rezerv\xe1cie"})}),Object(r.jsxs)("div",{children:[Object(r.jsx)(vt,{onClick:function(){return un(null)},children:"Prida\u0165 rezerv\xe1ciu"}),Object(r.jsx)(vt,{onClick:function(){return p("rezervacie/novy-kalendar")},children:"Prida\u0165 kalend\xe1r"})]})]}),!v&&!t&&Object(r.jsxs)(jt,{children:[Object(r.jsx)("div",{children:Object(r.jsx)("h1",{children:"Rezerv\xe1cie"})}),H?Object(r.jsx)("div",{children:Object(r.jsx)(vt,{onClick:function(){return un(null)},children:"Prida\u0165 rezerv\xe1ciu"})}):Object(r.jsx)("div",{children:Object(r.jsx)("p",{children:"K va\u0161emu \xfa\u010dtu nieje priraden\xe1 prev\xe1dzka"})})]}),v&&!t&&Object(r.jsxs)(jt,{children:[Object(r.jsx)("div",{children:Object(r.jsx)("h1",{children:"Rezerv\xe1cie"})}),H?Object(r.jsxs)("div",{children:[Object(r.jsx)(vt,{onClick:function(){return un(null)},children:"Prida\u0165 rezerv\xe1ciu"}),Object(r.jsx)(vt,{onClick:function(){return p("rezervacie/".concat(H))},children:"Upravi\u0165 kalend\xe1r"})]}):Object(r.jsx)("div",{children:Object(r.jsx)("p",{children:"K va\u0161emu \xfa\u010dtu nieje priraden\xe1 prev\xe1dzka"})})]}),Object(r.jsxs)(s.a,{children:[t&&Object(r.jsxs)(Ot,{children:[Object(r.jsx)(ft,{children:"Pobo\u010dky"}),Object(r.jsxs)("div",{onClick:function(){return C((function(n){return!n}))},children:[Object(r.jsx)("p",{children:null===(n=N.find((function(n){return n._id===H})))||void 0===n?void 0:n.name}),Object(r.jsx)(gt,{children:y?Object(r.jsx)(et.r,{}):Object(r.jsx)(et.f,{})})]})]}),y&&Object(r.jsx)(mt,{children:N&&N.map((function(n,e){return Object(r.jsx)(w,{calendar:n,selectedCalendar:H,handleShowUpClick:function(){return jn(n._id)},handleUpdateClick:function(){return p("rezervacie/".concat(n._id))}},e)}))}),H&&Object(r.jsxs)(a.a.Fragment,{children:[Object(r.jsxs)(pt,{children:[Object(r.jsx)(ft,{children:"Kalend\xe1r"}),0===B?Object(r.jsxs)(xt,{children:[Object(r.jsx)("button",{onClick:function(){0===R?(q((function(n){return n-1})),W(11)):W((function(n){return n-1}))},children:Object(r.jsx)(et.m,{})}),Object(r.jsx)("p",{children:P.o[R]}),Object(r.jsx)("button",{onClick:function(){11===R?(q((function(n){return n+1})),W(0)):W((function(n){return n+1}))},children:Object(r.jsx)(et.p,{})})]}):Object(r.jsxs)(xt,{children:[Object(r.jsx)("button",{onClick:function(){Q-1<0?0===R?(q((function(n){return n-1})),W(11),$(Math.ceil(new Date(Z,R,0).getDate()/7)-1)):(W((function(n){return n-1})),$(Math.ceil(new Date(Z,R,0).getDate()/7)-1)):$((function(n){return n-1}))},children:Object(r.jsx)(et.m,{})}),Object(r.jsxs)("div",{children:[Object(r.jsx)("p",{children:Q+1}),Object(r.jsx)("p",{children:P.o[R]})]}),Object(r.jsx)("button",{onClick:function(){var n=new Date(Z,R,0).getDate();7*Q>=n-7?($(0),W((function(n){return n+1})),11===R&&(q((function(n){return n+1})),W(0),$(0))):$((function(n){return n+1}))},children:Object(r.jsx)(et.p,{})})]}),Object(r.jsx)("ul",{children:P.a.map((function(n,e){return Object(r.jsx)(kt,{isActive:B===e,onClick:function(){return S(e)},children:n},e)}))})]}),Object(r.jsx)(ht,{children:0===B?Object(r.jsx)(V,{calendar:H,month:R,year:Z,handleCalendarBlockClick:fn}):Object(r.jsx)(T,{calendar:H,month:R,year:Z,weekIndex:Q,handleCalendarBlockClick:fn,children:Object(r.jsx)(be,{calendar:H,month:R,year:Z,weekIndex:Q,handleCalendarBlockClick:fn,showUserBooking:an,setShowUserBooking:ln,handleOpenUserBookingModal:un,selectedDay:tn})})}),Object(r.jsx)(nt,{calendarId:H})]})]})]})}},55:function(n,e,t){"use strict";var r=t(21),i=t(2),c=t(30),o=(t(1),t(5));function a(){var n=Object(o.a)(["\n    display: inline-block;\n    cursor: pointer;\n    font-size: 1.5rem;\n    font-weight: 700;\n    /* margin-right: 2rem; */\n    background-color: ",";\n    color: ",";\n    /* font-weight: ","; */\n    padding: .8rem 3rem;\n    border-radius: .2rem;\n    transition: all .2s ease-out;\n\n    @media all and (max-width: 500px) {\n        padding: 0.5rem 1.5rem;\n        font-size: 1.4rem;\n    }\n"]);return a=function(){return n},n}var l=t(6).c.div(a(),(function(n){return n.isActive?"var(--primary-color)":"var(--body-background-primary-color)"}),(function(n){return n.isActive?"var(--button-font-color)":"var(--secondary-text-color)"}),(function(n){return n.isActive?"border":"normal"}));e.a=function(n){var e=n.label,t=n.isActive,o=n.handleClick,a=Object(c.a)(n,["label","isActive","handleClick"]);return Object(i.jsx)(l,Object(r.a)(Object(r.a)({isActive:t,onClick:o},a),{},{children:e}))}},59:function(n,e,t){"use strict";var r=t(2),i=(t(1),t(52)),c=t(5),o=t(6),a=t(28),l=t(14);function u(){var n=Object(c.a)(["\n    margin-top: 2rem;\n    margin-left: 1rem;\n    background-color: var(--primary-color);\n    font-weight: bolder;\n"]);return u=function(){return n},n}function d(){var n=Object(c.a)(["\n    margin-top: 2rem;\n\n    margin-left: 2rem;\n"]);return d=function(){return n},n}function s(){var n=Object(c.a)(["\n    background-color: var(--color-red);\n    margin-left: 1.5rem;\n    color: var(--primary-text-color);\n    padding: .5rem 1rem;\n    border-radius: 1.5rem;\n    font-size: 1.4rem;\n"]);return s=function(){return n},n}function b(){var n=Object(c.a)(["\n    display: flex;\n    align-items: center;\n"]);return b=function(){return n},n}function j(){var n=Object(c.a)(["\n    margin-top: 2rem;\n\n    display: flex;\n    align-items: center;\n\n"]);return j=function(){return n},n}function v(){var n=Object(c.a)(["\n    display: flex;\n    color: var(--primary-text-color);\n    justify-content: space-between;\n    margin-bottom: 3rem;\n    ",";    \n\n    @media all and (max-width: 600px) {\n        flex-wrap: wrap;\n    }\n"]);return v=function(){return n},n}var f=o.c.div(v(),l.e),m=o.c.div(j()),h=o.c.div(b()),O=(o.c.div(s()),Object(o.c)(a.a)(d())),g=Object(o.c)(a.a)(u());e.a=function(n){var e=n.searchQuery,t=n.handleSearch,c=n.handleChange,o=n.title,a=(n.count,n.handleAddButton),l=void 0===a?function(){}:a;return Object(r.jsxs)(f,{children:[Object(r.jsx)(m,{children:Object(r.jsx)("h1",{children:o})}),Object(r.jsxs)(h,{children:[t&&Object(r.jsx)("div",{children:Object(r.jsx)(i.a,{type:"search",name:"searchbox",value:e,handleChange:c,onKeyPress:function(n){""!==e&&"Enter"===n.key&&t()},label:"Vyh\u013eada\u0165"})}),t&&Object(r.jsx)(O,{onClick:t,children:"Vyh\u013eada\u0165"}),Object(r.jsx)(g,{onClick:l,children:"Prida\u0165"})]})]})}},60:function(n,e,t){"use strict";var r=t(21),i=t(2),c=t(30),o=(t(1),t(5)),a=t(6),l=t(28),u=t(14);function d(){var n=Object(o.a)(["\n    transition: all 0.3s ease-out;\n    background-color: ",";\n    color: ",";\n    font-weight: ",";\n    padding: ",";\n    font-weight: ",";\n"]);return d=function(){return n},n}function s(){var n=Object(o.a)(["\n    margin-bottom: 3rem;\n    ","\n\n    ul {\n        display: flex;\n        list-style: none;\n\n        li {\n            margin-right: 1.5rem;\n        }\n    }\n"]);return s=function(){return n},n}var b=a.c.div(s(),u.e),j=Object(a.c)(l.a)(d(),(function(n){return n.active?"var(--primary-color)":"var(--background-primary-color)"}),(function(n){return n.active?"#fff":"var(--primary-text-color)"}),(function(n){return n.active?400:700}),(function(n){return n.active?".5rem 2.5rem":".5rem 1rem .5rem 0"}),(function(n){return n.active?"bolder":"normal"}));e.a=function(n){var e=n.items,t=n.activeIndex,o=n.setActiveIndex,a=Object(c.a)(n,["items","activeIndex","setActiveIndex"]);return Object(i.jsx)(b,Object(r.a)(Object(r.a)({},a),{},{children:Object(i.jsx)("ul",{children:e.map((function(n){return Object(i.jsx)("li",{children:Object(i.jsx)(j,{active:n.id===t,onClick:function(){return o(n.id)},children:n.name})},n.id)}))})}))}},61:function(n,e,t){"use strict";var r=t(2),i=t(21),c=t(30),o=(t(1),t(5)),a=t(6);function l(){var n=Object(o.a)(["\n    position: relative;\n    /* margin: 45px 0; */\n\n    .form-input {\n        background: none;\n        background-color: var(--input-background-color);\n        color: var(--input-color);\n\n        font-size: 1.5rem;\n        padding: .5rem .5rem .5rem 2rem;\n        display: block;\n        width: 100%;\n        border: none;\n        border-radius: .5rem;\n        /* border-bottom: 1px solid #000; */\n        margin: 25px 0;\n        font-family: inherit;\n        resize: none;\n\n        &:focus {\n        outline: none;\n        }\n\n        &:focus ~ .form-input-label {\n            ","\n        }\n    }\n\n    .form-input-label {\n        color: var(--input-color);\n        font-size: 1.4rem;\n        font-weight: normal;\n        position: absolute;\n        pointer-events: none;\n        left: 1.5rem;\n        top: .6rem;\n        transition: 300ms ease all;\n\n        &.shrink {\n            ","\n        }\n    }\n"]);return l=function(){return n},n}function u(){var n=Object(o.a)(["\n    left: .5rem;\n    top: -14px;\n    font-size: 12px;\n    color: var(--input-color);\n"]);return u=function(){return n},n}var d=Object(a.b)(u()),s=a.c.div(l(),d,d);e.a=function(n){var e=n.handleChange,t=n.label,o=n.name,a=Object(c.a)(n,["handleChange","label","name"]);return Object(r.jsxs)(s,{children:[Object(r.jsx)("textarea",Object(i.a)({className:"form-input",name:o,onChange:e},a)),t?Object(r.jsx)("label",{htmlFor:o,className:"".concat(a.value.length?"shrink":""," form-input-label"),children:t}):null]})}}}]);
//# sourceMappingURL=13.3e589a91.chunk.js.map