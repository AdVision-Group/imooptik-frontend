(this.webpackJsonpimooptik=this.webpackJsonpimooptik||[]).push([[19],{51:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a={address:"",admin:0,premises:0,boughtProducts:{},city:"",country:"",date:"",email:"",finishedRegistration:!1,lenses:{cylinder:[0,0],cylinderAxes:[0,0],diopters:[0,0],distance:[0,0]},name:"",orders:[],phone:"",psc:"",tempUser:!1,totalSpent:0,watchList:[],fName:"",lName:"",password:"",confirmPassword:""}},60:function(e,t,n){"use strict";n.r(t),n.d(t,"UserContext",(function(){return x}));var a=n(1),r=n(9),s=n.n(r),c=n(12),o=n(31),i=n(19),u=n(10),l=n(0),d=n(2),p=n(17),f=n(16),h=function(e,t){var n=new Headers;n.append("auth-token",e);var a={method:"GET",headers:n,redirect:"follow"};return fetch("".concat("http://195.110.58.166:8080","/api/admin/orders/").concat(t),a)},m=function(e){var t=new Headers;t.append("auth-token",e);var n={method:"GET",headers:t,redirect:"follow"};return fetch("".concat("http://195.110.58.166:8080","/api/admin/users"),n)},b=function(e,t){var n=new Headers;n.append("auth-token",e),n.append("Content-Type","application/json");var a={method:"GET",headers:n,redirect:"follow"};return fetch("".concat("http://195.110.58.166:8080","/api/admin/users/").concat(t),a)},g=function(e,t){var n=t._id,a=t.address,r=t.admin,s=t.city,c=t.country,o=(t.email,t.lenses),i=o.cylinder,u=o.cylinderAxes,l=o.diopters,d=o.distance,p=t.name,f=t.phone,h=t.psc,m=t.premises,b=new Headers;b.append("auth-token",e),b.append("Content-Type","application/json");var g={method:"PATCH",headers:b,body:JSON.stringify({address:a||void 0,admin:r,premises:0===Number(m)?void 0:m,city:s||void 0,country:c||void 0,lenses:{cylinder:i,cylinderAxes:u,diopters:l,distance:d},name:p,phone:f||void 0,psc:h||void 0}),redirect:"follow"};return console.log(n),fetch("".concat("http://195.110.58.166:8080","/api/admin/users/").concat(n),g)},v=function(e,t){console.log(t);var n=t.name,a=t.email,r=new Headers;r.append("auth-token",e),r.append("Content-Type","application/json");var s={method:"POST",headers:r,body:JSON.stringify({email:a,name:n}),redirect:"follow"};return fetch("".concat("http://195.110.58.166:8080","/api/auth/register"),s)},j=function(e,t){console.log(t);var n=t.name,a=t.email,r=t.password,s=t.premises,c=t.admin,o=new Headers;o.append("auth-token",e),o.append("Content-Type","application/json");var i={method:"POST",headers:o,body:JSON.stringify({admin:Number(c),email:a,name:n,premises:Number(s),password:r}),redirect:"follow"};return fetch("".concat("http://195.110.58.166:8080","/api/auth/register"),i)},O=n(51),x=Object(l.createContext)({isUpdating:!1,activeIndex:0,handleChangeFilterItem:function(){},filterItems:[],totalCount:0,users:null,user:null,getUsers:function(){},getUser:function(){},handleChange:function(){},handleDioptersChange:function(){},handleDistanceChange:function(){},handleCylinderChange:function(){},handleCylinderAxesChange:function(){},updateUser:function(){},resetUser:function(){},formToShow:0,switchFormButtons:[],toggleUserForm:function(){},createUser:function(){},getUserOrders:function(){}});t.default=function(e){var t=e.children,n=Object(d.g)().push,r=Object(l.useContext)(p.a).token,y=Object(l.useContext)(f.a),k=y.closeModal,w=y.getMessage,C=y.setIsLoading,N=y.setShowModal,U=Object(l.useState)(O.a),S=Object(u.a)(U,2),z=S[0],A=S[1],T=Object(l.useState)(null),H=Object(u.a)(T,2),I=H[0],F=H[1],P=Object(l.useState)(0),D=Object(u.a)(P,2),J=D[0],E=D[1],G=Object(l.useState)(!1),M=Object(u.a)(G,2),Z=M[0],B=M[1],L=Object(l.useState)(0),V=Object(u.a)(L,2),R=V[0],_=V[1],q=Object(l.useState)(0),K=Object(u.a)(q,2),Q=K[0],W=K[1];Object(l.useEffect)((function(){A(Object(i.a)(Object(i.a)({},z),{},{name:z.fName+" "+z.lName}))}),[z.fName,z.lName]);var X=function(){var e=Object(c.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),N(!0),e.prev=2,e.next=5,m(r);case 5:return t=e.sent,e.next=8,t.json();case 8:n=e.sent,console.log(n),n.users?(F(n.users),E(n.count),C(!1),k()):(w(n.message),C(!1)),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(2),console.log(e.t0),w("Nieco sa pokazilo"),C(!1);case 18:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=Object(c.a)(s.a.mark((function e(t){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),N(!0),B(!0),e.prev=3,e.next=6,b(r,t);case 6:return n=e.sent,e.next=9,n.json();case 9:(a=e.sent).user?(A(Object(i.a)(Object(i.a)(Object(i.a)({},z),a.user),{},{lenses:{cylinder:a.user.lenses.cylinder.length?a.user.lenses.cylinder:[0,0],cylinderAxes:a.user.lenses.cylinderAxes.length?a.user.lenses.cylinderAxes:[0,0],diopters:a.user.lenses.diopters.length?a.user.lenses.diopters:[0,0],distance:a.user.lenses.distance.length?a.user.lenses.distance:[0,0]},fName:a.user.name?a.user.name.split(" ")[0]:"",lName:a.user.name?a.user.name.split(" ")[1]:""})),C(!1),k()):(w(a.message),C(!1)),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(3),console.log(e.t0),w("Nieco sa pokazilo"),C(!1);case 18:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(c.a)(s.a.mark((function e(t){var a,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),N(!0),console.log(t),e.prev=3,e.next=6,g(r,t);case 6:return a=e.sent,e.next=9,a.json();case 9:if(c=e.sent,console.log(c),!c.error){e.next=15;break}return C(!1),w(c.message),e.abrupt("return");case 15:C(!1),k(),n("/dashboard/zakaznici"),X(),e.next=26;break;case 21:e.prev=21,e.t0=e.catch(3),console.log(e.t0),w("Nieco sa pokazilo"),C(!1);case 26:case"end":return e.stop()}}),e,null,[[3,21]])})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=Object(c.a)(s.a.mark((function e(t){var a,c,o,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C(!0),N(!0),e.prev=2,0!==Q){e.next=21;break}return e.next=6,v(r,t);case 6:return a=e.sent,e.next=9,a.json();case 9:if(c=e.sent,console.log(c),!c.error){e.next=15;break}return w(c.message),C(!1),e.abrupt("return");case 15:C(!1),X(),n("/dashboard/zakaznici"),k(),e.next=36;break;case 21:return e.next=23,j(r,t);case 23:return o=e.sent,e.next=26,o.json();case 26:if(i=e.sent,console.log(i),!i.error){e.next=32;break}return w(i.message),C(!1),e.abrupt("return");case 32:C(!1),X(),n("/dashboard/zakaznici"),k();case 36:e.next=43;break;case 38:e.prev=38,e.t0=e.catch(2),console.log(e.t0),w("Nieco sa pokazilo"),C(!1);case 43:case"end":return e.stop()}}),e,null,[[2,38]])})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=Object(c.a)(s.a.mark((function e(t){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),N(!0),e.prev=2,e.next=5,h(r,t);case 5:return n=e.sent,e.next=8,n.json();case 8:a=e.sent,console.log(a),C(!1),w(a.message),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(2),console.log(e.t0),w("Nieco sa pokazilo"),C(!1);case 19:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)(x.Provider,{value:{isUpdating:Z,activeIndex:R,handleChangeFilterItem:function(e){_(e)},filterItems:[{id:0,name:"Z\xe1kaznici",filter:0},{id:1,name:"Zamestnanci",filter:1},{id:2,name:"Ved\xfaci",filter:2},{id:3,name:"Velk\xfd brat",filter:3}],users:I,user:z,totalCount:J,getUsers:X,getUser:Y,handleChange:function(e){var t=e.target,n=t.name,a=t.value;A(Object(i.a)(Object(i.a)({},z),{},Object(o.a)({},n,a)))},handleDioptersChange:function(e,t){var n=z.lenses.diopters;n[t]=Number(e.target.value),A(Object(i.a)(Object(i.a)({},z),{},{lenses:Object(i.a)(Object(i.a)({},z.lenses),{},{diopters:n})}))},handleDistanceChange:function(e,t){var n=z.lenses.distance;n[t]=Number(e.target.value),A(Object(i.a)(Object(i.a)({},z),{},{lenses:Object(i.a)(Object(i.a)({},z.lenses),{},{distance:n})}))},handleCylinderChange:function(e,t){var n=z.lenses.cylinder;n[t]=Number(e.target.value),A(Object(i.a)(Object(i.a)({},z),{},{lenses:Object(i.a)(Object(i.a)({},z.lenses),{},{cylinder:n})}))},handleCylinderAxesChange:function(e,t){var n=z.lenses.cylinderAxes;n[t]=Number(e.target.value),A(Object(i.a)(Object(i.a)({},z),{},{lenses:Object(i.a)(Object(i.a)({},z.lenses),{},{cylinderAxes:n})}))},updateUser:$,resetUser:function(){A(Object(i.a)({},O.a)),B(!1),W(0)},formToShow:Q,switchFormButtons:[{name:"Z\xe1kazn\xedk"},{name:"Admin"}],toggleUserForm:function(e,t){e.preventDefault(),W(t)},createUser:ee,getUserOrders:te},children:t})}}}]);
//# sourceMappingURL=19.76ecc3e5.chunk.js.map