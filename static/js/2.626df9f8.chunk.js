(this.webpackJsonpimooptik=this.webpackJsonpimooptik||[]).push([[2,22],{50:function(e,n,t){"use strict";var r=t(1),a=t(19),i=t(29),s=(t(0),t(7)),c=t(8);function o(){var e=Object(s.a)(["\n    position: relative;\n    /* margin: 45px 0; */\n\n    .form-input {\n        background: none;\n        background-color: #F5F5F5;\n        color: #000;\n        font-size: 1.5rem;\n        padding: 1rem .5rem 1rem 2rem;\n        display: block;\n        width: 100%;\n        border: none;\n        border-radius: .5rem;\n        /* border-bottom: 1px solid #000; */\n        margin: 2rem 0 0;\n        font-family: inherit;\n\n        &:focus {\n        outline: none;\n        }\n\n        &:focus ~ .form-input-label {\n            ","\n        }\n    }\n\n    input[type = 'password'] {\n        letter-spacing: 0.3em;\n    }\n\n    .form-input-label {\n        color: #B1B1B1;\n        font-size: 1.4rem;\n        font-weight: normal;\n        position: absolute;\n        pointer-events: none;\n        left: 1.5rem;\n        top: 1rem;\n        transition: 300ms ease all;\n\n        &.shrink {\n            ","\n        }\n    }\n\n    @media all and (max-width: 500px) {\n        .form-input {\n            font-size: 1.4rem;\n        }\n        /* padding: 1rem .5rem 1rem 2rem; */\n    }\n"]);return o=function(){return e},e}function u(){var e=Object(s.a)(["\n    left: .5rem;\n    top: -14px;\n    font-size: 12px;\n    color: #000;\n"]);return u=function(){return e},e}var l=Object(c.b)(u()),d=c.c.div(o(),l,l);n.a=function(e){var n=e.handleChange,t=e.label,s=e.name,c=Object(i.a)(e,["handleChange","label","name"]);return Object(r.jsxs)(d,{children:[Object(r.jsx)("input",Object(a.a)({className:"form-input",name:s,onChange:n},c)),t?Object(r.jsx)("label",{htmlFor:s,className:"".concat(c.value.length?"shrink":""," form-input-label"),children:t}):null]})}},51:function(e,n,t){"use strict";var r=t(1),a=(t(0),t(7)),i=t(8),s=t(27);function c(){var e=Object(a.a)(["\n    max-width: 115rem;\n"]);return c=function(){return e},e}function o(){var e=Object(a.a)(["\n    width: 100%;\n    height: 100%;\n    /* height: 100%; */\n    overflow-y: scroll;\n    overflow-x: visible;\n    scroll-behavior: smooth;\n    ",";\n    padding-top: 1.5rem;\n    padding-bottom: 1.5rem;\n\n    @media all and (max-width: 1150px) {\n        margin-bottom: 8rem;\n    }\n"]);return o=function(){return e},e}var u=i.c.div(o(),s.b),l=i.c.div(c());n.a=function(e){var n=e.children;return Object(r.jsx)(u,{children:Object(r.jsx)(l,{children:n})})}},53:function(e,n,t){"use strict";var r=t(19),a=t(1),i=t(29),s=(t(0),t(7));function c(){var e=Object(s.a)(["\n    display:flex;\n    align-items: center;\n\n    p {\n        margin-top: 1.8rem;\n        margin-left: 2rem;\n            opacity: .75;\n\n        span {\n            font-weight: 700;\n        }\n    }\n\n    @media all and (max-width: 800px) {\n        flex-direction: column-reverse;\n        align-items: flex-start;\n\n        p {\n            margin-left: unset;\n        }\n    }\n"]);return c=function(){return e},e}var o=t(8).c.div(c());n.a=function(e){var n=e.children,t=e.label,s=e.example,c=Object(i.a)(e,["children","label","example"]);return Object(a.jsxs)(o,Object(r.a)(Object(r.a)({},c),{},{children:[Object(a.jsx)("div",{children:n}),Object(a.jsx)("div",{children:Object(a.jsxs)("p",{children:[t+" ",Object(a.jsx)("span",{children:s})]})})]}))}},54:function(e,n,t){"use strict";t.d(n,"a",(function(){return r}));var r={address:"",admin:0,premises:0,boughtProducts:{},city:"",country:"",date:"",email:"",finishedRegistration:!1,lenses:{cylinder:[0,0,0,0],cylinderAxes:[0,0,0,0],diopters:[0,0,0,0],distance:[0,0,0,0],addition:[0,0,0,0],basis:[0,0,0,0],prism:[0,0,0,0]},name:"",orders:[],phone:"",psc:"",tempUser:!1,totalSpent:0,watchList:[],fName:"",lName:"",password:"",confirmPassword:""}},67:function(e,n,t){"use strict";t.r(n),t.d(n,"UserContext",(function(){return g}));var r=t(1),a=t(9),i=t.n(a),s=t(12),c=t(31),o=t(19),u=t(10),l=t(0),d=t(2),p=t(17),m=t(16),b=function(e){var n=new Headers;n.append("auth-token",e);var t={method:"GET",headers:n,redirect:"follow"};return fetch("".concat("http://195.110.58.166:8080","/api/admin/users"),t)},f=function(e,n){var t=new Headers;t.append("auth-token",e),t.append("Content-Type","application/json");var r={method:"GET",headers:t,redirect:"follow"};return fetch("".concat("http://195.110.58.166:8080","/api/admin/users/").concat(n),r)},h=function(e,n){var t=n._id,r=n.address,a=n.admin,i=n.city,s=n.country,c=n.email,o=n.lenses,u=o.cylinder,l=o.cylinderAxes,d=o.diopters,p=o.distance,m=o.addition,b=o.basis,f=o.prism,h=n.name,j=n.phone,v=n.psc,x=n.premises,g=new Headers;g.append("auth-token",e),g.append("Content-Type","application/json");var O={method:"PATCH",headers:g,body:JSON.stringify({address:r||void 0,admin:a,premises:0===Number(x)?void 0:x,city:i||void 0,country:s||void 0,email:c||void 0,lenses:{cylinder:u,cylinderAxes:l,diopters:d,distance:p,addition:m,basis:b,prism:f},name:h,phone:j||void 0,psc:v||void 0}),redirect:"follow"};return fetch("".concat("http://195.110.58.166:8080","/api/admin/users/").concat(t),O)},j=function(e,n){var t=n.name,r=n.email,a=new Headers;a.append("auth-token",e),a.append("Content-Type","application/json");var i={method:"POST",headers:a,body:JSON.stringify({email:r,name:t}),redirect:"follow"};return fetch("".concat("http://195.110.58.166:8080","/api/auth/register"),i)},v=function(e,n){console.log(n);var t=n.name,r=n.email,a=n.password,i=n.premises,s=n.admin,c=new Headers;c.append("auth-token",e),c.append("Content-Type","application/json");var o={method:"POST",headers:c,body:JSON.stringify({admin:Number(s),email:r,name:t,premises:Number(i),password:a}),redirect:"follow"};return fetch("".concat("http://195.110.58.166:8080","/api/auth/register"),o)},x=t(54),g=Object(l.createContext)({isUpdating:!1,activeIndex:0,handleChangeFilterItem:function(){},filterItems:[],totalCount:0,users:null,user:null,getUsers:function(){},getUser:function(){},handleChange:function(){},updateUser:function(){},resetUser:function(){},formToShow:0,switchFormButtons:[],toggleUserForm:function(){},createUser:function(){},getFilteredUsers:function(){},getUserByQuery:function(){}});n.default=function(e){var n=e.children,t=Object(d.g)().push,a=Object(l.useContext)(p.a).token,O=Object(l.useContext)(m.a),y=O.closeModal,w=O.getMessage,k=O.setIsLoading,C=O.setShowModal,N=Object(l.useState)(x.a),z=Object(u.a)(N,2),U=z[0],F=z[1],S=Object(l.useState)(null),T=Object(u.a)(S,2),A=T[0],P=T[1],I=Object(l.useState)(0),B=Object(u.a)(I,2),H=B[0],J=B[1],_=Object(l.useState)(!1),E=Object(u.a)(_,2),M=E[0],Z=E[1],D=Object(l.useState)(0),G=Object(u.a)(D,2),L=G[0],Q=G[1],R=Object(l.useState)(0),V=Object(u.a)(R,2),q=V[0],K=V[1];Object(l.useEffect)((function(){F(Object(o.a)(Object(o.a)({},U),{},{name:U.fName+" "+U.lName}))}),[U.fName,U.lName]);var W=function(){var e=Object(s.a)(i.a.mark((function e(){var n,t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(!0),C(!0),e.prev=2,e.next=5,b(a);case 5:return n=e.sent,e.next=8,n.json();case 8:t=e.sent,console.log(t),t.users?(P(t.users),J(t.count),k(!1),y()):(w(t.message),k(!1)),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(2),console.log(e.t0),w("Nieco sa pokazilo"),k(!1);case 18:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Object(s.a)(i.a.mark((function e(n){var t,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(!0),C(!0),Z(!0),e.prev=3,e.next=6,f(a,n);case 6:return t=e.sent,e.next=9,t.json();case 9:(r=e.sent).user?(F(Object(o.a)(Object(o.a)(Object(o.a)({},U),r.user),{},{lenses:{cylinder:r.user.lenses.cylinder.length?r.user.lenses.cylinder:[0,0,0,0],cylinderAxes:r.user.lenses.cylinderAxes.length?r.user.lenses.cylinderAxes:[0,0,0,0],diopters:r.user.lenses.diopters.length?r.user.lenses.diopters:[0,0,0,0],distance:r.user.lenses.distance.length?r.user.lenses.distance:[0,0,0,0],addition:r.user.lenses.addition.length?r.user.lenses.addition:[0,0,0,0],basis:r.user.lenses.basis.length?r.user.lenses.basis:[0,0,0,0],prism:r.user.lenses.prism.length?r.user.lenses.prism:[0,0,0,0]},fName:r.user.name?r.user.name.split(" ")[0]:"",lName:r.user.name?r.user.name.split(" ")[1]:""})),k(!1),y()):(w(r.message),k(!1)),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(3),console.log(e.t0),w("Nieco sa pokazilo"),k(!1);case 18:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(n){return e.apply(this,arguments)}}(),Y=function(){var e=Object(s.a)(i.a.mark((function e(n){var r,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(!0),C(!0),console.log(n),e.prev=3,e.next=6,h(a,n);case 6:return r=e.sent,e.next=9,r.json();case 9:if(s=e.sent,console.log(s),!s.error){e.next=17;break}return w(s.message),"format"===s.error&&s.message.includes("lenses.cylinderAxes")&&w("Osa mus\xed byt v\xe4\u010d\u0161ia alebo rovn\xe1 0"),"phone-exists"===s.error&&w("Telef\xf3nne \u010d\xedslo u\u017e v datab\xe1zy existuje"),k(!1),e.abrupt("return");case 17:k(!1),y(),t("/dashboard/zakaznici"),W(),e.next=28;break;case 23:e.prev=23,e.t0=e.catch(3),console.log(e.t0),w("Nieco sa pokazilo"),k(!1);case 28:case"end":return e.stop()}}),e,null,[[3,23]])})));return function(n){return e.apply(this,arguments)}}(),$=function(){var e=Object(s.a)(i.a.mark((function e(n){var r,s,c,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k(!0),C(!0),e.prev=2,0!==q){e.next=24;break}if(r={},n._id){e.next=21;break}return console.log("creating new user"),e.next=9,j(a,n);case 9:return s=e.sent,e.next=12,s.json();case 12:if(r=e.sent,console.log(r),!r.error){e.next=20;break}return w(r.message),"email"===r.type&&w("Email existuje"),"format"===r.error&&r.message.includes("email")&&w("Email musi byt platny email"),k(!1),e.abrupt("return");case 20:F(Object(o.a)(Object(o.a)({},n),{},{_id:r.user._id}));case 21:Y({_id:r.user?r.user._id:n._id,lenses:Object(o.a)({},n.lenses),address:n.city,city:n.city,country:n.country,phone:n.phone,psc:n.phone}),e.next=39;break;case 24:return e.next=26,v(a,n);case 26:return c=e.sent,e.next=29,c.json();case 29:if(u=e.sent,console.log(u),!u.error){e.next=35;break}return w(u.message),k(!1),e.abrupt("return");case 35:k(!1),W(),t("/dashboard/zakaznici"),y();case 39:e.next=46;break;case 41:e.prev=41,e.t0=e.catch(2),console.log(e.t0),w("Nieco sa pokazilo"),k(!1);case 46:case"end":return e.stop()}}),e,null,[[2,41]])})));return function(n){return e.apply(this,arguments)}}(),ee=new Headers;ee.append("auth-token",a),ee.append("Content-Type","application/json");var ne=function(){var e=Object(s.a)(i.a.mark((function e(n){var t,r,a,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(!0),C(!0),console.log(n),t=JSON.stringify(n),r={method:"POST",headers:ee,body:t,redirect:"follow"},e.prev=5,e.next=8,fetch("".concat("http://195.110.58.166:8080","/api/admin/users/filter"),r);case 8:return a=e.sent,e.next=11,a.json();case 11:if(s=e.sent,console.log(s),!s.users){e.next=17;break}return P(s.users),y(),e.abrupt("return");case 17:w(s.message),k(!1),e.next=26;break;case 21:e.prev=21,e.t0=e.catch(5),console.log(e.t0),w("Nieco sa pokazilo"),k(!1);case 26:case"end":return e.stop()}}),e,null,[[5,21]])})));return function(n){return e.apply(this,arguments)}}(),te=function(){var e=Object(s.a)(i.a.mark((function e(n){var t,r,a,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(!0),C(!0),console.log(n),t=JSON.stringify(n),r={method:"POST",headers:ee,body:t,redirect:"follow"},e.prev=5,e.next=8,fetch("".concat("http://195.110.58.166:8080","/api/admin/users/filter"),r);case 8:return a=e.sent,e.next=11,a.json();case 11:if(s=e.sent,console.log(s),!s.users){e.next=17;break}return P(s.users),y(),e.abrupt("return");case 17:w(s.message),k(!1),e.next=26;break;case 21:e.prev=21,e.t0=e.catch(5),console.log(e.t0),w("Nieco sa pokazilo"),k(!1);case 26:case"end":return e.stop()}}),e,null,[[5,21]])})));return function(n){return e.apply(this,arguments)}}();return Object(r.jsx)(g.Provider,{value:{isUpdating:M,activeIndex:L,handleChangeFilterItem:function(e){Q(e)},filterItems:[{id:0,name:"Z\xe1kaznici",filter:0},{id:1,name:"Zamestnanci",filter:1},{id:2,name:"Ved\xfaci",filter:2}],users:A,user:U,totalCount:H,getUsers:W,getUser:X,handleChange:function(e){var n=e.target,t=n.name,r=n.value;F(Object(o.a)(Object(o.a)({},U),{},Object(c.a)({},t,r)))},handleParameterChange:function(e,n){var t=e.target,r=t.name,a=t.value,i=U.lenses[r];i[n]=Number(a),F(Object(o.a)(Object(o.a)({},U),{},{lenses:Object(o.a)(Object(o.a)({},U.lenses),{},Object(c.a)({},r,i))}))},updateUser:Y,resetUser:function(){F(Object(o.a)({},x.a)),Z(!1),K(0)},formToShow:q,switchFormButtons:[{name:"Z\xe1kazn\xedk"},{name:"Admin"}],toggleUserForm:function(e,n){e.preventDefault(),K(n)},createUser:$,getFilteredUsers:ne,getUserByQuery:te},children:n})}},82:function(e,n,t){"use strict";var r=t(1),a=t(0),i=t.n(a),s=t(7),c=t(8),o=t(26);function u(){var e=Object(s.a)(["\n    background-color: ",";\n    font-weight: 700;\n    margin-right: 2rem;\n"]);return u=function(){return e},e}function l(){var e=Object(s.a)(["\n    display: flex;\n    margin: 2rem 0;\n"]);return l=function(){return e},e}function d(){var e=Object(s.a)(["\n    margin-top: 2rem;\n    /* margin-bottom: 2rem; */\n"]);return d=function(){return e},e}var p=c.c.h3(d()),m=c.c.div(l()),b=Object(c.c)(o.a)(u(),(function(e){return e.isActive?"rgb(235, 172, 1)":"#000"}));n.a=function(e){var n=e.title,t=e.activeIndex,a=e.handleClick,s=e.items;return Object(r.jsxs)(i.a.Fragment,{children:[Object(r.jsx)(p,{children:n}),Object(r.jsx)(m,{children:s.map((function(e,n){return Object(r.jsx)(b,{isActive:t===n,onClick:function(e){return a(e,n)},children:e.name},n)}))})]})}},96:function(e,n,t){"use strict";var r=t(1),a=(t(0),t(7)),i=t(8);function s(){var e=Object(a.a)(["\n        text-align:center;\n        align-self: center;\n        margin-left: .5rem;\n\n\n        &:nth-child(1) {\n            align-self: center;\n        }\n\n        input {\n            display:block;\n            width: 100%;\n            border: none;\n            padding: 1rem .5rem;\n            text-align: center;\n            font-family: inherit;\n            font-size: inherit;\n            background-color: #F5F5F5;\n            border-radius: .5rem;\n            outline: none;\n\n            &:focus {\n                outline: none;\n            }\n        }\n\n        input[type=number]::-webkit-inner-spin-button, \n        input[type=number]::-webkit-outer-spin-button {  \n            display:none;\n            opacity: 0;\n\n        }\n"]);return s=function(){return e},e}function c(){var e=Object(a.a)(["\n    display: grid;\n    grid-template-rows: repeat(4, 5rem);\n    div {\n        text-align:center;\n        align-self: center;\n        margin-left: .5rem;\n\n\n        &:nth-child(1) {\n            align-self: center;\n        }\n\n        input {\n            display:block;\n            width: 100%;\n            border: none;\n            padding: 1rem .5rem;\n            text-align: center;\n            font-family: inherit;\n            font-size: inherit;\n            background-color: #F5F5F5;\n            border-radius: .5rem;\n            outline: none;\n\n            &:focus {\n                outline: none;\n            }\n        }\n\n        input[type=number]::-webkit-inner-spin-button, \n        input[type=number]::-webkit-outer-spin-button {  \n            opacity: 1;\n\n        }\n    }\n"]);return c=function(){return e},e}function o(){var e=Object(a.a)(["\n    display: grid;\n    grid-template-rows: repeat(4, 5rem);\n    div {\n        align-self: center;\n        display:flex;\n        justify-content: space-between;\n    }\n"]);return o=function(){return e},e}function u(){var e=Object(a.a)(["\n    display: grid;\n    grid-template-columns: 2rem repeat(7, 7.5rem);\n    margin-bottom: 3rem;\n"]);return u=function(){return e},e}var l=i.c.div(u()),d=i.c.div(o()),p=i.c.div(c()),m=i.c.div(s());n.a=function(e){var n=e.parameters,t=e.handleChange;return Object(r.jsxs)(l,{children:[Object(r.jsxs)(d,{children:[Object(r.jsx)("div",{children:" "}),Object(r.jsx)("div",{children:Object(r.jsx)("p",{children:"P"})}),Object(r.jsx)("div",{children:Object(r.jsx)("p",{children:"\u013d"})}),Object(r.jsx)("div",{children:Object(r.jsx)("p",{children:"P"})}),Object(r.jsx)("div",{children:Object(r.jsx)("p",{children:"\u013d"})})]}),Object(r.jsxs)(p,{children:[Object(r.jsx)("div",{children:"sph"}),n.diopters.map((function(e,n){return Object(r.jsx)("div",{children:Object(r.jsx)("input",{type:"text",value:e,name:"diopters",onChange:function(e){return t(e,n)}})},n)}))]}),Object(r.jsxs)(p,{children:[Object(r.jsx)("div",{children:"cyl"}),n.cylinder.map((function(e,n){return Object(r.jsx)("div",{children:Object(r.jsx)("input",{type:"text",value:e,name:"cylinder",onChange:function(e){return t(e,n)}})},n)}))]}),Object(r.jsxs)(p,{children:[Object(r.jsx)("div",{children:"ax"}),n.cylinderAxes.map((function(e,n){return Object(r.jsx)(m,{children:Object(r.jsx)("input",{type:"text",value:e,name:"cylinderAxes",onChange:function(e){return t(e,n)}})},n)}))]}),Object(r.jsxs)(p,{children:[Object(r.jsx)("div",{children:"PD"}),n.distance.map((function(e,n){return Object(r.jsx)("div",{children:Object(r.jsx)("input",{type:"text",value:e,name:"distance",onChange:function(e){return t(e,n)}})},n)}))]}),Object(r.jsxs)(p,{children:[Object(r.jsx)("div",{children:"prizma"}),n.prism.map((function(e,n){return Object(r.jsx)("div",{children:Object(r.jsx)("input",{type:"text",value:e,name:"prism",onChange:function(e){return t(e,n)}})},n)}))]}),Object(r.jsxs)(p,{children:[Object(r.jsx)("div",{children:"basis"}),n.basis.map((function(e,n){return Object(r.jsx)("div",{children:Object(r.jsx)("input",{type:"text",value:e,name:"basis",onChange:function(e){return t(e,n)}})},n)}))]}),Object(r.jsxs)(p,{children:[Object(r.jsx)("div",{children:"addicia"}),n.addition.map((function(e,n){return Object(r.jsx)("div",{children:Object(r.jsx)("input",{type:"text",value:e,name:"addition",onChange:function(e){return t(e,n)}})},n)}))]})]})}}}]);
//# sourceMappingURL=2.626df9f8.chunk.js.map