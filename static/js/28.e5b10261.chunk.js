(this.webpackJsonpimooptik=this.webpackJsonpimooptik||[]).push([[28],{74:function(e,t,n){"use strict";n.r(t),n.d(t,"CouponsContext",(function(){return h}));var a=n(2),o=n(7),r=n.n(o),c=n(12),s=n(31),u=n(21),p=n(10),i=n(1),l=n(18),d=n(19),f=n(3),h=Object(i.createContext)({coupon:null,coupons:null,handleChange:function(){},getCoupon:function(){},getCoupons:function(){},createCoupon:function(){},deleteCoupon:function(){},isUpdating:!1,resetCoupons:function(){}}),v={code:"",type:"percentage",value:0,maxUses:0,minValue:0,maxUsesTotal:0};t.default=function(e){var t=e.children,n=Object(i.useContext)(l.a),o=n.closeModal,m=n.getMessage,b=n.setIsLoading,x=n.setShowModal,j=Object(i.useContext)(d.a).token,k=Object(f.h)().push,O=new Headers;O.append("auth-token",j),O.append("Content-Type","application/json");var g=Object(i.useState)(v),w=Object(p.a)(g,2),C=w[0],y=w[1],U=Object(i.useState)(null),T=Object(p.a)(U,2),N=T[0],S=T[1],E=Object(i.useState)(!1),V=Object(p.a)(E,2),z=V[0],J=V[1],M=function(){var e=Object(c.a)(r.a.mark((function e(t){var n,a,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return J(!0),b(!0),x(!0),n={method:"GET",headers:O,redirect:"follow"},e.prev=4,e.next=7,fetch("".concat("http://195.110.58.166:8080","/api/admin/coupons/").concat(t),n);case 7:return a=e.sent,e.next=10,a.json();case 10:if(!(c=e.sent).coupon){e.next=15;break}return y(Object(u.a)(Object(u.a)({},C),c.coupon)),o(),e.abrupt("return");case 15:m(c.message),b(!1),e.next=24;break;case 19:e.prev=19,e.t0=e.catch(4),console.log(e.t0),m("Nie\u010do sa pokazilo"),b(!1);case 24:case"end":return e.stop()}}),e,null,[[4,19]])})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(c.a)(r.a.mark((function e(){var t,n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),x(!0),t={method:"GET",headers:O,redirect:"follow"},e.prev=3,e.next=6,fetch("".concat("http://195.110.58.166:8080","/api/admin/coupons"),t);case 6:return n=e.sent,e.next=9,n.json();case 9:(a=e.sent).coupons&&S(a.coupons),b(!1),o(),e.next=20;break;case 15:e.prev=15,e.t0=e.catch(3),console.log(e.t0),m("Nie\u010do sa pokazilo"),b(!1);case 20:case"end":return e.stop()}}),e,null,[[3,15]])})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(c.a)(r.a.mark((function e(t){var n,a,o,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),x(!0),n=JSON.stringify({code:t.code,type:t.type,value:""===t.value||"0"===t.value?void 0:Number(t.value),maxUses:""===t.maxUses||"0"===t.maxUses?void 0:Number(t.maxUses),minValue:""===t.minValue||"0"===t.minValue?void 0:Number(t.minValue),maxUsesTotal:""===t.maxUsesTotal||"0"===t.maxUsesTotal?void 0:Number(t.maxUsesTotal)}),a={method:"POST",headers:O,body:n,redirect:"follow"},e.prev=4,e.next=7,fetch("".concat("http://195.110.58.166:8080","/api/admin/coupons/create"),a);case 7:return o=e.sent,e.next=10,o.json();case 10:"format"===(c=e.sent).error&&m("K\xf3d kup\xf3nu je povinn\xfd"),"exists"===c.error&&m("Kup\xf3n u\u017e existuje"),o.ok&&(G(),k("/dashboard/kupony")),b(!1),e.next=22;break;case 17:e.prev=17,e.t0=e.catch(4),console.log(e.t0),m("Nie\u010do sa pokazilo"),b(!1);case 22:case"end":return e.stop()}}),e,null,[[4,17]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(c.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),x(!0),n={method:"DELETE",headers:O,redirect:"follow"},e.prev=3,e.next=6,fetch("".concat("http://195.110.58.166:8080","/api/admin/coupons/").concat(t),n);case 6:return a=e.sent,e.next=9,a.json();case 9:e.sent,a.ok&&(G(),k("/dashboard/kupony")),b(!1),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(3),console.log(e.t0),m("Nie\u010do sa pokazilo"),b(!1);case 19:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:J(!1),y(v);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsx)(h.Provider,{value:{coupon:C,coupons:N,handleChange:function(e){var t=e.target,n=t.name,a=t.value;y(Object(u.a)(Object(u.a)({},C),{},Object(s.a)({},n,a)))},getCoupon:M,getCoupons:G,createCoupon:K,deleteCoupon:L,isUpdating:z,resetCoupons:P},children:t})}}}]);
//# sourceMappingURL=28.e5b10261.chunk.js.map