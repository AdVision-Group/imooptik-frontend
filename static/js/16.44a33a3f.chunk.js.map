{"version":3,"sources":["components/booking-calendar-overview/booking-calendar-overview.styles.jsx","components/booking-calendar-overview/booking-calendar-overview.component.jsx","components/calendar/calendar.styles.jsx","components/calendar/calendar.component.jsx","sections/booking/booking.styles.jsx","sections/booking/booking.section.jsx","components/custom-input/custom-input.styles.jsx","components/custom-input/custom-input.component.jsx","components/scroll-container/scroll-container.styles.jsx","components/scroll-container/scroll-container.component.jsx","components/section-header/section-header.styles.jsx","components/section-header/section-header.component.jsx","context/booking/booking.queries.jsx","context/booking/booking.utils.jsx","context/booking/booking.context.jsx"],"names":["ContainerOverview","styled","div","Options","ShowButton","CustomButton","isActive","UpdateButton","BookingCalendarOverview","calendar","handleClick","handleUpdateClick","name","onClick","Container","HeaderBlock","Dayblock","DayRowContainer","BookingContainer","p","active","DayNumber","Calendar","setSelectedDate","useState","activeIndex","setActiveIndex","date","Date","year","getFullYear","month","getMonth","firstDayOfCurrentMonth","getDay","daysInMonth","getDate","arr","blockNumber","bookedDays","booked","Object","keys","i","push","day","obj","forEach","idx","Number","split","bookDate","length","console","log","map","d","toLocaleDateString","weekday","value","Title","h2","GridRow","CalendarGridContainer","AppoimentOverview","Time","Line","AppoimentCol","NoteContainer","Name","Desc","span","ConfirmButton","DeclineButton","AppoimentContainer","BookingSection","useHistory","useContext","LoadingModalContext","closeModal","isLoading","message","showModal","bookingData","BookingContext","calendars","bookings","getCalendars","getCalendar","userBookings","getUserBookings","getBookings","activeCalendar","selectedDate","resetBooking","searchQuery","setSearchQuery","useEffect","loading","title","close","handleChange","e","target","handleAddButton","_id","Fragment","charAt","toUpperCase","slice","filteredUserBookings","filter","booking","dueDate","dueTime","time","user","bookingType","find","note","shrinkLabel","css","InputGroup","CustomInput","label","otherProps","className","onChange","htmlFor","paddingStyles","FixedContainer","ScrollContainer","children","HeaderContainer","Left","Right","SearchButton","AddButton","SectionHeader","handleSearch","count","type","onKeyPress","key","fetchSingleCalendar","id","fetch","process","fetchUserBookings","token","myHeaders","Headers","append","requestOptions","method","headers","redirect","postCalendar","body","JSON","stringify","patchCalendar","interval","startTimes","endTimes","daysIntoFuture","allowMinutesBefore","deleteCalendar","initCalendarObj","premises","exceptDays","createContext","handleCalendarChange","handleDayTimeChange","createCalendar","updateCalendar","delCalendar","isUpdatingCalendar","BookingProvider","AuthContext","getMessage","setIsLoading","setShowModal","setIsUpdatingCalendar","setActiveCalendar","setCalendars","setCalendar","a","response","json","data","error","calendarToAdd","calendarToUpdate","setBookings","setUserBookings","Provider"],"mappings":"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","file":"static/js/16.44a33a3f.chunk.js","sourcesContent":["import styled from \"styled-components\"\nimport CustomButton from '../custom-button/custom-button.component'\n\nexport const ContainerOverview = styled.div`\n    padding: 2rem;\n    box-shadow: 0 0 1.5rem 0 rgba(0,0,0, 0.08);\n\n    &:not(:last-child) {\n        /* margin-right: 2rem; */\n    }\n\n    h3  { \n        font-size: 1.8rem;\n    }\n\n    p {\n        font-size: 1.4rem;\n        color: gray;\n    }\n`\n\nexport const Options = styled.div`\n    display: flex;\n`\n\nexport const ShowButton = styled(CustomButton)`\n    margin-top: 2rem;\n    font-size: 1.4rem;\n    display: block;\n    background-color: ${({ isActive }) => isActive ? \"rgb(235, 172, 1)\" : \"#eee\"};\n    font-weight: bolder;\n    color: ${({ isActive }) => isActive ? \"#fff\" : \"#000\"};\n`\nexport const UpdateButton = styled(CustomButton)`\n    margin-top: 2rem;\n    font-size: 1.4rem;\n    display: block;\n    margin-left: 2rem;;\n`\n","import React from 'react'\n\nimport {\n    ContainerOverview,\n    UpdateButton,\n    Options,\n    ShowButton\n} from './booking-calendar-overview.styles'\n\nconst BookingCalendarOverview = ({ calendar, handleClick, isActive, handleUpdateClick }) => {\n    return (\n        <ContainerOverview>\n            <h3>{calendar.name}</h3>\n            <p>Obchodná 59, 84105 Bratislava</p>\n            <p>+421 902 688 952</p>\n            <p>obchodna@imooptik.sk</p>\n            <Options>\n                <ShowButton onClick={handleClick} isActive={isActive}>Zobraziť</ShowButton>\n                <UpdateButton onClick={handleUpdateClick}>Upraviť</UpdateButton>\n            </Options>\n        </ContainerOverview>\n    )\n}\n\nexport default BookingCalendarOverview\n","import styled from 'styled-components'\n\nexport const Container = styled.div`\n    width: 100%;\n    display: grid;\n    grid-template-columns: repeat(7, 1fr);\n    border: 1px solid rgba(0,0,0,.1);\n    min-width: 55rem;\n`\n\nexport const HeaderBlock = styled.div`\n    height: 8rem;\n    background-color: #000;\n    color: #fff;\n    display: flex;\n    align-items:center;\n    justify-content:center;\n    font-weight: 700;\n`\n\nexport const Dayblock = styled.div`\n    cursor: pointer;\n    height: 7rem;\n    display: flex;\n    justify-content: flex-end;\n    align-items: flex-end;\n    border: 1px solid rgba(0,0,0,.1);\n    padding: .6rem 1rem;\n\n    transition: all .15s;\n\n    &:hover {\n        background-color: rgba(0,0,0,.1);\n    }\n\n`\n\nexport const DayRowContainer = styled.div`\n    width: 100%;\n    display: flex;\n    justify-content: space-between;\n`\n\nexport const BookingContainer = styled.p`\n    background-color: ${({ active }) => active ? \" rgb(235, 172, 1)\" : \"#eee\"};\n    color: ${({ active }) => active ? \"#fff\" : \"#000\"};\n    border-radius: 50%;\n    font-weight: bolder;\n    padding: .2rem .9rem;\n`\n\nexport const DayNumber = styled.p`\n    margin-left: auto\n`","import React, { useState } from 'react'\n\nimport {\n    Container,\n    HeaderBlock,\n    Dayblock,\n    BookingContainer,\n    DayRowContainer,\n    DayNumber\n} from './calendar.styles'\n\nconst Calendar = ({ calendar, setSelectedDate }) => {\n    const blocks = [\n        {\n            name: 'Pondelok'\n        },\n        {\n            name: 'Utorok'\n        },\n        {\n            name: 'Streda'\n        },\n        {\n            name: 'Štvrtok'\n        },\n        {\n            name: 'Piatok'\n        },\n        {\n            name: 'Sobota'\n        },\n        {\n            name: 'Nedeľa'\n        },\n    ]\n\n    const [activeIndex, setActiveIndex] = useState(null)\n\n    // v prvom rade si zistim datumy ktore treba\n    const date = new Date()\n    //rok v ktoorm sa nachadzame\n    const year = date.getFullYear()\n    // mesiac aky ma kalendar pouzit\n    const month = date.getMonth()\n    // zistime aky den je prveho v nami zvoleneho mesiaca\n    let firstDayOfCurrentMonth = new Date(year, month).getDay()\n    // a celkovy pocet dni v mesiaci\n    const daysInMonth = new Date(year, month + 1, 0).getDate()\n\n    // ak je prvy den neela tak jej zmenit hodnotu na 7 pretoze nula robi bordel \n    if (firstDayOfCurrentMonth === 0) {\n        firstDayOfCurrentMonth = 7\n    }\n\n    // arr je pole kazdeho block v kalendary\n    let arr = []\n    // ocislovanie dni\n    let blockNumber = 1\n\n    let bookedDays = []\n\n    // sluzi na premenu {obj} s bookingmai na [arr] pre jednoduchsi for loop\n    if (calendar.booked) {\n        bookedDays = Object.keys(calendar.booked)\n    }\n\n    // a tu sa nam deje cele magia.. 42 je konstanta maximalnych dni \n    // ktore sa mozu v kalendari nachadzat aj s pradnimy blokmi na zaciatku\n    for (let i = 0; i < 42; i++) {\n        // pushneme do [arr] block s nulovym dnom(prazdne policko v kalendari) \n        // ak i este nedociahne na prvy den v kalendary (preto je nedela 7)\n        if (i < firstDayOfCurrentMonth - 1) {\n            arr.push({\n                day: 0\n            })\n            // ak uz prazdne dni (z minuleho mesiaca) mame zasebou \n        } else if (i < daysInMonth + firstDayOfCurrentMonth - 1) {\n            // pushneme do [arr] data ktore nam treba, cislo dna, pripadne bookingy atd\n            let obj = {}\n\n            // skontroluje ci v dany den je nejaky booking ak ano, \n            //doplni informacie o tom do {obj}\n            bookedDays.forEach((day, idx) => {\n                if (blockNumber === Number(day.split('/')[0])) {\n                    obj = {\n                        bookDate: day,\n                        booked: calendar.booked[day].length,\n                    }\n                    return\n                }\n            })\n\n\n            arr.push({\n                ...obj,\n                day: blockNumber++\n            })\n        }\n    }\n\n    const handleClick = (day, idx, bookDate) => {\n        const d = new Date(year, month, day)\n        const options = { weekday: 'long', month: 'long', day: 'numeric' };\n        setActiveIndex(idx)\n        setSelectedDate({\n            name: d.toLocaleDateString(\"sk-SK\", options),\n            value: bookDate\n        })\n    }\n\n    console.log(arr)\n\n    return (\n        <Container>\n            {\n                blocks.map(({ name }, idx) => (\n                    <HeaderBlock key={idx}>\n                        {name}\n                    </HeaderBlock>\n                ))\n            }\n            {\n                arr.map(({ day, booked, bookDate }, idx) => (\n                    <Dayblock key={idx} onClick={booked ? () => handleClick(day, idx, bookDate) : null}>\n                        {!(day === 0) && (\n                            <DayRowContainer>\n                                {booked && <BookingContainer active={idx === activeIndex}>{booked}</BookingContainer>}\n                                <DayNumber>{day}</DayNumber>\n                            </DayRowContainer>\n                        )}\n                    </Dayblock>\n                ))\n            }\n        </Container>\n    )\n}\n\nexport default Calendar\n","import styled from 'styled-components'\nimport CustomButton from '../../components/custom-button/custom-button.component'\n\nexport const Title = styled.h2`\n    margin-bottom: 2rem;\n`\n\nexport const GridRow = styled.div`\n    display: grid;\n    grid-template-columns: repeat( auto-fit, minmax(25rem, 1fr) );\n    margin-bottom: 3rem;\n    grid-gap: 2rem;\n`\n\n\nexport const CalendarGridContainer = styled.div`\n    margin-top: 3rem;\n    display: grid;\n    grid-template-columns: 4fr 2fr;\n    align-items: start;\n    margin-bottom: 10rem;\n`\nexport const AppoimentOverview = styled.div`\n    margin-left: 2rem;  \n    padding: 2rem;\n    box-shadow: 0 0 1.5rem 0 rgba(0,0,0, 0.08);\n    align-self: start;\n`\n\nexport const Time = styled.p`\n    font-size: 1.4rem;\n    font-weight: 700;\n`\n\nexport const Line = styled.div`\n    height: 1px;\n    background-color: #eee;\n    width: 100%;\n    margin: .5rem 0 1rem;\n`\n\nexport const AppoimentCol = styled.div`\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    grid-template-rows: auto auto;\n    grid-template-areas:    \"i b\"\n                            \"n n\";\n`\n\nexport const NoteContainer = styled.div`\n    grid-area: n;\n    padding: .5rem 0;\n\n    p {\n        color: gray;\n    }\n`\n\nexport const Name = styled.p`\n    font-size: 1.4rem;\n    font-weight: 700;\n    line-height: 1;\n    /* margin-top: .5rem; */\n`\n\nexport const Desc = styled.span`\n    color: gray;\n    font-size: 1.2rem;\n    line-height: 1;\n`\n\nexport const Options = styled.div`\n    align-self: end;\n    justify-self: end;\n`\n\nexport const ConfirmButton = styled(CustomButton)`\n    display:block;  \n    font-size: 1.2rem;\n    /* margin-right: .5rem; */\n    padding: .2rem .8rem;\n    border-radius: .5rem;\n    margin-left: auto;\n    margin-bottom: .5rem;\n\n`\n\nexport const DeclineButton = styled(CustomButton)`\n    display:block;  \n    margin-left: auto;\n    font-size: 1.2rem;\n    /* margin-right: 1rem; */\n    padding: .2rem .8rem;\n    border-radius: .5rem;\n`\n\nexport const AppoimentContainer = styled.div`\n    margin-bottom: 1rem;\n`","import React, { useState, useEffect, useContext } from 'react'\nimport { LoadingModalContext } from '../../context/loading-modal/loading-modal.contenxt'\nimport { BookingContext } from '../../context/booking/booking.context'\nimport { useHistory } from 'react-router-dom'\n\nimport SectionHeader from '../../components/section-header/section-header.component'\nimport ScrollContainer from '../../components/scroll-container/scroll-container.component'\nimport Popup from '../../components/popup/pop-up.component'\nimport BookingCalendarOverview from \"../../components/booking-calendar-overview/booking-calendar-overview.component\"\n\nimport Calendar from '../../components/calendar/calendar.component'\n\nimport {\n    Title,\n    GridRow,\n    CalendarGridContainer,\n    AppoimentOverview,\n    Time,\n    Line,\n    // TwoRowGrid,\n    Name,\n    Desc,\n    Options,\n    ConfirmButton,\n    DeclineButton,\n    AppoimentContainer,\n    AppoimentCol,\n    NoteContainer\n} from './booking.styles'\n\nconst BookingSection = () => {\n    const { push } = useHistory()\n    const {\n        closeModal,\n        isLoading,\n        message,\n        showModal\n    } = useContext(LoadingModalContext)\n\n    const bookingData = useContext(BookingContext)\n\n    const {\n        calendar,\n        calendars,\n        bookings,\n        // bookingRows,\n        getCalendars,\n        getCalendar,\n        userBookings,\n        getUserBookings,\n        getBookings,\n        // getBookingRows\n        activeCalendar,\n        selectedDate,\n        setSelectedDate,\n        resetBooking\n    } = bookingData\n\n    const [searchQuery, setSearchQuery] = useState('')\n\n    useEffect(() => {\n        if (!calendars) {\n            getCalendars()\n            getUserBookings()\n        }\n    }, [calendars])\n\n    useEffect(() => {\n        if (!bookings) {\n            getBookings()\n        }\n    }, [calendars])\n\n    useEffect(() => {\n        return () => {\n            resetBooking()\n        }\n    }, [])\n\n    if (!calendars) return <Popup loading={isLoading} title={message} close={closeModal} />\n\n    return (\n        <section>\n            {showModal && <Popup loading={isLoading} title={message} close={closeModal} />}\n            <SectionHeader\n                searchQuery={searchQuery}\n                handleChange={e => setSearchQuery(e.target.value)}\n                handleAddButton={() => push('rezervacie/novy-kalendar')}\n                title=\"Kalendar objednávok\"\n            />\n\n            <ScrollContainer>\n                <Title>Pobočky</Title>\n                <GridRow>\n                    {calendars.map((calendar, idx) => (\n                        <BookingCalendarOverview key={idx} calendar={calendar} handleClick={() => getCalendar(calendar._id, idx + 1)} handleUpdateClick={() => push(`rezervacie/${calendar._id}`)} isActive={activeCalendar === idx + 1} />\n                    ))}\n                </GridRow>\n\n                {calendar.name && (\n                    <React.Fragment>\n                        <Title>Kalendár</Title>\n                        <CalendarGridContainer>\n                            <Calendar calendar={calendar} setSelectedDate={setSelectedDate} />\n\n                            {calendar.name && selectedDate.name && <AppoimentOverview>\n                                <Title>{selectedDate.name.charAt(0).toUpperCase() + selectedDate.name.slice(1)}</Title>\n\n                                {\n                                    calendar.booked[selectedDate.value].map((date, idx) => {\n                                        const filteredUserBookings = userBookings.filter(booking => booking.dueDate === selectedDate.value && booking.dueTime.split(\":\")[0] === date)\n                                        const time = date.split('/')[0] + \":\" + date.split('/')[1]\n\n                                        return (\n                                            <AppoimentContainer key={idx}>\n                                                <Time>{time}</Time>\n                                                <Line />\n                                                {\n                                                    filteredUserBookings.map((user, idx) => {\n                                                        const bookingType = bookings.find(booking => booking._id === user.booking)\n\n                                                        return (\n                                                            <AppoimentCol key={idx}>\n                                                                <div>\n                                                                    <Name>{user.name}</Name>\n                                                                    <Desc>{bookingType.name}</Desc>\n                                                                </div>\n                                                                <Options>\n                                                                    <ConfirmButton>Vybavený</ConfirmButton>\n                                                                    <DeclineButton>Neprišiel</DeclineButton>\n                                                                </Options>\n                                                                <NoteContainer>\n                                                                    <p>{user.note}</p>\n                                                                </NoteContainer>\n                                                            </AppoimentCol>\n                                                        )\n                                                    })\n                                                }\n                                            </AppoimentContainer>\n                                        )\n                                    })\n                                }\n                            </AppoimentOverview>}\n                        </CalendarGridContainer>\n                    </React.Fragment>\n                )}\n            </ScrollContainer>\n        </section>\n    )\n}\n\nexport default BookingSection\n","import styled, { css } from \"styled-components\"\n\nconst shrinkLabel = css`\n    left: .5rem;\n    top: -14px;\n    font-size: 12px;\n    color: #000;\n`\nexport const InputGroup = styled.div`\n    position: relative;\n    /* margin: 45px 0; */\n\n    .form-input {\n        background: none;\n        background-color: #F5F5F5;\n        color: #000;\n        font-size: 1.5rem;\n        padding: 1rem .5rem 1rem 2rem;\n        display: block;\n        width: 100%;\n        border: none;\n        border-radius: .5rem;\n        /* border-bottom: 1px solid #000; */\n        margin: 2rem 0 0;\n        font-family: inherit;\n\n        &:focus {\n        outline: none;\n        }\n\n        &:focus ~ .form-input-label {\n            ${shrinkLabel}\n        }\n    }\n\n    input[type = 'password'] {\n        letter-spacing: 0.3em;\n    }\n\n    .form-input-label {\n        color: #B1B1B1;\n        font-size: 1.4rem;\n        font-weight: normal;\n        position: absolute;\n        pointer-events: none;\n        left: 1.5rem;\n        top: 1rem;\n        transition: 300ms ease all;\n\n        &.shrink {\n            ${shrinkLabel}\n        }\n    }\n\n    @media all and (max-width: 500px) {\n        .form-input {\n            font-size: 1.4rem;\n        }\n        /* padding: 1rem .5rem 1rem 2rem; */\n    }\n`\n","import React from 'react'\n\nimport { InputGroup } from './custom-input.styles'\n\nconst CustomInput = ({ handleChange, label, name, ...otherProps }) => {\n    return (\n        <InputGroup>\n            <input\n                className='form-input'\n                name={name}\n                onChange={handleChange}\n                {...otherProps}\n            />\n            {label ? (\n                <label htmlFor={name} className={`${otherProps.value.length ? 'shrink' : ''} form-input-label`}>\n                    {label}\n                </label>\n            ) : null\n            }\n        </InputGroup>\n    )\n}\n\nexport default CustomInput","import styled from 'styled-components'\nimport { paddingStyles } from '../../global.styles'\n\nexport const Container = styled.div`\n    width: 100%;\n    height: 100%;\n    /* height: 100%; */\n    overflow-y: scroll;\n    overflow-x: visible;\n    scroll-behavior: smooth;\n    ${paddingStyles};\n    padding-top: 1.5rem;\n    padding-bottom: 1.5rem;\n\n    @media all and (max-width: 1150px) {\n        margin-bottom: 8rem;\n    }\n`\n\nexport const FixedContainer = styled.div`\n    max-width: 115rem;\n`","import React from 'react'\nimport { Container, FixedContainer } from './scroll-container.styles'\n\nconst ScrollContainer = ({ children }) => {\n    return (\n        <Container>\n            <FixedContainer>\n                {children}\n            </FixedContainer>\n        </Container>\n    )\n}\n\nexport default ScrollContainer","import styled from 'styled-components'\nimport CustomButton from '../custom-button/custom-button.component'\nimport { paddingStyles } from '../../global.styles'\n\nexport const HeaderContainer = styled.div`\n    display: flex;\n    justify-content: space-between;\n    margin-bottom: 3rem;\n    ${paddingStyles};    \n\n    @media all and (max-width: 600px) {\n        flex-wrap: wrap;\n    }\n`\n\nexport const Left = styled.div`\n    margin-top: 2rem;\n\n    display: flex;\n    align-items: center;\n\n`\n\nexport const Right = styled.div`\n    display: flex;\n    align-items: center;\n`\n\nexport const Notification = styled.div`\n    background-color: #DD4C4C;\n    margin-left: 1.5rem;\n    color: #fff;\n    padding: .5rem 1rem;\n    border-radius: 1.5rem;\n    font-size: 1.4rem;\n`\n\n\nexport const SearchButton = styled(CustomButton)`\n    margin-top: 2rem;\n\n    margin-left: 2rem;\n`\n\nexport const AddButton = styled(CustomButton)`\n    margin-top: 2rem;\n\n    margin-left: 1rem;\n\n`","import React from 'react'\n\nimport CustomInput from '../custom-input/custom-input.component'\n\nimport {\n    HeaderContainer,\n    Left,\n    Right,\n    SearchButton,\n    // Notification,\n    AddButton,\n} from './section-header.styles'\n\nconst SectionHeader = ({ searchQuery, handleSearch, handleChange, title, count = 999, handleAddButton = () => { } }) => {\n    const handleSearchOnEnter = (e) => {\n        if (searchQuery !== '') {\n            if (e.key === 'Enter') {\n                handleSearch()\n            }\n        }\n    }\n\n    return (\n        <HeaderContainer>\n            <Left>\n                <h1>{title}</h1>\n                {/* <Notification>{count}</Notification> */}\n            </Left>\n            <Right>\n                <div>\n                    <CustomInput\n                        type='search'\n                        name='searchbox'\n                        value={searchQuery}\n                        handleChange={handleChange}\n                        onKeyPress={handleSearchOnEnter}\n                        label='Vyhľadať'\n                    />\n                </div>\n                {handleSearch && <SearchButton onClick={handleSearch}>Vyhľadať</SearchButton>}\n                <AddButton onClick={handleAddButton}>Pridať</AddButton>\n            </Right>\n        </HeaderContainer>\n    )\n}\n\nexport default SectionHeader\n","\n\nexport const fetchCalendars = () => {\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/booking/calendars`)\n}\n\nexport const fetchSingleCalendar = (id) => {\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/booking/calendars/${id}`)\n}\n\nexport const fetchBookings = () => {\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/booking/bookings`)\n}\nexport const fetchBookingRows = () => {\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/booking/bookingRows`)\n}\n\nexport const fetchUserBookings = (token) => {\n    const myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n\n    const requestOptions = {\n        method: 'GET',\n        headers: myHeaders,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/booking/userBookings`, requestOptions)\n}\n\n\nexport const postCalendar = (token, calendar) => {\n    const myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n    myHeaders.append(\"Content-Type\", \"application/json\");\n\n    console.log(calendar)\n\n\n    const raw = JSON.stringify({\n        ...calendar\n    });\n\n    const requestOptions = {\n        method: 'POST',\n        headers: myHeaders,\n        body: raw,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/booking/calendars`, requestOptions)\n}\n\nexport const patchCalendar = (token, calendar) => {\n    const myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n    myHeaders.append(\"Content-Type\", \"application/json\");\n\n    console.log(calendar)\n\n    const {\n        name,\n        interval,\n        startTimes,\n        endTimes,\n        daysIntoFuture,\n        allowMinutesBefore\n    } = calendar\n\n    const raw = JSON.stringify({\n        name,\n        interval,\n        startTimes,\n        endTimes,\n        daysIntoFuture,\n        allowMinutesBefore\n    });\n\n    const requestOptions = {\n        method: 'PATCH',\n        headers: myHeaders,\n        body: raw,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/booking/calendars/${calendar._id}`, requestOptions)\n}\n\nexport const deleteCalendar = (id) => {\n    // /api/admin/booking/calendars/:id\n    // const myHeaders = new Headers();\n    // myHeaders.append(\"auth-token\", token);\n    // myHeaders.append(\"Content-Type\", \"application/json\");\n\n    // console.log(calendar)\n\n\n    // const raw = JSON.stringify({\n    //     ...calendar\n    // });\n\n    const requestOptions = {\n        method: 'DELETE',\n        // headers: myHeaders,\n        // body: raw,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/booking/calendars/${id}`, requestOptions)\n\n}","export const initCalendarObj = {\n    name: '',\n    interval: 30,\n    startTimes: [\"10/00\", \"10/00\", \"10/00\", \"10/00\", \"10/00\", \"X\", \"X\"],\n    endTimes: [\"16/00\", \"16/00\", \"18/00\", \"16/00\", \"16/00\", \"X\", \"X\"],\n    daysIntoFuture: 60,\n    premises: 1,\n    allowMinutesBefore: 120,\n    exceptDays: { \"24/12/2020\": \"00/00-23/59\" }\n}","import React, { createContext, useState, useContext } from 'react'\nimport { LoadingModalContext } from '../loading-modal/loading-modal.contenxt'\nimport { AuthContext } from '../auth/auth.context'\nimport { useHistory } from 'react-router-dom'\n\nimport {\n    fetchCalendars,\n    fetchSingleCalendar,\n    fetchBookings,\n    // fetchBookingRows,\n    fetchUserBookings,\n    postCalendar,\n    patchCalendar,\n    deleteCalendar\n} from './booking.queries'\n\nimport {\n    initCalendarObj\n} from './booking.utils'\n\nexport const BookingContext = createContext({\n    calendar: null,\n    calendars: null,\n    handleCalendarChange: () => { },\n    handleDayTimeChange: () => { },\n    getCalendars: () => { },\n    getCalendar: () => { },\n    createCalendar: () => { },\n    updateCalendar: () => { },\n    delCalendar: () => { },\n    isUpdatingCalendar: false,\n    bookings: null,\n    getBookings: () => { },\n    userBookings: null,\n    getUserBookings: () => { },\n    // bookingRows: null,\n    // getBookingRows: () => { },\n    activeCalendar: 0,\n    resetBooking: () => { },\n    selectedDate: {\n        name: \"\",\n        value: ''\n    },\n    setSelectedDate: () => { }\n})\n\nconst BookingProvider = ({ children }) => {\n    const { push } = useHistory()\n    const { token } = useContext(AuthContext)\n    const {\n        getMessage,\n        setIsLoading,\n        setShowModal,\n        closeModal\n    } = useContext(LoadingModalContext)\n\n    // ------------------------\n    // CALENDAR ACTIONS\n    // ------------------------\n    const [isUpdatingCalendar, setIsUpdatingCalendar] = useState(false)\n    const [activeCalendar, setActiveCalendar] = useState(0)\n    const [calendars, setCalendars] = useState(null)\n    const [calendar, setCalendar] = useState(initCalendarObj)\n    const [selectedDate, setSelectedDate] = useState({\n        name: '',\n        value: ''\n    })\n\n    const handleCalendarChange = (e) => {\n        const { name, value } = e.target\n        setCalendar({\n            ...calendar,\n            [name]: value\n        })\n    }\n\n    const handleDayTimeChange = (e, idx) => {\n        const { name, value } = e.target\n        let arr = calendar.startTimes\n        arr[idx] = value\n        setCalendar({\n            ...calendar,\n            [name]: arr\n        })\n    }\n\n    // Get all calendars\n    const getCalendars = async () => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        try {\n            const response = await fetchCalendars()\n            const data = await response.json()\n\n            if (data.error) {\n                getMessage(data.message)\n                setIsLoading(false)\n                return\n            }\n\n            if (data.calendars) {\n                setCalendars(data.calendars)\n                setIsLoading(false)\n                closeModal()\n                return\n            }\n\n            getMessage(data.message)\n            setIsLoading(false)\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    // Get single calendar\n    const getCalendar = async (id, idx) => {\n        setIsLoading(true)\n        setShowModal(true)\n        setSelectedDate({\n            name: '',\n            value: ''\n        })\n        if (!idx) {\n            setIsUpdatingCalendar(true)\n        }\n\n        try {\n            const response = await fetchSingleCalendar(id)\n            const data = await response.json()\n\n            console.log(data)\n            if (data.calendar) {\n                setCalendar(data.calendar)\n                setActiveCalendar(idx)\n                closeModal()\n                return\n            }\n\n            getMessage(data.message)\n            setIsLoading(false)\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    const createCalendar = async (calendarToAdd) => {\n        setIsLoading(true)\n        setShowModal(true)\n        try {\n            const response = await postCalendar(token, calendarToAdd)\n            const data = await response.json()\n\n            if (data.calendar) {\n                setIsLoading(false)\n                closeModal()\n                getCalendars()\n                push('/dashboard/rezervacie')\n                return\n            }\n\n            setIsLoading(false)\n            getMessage(data.message)\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    const updateCalendar = async (calendarToUpdate) => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        try {\n            const response = await patchCalendar(token, calendarToUpdate)\n            const data = await response.json()\n\n            console.log(data)\n            if (data.calendar) {\n                setIsLoading(false)\n                closeModal()\n                getCalendars()\n                push('/dashboard/rezervacie')\n                return\n            }\n\n            setIsLoading(false)\n            getMessage(data.message)\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    const delCalendar = async (id) => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        try {\n            const response = await deleteCalendar(id)\n            const data = await response.json()\n\n            console.log(data)\n\n            setIsLoading(false)\n            getMessage(data.message)\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    // ------------------------\n    // BOOKINGS ACTIONS\n    // ------------------------\n    const [bookings, setBookings] = useState(null)\n    const [userBookings, setUserBookings] = useState(null)\n\n    const getBookings = async () => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        try {\n            const response = await fetchBookings()\n            const data = await response.json()\n\n            if (data.error) {\n                getMessage(data.message)\n                setIsLoading(false)\n                return\n            }\n\n            if (data.bookings) {\n                setBookings(data.bookings)\n                setIsLoading(false)\n                closeModal()\n            }\n\n            getMessage(data.message)\n            setIsLoading(false)\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    const getUserBookings = async () => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        try {\n            const response = await fetchUserBookings(token)\n            const data = await response.json()\n\n            if (data.userBookings) {\n                setUserBookings(data.userBookings)\n                closeModal()\n                return\n            }\n\n            getMessage(data.message)\n            setIsLoading(false)\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    const resetBooking = () => {\n        setActiveCalendar(0)\n        setCalendar(initCalendarObj)\n        setIsUpdatingCalendar(false)\n    }\n\n    return (\n        <BookingContext.Provider\n            value={{\n                calendar,\n                calendars,\n                handleCalendarChange,\n                handleDayTimeChange,\n                getCalendars,\n                getCalendar,\n                createCalendar,\n                updateCalendar,\n                delCalendar,\n                isUpdatingCalendar,\n                bookings,\n                getBookings,\n                userBookings,\n                getUserBookings,\n                // bookingRows,\n                // getBookingRows,\n                activeCalendar,\n                resetBooking,\n                selectedDate,\n                setSelectedDate,\n            }}\n        >\n            {children}\n        </BookingContext.Provider>\n    )\n}\n\nexport default BookingProvider"],"sourceRoot":""}