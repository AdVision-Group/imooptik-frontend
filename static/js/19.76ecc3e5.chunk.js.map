{"version":3,"sources":["context/user/user.utils.jsx","context/user/user.queries.jsx","context/user/user.context.jsx"],"names":["initUserObj","address","admin","premises","boughtProducts","city","country","date","email","finishedRegistration","lenses","cylinder","cylinderAxes","diopters","distance","name","orders","phone","psc","tempUser","totalSpent","watchList","fName","lName","password","confirmPassword","fetchUserOrders","token","id","myHeaders","Headers","append","requestOptions","method","headers","redirect","fetch","process","fetchUsers","fetchUser","patchUser","user","_id","body","JSON","stringify","undefined","Number","console","log","postUser","postAdmin","UserContext","createContext","isUpdating","activeIndex","handleChangeFilterItem","filterItems","totalCount","users","getUsers","getUser","handleChange","handleDioptersChange","handleDistanceChange","handleCylinderChange","handleCylinderAxesChange","updateUser","resetUser","formToShow","switchFormButtons","toggleUserForm","createUser","getUserOrders","UserProvider","children","push","useHistory","useContext","AuthContext","LoadingModalContext","closeModal","getMessage","setIsLoading","setShowModal","useState","setUser","setUsers","setTotalCount","setIsUpdating","setActiveIndex","setFormToShow","useEffect","a","response","json","data","count","message","length","split","error","Provider","value","itemIndex","filter","e","target","idx","arr","preventDefault"],"mappings":"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","file":"static/js/19.76ecc3e5.chunk.js","sourcesContent":["export const initUserObj = {\n    address: \"\",\n    admin: 0,\n    premises: 0,\n    boughtProducts: {},\n    city: \"\",\n    country: \"\",\n    date: \"\",\n    email: \"\",\n    finishedRegistration: false,\n    lenses: {\n        cylinder: [0, 0],\n        cylinderAxes: [0, 0],\n        diopters: [0, 0],\n        distance: [0, 0],\n    },\n    name: \"\",\n    orders: [],\n    phone: \"\",\n    psc: \"\",\n    tempUser: false,\n    totalSpent: 0,\n    watchList: [],\n    fName: \"\",\n    lName: \"\",\n    password: '',\n    confirmPassword: \"\"\n}","export const fetchUserOrders = (token, id) => {\n    const myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n\n\n    const requestOptions = {\n        method: 'GET',\n        headers: myHeaders,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/orders/${id}`, requestOptions)\n}\n\nexport const fetchUsers = (token) => {\n    const myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n\n\n    const requestOptions = {\n        method: 'GET',\n        headers: myHeaders,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/users`, requestOptions)\n\n}\n\nexport const fetchUser = (token, id) => {\n    const myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n    myHeaders.append(\"Content-Type\", \"application/json\");\n\n\n    const requestOptions = {\n        method: 'GET',\n        headers: myHeaders,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/users/${id}`, requestOptions)\n}\n\nexport const patchUser = (token, user) => {\n    const {\n        _id: id,\n        address,\n        admin,\n        city,\n        country,\n        email,\n        lenses: {\n            cylinder,\n            cylinderAxes,\n            diopters,\n            distance,\n        },\n        name,\n        phone,\n        psc,\n        premises\n    } = user\n\n    const myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n    myHeaders.append(\"Content-Type\", \"application/json\");\n\n\n    const raw = JSON.stringify({\n        address: address || undefined,\n        admin: admin,\n        premises: Number(premises) === 0 ? undefined : premises,\n        city: city || undefined,\n        country: country || undefined,\n        // email: email || undefined,\n        lenses: {\n            cylinder: cylinder,\n            cylinderAxes: cylinderAxes,\n            diopters: diopters,\n            distance: distance,\n        },\n        name: name,\n        phone: phone || undefined,\n        psc: psc || undefined,\n    })\n\n    const requestOptions = {\n        method: 'PATCH',\n        headers: myHeaders,\n        body: raw,\n        redirect: 'follow'\n    };\n\n    console.log(id)\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/admin/users/${id}`, requestOptions)\n}\n\nexport const postUser = (token, user) => {\n    console.log(user)\n\n    const {\n        name,\n        email,\n    } = user\n\n\n    const myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n    myHeaders.append(\"Content-Type\", \"application/json\");\n\n\n    const raw = JSON.stringify({\n        email: email,\n        name: name,\n    })\n\n    const requestOptions = {\n        method: 'POST',\n        headers: myHeaders,\n        body: raw,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/auth/register`, requestOptions)\n}\n\nexport const postAdmin = (token, user) => {\n    console.log(user)\n\n    const {\n        name,\n        email,\n        password,\n        premises,\n        admin\n    } = user\n\n    const myHeaders = new Headers();\n    myHeaders.append(\"auth-token\", token);\n    myHeaders.append(\"Content-Type\", \"application/json\");\n\n\n    const raw = JSON.stringify({\n        admin: Number(admin),\n        email: email,\n        name: name,\n        premises: Number(premises),\n        password\n    })\n\n    const requestOptions = {\n        method: 'POST',\n        headers: myHeaders,\n        body: raw,\n        redirect: 'follow'\n    };\n\n    return fetch(`${process.env.REACT_APP_BACKEND_ENDPOINT}/api/auth/register`, requestOptions)\n}","import React, { createContext, useState, useContext, useEffect } from 'react'\nimport { useHistory } from 'react-router-dom'\nimport { AuthContext } from '../auth/auth.context'\nimport { LoadingModalContext } from '../loading-modal/loading-modal.contenxt'\n\nimport {\n    fetchUsers,\n    fetchUser,\n    patchUser,\n    postAdmin,\n    postUser,\n    fetchUserOrders\n} from './user.queries'\n\nimport {\n    initUserObj\n} from './user.utils'\n\nexport const UserContext = createContext({\n    isUpdating: false,\n    activeIndex: 0,\n    handleChangeFilterItem: () => { },\n    filterItems: [],\n    totalCount: 0,\n    users: null,\n    user: null,\n    getUsers: () => { },\n    getUser: () => { },\n    handleChange: () => { },\n    handleDioptersChange: () => { },\n    handleDistanceChange: () => { },\n    handleCylinderChange: () => { },\n    handleCylinderAxesChange: () => { },\n    updateUser: () => { },\n    resetUser: () => { },\n    formToShow: 0,\n    switchFormButtons: [],\n    toggleUserForm: () => { },\n    createUser: () => { },\n    getUserOrders: () => { }\n})\n\nconst UserProvider = ({ children }) => {\n    const { push } = useHistory()\n    const { token } = useContext(AuthContext)\n    const {\n        closeModal,\n        getMessage,\n        setIsLoading,\n        setShowModal\n    } = useContext(LoadingModalContext)\n\n    // ------------------------\n\n    const [user, setUser] = useState(initUserObj)\n    const [users, setUsers] = useState(null)\n    const [totalCount, setTotalCount] = useState(0)\n\n    // ------------------------\n\n    const [isUpdating, setIsUpdating] = useState(false)\n    const [activeIndex, setActiveIndex] = useState(0)\n    const filterItems = [\n        {\n            id: 0,\n            name: \"Zákaznici\",\n            filter: 0,\n        },\n        {\n            id: 1,\n            name: \"Zamestnanci\",\n            filter: 1,\n        },\n        {\n            id: 2,\n            name: \"Vedúci\",\n            filter: 2,\n        },\n        {\n            id: 3,\n            name: \"Velký brat\",\n            filter: 3,\n        }\n    ]\n\n    // ------------------------\n\n    const [formToShow, setFormToShow] = useState(0)\n    const switchFormButtons = [\n        {\n            name: \"Zákazník\"\n        },\n        {\n            name: \"Admin\"\n        }\n    ]\n\n    const toggleUserForm = (e, idx) => {\n        e.preventDefault()\n        setFormToShow(idx)\n    }\n\n    // ------------------------\n\n\n    const handleChangeFilterItem = (itemIndex) => {\n        setActiveIndex(itemIndex)\n    }\n\n    const handleChange = (e) => {\n        const { name, value } = e.target\n        setUser({\n            ...user,\n            [name]: value\n        })\n    }\n\n    const handleDioptersChange = (e, idx) => {\n        let arr = user.lenses.diopters\n        arr[idx] = Number(e.target.value)\n        setUser({\n            ...user,\n            lenses: {\n                ...user.lenses,\n                diopters: arr\n            }\n        })\n    }\n\n    const handleDistanceChange = (e, idx) => {\n        let arr = user.lenses.distance\n        arr[idx] = Number(e.target.value)\n        setUser({\n            ...user,\n            lenses: {\n                ...user.lenses,\n                distance: arr\n            }\n        })\n    }\n\n    const handleCylinderChange = (e, idx) => {\n        let arr = user.lenses.cylinder\n        arr[idx] = Number(e.target.value)\n        setUser({\n            ...user,\n            lenses: {\n                ...user.lenses,\n                cylinder: arr\n            }\n        })\n    }\n\n\n    const handleCylinderAxesChange = (e, idx) => {\n        let arr = user.lenses.cylinderAxes\n        arr[idx] = Number(e.target.value)\n        setUser({\n            ...user,\n            lenses: {\n                ...user.lenses,\n                cylinderAxes: arr\n            }\n        })\n    }\n\n    useEffect(() => {\n        setUser({\n            ...user,\n            name: user.fName + \" \" + user.lName\n        })\n    }, [user.fName, user.lName])\n\n    const resetUser = () => {\n        setUser({\n            ...initUserObj\n        })\n        setIsUpdating(false)\n        setFormToShow(0)\n    }\n\n    // ------------------------\n    // USER ACTIONS\n    // ------------------------\n\n    // Get all users\n    const getUsers = async () => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        try {\n            const response = await fetchUsers(token)\n            const data = await response.json()\n\n            console.log(data)\n            if (data.users) {\n                setUsers(data.users)\n                setTotalCount(data.count)\n                setIsLoading(false)\n                closeModal()\n\n            } else {\n                getMessage(data.message)\n                setIsLoading(false)\n            }\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n\n    // Get single user\n    const getUser = async (id) => {\n        setIsLoading(true)\n        setShowModal(true)\n        setIsUpdating(true)\n\n        try {\n            const response = await fetchUser(token, id)\n            const data = await response.json()\n\n            if (data.user) {\n                setUser({\n                    ...user,\n                    ...data.user,\n                    lenses: {\n                        cylinder: data.user.lenses.cylinder.length ? data.user.lenses.cylinder : [0, 0],\n                        cylinderAxes: data.user.lenses.cylinderAxes.length ? data.user.lenses.cylinderAxes : [0, 0],\n                        diopters: data.user.lenses.diopters.length ? data.user.lenses.diopters : [0, 0],\n                        distance: data.user.lenses.distance.length ? data.user.lenses.distance : [0, 0],\n                    },\n                    fName: data.user.name ? data.user.name.split(\" \")[0] : \"\",\n                    lName: data.user.name ? data.user.name.split(\" \")[1] : \"\"\n                })\n                setIsLoading(false)\n                closeModal()\n\n            } else {\n                getMessage(data.message)\n                setIsLoading(false)\n            }\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    // Update user\n    const updateUser = async (user) => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        console.log(user)\n\n        try {\n            const response = await patchUser(token, user)\n            const data = await response.json()\n\n            console.log(data)\n\n            if (data.error) {\n                setIsLoading(false)\n                getMessage(data.message)\n                return\n            }\n\n\n            setIsLoading(false)\n            closeModal()\n            push('/dashboard/zakaznici')\n            getUsers()\n            // http://localhost:1000/#/dashboard/zakaznici\n\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    const createUser = async (user) => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        try {\n            if (formToShow === 0) {\n                const response = await postUser(token, user)\n                const data = await response.json()\n\n                console.log(data)\n\n                if (data.error) {\n                    getMessage(data.message)\n                    setIsLoading(false)\n                    return\n                }\n\n                setIsLoading(false)\n                getUsers()\n                push('/dashboard/zakaznici')\n                closeModal()\n\n            } else {\n                const response = await postAdmin(token, user)\n                const data = await response.json()\n\n                console.log(data)\n\n                if (data.error) {\n                    getMessage(data.message)\n                    setIsLoading(false)\n                    return\n                }\n\n                setIsLoading(false)\n                getUsers()\n                push('/dashboard/zakaznici')\n                closeModal()\n            }\n\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    const getUserOrders = async (id) => {\n        setIsLoading(true)\n        setShowModal(true)\n\n        try {\n            const response = await fetchUserOrders(token, id)\n            const data = await response.json()\n\n            console.log(data)\n\n            setIsLoading(false)\n            getMessage(data.message)\n        } catch (err) {\n            console.log(err)\n            getMessage(\"Nieco sa pokazilo\")\n            setIsLoading(false)\n        }\n    }\n\n    return (\n        <UserContext.Provider\n            value={{\n                isUpdating,\n                activeIndex,\n                handleChangeFilterItem,\n                filterItems,\n                users,\n                user,\n                totalCount,\n                getUsers,\n                getUser,\n                handleChange,\n                handleDioptersChange,\n                handleDistanceChange,\n                handleCylinderChange,\n                handleCylinderAxesChange,\n                updateUser,\n                resetUser,\n                formToShow,\n                switchFormButtons,\n                toggleUserForm,\n                createUser,\n                getUserOrders\n            }}\n        >\n            {children}\n        </UserContext.Provider>\n    )\n}\n\nexport default UserProvider"],"sourceRoot":""}