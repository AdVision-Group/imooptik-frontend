(this.webpackJsonpimooptik=this.webpackJsonpimooptik||[]).push([[18],{51:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(20);var r=n(32);function c(e){return function(e){if(Array.isArray(e))return Object(a.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(r.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},52:function(e,t,n){"use strict";n.d(t,"h",(function(){return a})),n.d(t,"f",(function(){return r})),n.d(t,"g",(function(){return c})),n.d(t,"k",(function(){return o})),n.d(t,"j",(function(){return s})),n.d(t,"i",(function(){return i})),n.d(t,"a",(function(){return u})),n.d(t,"e",(function(){return l})),n.d(t,"d",(function(){return d})),n.d(t,"b",(function(){return b})),n.d(t,"c",(function(){return f}));var a={name:"",description:"",price:0,type:0,brand:"",soldAmount:0,available:[1001,1001,1001,1001,0],eanCode:"",image:"",eshop:!0,link:"",category:""},r={allowedCurves:[1001],allowedDiameters:[1001],dioptersRange:[1001,1001]},c={id:"",name:"",description:"",dioptersRange:[1001,1001],cylinderRange:[1001,1001],price:0,brand:"",image:""},o=["Obchodn\xe1 57, Bratislava","Mileti\u010dova 38, Bratislava","Vajnory, Bratislava","Senica, OC Bran\u010d","Trnava, City Ar\xe9na"],s=[{name:"Dioptrick\xe9",value:1},{name:"Slne\u010dn\xe9",value:2},{name:"Kontaktn\xe9 \u0160o\u0161ovky",value:3},{name:"\u0160portov\xe9",value:4},{name:"Doplnky",value:5},{name:"\u0160o\u0161ovky",value:0}],i=[{id:0,name:"V\u0161etko",premises:0},{id:1,name:"Obchodn\xe1 57, Bratislava",premises:1},{id:2,name:"Mileti\u010dova 38, Bratislava",premises:2},{id:3,name:"Senica, OC Bran\u010d",premises:3},{id:4,name:"Vajnory, Bratislava",premises:4}],u=[{id:0,name:"Okuliare"},{id:1,name:"\u0160osovky"}],l=function(e){var t=0;return e.includes(",")?1===e.split(",")[1].length?(t=e.split(",")[0]+e.split(",")[1]+"0",Number(t)):(t=e.split(",")[0]+e.split(",")[1],Number(t)):Number(100*e)},d=function(e,t){return void 0===e?"\u0160osovka":"number"===typeof e?"Na sklade ".concat(e," kusov"):0===t?"Vo v\u0161etk\xfdch skladoch je ".concat(e.reduce((function(e,t){return e+t}))," kusov"):"Na sklade ".concat(e[t]," kusov")},b=function(e,t){return 0===e.length||1001===e[t]?"":e[t].toString()},p="\xe1\xe4\u010d\u010f\xe9\xed\u013e\u013a\u0148\xf3\xf4\u0155\u0161\u0165\xfa\xfd\u017e\xc1\u010c\u010e\xc9\xcd\u013d\u0139\u0147\xd3\u0160\u0164\xda\xdd\u017d",f=function(e){for(var t="",n=0;n<e.length;n++)-1!=p.indexOf(e.charAt(n))?t+="aacdeillnoorstuyzACDEILLNOSTUYZ".charAt(p.indexOf(e.charAt(n))):t+=e.charAt(n);return t}},58:function(e,t,n){"use strict";n.r(t),n.d(t,"WarehouseContext",(function(){return m}));var a=n(1),r=n(4),c=n.n(r),o=n(11),s=n(30),i=n(51),u=n(19),l=n(10),d=n(0),b=n(2),p=n(16),f=n(17),h=n(52),m=Object(d.createContext)({eanCode:null,product:{},lenses:{},contactLensesParameters:{},totalProducts:0,totalLenses:0,activePremisesTab:0,activeCategoryTypeTab:0,retailPremisesTabs:[],productCategoryTypeTabs:[],products:null,handleChangeCategoryTypeTab:function(){},handleChangePremisesTab:function(){},getProductsByQuery:function(){},handleProductChange:function(){},handleProductAvailableChange:function(){},getSingleProduct:function(){},createProduct:function(){},getSingleLenses:function(){},getLenses:function(){},createLenses:function(){},handleLensesChange:function(){},handleLensesParameterChange:function(){},resetProduct:function(){},resetLenses:function(){},resetContactLenses:function(){},getEanCode:function(){},handleAddNewParameter:function(){},handleContactLensesParameterChange:function(){}});t.default=function(e){var t=e.children,n=Object(b.h)().push,r=Object(d.useContext)(f.a),j=r.token,v=r.isAdmin,O=r.currentUser,g=r.stats,k=Object(d.useContext)(p.a),y=k.closeModal,C=k.setIsLoading,x=k.setShowModal,S=k.getMessage,w=Object(d.useState)(0),L=Object(l.a)(w,2),P=L[0],T=L[1],N=Object(d.useState)(0),A=Object(l.a)(N,2),E=A[0],B=A[1],R=Object(d.useState)(null),D=Object(l.a)(R,2),z=D[0],M=D[1],I=Object(d.useState)(Object(u.a)({},h.h)),J=Object(l.a)(I,2),V=J[0],G=J[1],Q=Object(d.useState)(Object(u.a)({},h.g)),U=Object(l.a)(Q,2),H=U[0],K=U[1],W=Object(d.useState)(Object(u.a)({},h.f)),Y=Object(l.a)(W,2),Z=Y[0],q=Y[1],F=Object(d.useState)(null),X=Object(l.a)(F,2),$=X[0],_=X[1],ee=Object(d.useState)(0),te=Object(l.a)(ee,2),ne=te[0],ae=te[1],re=Object(d.useState)([]),ce=Object(l.a)(re,2),oe=ce[0],se=ce[1],ie=Object(d.useState)(h.a),ue=Object(l.a)(ie,2),le=ue[0],de=(ue[1],Object(d.useState)(0)),be=Object(l.a)(de,2),pe=be[0],fe=be[1],he=new Headers;he.append("auth-token",j),he.append("Content-Type","application/json");var me=function(){var e=Object(o.a)(c.a.mark((function e(){var t,n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),x(!0),t={method:"GET",headers:he,redirect:"follow"},e.prev=3,e.next=6,fetch("".concat("http://195.110.58.166:8080","/api/admin/products/nextEanCode"),t);case 6:return n=e.sent,e.next=9,n.json();case 9:if(a=e.sent,console.log(a),!a.eanCode){e.next=15;break}return M(a.eanCode),y(),e.abrupt("return");case 15:S(a.message),C(!1),e.next=24;break;case 19:e.prev=19,e.t0=e.catch(3),console.log(e.t0),S("Nieco sa pokazilo"),C(!1);case 24:case"end":return e.stop()}}),e,null,[[3,19]])})));return function(){return e.apply(this,arguments)}}(),je=function(){var e=Object(o.a)(c.a.mark((function e(t){var n,a,r,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),x(!0),console.log(t),n=JSON.stringify(t),a={method:"POST",headers:he,body:n,redirect:"follow"},e.prev=5,e.next=8,fetch("".concat("http://195.110.58.166:8080","/api/admin/products/filter"),a);case 8:return r=e.sent,e.next=11,r.json();case 11:if(o=e.sent,console.log(o),!o.products){e.next=17;break}return _(o.products),y(),e.abrupt("return");case 17:S(o.message),C(!1),e.next=26;break;case 21:e.prev=21,e.t0=e.catch(5),console.log(e.t0),S("Nieco sa pokazilo"),C(!1);case 26:case"end":return e.stop()}}),e,null,[[5,21]])})));return function(t){return e.apply(this,arguments)}}(),ve=function(){var e=Object(o.a)(c.a.mark((function e(){var t,n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),x(!0),t={method:"GET",headers:he,redirect:"follow"},e.prev=3,e.next=6,fetch("".concat("http://195.110.58.166:8080","/api/admin/lenses"),t);case 6:return n=e.sent,e.next=9,n.json();case 9:if(a=e.sent,console.log(a),!a.lenses){e.next=15;break}return _(a.lenses),y(),e.abrupt("return");case 15:S(a.message),C(!1),e.next=24;break;case 19:e.prev=19,e.t0=e.catch(3),console.log(e.t0),S("Nieco sa pokazilo"),C(!1);case 24:case"end":return e.stop()}}),e,null,[[3,19]])})));return function(){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(o.a)(c.a.mark((function e(t){var n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),x(!0),e.prev=2,e.next=5,fetch("".concat("http://195.110.58.166:8080","/api/store/products/").concat(t));case 5:return n=e.sent,e.next=8,n.json();case 8:if(a=e.sent,console.log(a),!a.product){e.next=14;break}return G(a.product),y(),e.abrupt("return");case 14:S(a.message),C(!1),e.next=23;break;case 18:e.prev=18,e.t0=e.catch(2),console.log(e.t0),S("Nieco sa pokazilo"),C(!1);case 23:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(t){return e.apply(this,arguments)}}(),ge=function(){var e=Object(o.a)(c.a.mark((function e(t){var a,r,o,s,i,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),x(!0),a=Object(h.c)(t.name).replaceAll(" ","-").toLowerCase().trim(),r=Object(u.a)(Object(u.a)({},t),{},{price:Object(h.e)(t.price.toString()),link:a,available:t.available?t.available.map((function(e){return 1001===e?0:e})):[0,0,0,0,0]}),t.contactLenses&&(t.contactLenses.allowedCurves&&(r=Object(u.a)(Object(u.a)({},r),{},{contactLenses:Object(u.a)(Object(u.a)({},r.contactLenses),{},{allowedCurves:t.contactLenses.allowedCurves.map((function(e){return Number(e)}))})})),t.contactLenses.allowedDiameters&&(r=Object(u.a)(Object(u.a)({},r),{},{contactLenses:Object(u.a)(Object(u.a)({},r.contactLenses),{},{allowedDiameters:t.contactLenses.allowedDiameters.map((function(e){return Number(e)}))})})),t.contactLenses.dioptersRange&&(r=Object(u.a)(Object(u.a)({},r),{},{contactLenses:Object(u.a)(Object(u.a)({},r.contactLenses),{},{dioptersRange:t.contactLenses.dioptersRange.map((function(e){return Number(e)}))})}))),console.log("modifiedProduct"),console.log(r),o=JSON.stringify(Object(u.a)(Object(u.a)({},t),{},{price:Object(h.e)(t.price.toString()),link:a,available:t.available?t.available.map((function(e){return 1001===e?0:e})):[0,0,0,0,0]})),s={method:"POST",headers:he,body:o,redirect:"follow"},e.prev=9,e.next=12,fetch("".concat("http://195.110.58.166:8080","/api/admin/products"),s);case 12:return i=e.sent,e.next=15,i.json();case 15:if(l=e.sent,console.log(l),!l.product){e.next=23;break}return n("/dashboard/obchod"),je({limit:10}),M(null),y(),e.abrupt("return");case 23:S(l.message),C(!1),e.next=32;break;case 27:e.prev=27,e.t0=e.catch(9),console.log(e.t0),S("Nieco sa pokazilo"),C(!1);case 32:case"end":return e.stop()}}),e,null,[[9,27]])})));return function(t){return e.apply(this,arguments)}}(),ke=function(){var e=Object(o.a)(c.a.mark((function e(t){var n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),x(!0),e.prev=2,e.next=5,fetch("".concat("http://195.110.58.166:8080","/api/store/lenses/").concat(t));case 5:return n=e.sent,e.next=8,n.json();case 8:if(a=e.sent,console.log(a),!a.lenses){e.next=14;break}return K(a.lenses),y(),e.abrupt("return");case 14:S(a.message),C(!1),e.next=23;break;case 18:e.prev=18,e.t0=e.catch(2),console.log(e.t0),S("Nieco sa pokazilo"),C(!1);case 23:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(t){return e.apply(this,arguments)}}(),ye=function(){var e=Object(o.a)(c.a.mark((function e(t){var a,r,o,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),x(!0),a=JSON.stringify(Object(u.a)(Object(u.a)({},t),{},{price:Object(h.e)(t.price.toString())})),r={method:"POST",headers:he,body:a,redirect:"follow"},e.prev=4,e.next=7,fetch("".concat("http://195.110.58.166:8080","/api/admin/lenses"),r);case 7:return o=e.sent,e.next=10,o.json();case 10:if(s=e.sent,console.log(s),!s.lenses){e.next=17;break}return n("/dashboard/obchod"),ve(),y(),e.abrupt("return");case 17:S(s.message),C(!1),e.next=26;break;case 21:e.prev=21,e.t0=e.catch(4),console.log(e.t0),S("Nieco sa pokazilo"),C(!1);case 26:case"end":return e.stop()}}),e,null,[[4,21]])})));return function(t){return e.apply(this,arguments)}}();return Object(d.useEffect)((function(){$&&(console.log("GET ".concat(le[pe].name," DATA")),0===pe?je({limit:10}):ve())}),[pe]),Object(d.useEffect)((function(){console.log("SET PREMISES"),O&&(v?(se(h.i),ae(0)):(se(h.i.filter((function(e){return e.premises===O.premises}))),ae(0)))}),[O,v]),Object(d.useEffect)((function(){g&&(console.log("SET STATS"),T(g.products),B(g.lenses))}),[g]),Object(a.jsx)(m.Provider,{value:{eanCode:z,product:V,lenses:H,contactLensesParameters:Z,totalProducts:P,totalLenses:E,activePremisesTab:ne,activeCategoryTypeTab:pe,retailPremisesTabs:oe,productCategoryTypeTabs:le,products:$,handleChangeCategoryTypeTab:function(e){fe(e)},handleChangePremisesTab:function(e){ae(e)},getProductsByQuery:je,handleProductChange:function(e){var t=e.target,n=t.name,a=t.value;G(Object(u.a)(Object(u.a)({},V),{},Object(s.a)({},n,a)))},handleProductAvailableChange:function(e,t){var n=e.target,a=n.name,r=n.value,c=V[a];c[t]=""===r?1001:Number(r),G(Object(u.a)(Object(u.a)({},V),{},Object(s.a)({},a,c)))},getLenses:ve,getSingleProduct:Oe,createProduct:ge,getSingleLenses:ke,createLenses:ye,handleLensesChange:function(e){var t=e.target,n=t.name,a=t.value;K(Object(u.a)(Object(u.a)({},H),{},Object(s.a)({},n,a)))},handleLensesParameterChange:function(e,t){var n=e.target,a=n.name,r=n.value,c=H[a];c[t]=""===r?1001:Number(r),K(Object(u.a)(Object(u.a)({},H),{},Object(s.a)({},a,c)))},resetProduct:function(){G(Object(u.a)(Object(u.a)({},h.h),{},{available:[1001,1001,1001,1001,0]})),M(null)},resetLenses:function(){K(Object(u.a)(Object(u.a)({},h.g),{},{dioptersRange:[1001,1001],cylinderRange:[1001,1001]}))},resetContactLenses:function(){q({allowedCurves:[1001],allowedDiameters:[1001],dioptersRange:[1001,1001]})},getEanCode:me,handleAddNewParameter:function(e){var t=e.target.name;q(Object(u.a)(Object(u.a)({},Z),{},Object(s.a)({},t,[].concat(Object(i.a)(Z[t]),[1001]))))},handleContactLensesParameterChange:function(e,t){var n=e.target,a=n.name,r=n.value,c=Z[a];c[t]=""===r?1001:r,q(Object(u.a)(Object(u.a)({},Z),{},Object(s.a)({},a,c)))}},children:t})}}}]);
//# sourceMappingURL=18.83c3ead6.chunk.js.map